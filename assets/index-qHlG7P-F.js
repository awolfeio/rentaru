function y5(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function lk(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ck={exports:{}},Mx={},uk={exports:{}},Ut={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vp=Symbol.for("react.element"),b5=Symbol.for("react.portal"),_5=Symbol.for("react.fragment"),w5=Symbol.for("react.strict_mode"),S5=Symbol.for("react.profiler"),M5=Symbol.for("react.provider"),E5=Symbol.for("react.context"),N5=Symbol.for("react.forward_ref"),T5=Symbol.for("react.suspense"),A5=Symbol.for("react.memo"),C5=Symbol.for("react.lazy"),eN=Symbol.iterator;function k5(t){return t===null||typeof t!="object"?null:(t=eN&&t[eN]||t["@@iterator"],typeof t=="function"?t:null)}var dk={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},hk=Object.assign,fk={};function jd(t,e,n){this.props=t,this.context=e,this.refs=fk,this.updater=n||dk}jd.prototype.isReactComponent={};jd.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};jd.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function pk(){}pk.prototype=jd.prototype;function $_(t,e,n){this.props=t,this.context=e,this.refs=fk,this.updater=n||dk}var Z_=$_.prototype=new pk;Z_.constructor=$_;hk(Z_,jd.prototype);Z_.isPureReactComponent=!0;var tN=Array.isArray,mk=Object.prototype.hasOwnProperty,K_={current:null},gk={key:!0,ref:!0,__self:!0,__source:!0};function xk(t,e,n){var r,i={},s=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)mk.call(e,r)&&!gk.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:vp,type:t,key:s,ref:a,props:i,_owner:K_.current}}function P5(t,e){return{$$typeof:vp,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function J_(t){return typeof t=="object"&&t!==null&&t.$$typeof===vp}function R5(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var nN=/\/+/g;function Ay(t,e){return typeof t=="object"&&t!==null&&t.key!=null?R5(""+t.key):e.toString(36)}function r0(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case vp:case b5:a=!0}}if(a)return a=t,i=i(a),t=r===""?"."+Ay(a,0):r,tN(i)?(n="",t!=null&&(n=t.replace(nN,"$&/")+"/"),r0(i,e,n,"",function(u){return u})):i!=null&&(J_(i)&&(i=P5(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(nN,"$&/")+"/")+t)),e.push(i)),1;if(a=0,r=r===""?".":r+":",tN(t))for(var l=0;l<t.length;l++){s=t[l];var c=r+Ay(s,l);a+=r0(s,e,n,c,i)}else if(c=k5(t),typeof c=="function")for(t=c.call(t),l=0;!(s=t.next()).done;)s=s.value,c=r+Ay(s,l++),a+=r0(s,e,n,c,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Pm(t,e,n){if(t==null)return t;var r=[],i=0;return r0(t,r,"","",function(s){return e.call(n,s,i++)}),r}function j5(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var hi={current:null},i0={transition:null},L5={ReactCurrentDispatcher:hi,ReactCurrentBatchConfig:i0,ReactCurrentOwner:K_};function vk(){throw Error("act(...) is not supported in production builds of React.")}Ut.Children={map:Pm,forEach:function(t,e,n){Pm(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Pm(t,function(){e++}),e},toArray:function(t){return Pm(t,function(e){return e})||[]},only:function(t){if(!J_(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ut.Component=jd;Ut.Fragment=_5;Ut.Profiler=S5;Ut.PureComponent=$_;Ut.StrictMode=w5;Ut.Suspense=T5;Ut.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L5;Ut.act=vk;Ut.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=hk({},t.props),i=t.key,s=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=K_.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)mk.call(e,c)&&!gk.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:vp,type:t.type,key:i,ref:s,props:r,_owner:a}};Ut.createContext=function(t){return t={$$typeof:E5,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:M5,_context:t},t.Consumer=t};Ut.createElement=xk;Ut.createFactory=function(t){var e=xk.bind(null,t);return e.type=t,e};Ut.createRef=function(){return{current:null}};Ut.forwardRef=function(t){return{$$typeof:N5,render:t}};Ut.isValidElement=J_;Ut.lazy=function(t){return{$$typeof:C5,_payload:{_status:-1,_result:t},_init:j5}};Ut.memo=function(t,e){return{$$typeof:A5,type:t,compare:e===void 0?null:e}};Ut.startTransition=function(t){var e=i0.transition;i0.transition={};try{t()}finally{i0.transition=e}};Ut.unstable_act=vk;Ut.useCallback=function(t,e){return hi.current.useCallback(t,e)};Ut.useContext=function(t){return hi.current.useContext(t)};Ut.useDebugValue=function(){};Ut.useDeferredValue=function(t){return hi.current.useDeferredValue(t)};Ut.useEffect=function(t,e){return hi.current.useEffect(t,e)};Ut.useId=function(){return hi.current.useId()};Ut.useImperativeHandle=function(t,e,n){return hi.current.useImperativeHandle(t,e,n)};Ut.useInsertionEffect=function(t,e){return hi.current.useInsertionEffect(t,e)};Ut.useLayoutEffect=function(t,e){return hi.current.useLayoutEffect(t,e)};Ut.useMemo=function(t,e){return hi.current.useMemo(t,e)};Ut.useReducer=function(t,e,n){return hi.current.useReducer(t,e,n)};Ut.useRef=function(t){return hi.current.useRef(t)};Ut.useState=function(t){return hi.current.useState(t)};Ut.useSyncExternalStore=function(t,e,n){return hi.current.useSyncExternalStore(t,e,n)};Ut.useTransition=function(){return hi.current.useTransition()};Ut.version="18.3.1";uk.exports=Ut;var D=uk.exports;const yk=lk(D),bk=y5({__proto__:null,default:yk},[D]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D5=D,I5=Symbol.for("react.element"),U5=Symbol.for("react.fragment"),O5=Object.prototype.hasOwnProperty,F5=D5.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,z5={key:!0,ref:!0,__self:!0,__source:!0};function _k(t,e,n){var r,i={},s=null,a=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)O5.call(e,r)&&!z5.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:I5,type:t,key:s,ref:a,props:i,_owner:F5.current}}Mx.Fragment=U5;Mx.jsx=_k;Mx.jsxs=_k;ck.exports=Mx;var o=ck.exports,Nb={},wk={exports:{}},Zi={},Sk={exports:{}},Mk={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(I,F){var z=I.length;I.push(F);e:for(;0<z;){var U=z-1>>>1,Z=I[U];if(0<i(Z,F))I[U]=F,I[z]=Z,z=U;else break e}}function n(I){return I.length===0?null:I[0]}function r(I){if(I.length===0)return null;var F=I[0],z=I.pop();if(z!==F){I[0]=z;e:for(var U=0,Z=I.length,K=Z>>>1;U<K;){var ne=2*(U+1)-1,ie=I[ne],de=ne+1,ae=I[de];if(0>i(ie,z))de<Z&&0>i(ae,ie)?(I[U]=ae,I[de]=z,U=de):(I[U]=ie,I[ne]=z,U=ne);else if(de<Z&&0>i(ae,z))I[U]=ae,I[de]=z,U=de;else break e}}return F}function i(I,F){var z=I.sortIndex-F.sortIndex;return z!==0?z:I.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,f=null,m=3,g=!1,v=!1,_=!1,b=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(I){for(var F=n(u);F!==null;){if(F.callback===null)r(u);else if(F.startTime<=I)r(u),F.sortIndex=F.expirationTime,e(c,F);else break;F=n(u)}}function E(I){if(_=!1,S(I),!v)if(n(c)!==null)v=!0,ee(A);else{var F=n(u);F!==null&&re(E,F.startTime-I)}}function A(I,F){v=!1,_&&(_=!1,x(j),j=-1),g=!0;var z=m;try{for(S(F),f=n(c);f!==null&&(!(f.expirationTime>F)||I&&!H());){var U=f.callback;if(typeof U=="function"){f.callback=null,m=f.priorityLevel;var Z=U(f.expirationTime<=F);F=t.unstable_now(),typeof Z=="function"?f.callback=Z:f===n(c)&&r(c),S(F)}else r(c);f=n(c)}if(f!==null)var K=!0;else{var ne=n(u);ne!==null&&re(E,ne.startTime-F),K=!1}return K}finally{f=null,m=z,g=!1}}var T=!1,C=null,j=-1,k=5,P=-1;function H(){return!(t.unstable_now()-P<k)}function B(){if(C!==null){var I=t.unstable_now();P=I;var F=!0;try{F=C(!0,I)}finally{F?Y():(T=!1,C=null)}}else T=!1}var Y;if(typeof y=="function")Y=function(){y(B)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,Q=V.port2;V.port1.onmessage=B,Y=function(){Q.postMessage(null)}}else Y=function(){b(B,0)};function ee(I){C=I,T||(T=!0,Y())}function re(I,F){j=b(function(){I(t.unstable_now())},F)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(I){I.callback=null},t.unstable_continueExecution=function(){v||g||(v=!0,ee(A))},t.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<I?Math.floor(1e3/I):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(I){switch(m){case 1:case 2:case 3:var F=3;break;default:F=m}var z=m;m=F;try{return I()}finally{m=z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(I,F){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var z=m;m=I;try{return F()}finally{m=z}},t.unstable_scheduleCallback=function(I,F,z){var U=t.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?U+z:U):z=U,I){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=z+Z,I={id:d++,callback:F,priorityLevel:I,startTime:z,expirationTime:Z,sortIndex:-1},z>U?(I.sortIndex=z,e(u,I),n(c)===null&&I===n(u)&&(_?(x(j),j=-1):_=!0,re(E,z-U))):(I.sortIndex=Z,e(c,I),v||g||(v=!0,ee(A))),I},t.unstable_shouldYield=H,t.unstable_wrapCallback=function(I){var F=m;return function(){var z=m;m=F;try{return I.apply(this,arguments)}finally{m=z}}}})(Mk);Sk.exports=Mk;var B5=Sk.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V5=D,$i=B5;function He(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ek=new Set,Ef={};function Ic(t,e){xd(t,e),xd(t+"Capture",e)}function xd(t,e){for(Ef[t]=e,t=0;t<e.length;t++)Ek.add(e[t])}var Qa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Tb=Object.prototype.hasOwnProperty,H5=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,rN={},iN={};function G5(t){return Tb.call(iN,t)?!0:Tb.call(rN,t)?!1:H5.test(t)?iN[t]=!0:(rN[t]=!0,!1)}function W5(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function X5(t,e,n,r){if(e===null||typeof e>"u"||W5(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function fi(t,e,n,r,i,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var Ar={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ar[t]=new fi(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ar[e]=new fi(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ar[t]=new fi(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ar[t]=new fi(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ar[t]=new fi(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ar[t]=new fi(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ar[t]=new fi(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ar[t]=new fi(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ar[t]=new fi(t,5,!1,t.toLowerCase(),null,!1,!1)});var Q_=/[\-:]([a-z])/g;function ew(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Q_,ew);Ar[e]=new fi(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Q_,ew);Ar[e]=new fi(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Q_,ew);Ar[e]=new fi(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ar[t]=new fi(t,1,!1,t.toLowerCase(),null,!1,!1)});Ar.xlinkHref=new fi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ar[t]=new fi(t,1,!1,t.toLowerCase(),null,!0,!0)});function tw(t,e,n,r){var i=Ar.hasOwnProperty(e)?Ar[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(X5(e,n,i,r)&&(n=null),r||i===null?G5(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var co=V5.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Rm=Symbol.for("react.element"),Uu=Symbol.for("react.portal"),Ou=Symbol.for("react.fragment"),nw=Symbol.for("react.strict_mode"),Ab=Symbol.for("react.profiler"),Nk=Symbol.for("react.provider"),Tk=Symbol.for("react.context"),rw=Symbol.for("react.forward_ref"),Cb=Symbol.for("react.suspense"),kb=Symbol.for("react.suspense_list"),iw=Symbol.for("react.memo"),zo=Symbol.for("react.lazy"),Ak=Symbol.for("react.offscreen"),sN=Symbol.iterator;function yh(t){return t===null||typeof t!="object"?null:(t=sN&&t[sN]||t["@@iterator"],typeof t=="function"?t:null)}var kn=Object.assign,Cy;function Zh(t){if(Cy===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Cy=e&&e[1]||""}return`
`+Cy+t}var ky=!1;function Py(t,e){if(!t||ky)return"";ky=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),a=i.length-1,l=s.length-1;1<=a&&0<=l&&i[a]!==s[l];)l--;for(;1<=a&&0<=l;a--,l--)if(i[a]!==s[l]){if(a!==1||l!==1)do if(a--,l--,0>l||i[a]!==s[l]){var c=`
`+i[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=a&&0<=l);break}}}finally{ky=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Zh(t):""}function Y5(t){switch(t.tag){case 5:return Zh(t.type);case 16:return Zh("Lazy");case 13:return Zh("Suspense");case 19:return Zh("SuspenseList");case 0:case 2:case 15:return t=Py(t.type,!1),t;case 11:return t=Py(t.type.render,!1),t;case 1:return t=Py(t.type,!0),t;default:return""}}function Pb(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ou:return"Fragment";case Uu:return"Portal";case Ab:return"Profiler";case nw:return"StrictMode";case Cb:return"Suspense";case kb:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Tk:return(t.displayName||"Context")+".Consumer";case Nk:return(t._context.displayName||"Context")+".Provider";case rw:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case iw:return e=t.displayName||null,e!==null?e:Pb(t.type)||"Memo";case zo:e=t._payload,t=t._init;try{return Pb(t(e))}catch{}}return null}function q5(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Pb(e);case 8:return e===nw?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ol(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ck(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function $5(t){var e=Ck(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function jm(t){t._valueTracker||(t._valueTracker=$5(t))}function kk(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Ck(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function P0(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Rb(t,e){var n=e.checked;return kn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function aN(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ol(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Pk(t,e){e=e.checked,e!=null&&tw(t,"checked",e,!1)}function jb(t,e){Pk(t,e);var n=ol(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Lb(t,e.type,n):e.hasOwnProperty("defaultValue")&&Lb(t,e.type,ol(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function oN(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Lb(t,e,n){(e!=="number"||P0(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Kh=Array.isArray;function od(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ol(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Db(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(He(91));return kn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function lN(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(He(92));if(Kh(n)){if(1<n.length)throw Error(He(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ol(n)}}function Rk(t,e){var n=ol(e.value),r=ol(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function cN(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function jk(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ib(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?jk(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Lm,Lk=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Lm=Lm||document.createElement("div"),Lm.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Lm.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Nf(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var nf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Z5=["Webkit","ms","Moz","O"];Object.keys(nf).forEach(function(t){Z5.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),nf[e]=nf[t]})});function Dk(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||nf.hasOwnProperty(t)&&nf[t]?(""+e).trim():e+"px"}function Ik(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Dk(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var K5=kn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ub(t,e){if(e){if(K5[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(He(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(He(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(He(61))}if(e.style!=null&&typeof e.style!="object")throw Error(He(62))}}function Ob(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fb=null;function sw(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var zb=null,ld=null,cd=null;function uN(t){if(t=_p(t)){if(typeof zb!="function")throw Error(He(280));var e=t.stateNode;e&&(e=Cx(e),zb(t.stateNode,t.type,e))}}function Uk(t){ld?cd?cd.push(t):cd=[t]:ld=t}function Ok(){if(ld){var t=ld,e=cd;if(cd=ld=null,uN(t),e)for(t=0;t<e.length;t++)uN(e[t])}}function Fk(t,e){return t(e)}function zk(){}var Ry=!1;function Bk(t,e,n){if(Ry)return t(e,n);Ry=!0;try{return Fk(t,e,n)}finally{Ry=!1,(ld!==null||cd!==null)&&(zk(),Ok())}}function Tf(t,e){var n=t.stateNode;if(n===null)return null;var r=Cx(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(He(231,e,typeof n));return n}var Bb=!1;if(Qa)try{var bh={};Object.defineProperty(bh,"passive",{get:function(){Bb=!0}}),window.addEventListener("test",bh,bh),window.removeEventListener("test",bh,bh)}catch{Bb=!1}function J5(t,e,n,r,i,s,a,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var rf=!1,R0=null,j0=!1,Vb=null,Q5={onError:function(t){rf=!0,R0=t}};function eU(t,e,n,r,i,s,a,l,c){rf=!1,R0=null,J5.apply(Q5,arguments)}function tU(t,e,n,r,i,s,a,l,c){if(eU.apply(this,arguments),rf){if(rf){var u=R0;rf=!1,R0=null}else throw Error(He(198));j0||(j0=!0,Vb=u)}}function Uc(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Vk(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function dN(t){if(Uc(t)!==t)throw Error(He(188))}function nU(t){var e=t.alternate;if(!e){if(e=Uc(t),e===null)throw Error(He(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return dN(i),t;if(s===r)return dN(i),e;s=s.sibling}throw Error(He(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a)throw Error(He(189))}}if(n.alternate!==r)throw Error(He(190))}if(n.tag!==3)throw Error(He(188));return n.stateNode.current===n?t:e}function Hk(t){return t=nU(t),t!==null?Gk(t):null}function Gk(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Gk(t);if(e!==null)return e;t=t.sibling}return null}var Wk=$i.unstable_scheduleCallback,hN=$i.unstable_cancelCallback,rU=$i.unstable_shouldYield,iU=$i.unstable_requestPaint,Xn=$i.unstable_now,sU=$i.unstable_getCurrentPriorityLevel,aw=$i.unstable_ImmediatePriority,Xk=$i.unstable_UserBlockingPriority,L0=$i.unstable_NormalPriority,aU=$i.unstable_LowPriority,Yk=$i.unstable_IdlePriority,Ex=null,aa=null;function oU(t){if(aa&&typeof aa.onCommitFiberRoot=="function")try{aa.onCommitFiberRoot(Ex,t,void 0,(t.current.flags&128)===128)}catch{}}var Is=Math.clz32?Math.clz32:uU,lU=Math.log,cU=Math.LN2;function uU(t){return t>>>=0,t===0?32:31-(lU(t)/cU|0)|0}var Dm=64,Im=4194304;function Jh(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function D0(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,a=n&268435455;if(a!==0){var l=a&~i;l!==0?r=Jh(l):(s&=a,s!==0&&(r=Jh(s)))}else a=n&~i,a!==0?r=Jh(a):s!==0&&(r=Jh(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Is(e),i=1<<n,r|=t[n],e&=~i;return r}function dU(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hU(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var a=31-Is(s),l=1<<a,c=i[a];c===-1?(!(l&n)||l&r)&&(i[a]=dU(l,e)):c<=e&&(t.expiredLanes|=l),s&=~l}}function Hb(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function qk(){var t=Dm;return Dm<<=1,!(Dm&4194240)&&(Dm=64),t}function jy(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function yp(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Is(e),t[e]=n}function fU(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Is(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function ow(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Is(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Qt=0;function $k(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Zk,lw,Kk,Jk,Qk,Gb=!1,Um=[],qo=null,$o=null,Zo=null,Af=new Map,Cf=new Map,Vo=[],pU="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function fN(t,e){switch(t){case"focusin":case"focusout":qo=null;break;case"dragenter":case"dragleave":$o=null;break;case"mouseover":case"mouseout":Zo=null;break;case"pointerover":case"pointerout":Af.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Cf.delete(e.pointerId)}}function _h(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=_p(e),e!==null&&lw(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function mU(t,e,n,r,i){switch(e){case"focusin":return qo=_h(qo,t,e,n,r,i),!0;case"dragenter":return $o=_h($o,t,e,n,r,i),!0;case"mouseover":return Zo=_h(Zo,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Af.set(s,_h(Af.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Cf.set(s,_h(Cf.get(s)||null,t,e,n,r,i)),!0}return!1}function eP(t){var e=lc(t.target);if(e!==null){var n=Uc(e);if(n!==null){if(e=n.tag,e===13){if(e=Vk(n),e!==null){t.blockedOn=e,Qk(t.priority,function(){Kk(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function s0(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Wb(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Fb=r,n.target.dispatchEvent(r),Fb=null}else return e=_p(n),e!==null&&lw(e),t.blockedOn=n,!1;e.shift()}return!0}function pN(t,e,n){s0(t)&&n.delete(e)}function gU(){Gb=!1,qo!==null&&s0(qo)&&(qo=null),$o!==null&&s0($o)&&($o=null),Zo!==null&&s0(Zo)&&(Zo=null),Af.forEach(pN),Cf.forEach(pN)}function wh(t,e){t.blockedOn===e&&(t.blockedOn=null,Gb||(Gb=!0,$i.unstable_scheduleCallback($i.unstable_NormalPriority,gU)))}function kf(t){function e(i){return wh(i,t)}if(0<Um.length){wh(Um[0],t);for(var n=1;n<Um.length;n++){var r=Um[n];r.blockedOn===t&&(r.blockedOn=null)}}for(qo!==null&&wh(qo,t),$o!==null&&wh($o,t),Zo!==null&&wh(Zo,t),Af.forEach(e),Cf.forEach(e),n=0;n<Vo.length;n++)r=Vo[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Vo.length&&(n=Vo[0],n.blockedOn===null);)eP(n),n.blockedOn===null&&Vo.shift()}var ud=co.ReactCurrentBatchConfig,I0=!0;function xU(t,e,n,r){var i=Qt,s=ud.transition;ud.transition=null;try{Qt=1,cw(t,e,n,r)}finally{Qt=i,ud.transition=s}}function vU(t,e,n,r){var i=Qt,s=ud.transition;ud.transition=null;try{Qt=4,cw(t,e,n,r)}finally{Qt=i,ud.transition=s}}function cw(t,e,n,r){if(I0){var i=Wb(t,e,n,r);if(i===null)Hy(t,e,r,U0,n),fN(t,r);else if(mU(i,t,e,n,r))r.stopPropagation();else if(fN(t,r),e&4&&-1<pU.indexOf(t)){for(;i!==null;){var s=_p(i);if(s!==null&&Zk(s),s=Wb(t,e,n,r),s===null&&Hy(t,e,r,U0,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Hy(t,e,r,null,n)}}var U0=null;function Wb(t,e,n,r){if(U0=null,t=sw(r),t=lc(t),t!==null)if(e=Uc(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Vk(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return U0=t,null}function tP(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(sU()){case aw:return 1;case Xk:return 4;case L0:case aU:return 16;case Yk:return 536870912;default:return 16}default:return 16}}var Wo=null,uw=null,a0=null;function nP(){if(a0)return a0;var t,e=uw,n=e.length,r,i="value"in Wo?Wo.value:Wo.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===i[s-r];r++);return a0=i.slice(t,1<r?1-r:void 0)}function o0(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Om(){return!0}function mN(){return!1}function Ki(t){function e(n,r,i,s,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Om:mN,this.isPropagationStopped=mN,this}return kn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Om)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Om)},persist:function(){},isPersistent:Om}),e}var Ld={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dw=Ki(Ld),bp=kn({},Ld,{view:0,detail:0}),yU=Ki(bp),Ly,Dy,Sh,Nx=kn({},bp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hw,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Sh&&(Sh&&t.type==="mousemove"?(Ly=t.screenX-Sh.screenX,Dy=t.screenY-Sh.screenY):Dy=Ly=0,Sh=t),Ly)},movementY:function(t){return"movementY"in t?t.movementY:Dy}}),gN=Ki(Nx),bU=kn({},Nx,{dataTransfer:0}),_U=Ki(bU),wU=kn({},bp,{relatedTarget:0}),Iy=Ki(wU),SU=kn({},Ld,{animationName:0,elapsedTime:0,pseudoElement:0}),MU=Ki(SU),EU=kn({},Ld,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),NU=Ki(EU),TU=kn({},Ld,{data:0}),xN=Ki(TU),AU={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},CU={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kU={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function PU(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=kU[t])?!!e[t]:!1}function hw(){return PU}var RU=kn({},bp,{key:function(t){if(t.key){var e=AU[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=o0(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?CU[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hw,charCode:function(t){return t.type==="keypress"?o0(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?o0(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),jU=Ki(RU),LU=kn({},Nx,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),vN=Ki(LU),DU=kn({},bp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hw}),IU=Ki(DU),UU=kn({},Ld,{propertyName:0,elapsedTime:0,pseudoElement:0}),OU=Ki(UU),FU=kn({},Nx,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),zU=Ki(FU),BU=[9,13,27,32],fw=Qa&&"CompositionEvent"in window,sf=null;Qa&&"documentMode"in document&&(sf=document.documentMode);var VU=Qa&&"TextEvent"in window&&!sf,rP=Qa&&(!fw||sf&&8<sf&&11>=sf),yN=" ",bN=!1;function iP(t,e){switch(t){case"keyup":return BU.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sP(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Fu=!1;function HU(t,e){switch(t){case"compositionend":return sP(e);case"keypress":return e.which!==32?null:(bN=!0,yN);case"textInput":return t=e.data,t===yN&&bN?null:t;default:return null}}function GU(t,e){if(Fu)return t==="compositionend"||!fw&&iP(t,e)?(t=nP(),a0=uw=Wo=null,Fu=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return rP&&e.locale!=="ko"?null:e.data;default:return null}}var WU={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _N(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!WU[t.type]:e==="textarea"}function aP(t,e,n,r){Uk(r),e=O0(e,"onChange"),0<e.length&&(n=new dw("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var af=null,Pf=null;function XU(t){xP(t,0)}function Tx(t){var e=Vu(t);if(kk(e))return t}function YU(t,e){if(t==="change")return e}var oP=!1;if(Qa){var Uy;if(Qa){var Oy="oninput"in document;if(!Oy){var wN=document.createElement("div");wN.setAttribute("oninput","return;"),Oy=typeof wN.oninput=="function"}Uy=Oy}else Uy=!1;oP=Uy&&(!document.documentMode||9<document.documentMode)}function SN(){af&&(af.detachEvent("onpropertychange",lP),Pf=af=null)}function lP(t){if(t.propertyName==="value"&&Tx(Pf)){var e=[];aP(e,Pf,t,sw(t)),Bk(XU,e)}}function qU(t,e,n){t==="focusin"?(SN(),af=e,Pf=n,af.attachEvent("onpropertychange",lP)):t==="focusout"&&SN()}function $U(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Tx(Pf)}function ZU(t,e){if(t==="click")return Tx(e)}function KU(t,e){if(t==="input"||t==="change")return Tx(e)}function JU(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Fs=typeof Object.is=="function"?Object.is:JU;function Rf(t,e){if(Fs(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Tb.call(e,i)||!Fs(t[i],e[i]))return!1}return!0}function MN(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function EN(t,e){var n=MN(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=MN(n)}}function cP(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?cP(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function uP(){for(var t=window,e=P0();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=P0(t.document)}return e}function pw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function QU(t){var e=uP(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&cP(n.ownerDocument.documentElement,n)){if(r!==null&&pw(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=EN(n,s);var a=EN(n,r);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var eO=Qa&&"documentMode"in document&&11>=document.documentMode,zu=null,Xb=null,of=null,Yb=!1;function NN(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Yb||zu==null||zu!==P0(r)||(r=zu,"selectionStart"in r&&pw(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),of&&Rf(of,r)||(of=r,r=O0(Xb,"onSelect"),0<r.length&&(e=new dw("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=zu)))}function Fm(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Bu={animationend:Fm("Animation","AnimationEnd"),animationiteration:Fm("Animation","AnimationIteration"),animationstart:Fm("Animation","AnimationStart"),transitionend:Fm("Transition","TransitionEnd")},Fy={},dP={};Qa&&(dP=document.createElement("div").style,"AnimationEvent"in window||(delete Bu.animationend.animation,delete Bu.animationiteration.animation,delete Bu.animationstart.animation),"TransitionEvent"in window||delete Bu.transitionend.transition);function Ax(t){if(Fy[t])return Fy[t];if(!Bu[t])return t;var e=Bu[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in dP)return Fy[t]=e[n];return t}var hP=Ax("animationend"),fP=Ax("animationiteration"),pP=Ax("animationstart"),mP=Ax("transitionend"),gP=new Map,TN="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ml(t,e){gP.set(t,e),Ic(e,[t])}for(var zy=0;zy<TN.length;zy++){var By=TN[zy],tO=By.toLowerCase(),nO=By[0].toUpperCase()+By.slice(1);ml(tO,"on"+nO)}ml(hP,"onAnimationEnd");ml(fP,"onAnimationIteration");ml(pP,"onAnimationStart");ml("dblclick","onDoubleClick");ml("focusin","onFocus");ml("focusout","onBlur");ml(mP,"onTransitionEnd");xd("onMouseEnter",["mouseout","mouseover"]);xd("onMouseLeave",["mouseout","mouseover"]);xd("onPointerEnter",["pointerout","pointerover"]);xd("onPointerLeave",["pointerout","pointerover"]);Ic("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ic("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ic("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ic("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ic("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ic("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rO=new Set("cancel close invalid load scroll toggle".split(" ").concat(Qh));function AN(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,tU(r,e,void 0,t),t.currentTarget=null}function xP(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var a=r.length-1;0<=a;a--){var l=r[a],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==s&&i.isPropagationStopped())break e;AN(i,l,u),s=c}else for(a=0;a<r.length;a++){if(l=r[a],c=l.instance,u=l.currentTarget,l=l.listener,c!==s&&i.isPropagationStopped())break e;AN(i,l,u),s=c}}}if(j0)throw t=Vb,j0=!1,Vb=null,t}function fn(t,e){var n=e[Jb];n===void 0&&(n=e[Jb]=new Set);var r=t+"__bubble";n.has(r)||(vP(e,t,2,!1),n.add(r))}function Vy(t,e,n){var r=0;e&&(r|=4),vP(n,t,r,e)}var zm="_reactListening"+Math.random().toString(36).slice(2);function jf(t){if(!t[zm]){t[zm]=!0,Ek.forEach(function(n){n!=="selectionchange"&&(rO.has(n)||Vy(n,!1,t),Vy(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[zm]||(e[zm]=!0,Vy("selectionchange",!1,e))}}function vP(t,e,n,r){switch(tP(e)){case 1:var i=xU;break;case 4:i=vU;break;default:i=cw}n=i.bind(null,e,n,t),i=void 0,!Bb||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Hy(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;a=a.return}for(;l!==null;){if(a=lc(l),a===null)return;if(c=a.tag,c===5||c===6){r=s=a;continue e}l=l.parentNode}}r=r.return}Bk(function(){var u=s,d=sw(n),f=[];e:{var m=gP.get(t);if(m!==void 0){var g=dw,v=t;switch(t){case"keypress":if(o0(n)===0)break e;case"keydown":case"keyup":g=jU;break;case"focusin":v="focus",g=Iy;break;case"focusout":v="blur",g=Iy;break;case"beforeblur":case"afterblur":g=Iy;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=gN;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=_U;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=IU;break;case hP:case fP:case pP:g=MU;break;case mP:g=OU;break;case"scroll":g=yU;break;case"wheel":g=zU;break;case"copy":case"cut":case"paste":g=NU;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=vN}var _=(e&4)!==0,b=!_&&t==="scroll",x=_?m!==null?m+"Capture":null:m;_=[];for(var y=u,S;y!==null;){S=y;var E=S.stateNode;if(S.tag===5&&E!==null&&(S=E,x!==null&&(E=Tf(y,x),E!=null&&_.push(Lf(y,E,S)))),b)break;y=y.return}0<_.length&&(m=new g(m,v,null,n,d),f.push({event:m,listeners:_}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",m&&n!==Fb&&(v=n.relatedTarget||n.fromElement)&&(lc(v)||v[eo]))break e;if((g||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,g?(v=n.relatedTarget||n.toElement,g=u,v=v?lc(v):null,v!==null&&(b=Uc(v),v!==b||v.tag!==5&&v.tag!==6)&&(v=null)):(g=null,v=u),g!==v)){if(_=gN,E="onMouseLeave",x="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(_=vN,E="onPointerLeave",x="onPointerEnter",y="pointer"),b=g==null?m:Vu(g),S=v==null?m:Vu(v),m=new _(E,y+"leave",g,n,d),m.target=b,m.relatedTarget=S,E=null,lc(d)===u&&(_=new _(x,y+"enter",v,n,d),_.target=S,_.relatedTarget=b,E=_),b=E,g&&v)t:{for(_=g,x=v,y=0,S=_;S;S=su(S))y++;for(S=0,E=x;E;E=su(E))S++;for(;0<y-S;)_=su(_),y--;for(;0<S-y;)x=su(x),S--;for(;y--;){if(_===x||x!==null&&_===x.alternate)break t;_=su(_),x=su(x)}_=null}else _=null;g!==null&&CN(f,m,g,_,!1),v!==null&&b!==null&&CN(f,b,v,_,!0)}}e:{if(m=u?Vu(u):window,g=m.nodeName&&m.nodeName.toLowerCase(),g==="select"||g==="input"&&m.type==="file")var A=YU;else if(_N(m))if(oP)A=KU;else{A=$U;var T=qU}else(g=m.nodeName)&&g.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(A=ZU);if(A&&(A=A(t,u))){aP(f,A,n,d);break e}T&&T(t,m,u),t==="focusout"&&(T=m._wrapperState)&&T.controlled&&m.type==="number"&&Lb(m,"number",m.value)}switch(T=u?Vu(u):window,t){case"focusin":(_N(T)||T.contentEditable==="true")&&(zu=T,Xb=u,of=null);break;case"focusout":of=Xb=zu=null;break;case"mousedown":Yb=!0;break;case"contextmenu":case"mouseup":case"dragend":Yb=!1,NN(f,n,d);break;case"selectionchange":if(eO)break;case"keydown":case"keyup":NN(f,n,d)}var C;if(fw)e:{switch(t){case"compositionstart":var j="onCompositionStart";break e;case"compositionend":j="onCompositionEnd";break e;case"compositionupdate":j="onCompositionUpdate";break e}j=void 0}else Fu?iP(t,n)&&(j="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(j="onCompositionStart");j&&(rP&&n.locale!=="ko"&&(Fu||j!=="onCompositionStart"?j==="onCompositionEnd"&&Fu&&(C=nP()):(Wo=d,uw="value"in Wo?Wo.value:Wo.textContent,Fu=!0)),T=O0(u,j),0<T.length&&(j=new xN(j,t,null,n,d),f.push({event:j,listeners:T}),C?j.data=C:(C=sP(n),C!==null&&(j.data=C)))),(C=VU?HU(t,n):GU(t,n))&&(u=O0(u,"onBeforeInput"),0<u.length&&(d=new xN("onBeforeInput","beforeinput",null,n,d),f.push({event:d,listeners:u}),d.data=C))}xP(f,e)})}function Lf(t,e,n){return{instance:t,listener:e,currentTarget:n}}function O0(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Tf(t,n),s!=null&&r.unshift(Lf(t,s,i)),s=Tf(t,e),s!=null&&r.push(Lf(t,s,i))),t=t.return}return r}function su(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function CN(t,e,n,r,i){for(var s=e._reactName,a=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,i?(c=Tf(n,s),c!=null&&a.unshift(Lf(n,c,l))):i||(c=Tf(n,s),c!=null&&a.push(Lf(n,c,l)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var iO=/\r\n?/g,sO=/\u0000|\uFFFD/g;function kN(t){return(typeof t=="string"?t:""+t).replace(iO,`
`).replace(sO,"")}function Bm(t,e,n){if(e=kN(e),kN(t)!==e&&n)throw Error(He(425))}function F0(){}var qb=null,$b=null;function Zb(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Kb=typeof setTimeout=="function"?setTimeout:void 0,aO=typeof clearTimeout=="function"?clearTimeout:void 0,PN=typeof Promise=="function"?Promise:void 0,oO=typeof queueMicrotask=="function"?queueMicrotask:typeof PN<"u"?function(t){return PN.resolve(null).then(t).catch(lO)}:Kb;function lO(t){setTimeout(function(){throw t})}function Gy(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),kf(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);kf(e)}function Ko(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function RN(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Dd=Math.random().toString(36).slice(2),sa="__reactFiber$"+Dd,Df="__reactProps$"+Dd,eo="__reactContainer$"+Dd,Jb="__reactEvents$"+Dd,cO="__reactListeners$"+Dd,uO="__reactHandles$"+Dd;function lc(t){var e=t[sa];if(e)return e;for(var n=t.parentNode;n;){if(e=n[eo]||n[sa]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=RN(t);t!==null;){if(n=t[sa])return n;t=RN(t)}return e}t=n,n=t.parentNode}return null}function _p(t){return t=t[sa]||t[eo],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Vu(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(He(33))}function Cx(t){return t[Df]||null}var Qb=[],Hu=-1;function gl(t){return{current:t}}function pn(t){0>Hu||(t.current=Qb[Hu],Qb[Hu]=null,Hu--)}function ln(t,e){Hu++,Qb[Hu]=t.current,t.current=e}var ll={},Xr=gl(ll),Ti=gl(!1),Tc=ll;function vd(t,e){var n=t.type.contextTypes;if(!n)return ll;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Ai(t){return t=t.childContextTypes,t!=null}function z0(){pn(Ti),pn(Xr)}function jN(t,e,n){if(Xr.current!==ll)throw Error(He(168));ln(Xr,e),ln(Ti,n)}function yP(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(He(108,q5(t)||"Unknown",i));return kn({},n,r)}function B0(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ll,Tc=Xr.current,ln(Xr,t),ln(Ti,Ti.current),!0}function LN(t,e,n){var r=t.stateNode;if(!r)throw Error(He(169));n?(t=yP(t,e,Tc),r.__reactInternalMemoizedMergedChildContext=t,pn(Ti),pn(Xr),ln(Xr,t)):pn(Ti),ln(Ti,n)}var Ga=null,kx=!1,Wy=!1;function bP(t){Ga===null?Ga=[t]:Ga.push(t)}function dO(t){kx=!0,bP(t)}function xl(){if(!Wy&&Ga!==null){Wy=!0;var t=0,e=Qt;try{var n=Ga;for(Qt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ga=null,kx=!1}catch(i){throw Ga!==null&&(Ga=Ga.slice(t+1)),Wk(aw,xl),i}finally{Qt=e,Wy=!1}}return null}var Gu=[],Wu=0,V0=null,H0=0,us=[],ds=0,Ac=null,Ya=1,qa="";function Kl(t,e){Gu[Wu++]=H0,Gu[Wu++]=V0,V0=t,H0=e}function _P(t,e,n){us[ds++]=Ya,us[ds++]=qa,us[ds++]=Ac,Ac=t;var r=Ya;t=qa;var i=32-Is(r)-1;r&=~(1<<i),n+=1;var s=32-Is(e)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Ya=1<<32-Is(e)+i|n<<i|r,qa=s+t}else Ya=1<<s|n<<i|r,qa=t}function mw(t){t.return!==null&&(Kl(t,1),_P(t,1,0))}function gw(t){for(;t===V0;)V0=Gu[--Wu],Gu[Wu]=null,H0=Gu[--Wu],Gu[Wu]=null;for(;t===Ac;)Ac=us[--ds],us[ds]=null,qa=us[--ds],us[ds]=null,Ya=us[--ds],us[ds]=null}var Yi=null,Xi=null,xn=!1,Rs=null;function wP(t,e){var n=hs(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function DN(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Yi=t,Xi=Ko(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Yi=t,Xi=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ac!==null?{id:Ya,overflow:qa}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=hs(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Yi=t,Xi=null,!0):!1;default:return!1}}function e2(t){return(t.mode&1)!==0&&(t.flags&128)===0}function t2(t){if(xn){var e=Xi;if(e){var n=e;if(!DN(t,e)){if(e2(t))throw Error(He(418));e=Ko(n.nextSibling);var r=Yi;e&&DN(t,e)?wP(r,n):(t.flags=t.flags&-4097|2,xn=!1,Yi=t)}}else{if(e2(t))throw Error(He(418));t.flags=t.flags&-4097|2,xn=!1,Yi=t}}}function IN(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Yi=t}function Vm(t){if(t!==Yi)return!1;if(!xn)return IN(t),xn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Zb(t.type,t.memoizedProps)),e&&(e=Xi)){if(e2(t))throw SP(),Error(He(418));for(;e;)wP(t,e),e=Ko(e.nextSibling)}if(IN(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(He(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Xi=Ko(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Xi=null}}else Xi=Yi?Ko(t.stateNode.nextSibling):null;return!0}function SP(){for(var t=Xi;t;)t=Ko(t.nextSibling)}function yd(){Xi=Yi=null,xn=!1}function xw(t){Rs===null?Rs=[t]:Rs.push(t)}var hO=co.ReactCurrentBatchConfig;function Mh(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(He(309));var r=n.stateNode}if(!r)throw Error(He(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var l=i.refs;a===null?delete l[s]:l[s]=a},e._stringRef=s,e)}if(typeof t!="string")throw Error(He(284));if(!n._owner)throw Error(He(290,t))}return t}function Hm(t,e){throw t=Object.prototype.toString.call(e),Error(He(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function UN(t){var e=t._init;return e(t._payload)}function MP(t){function e(x,y){if(t){var S=x.deletions;S===null?(x.deletions=[y],x.flags|=16):S.push(y)}}function n(x,y){if(!t)return null;for(;y!==null;)e(x,y),y=y.sibling;return null}function r(x,y){for(x=new Map;y!==null;)y.key!==null?x.set(y.key,y):x.set(y.index,y),y=y.sibling;return x}function i(x,y){return x=tl(x,y),x.index=0,x.sibling=null,x}function s(x,y,S){return x.index=S,t?(S=x.alternate,S!==null?(S=S.index,S<y?(x.flags|=2,y):S):(x.flags|=2,y)):(x.flags|=1048576,y)}function a(x){return t&&x.alternate===null&&(x.flags|=2),x}function l(x,y,S,E){return y===null||y.tag!==6?(y=Jy(S,x.mode,E),y.return=x,y):(y=i(y,S),y.return=x,y)}function c(x,y,S,E){var A=S.type;return A===Ou?d(x,y,S.props.children,E,S.key):y!==null&&(y.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===zo&&UN(A)===y.type)?(E=i(y,S.props),E.ref=Mh(x,y,S),E.return=x,E):(E=p0(S.type,S.key,S.props,null,x.mode,E),E.ref=Mh(x,y,S),E.return=x,E)}function u(x,y,S,E){return y===null||y.tag!==4||y.stateNode.containerInfo!==S.containerInfo||y.stateNode.implementation!==S.implementation?(y=Qy(S,x.mode,E),y.return=x,y):(y=i(y,S.children||[]),y.return=x,y)}function d(x,y,S,E,A){return y===null||y.tag!==7?(y=vc(S,x.mode,E,A),y.return=x,y):(y=i(y,S),y.return=x,y)}function f(x,y,S){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Jy(""+y,x.mode,S),y.return=x,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Rm:return S=p0(y.type,y.key,y.props,null,x.mode,S),S.ref=Mh(x,null,y),S.return=x,S;case Uu:return y=Qy(y,x.mode,S),y.return=x,y;case zo:var E=y._init;return f(x,E(y._payload),S)}if(Kh(y)||yh(y))return y=vc(y,x.mode,S,null),y.return=x,y;Hm(x,y)}return null}function m(x,y,S,E){var A=y!==null?y.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return A!==null?null:l(x,y,""+S,E);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Rm:return S.key===A?c(x,y,S,E):null;case Uu:return S.key===A?u(x,y,S,E):null;case zo:return A=S._init,m(x,y,A(S._payload),E)}if(Kh(S)||yh(S))return A!==null?null:d(x,y,S,E,null);Hm(x,S)}return null}function g(x,y,S,E,A){if(typeof E=="string"&&E!==""||typeof E=="number")return x=x.get(S)||null,l(y,x,""+E,A);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Rm:return x=x.get(E.key===null?S:E.key)||null,c(y,x,E,A);case Uu:return x=x.get(E.key===null?S:E.key)||null,u(y,x,E,A);case zo:var T=E._init;return g(x,y,S,T(E._payload),A)}if(Kh(E)||yh(E))return x=x.get(S)||null,d(y,x,E,A,null);Hm(y,E)}return null}function v(x,y,S,E){for(var A=null,T=null,C=y,j=y=0,k=null;C!==null&&j<S.length;j++){C.index>j?(k=C,C=null):k=C.sibling;var P=m(x,C,S[j],E);if(P===null){C===null&&(C=k);break}t&&C&&P.alternate===null&&e(x,C),y=s(P,y,j),T===null?A=P:T.sibling=P,T=P,C=k}if(j===S.length)return n(x,C),xn&&Kl(x,j),A;if(C===null){for(;j<S.length;j++)C=f(x,S[j],E),C!==null&&(y=s(C,y,j),T===null?A=C:T.sibling=C,T=C);return xn&&Kl(x,j),A}for(C=r(x,C);j<S.length;j++)k=g(C,x,j,S[j],E),k!==null&&(t&&k.alternate!==null&&C.delete(k.key===null?j:k.key),y=s(k,y,j),T===null?A=k:T.sibling=k,T=k);return t&&C.forEach(function(H){return e(x,H)}),xn&&Kl(x,j),A}function _(x,y,S,E){var A=yh(S);if(typeof A!="function")throw Error(He(150));if(S=A.call(S),S==null)throw Error(He(151));for(var T=A=null,C=y,j=y=0,k=null,P=S.next();C!==null&&!P.done;j++,P=S.next()){C.index>j?(k=C,C=null):k=C.sibling;var H=m(x,C,P.value,E);if(H===null){C===null&&(C=k);break}t&&C&&H.alternate===null&&e(x,C),y=s(H,y,j),T===null?A=H:T.sibling=H,T=H,C=k}if(P.done)return n(x,C),xn&&Kl(x,j),A;if(C===null){for(;!P.done;j++,P=S.next())P=f(x,P.value,E),P!==null&&(y=s(P,y,j),T===null?A=P:T.sibling=P,T=P);return xn&&Kl(x,j),A}for(C=r(x,C);!P.done;j++,P=S.next())P=g(C,x,j,P.value,E),P!==null&&(t&&P.alternate!==null&&C.delete(P.key===null?j:P.key),y=s(P,y,j),T===null?A=P:T.sibling=P,T=P);return t&&C.forEach(function(B){return e(x,B)}),xn&&Kl(x,j),A}function b(x,y,S,E){if(typeof S=="object"&&S!==null&&S.type===Ou&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Rm:e:{for(var A=S.key,T=y;T!==null;){if(T.key===A){if(A=S.type,A===Ou){if(T.tag===7){n(x,T.sibling),y=i(T,S.props.children),y.return=x,x=y;break e}}else if(T.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===zo&&UN(A)===T.type){n(x,T.sibling),y=i(T,S.props),y.ref=Mh(x,T,S),y.return=x,x=y;break e}n(x,T);break}else e(x,T);T=T.sibling}S.type===Ou?(y=vc(S.props.children,x.mode,E,S.key),y.return=x,x=y):(E=p0(S.type,S.key,S.props,null,x.mode,E),E.ref=Mh(x,y,S),E.return=x,x=E)}return a(x);case Uu:e:{for(T=S.key;y!==null;){if(y.key===T)if(y.tag===4&&y.stateNode.containerInfo===S.containerInfo&&y.stateNode.implementation===S.implementation){n(x,y.sibling),y=i(y,S.children||[]),y.return=x,x=y;break e}else{n(x,y);break}else e(x,y);y=y.sibling}y=Qy(S,x.mode,E),y.return=x,x=y}return a(x);case zo:return T=S._init,b(x,y,T(S._payload),E)}if(Kh(S))return v(x,y,S,E);if(yh(S))return _(x,y,S,E);Hm(x,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,y!==null&&y.tag===6?(n(x,y.sibling),y=i(y,S),y.return=x,x=y):(n(x,y),y=Jy(S,x.mode,E),y.return=x,x=y),a(x)):n(x,y)}return b}var bd=MP(!0),EP=MP(!1),G0=gl(null),W0=null,Xu=null,vw=null;function yw(){vw=Xu=W0=null}function bw(t){var e=G0.current;pn(G0),t._currentValue=e}function n2(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function dd(t,e){W0=t,vw=Xu=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ei=!0),t.firstContext=null)}function gs(t){var e=t._currentValue;if(vw!==t)if(t={context:t,memoizedValue:e,next:null},Xu===null){if(W0===null)throw Error(He(308));Xu=t,W0.dependencies={lanes:0,firstContext:t}}else Xu=Xu.next=t;return e}var cc=null;function _w(t){cc===null?cc=[t]:cc.push(t)}function NP(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,_w(e)):(n.next=i.next,i.next=n),e.interleaved=n,to(t,r)}function to(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Bo=!1;function ww(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function TP(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ka(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Jo(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ht&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,to(t,n)}return i=r.interleaved,i===null?(e.next=e,_w(r)):(e.next=i.next,i.next=e),r.interleaved=e,to(t,n)}function l0(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ow(t,n)}}function ON(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function X0(t,e,n,r){var i=t.updateQueue;Bo=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var c=l,u=c.next;c.next=null,a===null?s=u:a.next=u,a=c;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==a&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(s!==null){var f=i.baseState;a=0,d=u=c=null,l=s;do{var m=l.lane,g=l.eventTime;if((r&m)===m){d!==null&&(d=d.next={eventTime:g,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=t,_=l;switch(m=e,g=n,_.tag){case 1:if(v=_.payload,typeof v=="function"){f=v.call(g,f,m);break e}f=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=_.payload,m=typeof v=="function"?v.call(g,f,m):v,m==null)break e;f=kn({},f,m);break e;case 2:Bo=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,m=i.effects,m===null?i.effects=[l]:m.push(l))}else g={eventTime:g,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=g,c=f):d=d.next=g,a|=m;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;m=l,l=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);if(d===null&&(c=f),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);kc|=a,t.lanes=a,t.memoizedState=f}}function FN(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(He(191,i));i.call(r)}}}var wp={},oa=gl(wp),If=gl(wp),Uf=gl(wp);function uc(t){if(t===wp)throw Error(He(174));return t}function Sw(t,e){switch(ln(Uf,e),ln(If,t),ln(oa,wp),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ib(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ib(e,t)}pn(oa),ln(oa,e)}function _d(){pn(oa),pn(If),pn(Uf)}function AP(t){uc(Uf.current);var e=uc(oa.current),n=Ib(e,t.type);e!==n&&(ln(If,t),ln(oa,n))}function Mw(t){If.current===t&&(pn(oa),pn(If))}var Sn=gl(0);function Y0(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Xy=[];function Ew(){for(var t=0;t<Xy.length;t++)Xy[t]._workInProgressVersionPrimary=null;Xy.length=0}var c0=co.ReactCurrentDispatcher,Yy=co.ReactCurrentBatchConfig,Cc=0,Tn=null,sr=null,gr=null,q0=!1,lf=!1,Of=0,fO=0;function Lr(){throw Error(He(321))}function Nw(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Fs(t[n],e[n]))return!1;return!0}function Tw(t,e,n,r,i,s){if(Cc=s,Tn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,c0.current=t===null||t.memoizedState===null?xO:vO,t=n(r,i),lf){s=0;do{if(lf=!1,Of=0,25<=s)throw Error(He(301));s+=1,gr=sr=null,e.updateQueue=null,c0.current=yO,t=n(r,i)}while(lf)}if(c0.current=$0,e=sr!==null&&sr.next!==null,Cc=0,gr=sr=Tn=null,q0=!1,e)throw Error(He(300));return t}function Aw(){var t=Of!==0;return Of=0,t}function ra(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gr===null?Tn.memoizedState=gr=t:gr=gr.next=t,gr}function xs(){if(sr===null){var t=Tn.alternate;t=t!==null?t.memoizedState:null}else t=sr.next;var e=gr===null?Tn.memoizedState:gr.next;if(e!==null)gr=e,sr=t;else{if(t===null)throw Error(He(310));sr=t,t={memoizedState:sr.memoizedState,baseState:sr.baseState,baseQueue:sr.baseQueue,queue:sr.queue,next:null},gr===null?Tn.memoizedState=gr=t:gr=gr.next=t}return gr}function Ff(t,e){return typeof e=="function"?e(t):e}function qy(t){var e=xs(),n=e.queue;if(n===null)throw Error(He(311));n.lastRenderedReducer=t;var r=sr,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=a=null,c=null,u=s;do{var d=u.lane;if((Cc&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,a=r):c=c.next=f,Tn.lanes|=d,kc|=d}u=u.next}while(u!==null&&u!==s);c===null?a=r:c.next=l,Fs(r,e.memoizedState)||(Ei=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Tn.lanes|=s,kc|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function $y(t){var e=xs(),n=e.queue;if(n===null)throw Error(He(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do s=t(s,a.action),a=a.next;while(a!==i);Fs(s,e.memoizedState)||(Ei=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function CP(){}function kP(t,e){var n=Tn,r=xs(),i=e(),s=!Fs(r.memoizedState,i);if(s&&(r.memoizedState=i,Ei=!0),r=r.queue,Cw(jP.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||gr!==null&&gr.memoizedState.tag&1){if(n.flags|=2048,zf(9,RP.bind(null,n,r,i,e),void 0,null),xr===null)throw Error(He(349));Cc&30||PP(n,e,i)}return i}function PP(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Tn.updateQueue,e===null?(e={lastEffect:null,stores:null},Tn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function RP(t,e,n,r){e.value=n,e.getSnapshot=r,LP(e)&&DP(t)}function jP(t,e,n){return n(function(){LP(e)&&DP(t)})}function LP(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Fs(t,n)}catch{return!0}}function DP(t){var e=to(t,1);e!==null&&Us(e,t,1,-1)}function zN(t){var e=ra();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ff,lastRenderedState:t},e.queue=t,t=t.dispatch=gO.bind(null,Tn,t),[e.memoizedState,t]}function zf(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Tn.updateQueue,e===null?(e={lastEffect:null,stores:null},Tn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function IP(){return xs().memoizedState}function u0(t,e,n,r){var i=ra();Tn.flags|=t,i.memoizedState=zf(1|e,n,void 0,r===void 0?null:r)}function Px(t,e,n,r){var i=xs();r=r===void 0?null:r;var s=void 0;if(sr!==null){var a=sr.memoizedState;if(s=a.destroy,r!==null&&Nw(r,a.deps)){i.memoizedState=zf(e,n,s,r);return}}Tn.flags|=t,i.memoizedState=zf(1|e,n,s,r)}function BN(t,e){return u0(8390656,8,t,e)}function Cw(t,e){return Px(2048,8,t,e)}function UP(t,e){return Px(4,2,t,e)}function OP(t,e){return Px(4,4,t,e)}function FP(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function zP(t,e,n){return n=n!=null?n.concat([t]):null,Px(4,4,FP.bind(null,e,t),n)}function kw(){}function BP(t,e){var n=xs();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Nw(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function VP(t,e){var n=xs();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Nw(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function HP(t,e,n){return Cc&21?(Fs(n,e)||(n=qk(),Tn.lanes|=n,kc|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ei=!0),t.memoizedState=n)}function pO(t,e){var n=Qt;Qt=n!==0&&4>n?n:4,t(!0);var r=Yy.transition;Yy.transition={};try{t(!1),e()}finally{Qt=n,Yy.transition=r}}function GP(){return xs().memoizedState}function mO(t,e,n){var r=el(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},WP(t))XP(e,n);else if(n=NP(t,e,n,r),n!==null){var i=ci();Us(n,t,r,i),YP(n,e,r)}}function gO(t,e,n){var r=el(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(WP(t))XP(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,l=s(a,n);if(i.hasEagerState=!0,i.eagerState=l,Fs(l,a)){var c=e.interleaved;c===null?(i.next=i,_w(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}n=NP(t,e,i,r),n!==null&&(i=ci(),Us(n,t,r,i),YP(n,e,r))}}function WP(t){var e=t.alternate;return t===Tn||e!==null&&e===Tn}function XP(t,e){lf=q0=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function YP(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ow(t,n)}}var $0={readContext:gs,useCallback:Lr,useContext:Lr,useEffect:Lr,useImperativeHandle:Lr,useInsertionEffect:Lr,useLayoutEffect:Lr,useMemo:Lr,useReducer:Lr,useRef:Lr,useState:Lr,useDebugValue:Lr,useDeferredValue:Lr,useTransition:Lr,useMutableSource:Lr,useSyncExternalStore:Lr,useId:Lr,unstable_isNewReconciler:!1},xO={readContext:gs,useCallback:function(t,e){return ra().memoizedState=[t,e===void 0?null:e],t},useContext:gs,useEffect:BN,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,u0(4194308,4,FP.bind(null,e,t),n)},useLayoutEffect:function(t,e){return u0(4194308,4,t,e)},useInsertionEffect:function(t,e){return u0(4,2,t,e)},useMemo:function(t,e){var n=ra();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ra();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=mO.bind(null,Tn,t),[r.memoizedState,t]},useRef:function(t){var e=ra();return t={current:t},e.memoizedState=t},useState:zN,useDebugValue:kw,useDeferredValue:function(t){return ra().memoizedState=t},useTransition:function(){var t=zN(!1),e=t[0];return t=pO.bind(null,t[1]),ra().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Tn,i=ra();if(xn){if(n===void 0)throw Error(He(407));n=n()}else{if(n=e(),xr===null)throw Error(He(349));Cc&30||PP(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,BN(jP.bind(null,r,s,t),[t]),r.flags|=2048,zf(9,RP.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=ra(),e=xr.identifierPrefix;if(xn){var n=qa,r=Ya;n=(r&~(1<<32-Is(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Of++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=fO++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},vO={readContext:gs,useCallback:BP,useContext:gs,useEffect:Cw,useImperativeHandle:zP,useInsertionEffect:UP,useLayoutEffect:OP,useMemo:VP,useReducer:qy,useRef:IP,useState:function(){return qy(Ff)},useDebugValue:kw,useDeferredValue:function(t){var e=xs();return HP(e,sr.memoizedState,t)},useTransition:function(){var t=qy(Ff)[0],e=xs().memoizedState;return[t,e]},useMutableSource:CP,useSyncExternalStore:kP,useId:GP,unstable_isNewReconciler:!1},yO={readContext:gs,useCallback:BP,useContext:gs,useEffect:Cw,useImperativeHandle:zP,useInsertionEffect:UP,useLayoutEffect:OP,useMemo:VP,useReducer:$y,useRef:IP,useState:function(){return $y(Ff)},useDebugValue:kw,useDeferredValue:function(t){var e=xs();return sr===null?e.memoizedState=t:HP(e,sr.memoizedState,t)},useTransition:function(){var t=$y(Ff)[0],e=xs().memoizedState;return[t,e]},useMutableSource:CP,useSyncExternalStore:kP,useId:GP,unstable_isNewReconciler:!1};function Cs(t,e){if(t&&t.defaultProps){e=kn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function r2(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:kn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Rx={isMounted:function(t){return(t=t._reactInternals)?Uc(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ci(),i=el(t),s=Ka(r,i);s.payload=e,n!=null&&(s.callback=n),e=Jo(t,s,i),e!==null&&(Us(e,t,i,r),l0(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ci(),i=el(t),s=Ka(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Jo(t,s,i),e!==null&&(Us(e,t,i,r),l0(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ci(),r=el(t),i=Ka(n,r);i.tag=2,e!=null&&(i.callback=e),e=Jo(t,i,r),e!==null&&(Us(e,t,r,n),l0(e,t,r))}};function VN(t,e,n,r,i,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,a):e.prototype&&e.prototype.isPureReactComponent?!Rf(n,r)||!Rf(i,s):!0}function qP(t,e,n){var r=!1,i=ll,s=e.contextType;return typeof s=="object"&&s!==null?s=gs(s):(i=Ai(e)?Tc:Xr.current,r=e.contextTypes,s=(r=r!=null)?vd(t,i):ll),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Rx,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function HN(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Rx.enqueueReplaceState(e,e.state,null)}function i2(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},ww(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=gs(s):(s=Ai(e)?Tc:Xr.current,i.context=vd(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(r2(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Rx.enqueueReplaceState(i,i.state,null),X0(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function wd(t,e){try{var n="",r=e;do n+=Y5(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Zy(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function s2(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var bO=typeof WeakMap=="function"?WeakMap:Map;function $P(t,e,n){n=Ka(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){K0||(K0=!0,m2=r),s2(t,e)},n}function ZP(t,e,n){n=Ka(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){s2(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){s2(t,e),typeof r!="function"&&(Qo===null?Qo=new Set([this]):Qo.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function GN(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new bO;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=LO.bind(null,t,e,n),e.then(t,t))}function WN(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function XN(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ka(-1,1),e.tag=2,Jo(n,e,1))),n.lanes|=1),t)}var _O=co.ReactCurrentOwner,Ei=!1;function si(t,e,n,r){e.child=t===null?EP(e,null,n,r):bd(e,t.child,n,r)}function YN(t,e,n,r,i){n=n.render;var s=e.ref;return dd(e,i),r=Tw(t,e,n,r,s,i),n=Aw(),t!==null&&!Ei?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,no(t,e,i)):(xn&&n&&mw(e),e.flags|=1,si(t,e,r,i),e.child)}function qN(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Ow(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,KP(t,e,s,r,i)):(t=p0(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:Rf,n(a,r)&&t.ref===e.ref)return no(t,e,i)}return e.flags|=1,t=tl(s,r),t.ref=e.ref,t.return=e,e.child=t}function KP(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Rf(s,r)&&t.ref===e.ref)if(Ei=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Ei=!0);else return e.lanes=t.lanes,no(t,e,i)}return a2(t,e,n,r,i)}function JP(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ln(qu,Hi),Hi|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ln(qu,Hi),Hi|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ln(qu,Hi),Hi|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,ln(qu,Hi),Hi|=r;return si(t,e,i,n),e.child}function QP(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function a2(t,e,n,r,i){var s=Ai(n)?Tc:Xr.current;return s=vd(e,s),dd(e,i),n=Tw(t,e,n,r,s,i),r=Aw(),t!==null&&!Ei?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,no(t,e,i)):(xn&&r&&mw(e),e.flags|=1,si(t,e,n,i),e.child)}function $N(t,e,n,r,i){if(Ai(n)){var s=!0;B0(e)}else s=!1;if(dd(e,i),e.stateNode===null)d0(t,e),qP(e,n,r),i2(e,n,r,i),r=!0;else if(t===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var c=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=gs(u):(u=Ai(n)?Tc:Xr.current,u=vd(e,u));var d=n.getDerivedStateFromProps,f=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||c!==u)&&HN(e,a,r,u),Bo=!1;var m=e.memoizedState;a.state=m,X0(e,r,a,i),c=e.memoizedState,l!==r||m!==c||Ti.current||Bo?(typeof d=="function"&&(r2(e,n,d,r),c=e.memoizedState),(l=Bo||VN(e,n,l,r,m,c,u))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),a.props=r,a.state=c,a.context=u,r=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,TP(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:Cs(e.type,l),a.props=u,f=e.pendingProps,m=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=gs(c):(c=Ai(n)?Tc:Xr.current,c=vd(e,c));var g=n.getDerivedStateFromProps;(d=typeof g=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==f||m!==c)&&HN(e,a,r,c),Bo=!1,m=e.memoizedState,a.state=m,X0(e,r,a,i);var v=e.memoizedState;l!==f||m!==v||Ti.current||Bo?(typeof g=="function"&&(r2(e,n,g,r),v=e.memoizedState),(u=Bo||VN(e,n,u,r,m,v,c)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,v,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,v,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),a.props=r,a.state=v,a.context=c,r=u):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return o2(t,e,n,r,s,i)}function o2(t,e,n,r,i,s){QP(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return i&&LN(e,n,!1),no(t,e,s);r=e.stateNode,_O.current=e;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=bd(e,t.child,null,s),e.child=bd(e,null,l,s)):si(t,e,l,s),e.memoizedState=r.state,i&&LN(e,n,!0),e.child}function eR(t){var e=t.stateNode;e.pendingContext?jN(t,e.pendingContext,e.pendingContext!==e.context):e.context&&jN(t,e.context,!1),Sw(t,e.containerInfo)}function ZN(t,e,n,r,i){return yd(),xw(i),e.flags|=256,si(t,e,n,r),e.child}var l2={dehydrated:null,treeContext:null,retryLane:0};function c2(t){return{baseLanes:t,cachePool:null,transitions:null}}function tR(t,e,n){var r=e.pendingProps,i=Sn.current,s=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),ln(Sn,i&1),t===null)return t2(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,s?(r=e.mode,s=e.child,a={mode:"hidden",children:a},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=Dx(a,r,0,null),t=vc(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=c2(n),e.memoizedState=l2,t):Pw(e,a));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return wO(t,e,a,r,l,i,n);if(s){s=r.fallback,a=e.mode,i=t.child,l=i.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=tl(i,c),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=tl(l,s):(s=vc(s,a,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,a=t.child.memoizedState,a=a===null?c2(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=t.childLanes&~n,e.memoizedState=l2,r}return s=t.child,t=s.sibling,r=tl(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Pw(t,e){return e=Dx({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Gm(t,e,n,r){return r!==null&&xw(r),bd(e,t.child,null,n),t=Pw(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function wO(t,e,n,r,i,s,a){if(n)return e.flags&256?(e.flags&=-257,r=Zy(Error(He(422))),Gm(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Dx({mode:"visible",children:r.children},i,0,null),s=vc(s,i,a,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&bd(e,t.child,null,a),e.child.memoizedState=c2(a),e.memoizedState=l2,s);if(!(e.mode&1))return Gm(t,e,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(He(419)),r=Zy(s,r,void 0),Gm(t,e,a,r)}if(l=(a&t.childLanes)!==0,Ei||l){if(r=xr,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,to(t,i),Us(r,t,i,-1))}return Uw(),r=Zy(Error(He(421))),Gm(t,e,a,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=DO.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Xi=Ko(i.nextSibling),Yi=e,xn=!0,Rs=null,t!==null&&(us[ds++]=Ya,us[ds++]=qa,us[ds++]=Ac,Ya=t.id,qa=t.overflow,Ac=e),e=Pw(e,r.children),e.flags|=4096,e)}function KN(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),n2(t.return,e,n)}function Ky(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function nR(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(si(t,e,r.children,n),r=Sn.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&KN(t,n,e);else if(t.tag===19)KN(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ln(Sn,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Y0(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Ky(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Y0(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Ky(e,!0,n,null,s);break;case"together":Ky(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function d0(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function no(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),kc|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(He(153));if(e.child!==null){for(t=e.child,n=tl(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=tl(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function SO(t,e,n){switch(e.tag){case 3:eR(e),yd();break;case 5:AP(e);break;case 1:Ai(e.type)&&B0(e);break;case 4:Sw(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;ln(G0,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ln(Sn,Sn.current&1),e.flags|=128,null):n&e.child.childLanes?tR(t,e,n):(ln(Sn,Sn.current&1),t=no(t,e,n),t!==null?t.sibling:null);ln(Sn,Sn.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return nR(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ln(Sn,Sn.current),r)break;return null;case 22:case 23:return e.lanes=0,JP(t,e,n)}return no(t,e,n)}var rR,u2,iR,sR;rR=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};u2=function(){};iR=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,uc(oa.current);var s=null;switch(n){case"input":i=Rb(t,i),r=Rb(t,r),s=[];break;case"select":i=kn({},i,{value:void 0}),r=kn({},r,{value:void 0}),s=[];break;case"textarea":i=Db(t,i),r=Db(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=F0)}Ub(n,r);var a;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var l=i[u];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ef.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var c=r[u];if(l=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(s||(s=[]),s.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(s=s||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ef.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&fn("scroll",t),s||l===c||(s=[])):(s=s||[]).push(u,c))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};sR=function(t,e,n,r){n!==r&&(e.flags|=4)};function Eh(t,e){if(!xn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Dr(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function MO(t,e,n){var r=e.pendingProps;switch(gw(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dr(e),null;case 1:return Ai(e.type)&&z0(),Dr(e),null;case 3:return r=e.stateNode,_d(),pn(Ti),pn(Xr),Ew(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Vm(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Rs!==null&&(v2(Rs),Rs=null))),u2(t,e),Dr(e),null;case 5:Mw(e);var i=uc(Uf.current);if(n=e.type,t!==null&&e.stateNode!=null)iR(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(He(166));return Dr(e),null}if(t=uc(oa.current),Vm(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[sa]=e,r[Df]=s,t=(e.mode&1)!==0,n){case"dialog":fn("cancel",r),fn("close",r);break;case"iframe":case"object":case"embed":fn("load",r);break;case"video":case"audio":for(i=0;i<Qh.length;i++)fn(Qh[i],r);break;case"source":fn("error",r);break;case"img":case"image":case"link":fn("error",r),fn("load",r);break;case"details":fn("toggle",r);break;case"input":aN(r,s),fn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},fn("invalid",r);break;case"textarea":lN(r,s),fn("invalid",r)}Ub(n,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var l=s[a];a==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&Bm(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&Bm(r.textContent,l,t),i=["children",""+l]):Ef.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&fn("scroll",r)}switch(n){case"input":jm(r),oN(r,s,!0);break;case"textarea":jm(r),cN(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=F0)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=jk(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[sa]=e,t[Df]=r,rR(t,e,!1,!1),e.stateNode=t;e:{switch(a=Ob(n,r),n){case"dialog":fn("cancel",t),fn("close",t),i=r;break;case"iframe":case"object":case"embed":fn("load",t),i=r;break;case"video":case"audio":for(i=0;i<Qh.length;i++)fn(Qh[i],t);i=r;break;case"source":fn("error",t),i=r;break;case"img":case"image":case"link":fn("error",t),fn("load",t),i=r;break;case"details":fn("toggle",t),i=r;break;case"input":aN(t,r),i=Rb(t,r),fn("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=kn({},r,{value:void 0}),fn("invalid",t);break;case"textarea":lN(t,r),i=Db(t,r),fn("invalid",t);break;default:i=r}Ub(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var c=l[s];s==="style"?Ik(t,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Lk(t,c)):s==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Nf(t,c):typeof c=="number"&&Nf(t,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ef.hasOwnProperty(s)?c!=null&&s==="onScroll"&&fn("scroll",t):c!=null&&tw(t,s,c,a))}switch(n){case"input":jm(t),oN(t,r,!1);break;case"textarea":jm(t),cN(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ol(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?od(t,!!r.multiple,s,!1):r.defaultValue!=null&&od(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=F0)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Dr(e),null;case 6:if(t&&e.stateNode!=null)sR(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(He(166));if(n=uc(Uf.current),uc(oa.current),Vm(e)){if(r=e.stateNode,n=e.memoizedProps,r[sa]=e,(s=r.nodeValue!==n)&&(t=Yi,t!==null))switch(t.tag){case 3:Bm(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Bm(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[sa]=e,e.stateNode=r}return Dr(e),null;case 13:if(pn(Sn),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(xn&&Xi!==null&&e.mode&1&&!(e.flags&128))SP(),yd(),e.flags|=98560,s=!1;else if(s=Vm(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(He(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(He(317));s[sa]=e}else yd(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Dr(e),s=!1}else Rs!==null&&(v2(Rs),Rs=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Sn.current&1?or===0&&(or=3):Uw())),e.updateQueue!==null&&(e.flags|=4),Dr(e),null);case 4:return _d(),u2(t,e),t===null&&jf(e.stateNode.containerInfo),Dr(e),null;case 10:return bw(e.type._context),Dr(e),null;case 17:return Ai(e.type)&&z0(),Dr(e),null;case 19:if(pn(Sn),s=e.memoizedState,s===null)return Dr(e),null;if(r=(e.flags&128)!==0,a=s.rendering,a===null)if(r)Eh(s,!1);else{if(or!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Y0(t),a!==null){for(e.flags|=128,Eh(s,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,t=a.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ln(Sn,Sn.current&1|2),e.child}t=t.sibling}s.tail!==null&&Xn()>Sd&&(e.flags|=128,r=!0,Eh(s,!1),e.lanes=4194304)}else{if(!r)if(t=Y0(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Eh(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!xn)return Dr(e),null}else 2*Xn()-s.renderingStartTime>Sd&&n!==1073741824&&(e.flags|=128,r=!0,Eh(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(n=s.last,n!==null?n.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Xn(),e.sibling=null,n=Sn.current,ln(Sn,r?n&1|2:n&1),e):(Dr(e),null);case 22:case 23:return Iw(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Hi&1073741824&&(Dr(e),e.subtreeFlags&6&&(e.flags|=8192)):Dr(e),null;case 24:return null;case 25:return null}throw Error(He(156,e.tag))}function EO(t,e){switch(gw(e),e.tag){case 1:return Ai(e.type)&&z0(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return _d(),pn(Ti),pn(Xr),Ew(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Mw(e),null;case 13:if(pn(Sn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(He(340));yd()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return pn(Sn),null;case 4:return _d(),null;case 10:return bw(e.type._context),null;case 22:case 23:return Iw(),null;case 24:return null;default:return null}}var Wm=!1,zr=!1,NO=typeof WeakSet=="function"?WeakSet:Set,it=null;function Yu(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Un(t,e,r)}else n.current=null}function d2(t,e,n){try{n()}catch(r){Un(t,e,r)}}var JN=!1;function TO(t,e){if(qb=I0,t=uP(),pw(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,l=-1,c=-1,u=0,d=0,f=t,m=null;t:for(;;){for(var g;f!==n||i!==0&&f.nodeType!==3||(l=a+i),f!==s||r!==0&&f.nodeType!==3||(c=a+r),f.nodeType===3&&(a+=f.nodeValue.length),(g=f.firstChild)!==null;)m=f,f=g;for(;;){if(f===t)break t;if(m===n&&++u===i&&(l=a),m===s&&++d===r&&(c=a),(g=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=g}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for($b={focusedElem:t,selectionRange:n},I0=!1,it=e;it!==null;)if(e=it,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,it=t;else for(;it!==null;){e=it;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var _=v.memoizedProps,b=v.memoizedState,x=e.stateNode,y=x.getSnapshotBeforeUpdate(e.elementType===e.type?_:Cs(e.type,_),b);x.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(He(163))}}catch(E){Un(e,e.return,E)}if(t=e.sibling,t!==null){t.return=e.return,it=t;break}it=e.return}return v=JN,JN=!1,v}function cf(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&d2(e,n,s)}i=i.next}while(i!==r)}}function jx(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function h2(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function aR(t){var e=t.alternate;e!==null&&(t.alternate=null,aR(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[sa],delete e[Df],delete e[Jb],delete e[cO],delete e[uO])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function oR(t){return t.tag===5||t.tag===3||t.tag===4}function QN(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||oR(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function f2(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=F0));else if(r!==4&&(t=t.child,t!==null))for(f2(t,e,n),t=t.sibling;t!==null;)f2(t,e,n),t=t.sibling}function p2(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(p2(t,e,n),t=t.sibling;t!==null;)p2(t,e,n),t=t.sibling}var Mr=null,Ps=!1;function To(t,e,n){for(n=n.child;n!==null;)lR(t,e,n),n=n.sibling}function lR(t,e,n){if(aa&&typeof aa.onCommitFiberUnmount=="function")try{aa.onCommitFiberUnmount(Ex,n)}catch{}switch(n.tag){case 5:zr||Yu(n,e);case 6:var r=Mr,i=Ps;Mr=null,To(t,e,n),Mr=r,Ps=i,Mr!==null&&(Ps?(t=Mr,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Mr.removeChild(n.stateNode));break;case 18:Mr!==null&&(Ps?(t=Mr,n=n.stateNode,t.nodeType===8?Gy(t.parentNode,n):t.nodeType===1&&Gy(t,n),kf(t)):Gy(Mr,n.stateNode));break;case 4:r=Mr,i=Ps,Mr=n.stateNode.containerInfo,Ps=!0,To(t,e,n),Mr=r,Ps=i;break;case 0:case 11:case 14:case 15:if(!zr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&d2(n,e,a),i=i.next}while(i!==r)}To(t,e,n);break;case 1:if(!zr&&(Yu(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Un(n,e,l)}To(t,e,n);break;case 21:To(t,e,n);break;case 22:n.mode&1?(zr=(r=zr)||n.memoizedState!==null,To(t,e,n),zr=r):To(t,e,n);break;default:To(t,e,n)}}function eT(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new NO),e.forEach(function(r){var i=IO.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Ss(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:Mr=l.stateNode,Ps=!1;break e;case 3:Mr=l.stateNode.containerInfo,Ps=!0;break e;case 4:Mr=l.stateNode.containerInfo,Ps=!0;break e}l=l.return}if(Mr===null)throw Error(He(160));lR(s,a,i),Mr=null,Ps=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(u){Un(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)cR(e,t),e=e.sibling}function cR(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ss(e,t),ta(t),r&4){try{cf(3,t,t.return),jx(3,t)}catch(_){Un(t,t.return,_)}try{cf(5,t,t.return)}catch(_){Un(t,t.return,_)}}break;case 1:Ss(e,t),ta(t),r&512&&n!==null&&Yu(n,n.return);break;case 5:if(Ss(e,t),ta(t),r&512&&n!==null&&Yu(n,n.return),t.flags&32){var i=t.stateNode;try{Nf(i,"")}catch(_){Un(t,t.return,_)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,a=n!==null?n.memoizedProps:s,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&Pk(i,s),Ob(l,a);var u=Ob(l,s);for(a=0;a<c.length;a+=2){var d=c[a],f=c[a+1];d==="style"?Ik(i,f):d==="dangerouslySetInnerHTML"?Lk(i,f):d==="children"?Nf(i,f):tw(i,d,f,u)}switch(l){case"input":jb(i,s);break;case"textarea":Rk(i,s);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?od(i,!!s.multiple,g,!1):m!==!!s.multiple&&(s.defaultValue!=null?od(i,!!s.multiple,s.defaultValue,!0):od(i,!!s.multiple,s.multiple?[]:"",!1))}i[Df]=s}catch(_){Un(t,t.return,_)}}break;case 6:if(Ss(e,t),ta(t),r&4){if(t.stateNode===null)throw Error(He(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(_){Un(t,t.return,_)}}break;case 3:if(Ss(e,t),ta(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{kf(e.containerInfo)}catch(_){Un(t,t.return,_)}break;case 4:Ss(e,t),ta(t);break;case 13:Ss(e,t),ta(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Lw=Xn())),r&4&&eT(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(zr=(u=zr)||d,Ss(e,t),zr=u):Ss(e,t),ta(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(it=t,d=t.child;d!==null;){for(f=it=d;it!==null;){switch(m=it,g=m.child,m.tag){case 0:case 11:case 14:case 15:cf(4,m,m.return);break;case 1:Yu(m,m.return);var v=m.stateNode;if(typeof v.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(_){Un(r,n,_)}}break;case 5:Yu(m,m.return);break;case 22:if(m.memoizedState!==null){nT(f);continue}}g!==null?(g.return=m,it=g):nT(f)}d=d.sibling}e:for(d=null,f=t;;){if(f.tag===5){if(d===null){d=f;try{i=f.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=f.stateNode,c=f.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Dk("display",a))}catch(_){Un(t,t.return,_)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(_){Un(t,t.return,_)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Ss(e,t),ta(t),r&4&&eT(t);break;case 21:break;default:Ss(e,t),ta(t)}}function ta(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(oR(n)){var r=n;break e}n=n.return}throw Error(He(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Nf(i,""),r.flags&=-33);var s=QN(t);p2(t,s,i);break;case 3:case 4:var a=r.stateNode.containerInfo,l=QN(t);f2(t,l,a);break;default:throw Error(He(161))}}catch(c){Un(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function AO(t,e,n){it=t,uR(t)}function uR(t,e,n){for(var r=(t.mode&1)!==0;it!==null;){var i=it,s=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||Wm;if(!a){var l=i.alternate,c=l!==null&&l.memoizedState!==null||zr;l=Wm;var u=zr;if(Wm=a,(zr=c)&&!u)for(it=i;it!==null;)a=it,c=a.child,a.tag===22&&a.memoizedState!==null?rT(i):c!==null?(c.return=a,it=c):rT(i);for(;s!==null;)it=s,uR(s),s=s.sibling;it=i,Wm=l,zr=u}tT(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,it=s):tT(t)}}function tT(t){for(;it!==null;){var e=it;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:zr||jx(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!zr)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Cs(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&FN(e,s,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}FN(e,a,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&kf(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(He(163))}zr||e.flags&512&&h2(e)}catch(m){Un(e,e.return,m)}}if(e===t){it=null;break}if(n=e.sibling,n!==null){n.return=e.return,it=n;break}it=e.return}}function nT(t){for(;it!==null;){var e=it;if(e===t){it=null;break}var n=e.sibling;if(n!==null){n.return=e.return,it=n;break}it=e.return}}function rT(t){for(;it!==null;){var e=it;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{jx(4,e)}catch(c){Un(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(c){Un(e,i,c)}}var s=e.return;try{h2(e)}catch(c){Un(e,s,c)}break;case 5:var a=e.return;try{h2(e)}catch(c){Un(e,a,c)}}}catch(c){Un(e,e.return,c)}if(e===t){it=null;break}var l=e.sibling;if(l!==null){l.return=e.return,it=l;break}it=e.return}}var CO=Math.ceil,Z0=co.ReactCurrentDispatcher,Rw=co.ReactCurrentOwner,ps=co.ReactCurrentBatchConfig,Ht=0,xr=null,er=null,Nr=0,Hi=0,qu=gl(0),or=0,Bf=null,kc=0,Lx=0,jw=0,uf=null,wi=null,Lw=0,Sd=1/0,Ha=null,K0=!1,m2=null,Qo=null,Xm=!1,Xo=null,J0=0,df=0,g2=null,h0=-1,f0=0;function ci(){return Ht&6?Xn():h0!==-1?h0:h0=Xn()}function el(t){return t.mode&1?Ht&2&&Nr!==0?Nr&-Nr:hO.transition!==null?(f0===0&&(f0=qk()),f0):(t=Qt,t!==0||(t=window.event,t=t===void 0?16:tP(t.type)),t):1}function Us(t,e,n,r){if(50<df)throw df=0,g2=null,Error(He(185));yp(t,n,r),(!(Ht&2)||t!==xr)&&(t===xr&&(!(Ht&2)&&(Lx|=n),or===4&&Ho(t,Nr)),Ci(t,r),n===1&&Ht===0&&!(e.mode&1)&&(Sd=Xn()+500,kx&&xl()))}function Ci(t,e){var n=t.callbackNode;hU(t,e);var r=D0(t,t===xr?Nr:0);if(r===0)n!==null&&hN(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&hN(n),e===1)t.tag===0?dO(iT.bind(null,t)):bP(iT.bind(null,t)),oO(function(){!(Ht&6)&&xl()}),n=null;else{switch($k(r)){case 1:n=aw;break;case 4:n=Xk;break;case 16:n=L0;break;case 536870912:n=Yk;break;default:n=L0}n=vR(n,dR.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function dR(t,e){if(h0=-1,f0=0,Ht&6)throw Error(He(327));var n=t.callbackNode;if(hd()&&t.callbackNode!==n)return null;var r=D0(t,t===xr?Nr:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Q0(t,r);else{e=r;var i=Ht;Ht|=2;var s=fR();(xr!==t||Nr!==e)&&(Ha=null,Sd=Xn()+500,xc(t,e));do try{RO();break}catch(l){hR(t,l)}while(!0);yw(),Z0.current=s,Ht=i,er!==null?e=0:(xr=null,Nr=0,e=or)}if(e!==0){if(e===2&&(i=Hb(t),i!==0&&(r=i,e=x2(t,i))),e===1)throw n=Bf,xc(t,0),Ho(t,r),Ci(t,Xn()),n;if(e===6)Ho(t,r);else{if(i=t.current.alternate,!(r&30)&&!kO(i)&&(e=Q0(t,r),e===2&&(s=Hb(t),s!==0&&(r=s,e=x2(t,s))),e===1))throw n=Bf,xc(t,0),Ho(t,r),Ci(t,Xn()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(He(345));case 2:Jl(t,wi,Ha);break;case 3:if(Ho(t,r),(r&130023424)===r&&(e=Lw+500-Xn(),10<e)){if(D0(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){ci(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Kb(Jl.bind(null,t,wi,Ha),e);break}Jl(t,wi,Ha);break;case 4:if(Ho(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var a=31-Is(r);s=1<<a,a=e[a],a>i&&(i=a),r&=~s}if(r=i,r=Xn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*CO(r/1960))-r,10<r){t.timeoutHandle=Kb(Jl.bind(null,t,wi,Ha),r);break}Jl(t,wi,Ha);break;case 5:Jl(t,wi,Ha);break;default:throw Error(He(329))}}}return Ci(t,Xn()),t.callbackNode===n?dR.bind(null,t):null}function x2(t,e){var n=uf;return t.current.memoizedState.isDehydrated&&(xc(t,e).flags|=256),t=Q0(t,e),t!==2&&(e=wi,wi=n,e!==null&&v2(e)),t}function v2(t){wi===null?wi=t:wi.push.apply(wi,t)}function kO(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Fs(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ho(t,e){for(e&=~jw,e&=~Lx,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Is(e),r=1<<n;t[n]=-1,e&=~r}}function iT(t){if(Ht&6)throw Error(He(327));hd();var e=D0(t,0);if(!(e&1))return Ci(t,Xn()),null;var n=Q0(t,e);if(t.tag!==0&&n===2){var r=Hb(t);r!==0&&(e=r,n=x2(t,r))}if(n===1)throw n=Bf,xc(t,0),Ho(t,e),Ci(t,Xn()),n;if(n===6)throw Error(He(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Jl(t,wi,Ha),Ci(t,Xn()),null}function Dw(t,e){var n=Ht;Ht|=1;try{return t(e)}finally{Ht=n,Ht===0&&(Sd=Xn()+500,kx&&xl())}}function Pc(t){Xo!==null&&Xo.tag===0&&!(Ht&6)&&hd();var e=Ht;Ht|=1;var n=ps.transition,r=Qt;try{if(ps.transition=null,Qt=1,t)return t()}finally{Qt=r,ps.transition=n,Ht=e,!(Ht&6)&&xl()}}function Iw(){Hi=qu.current,pn(qu)}function xc(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,aO(n)),er!==null)for(n=er.return;n!==null;){var r=n;switch(gw(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&z0();break;case 3:_d(),pn(Ti),pn(Xr),Ew();break;case 5:Mw(r);break;case 4:_d();break;case 13:pn(Sn);break;case 19:pn(Sn);break;case 10:bw(r.type._context);break;case 22:case 23:Iw()}n=n.return}if(xr=t,er=t=tl(t.current,null),Nr=Hi=e,or=0,Bf=null,jw=Lx=kc=0,wi=uf=null,cc!==null){for(e=0;e<cc.length;e++)if(n=cc[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var a=s.next;s.next=i,r.next=a}n.pending=r}cc=null}return t}function hR(t,e){do{var n=er;try{if(yw(),c0.current=$0,q0){for(var r=Tn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}q0=!1}if(Cc=0,gr=sr=Tn=null,lf=!1,Of=0,Rw.current=null,n===null||n.return===null){or=1,Bf=e,er=null;break}e:{var s=t,a=n.return,l=n,c=e;if(e=Nr,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var g=WN(a);if(g!==null){g.flags&=-257,XN(g,a,l,s,e),g.mode&1&&GN(s,u,e),e=g,c=u;var v=e.updateQueue;if(v===null){var _=new Set;_.add(c),e.updateQueue=_}else v.add(c);break e}else{if(!(e&1)){GN(s,u,e),Uw();break e}c=Error(He(426))}}else if(xn&&l.mode&1){var b=WN(a);if(b!==null){!(b.flags&65536)&&(b.flags|=256),XN(b,a,l,s,e),xw(wd(c,l));break e}}s=c=wd(c,l),or!==4&&(or=2),uf===null?uf=[s]:uf.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var x=$P(s,c,e);ON(s,x);break e;case 1:l=c;var y=s.type,S=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Qo===null||!Qo.has(S)))){s.flags|=65536,e&=-e,s.lanes|=e;var E=ZP(s,l,e);ON(s,E);break e}}s=s.return}while(s!==null)}mR(n)}catch(A){e=A,er===n&&n!==null&&(er=n=n.return);continue}break}while(!0)}function fR(){var t=Z0.current;return Z0.current=$0,t===null?$0:t}function Uw(){(or===0||or===3||or===2)&&(or=4),xr===null||!(kc&268435455)&&!(Lx&268435455)||Ho(xr,Nr)}function Q0(t,e){var n=Ht;Ht|=2;var r=fR();(xr!==t||Nr!==e)&&(Ha=null,xc(t,e));do try{PO();break}catch(i){hR(t,i)}while(!0);if(yw(),Ht=n,Z0.current=r,er!==null)throw Error(He(261));return xr=null,Nr=0,or}function PO(){for(;er!==null;)pR(er)}function RO(){for(;er!==null&&!rU();)pR(er)}function pR(t){var e=xR(t.alternate,t,Hi);t.memoizedProps=t.pendingProps,e===null?mR(t):er=e,Rw.current=null}function mR(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=EO(n,e),n!==null){n.flags&=32767,er=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{or=6,er=null;return}}else if(n=MO(n,e,Hi),n!==null){er=n;return}if(e=e.sibling,e!==null){er=e;return}er=e=t}while(e!==null);or===0&&(or=5)}function Jl(t,e,n){var r=Qt,i=ps.transition;try{ps.transition=null,Qt=1,jO(t,e,n,r)}finally{ps.transition=i,Qt=r}return null}function jO(t,e,n,r){do hd();while(Xo!==null);if(Ht&6)throw Error(He(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(He(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(fU(t,s),t===xr&&(er=xr=null,Nr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Xm||(Xm=!0,vR(L0,function(){return hd(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=ps.transition,ps.transition=null;var a=Qt;Qt=1;var l=Ht;Ht|=4,Rw.current=null,TO(t,n),cR(n,t),QU($b),I0=!!qb,$b=qb=null,t.current=n,AO(n),iU(),Ht=l,Qt=a,ps.transition=s}else t.current=n;if(Xm&&(Xm=!1,Xo=t,J0=i),s=t.pendingLanes,s===0&&(Qo=null),oU(n.stateNode),Ci(t,Xn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(K0)throw K0=!1,t=m2,m2=null,t;return J0&1&&t.tag!==0&&hd(),s=t.pendingLanes,s&1?t===g2?df++:(df=0,g2=t):df=0,xl(),null}function hd(){if(Xo!==null){var t=$k(J0),e=ps.transition,n=Qt;try{if(ps.transition=null,Qt=16>t?16:t,Xo===null)var r=!1;else{if(t=Xo,Xo=null,J0=0,Ht&6)throw Error(He(331));var i=Ht;for(Ht|=4,it=t.current;it!==null;){var s=it,a=s.child;if(it.flags&16){var l=s.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(it=u;it!==null;){var d=it;switch(d.tag){case 0:case 11:case 15:cf(8,d,s)}var f=d.child;if(f!==null)f.return=d,it=f;else for(;it!==null;){d=it;var m=d.sibling,g=d.return;if(aR(d),d===u){it=null;break}if(m!==null){m.return=g,it=m;break}it=g}}}var v=s.alternate;if(v!==null){var _=v.child;if(_!==null){v.child=null;do{var b=_.sibling;_.sibling=null,_=b}while(_!==null)}}it=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,it=a;else e:for(;it!==null;){if(s=it,s.flags&2048)switch(s.tag){case 0:case 11:case 15:cf(9,s,s.return)}var x=s.sibling;if(x!==null){x.return=s.return,it=x;break e}it=s.return}}var y=t.current;for(it=y;it!==null;){a=it;var S=a.child;if(a.subtreeFlags&2064&&S!==null)S.return=a,it=S;else e:for(a=y;it!==null;){if(l=it,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:jx(9,l)}}catch(A){Un(l,l.return,A)}if(l===a){it=null;break e}var E=l.sibling;if(E!==null){E.return=l.return,it=E;break e}it=l.return}}if(Ht=i,xl(),aa&&typeof aa.onPostCommitFiberRoot=="function")try{aa.onPostCommitFiberRoot(Ex,t)}catch{}r=!0}return r}finally{Qt=n,ps.transition=e}}return!1}function sT(t,e,n){e=wd(n,e),e=$P(t,e,1),t=Jo(t,e,1),e=ci(),t!==null&&(yp(t,1,e),Ci(t,e))}function Un(t,e,n){if(t.tag===3)sT(t,t,n);else for(;e!==null;){if(e.tag===3){sT(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Qo===null||!Qo.has(r))){t=wd(n,t),t=ZP(e,t,1),e=Jo(e,t,1),t=ci(),e!==null&&(yp(e,1,t),Ci(e,t));break}}e=e.return}}function LO(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=ci(),t.pingedLanes|=t.suspendedLanes&n,xr===t&&(Nr&n)===n&&(or===4||or===3&&(Nr&130023424)===Nr&&500>Xn()-Lw?xc(t,0):jw|=n),Ci(t,e)}function gR(t,e){e===0&&(t.mode&1?(e=Im,Im<<=1,!(Im&130023424)&&(Im=4194304)):e=1);var n=ci();t=to(t,e),t!==null&&(yp(t,e,n),Ci(t,n))}function DO(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),gR(t,n)}function IO(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(He(314))}r!==null&&r.delete(e),gR(t,n)}var xR;xR=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ti.current)Ei=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ei=!1,SO(t,e,n);Ei=!!(t.flags&131072)}else Ei=!1,xn&&e.flags&1048576&&_P(e,H0,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;d0(t,e),t=e.pendingProps;var i=vd(e,Xr.current);dd(e,n),i=Tw(null,e,r,t,i,n);var s=Aw();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ai(r)?(s=!0,B0(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,ww(e),i.updater=Rx,e.stateNode=i,i._reactInternals=e,i2(e,r,t,n),e=o2(null,e,r,!0,s,n)):(e.tag=0,xn&&s&&mw(e),si(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(d0(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=OO(r),t=Cs(r,t),i){case 0:e=a2(null,e,r,t,n);break e;case 1:e=$N(null,e,r,t,n);break e;case 11:e=YN(null,e,r,t,n);break e;case 14:e=qN(null,e,r,Cs(r.type,t),n);break e}throw Error(He(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Cs(r,i),a2(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Cs(r,i),$N(t,e,r,i,n);case 3:e:{if(eR(e),t===null)throw Error(He(387));r=e.pendingProps,s=e.memoizedState,i=s.element,TP(t,e),X0(e,r,null,n);var a=e.memoizedState;if(r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=wd(Error(He(423)),e),e=ZN(t,e,r,n,i);break e}else if(r!==i){i=wd(Error(He(424)),e),e=ZN(t,e,r,n,i);break e}else for(Xi=Ko(e.stateNode.containerInfo.firstChild),Yi=e,xn=!0,Rs=null,n=EP(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(yd(),r===i){e=no(t,e,n);break e}si(t,e,r,n)}e=e.child}return e;case 5:return AP(e),t===null&&t2(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,a=i.children,Zb(r,i)?a=null:s!==null&&Zb(r,s)&&(e.flags|=32),QP(t,e),si(t,e,a,n),e.child;case 6:return t===null&&t2(e),null;case 13:return tR(t,e,n);case 4:return Sw(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=bd(e,null,r,n):si(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Cs(r,i),YN(t,e,r,i,n);case 7:return si(t,e,e.pendingProps,n),e.child;case 8:return si(t,e,e.pendingProps.children,n),e.child;case 12:return si(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,a=i.value,ln(G0,r._currentValue),r._currentValue=a,s!==null)if(Fs(s.value,a)){if(s.children===i.children&&!Ti.current){e=no(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){a=s.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(s.tag===1){c=Ka(-1,n&-n),c.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}s.lanes|=n,c=s.alternate,c!==null&&(c.lanes|=n),n2(s.return,n,e),l.lanes|=n;break}c=c.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(He(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),n2(a,n,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}si(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,dd(e,n),i=gs(i),r=r(i),e.flags|=1,si(t,e,r,n),e.child;case 14:return r=e.type,i=Cs(r,e.pendingProps),i=Cs(r.type,i),qN(t,e,r,i,n);case 15:return KP(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Cs(r,i),d0(t,e),e.tag=1,Ai(r)?(t=!0,B0(e)):t=!1,dd(e,n),qP(e,r,i),i2(e,r,i,n),o2(null,e,r,!0,t,n);case 19:return nR(t,e,n);case 22:return JP(t,e,n)}throw Error(He(156,e.tag))};function vR(t,e){return Wk(t,e)}function UO(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hs(t,e,n,r){return new UO(t,e,n,r)}function Ow(t){return t=t.prototype,!(!t||!t.isReactComponent)}function OO(t){if(typeof t=="function")return Ow(t)?1:0;if(t!=null){if(t=t.$$typeof,t===rw)return 11;if(t===iw)return 14}return 2}function tl(t,e){var n=t.alternate;return n===null?(n=hs(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function p0(t,e,n,r,i,s){var a=2;if(r=t,typeof t=="function")Ow(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Ou:return vc(n.children,i,s,e);case nw:a=8,i|=8;break;case Ab:return t=hs(12,n,e,i|2),t.elementType=Ab,t.lanes=s,t;case Cb:return t=hs(13,n,e,i),t.elementType=Cb,t.lanes=s,t;case kb:return t=hs(19,n,e,i),t.elementType=kb,t.lanes=s,t;case Ak:return Dx(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Nk:a=10;break e;case Tk:a=9;break e;case rw:a=11;break e;case iw:a=14;break e;case zo:a=16,r=null;break e}throw Error(He(130,t==null?t:typeof t,""))}return e=hs(a,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function vc(t,e,n,r){return t=hs(7,t,r,e),t.lanes=n,t}function Dx(t,e,n,r){return t=hs(22,t,r,e),t.elementType=Ak,t.lanes=n,t.stateNode={isHidden:!1},t}function Jy(t,e,n){return t=hs(6,t,null,e),t.lanes=n,t}function Qy(t,e,n){return e=hs(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function FO(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=jy(0),this.expirationTimes=jy(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jy(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Fw(t,e,n,r,i,s,a,l,c){return t=new FO(t,e,n,l,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=hs(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ww(s),t}function zO(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Uu,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function yR(t){if(!t)return ll;t=t._reactInternals;e:{if(Uc(t)!==t||t.tag!==1)throw Error(He(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ai(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(He(171))}if(t.tag===1){var n=t.type;if(Ai(n))return yP(t,n,e)}return e}function bR(t,e,n,r,i,s,a,l,c){return t=Fw(n,r,!0,t,i,s,a,l,c),t.context=yR(null),n=t.current,r=ci(),i=el(n),s=Ka(r,i),s.callback=e??null,Jo(n,s,i),t.current.lanes=i,yp(t,i,r),Ci(t,r),t}function Ix(t,e,n,r){var i=e.current,s=ci(),a=el(i);return n=yR(n),e.context===null?e.context=n:e.pendingContext=n,e=Ka(s,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Jo(i,e,a),t!==null&&(Us(t,i,a,s),l0(t,i,a)),a}function ex(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function aT(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function zw(t,e){aT(t,e),(t=t.alternate)&&aT(t,e)}function BO(){return null}var _R=typeof reportError=="function"?reportError:function(t){console.error(t)};function Bw(t){this._internalRoot=t}Ux.prototype.render=Bw.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(He(409));Ix(t,e,null,null)};Ux.prototype.unmount=Bw.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Pc(function(){Ix(null,t,null,null)}),e[eo]=null}};function Ux(t){this._internalRoot=t}Ux.prototype.unstable_scheduleHydration=function(t){if(t){var e=Jk();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Vo.length&&e!==0&&e<Vo[n].priority;n++);Vo.splice(n,0,t),n===0&&eP(t)}};function Vw(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ox(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function oT(){}function VO(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=ex(a);s.call(u)}}var a=bR(e,r,t,0,null,!1,!1,"",oT);return t._reactRootContainer=a,t[eo]=a.current,jf(t.nodeType===8?t.parentNode:t),Pc(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var u=ex(c);l.call(u)}}var c=Fw(t,0,!1,null,null,!1,!1,"",oT);return t._reactRootContainer=c,t[eo]=c.current,jf(t.nodeType===8?t.parentNode:t),Pc(function(){Ix(e,c,n,r)}),c}function Fx(t,e,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var l=i;i=function(){var c=ex(a);l.call(c)}}Ix(e,a,t,i)}else a=VO(n,e,t,i,r);return ex(a)}Zk=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Jh(e.pendingLanes);n!==0&&(ow(e,n|1),Ci(e,Xn()),!(Ht&6)&&(Sd=Xn()+500,xl()))}break;case 13:Pc(function(){var r=to(t,1);if(r!==null){var i=ci();Us(r,t,1,i)}}),zw(t,1)}};lw=function(t){if(t.tag===13){var e=to(t,134217728);if(e!==null){var n=ci();Us(e,t,134217728,n)}zw(t,134217728)}};Kk=function(t){if(t.tag===13){var e=el(t),n=to(t,e);if(n!==null){var r=ci();Us(n,t,e,r)}zw(t,e)}};Jk=function(){return Qt};Qk=function(t,e){var n=Qt;try{return Qt=t,e()}finally{Qt=n}};zb=function(t,e,n){switch(e){case"input":if(jb(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Cx(r);if(!i)throw Error(He(90));kk(r),jb(r,i)}}}break;case"textarea":Rk(t,n);break;case"select":e=n.value,e!=null&&od(t,!!n.multiple,e,!1)}};Fk=Dw;zk=Pc;var HO={usingClientEntryPoint:!1,Events:[_p,Vu,Cx,Uk,Ok,Dw]},Nh={findFiberByHostInstance:lc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},GO={bundleType:Nh.bundleType,version:Nh.version,rendererPackageName:Nh.rendererPackageName,rendererConfig:Nh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:co.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Hk(t),t===null?null:t.stateNode},findFiberByHostInstance:Nh.findFiberByHostInstance||BO,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ym=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ym.isDisabled&&Ym.supportsFiber)try{Ex=Ym.inject(GO),aa=Ym}catch{}}Zi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=HO;Zi.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Vw(e))throw Error(He(200));return zO(t,e,null,n)};Zi.createRoot=function(t,e){if(!Vw(t))throw Error(He(299));var n=!1,r="",i=_R;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Fw(t,1,!1,null,null,n,!1,r,i),t[eo]=e.current,jf(t.nodeType===8?t.parentNode:t),new Bw(e)};Zi.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(He(188)):(t=Object.keys(t).join(","),Error(He(268,t)));return t=Hk(e),t=t===null?null:t.stateNode,t};Zi.flushSync=function(t){return Pc(t)};Zi.hydrate=function(t,e,n){if(!Ox(e))throw Error(He(200));return Fx(null,t,e,!0,n)};Zi.hydrateRoot=function(t,e,n){if(!Vw(t))throw Error(He(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",a=_R;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=bR(e,null,t,1,n??null,i,!1,s,a),t[eo]=e.current,jf(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Ux(e)};Zi.render=function(t,e,n){if(!Ox(e))throw Error(He(200));return Fx(null,t,e,!1,n)};Zi.unmountComponentAtNode=function(t){if(!Ox(t))throw Error(He(40));return t._reactRootContainer?(Pc(function(){Fx(null,null,t,!1,function(){t._reactRootContainer=null,t[eo]=null})}),!0):!1};Zi.unstable_batchedUpdates=Dw;Zi.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Ox(n))throw Error(He(200));if(t==null||t._reactInternals===void 0)throw Error(He(38));return Fx(t,e,n,!1,r)};Zi.version="18.3.1-next-f1338f8080-20240426";function wR(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(wR)}catch(t){console.error(t)}}wR(),wk.exports=Zi;var wa=wk.exports,lT=wa;Nb.createRoot=lT.createRoot,Nb.hydrateRoot=lT.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Vf(){return Vf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Vf.apply(this,arguments)}var Yo;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Yo||(Yo={}));const cT="popstate";function WO(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:a,hash:l}=r.location;return y2("",{pathname:s,search:a,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:tx(i)}return YO(e,n,null,t)}function An(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Hw(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function XO(){return Math.random().toString(36).substr(2,8)}function uT(t,e){return{usr:t.state,key:t.key,idx:e}}function y2(t,e,n,r){return n===void 0&&(n=null),Vf({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Id(e):e,{state:n,key:e&&e.key||r||XO()})}function tx(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Id(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function YO(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,a=i.history,l=Yo.Pop,c=null,u=d();u==null&&(u=0,a.replaceState(Vf({},a.state,{idx:u}),""));function d(){return(a.state||{idx:null}).idx}function f(){l=Yo.Pop;let b=d(),x=b==null?null:b-u;u=b,c&&c({action:l,location:_.location,delta:x})}function m(b,x){l=Yo.Push;let y=y2(_.location,b,x);n&&n(y,b),u=d()+1;let S=uT(y,u),E=_.createHref(y);try{a.pushState(S,"",E)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;i.location.assign(E)}s&&c&&c({action:l,location:_.location,delta:1})}function g(b,x){l=Yo.Replace;let y=y2(_.location,b,x);n&&n(y,b),u=d();let S=uT(y,u),E=_.createHref(y);a.replaceState(S,"",E),s&&c&&c({action:l,location:_.location,delta:0})}function v(b){let x=i.location.origin!=="null"?i.location.origin:i.location.href,y=typeof b=="string"?b:tx(b);return y=y.replace(/ $/,"%20"),An(x,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,x)}let _={get action(){return l},get location(){return t(i,a)},listen(b){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(cT,f),c=b,()=>{i.removeEventListener(cT,f),c=null}},createHref(b){return e(i,b)},createURL:v,encodeLocation(b){let x=v(b);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:m,replace:g,go(b){return a.go(b)}};return _}var dT;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(dT||(dT={}));function qO(t,e,n){return n===void 0&&(n="/"),$O(t,e,n,!1)}function $O(t,e,n,r){let i=typeof e=="string"?Id(e):e,s=Md(i.pathname||"/",n);if(s==null)return null;let a=SR(t);ZO(a);let l=null;for(let c=0;l==null&&c<a.length;++c){let u=oF(s);l=sF(a[c],u,r)}return l}function SR(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,a,l)=>{let c={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};c.relativePath.startsWith("/")&&(An(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=nl([r,c.relativePath]),d=n.concat(c);s.children&&s.children.length>0&&(An(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),SR(s.children,e,d,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:rF(u,s.index),routesMeta:d})};return t.forEach((s,a)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))i(s,a);else for(let c of MR(s.path))i(s,a,c)}),e}function MR(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let a=MR(r.join("/")),l=[];return l.push(...a.map(c=>c===""?s:[s,c].join("/"))),i&&l.push(...a),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function ZO(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:iF(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const KO=/^:[\w-]+$/,JO=3,QO=2,eF=1,tF=10,nF=-2,hT=t=>t==="*";function rF(t,e){let n=t.split("/"),r=n.length;return n.some(hT)&&(r+=nF),e&&(r+=QO),n.filter(i=>!hT(i)).reduce((i,s)=>i+(KO.test(s)?JO:s===""?eF:tF),r)}function iF(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function sF(t,e,n){n===void 0&&(n=!1);let{routesMeta:r}=t,i={},s="/",a=[];for(let l=0;l<r.length;++l){let c=r[l],u=l===r.length-1,d=s==="/"?e:e.slice(s.length)||"/",f=nx({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),m=c.route;if(!f&&u&&n&&!r[r.length-1].route.index&&(f=nx({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!f)return null;Object.assign(i,f.params),a.push({params:i,pathname:nl([s,f.pathname]),pathnameBase:hF(nl([s,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(s=nl([s,f.pathnameBase]))}return a}function nx(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=aF(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((u,d,f)=>{let{paramName:m,isOptional:g}=d;if(m==="*"){let _=l[f]||"";a=s.slice(0,s.length-_.length).replace(/(.)\/+$/,"$1")}const v=l[f];return g&&!v?u[m]=void 0:u[m]=(v||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:a,pattern:t}}function aF(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Hw(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function oF(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Hw(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Md(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const lF=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,cF=t=>lF.test(t);function uF(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Id(t):t,s;if(n)if(cF(n))s=n;else{if(n.includes("//")){let a=n;n=n.replace(/\/\/+/g,"/"),Hw(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+n))}n.startsWith("/")?s=fT(n.substring(1),"/"):s=fT(n,e)}else s=e;return{pathname:s,search:fF(r),hash:pF(i)}}function fT(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function e1(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function dF(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Gw(t,e){let n=dF(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Ww(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Id(t):(i=Vf({},t),An(!i.pathname||!i.pathname.includes("?"),e1("?","pathname","search",i)),An(!i.pathname||!i.pathname.includes("#"),e1("#","pathname","hash",i)),An(!i.search||!i.search.includes("#"),e1("#","search","hash",i)));let s=t===""||i.pathname==="",a=s?"/":i.pathname,l;if(a==null)l=n;else{let f=e.length-1;if(!r&&a.startsWith("..")){let m=a.split("/");for(;m[0]==="..";)m.shift(),f-=1;i.pathname=m.join("/")}l=f>=0?e[f]:"/"}let c=uF(i,l),u=a&&a!=="/"&&a.endsWith("/"),d=(s||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const nl=t=>t.join("/").replace(/\/\/+/g,"/"),hF=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),fF=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,pF=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function mF(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const ER=["post","put","patch","delete"];new Set(ER);const gF=["get",...ER];new Set(gF);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Hf(){return Hf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Hf.apply(this,arguments)}const zx=D.createContext(null),NR=D.createContext(null),uo=D.createContext(null),Bx=D.createContext(null),Sa=D.createContext({outlet:null,matches:[],isDataRoute:!1}),TR=D.createContext(null);function xF(t,e){let{relative:n}=e===void 0?{}:e;Ud()||An(!1);let{basename:r,navigator:i}=D.useContext(uo),{hash:s,pathname:a,search:l}=Hx(t,{relative:n}),c=a;return r!=="/"&&(c=a==="/"?r:nl([r,a])),i.createHref({pathname:c,search:l,hash:s})}function Ud(){return D.useContext(Bx)!=null}function ho(){return Ud()||An(!1),D.useContext(Bx).location}function AR(t){D.useContext(uo).static||D.useLayoutEffect(t)}function qr(){let{isDataRoute:t}=D.useContext(Sa);return t?RF():vF()}function vF(){Ud()||An(!1);let t=D.useContext(zx),{basename:e,future:n,navigator:r}=D.useContext(uo),{matches:i}=D.useContext(Sa),{pathname:s}=ho(),a=JSON.stringify(Gw(i,n.v7_relativeSplatPath)),l=D.useRef(!1);return AR(()=>{l.current=!0}),D.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){r.go(u);return}let f=Ww(u,JSON.parse(a),s,d.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:nl([e,f.pathname])),(d.replace?r.replace:r.push)(f,d.state,d)},[e,r,a,s,t])}const yF=D.createContext(null);function bF(t){let e=D.useContext(Sa).outlet;return e&&D.createElement(yF.Provider,{value:t},e)}function Vx(){let{matches:t}=D.useContext(Sa),e=t[t.length-1];return e?e.params:{}}function Hx(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=D.useContext(uo),{matches:i}=D.useContext(Sa),{pathname:s}=ho(),a=JSON.stringify(Gw(i,r.v7_relativeSplatPath));return D.useMemo(()=>Ww(t,JSON.parse(a),s,n==="path"),[t,a,s,n])}function _F(t,e){return wF(t,e)}function wF(t,e,n,r){Ud()||An(!1);let{navigator:i}=D.useContext(uo),{matches:s}=D.useContext(Sa),a=s[s.length-1],l=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let u=ho(),d;if(e){var f;let b=typeof e=="string"?Id(e):e;c==="/"||(f=b.pathname)!=null&&f.startsWith(c)||An(!1),d=b}else d=u;let m=d.pathname||"/",g=m;if(c!=="/"){let b=c.replace(/^\//,"").split("/");g="/"+m.replace(/^\//,"").split("/").slice(b.length).join("/")}let v=qO(t,{pathname:g}),_=TF(v&&v.map(b=>Object.assign({},b,{params:Object.assign({},l,b.params),pathname:nl([c,i.encodeLocation?i.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?c:nl([c,i.encodeLocation?i.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),s,n,r);return e&&_?D.createElement(Bx.Provider,{value:{location:Hf({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Yo.Pop}},_):_}function SF(){let t=PF(),e=mF(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},e),n?D.createElement("pre",{style:i},n):null,null)}const MF=D.createElement(SF,null);class EF extends D.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?D.createElement(Sa.Provider,{value:this.props.routeContext},D.createElement(TR.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function NF(t){let{routeContext:e,match:n,children:r}=t,i=D.useContext(zx);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),D.createElement(Sa.Provider,{value:e},r)}function TF(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,l=(i=n)==null?void 0:i.errors;if(l!=null){let d=a.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);d>=0||An(!1),a=a.slice(0,Math.min(a.length,d+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<a.length;d++){let f=a[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=d),f.route.id){let{loaderData:m,errors:g}=n,v=f.route.loader&&m[f.route.id]===void 0&&(!g||g[f.route.id]===void 0);if(f.route.lazy||v){c=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((d,f,m)=>{let g,v=!1,_=null,b=null;n&&(g=l&&f.route.id?l[f.route.id]:void 0,_=f.route.errorElement||MF,c&&(u<0&&m===0?(jF("route-fallback",!1),v=!0,b=null):u===m&&(v=!0,b=f.route.hydrateFallbackElement||null)));let x=e.concat(a.slice(0,m+1)),y=()=>{let S;return g?S=_:v?S=b:f.route.Component?S=D.createElement(f.route.Component,null):f.route.element?S=f.route.element:S=d,D.createElement(NF,{match:f,routeContext:{outlet:d,matches:x,isDataRoute:n!=null},children:S})};return n&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?D.createElement(EF,{location:n.location,revalidation:n.revalidation,component:_,error:g,children:y(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):y()},null)}var CR=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(CR||{}),rx=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(rx||{});function AF(t){let e=D.useContext(zx);return e||An(!1),e}function CF(t){let e=D.useContext(NR);return e||An(!1),e}function kF(t){let e=D.useContext(Sa);return e||An(!1),e}function kR(t){let e=kF(),n=e.matches[e.matches.length-1];return n.route.id||An(!1),n.route.id}function PF(){var t;let e=D.useContext(TR),n=CF(rx.UseRouteError),r=kR(rx.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function RF(){let{router:t}=AF(CR.UseNavigateStable),e=kR(rx.UseNavigateStable),n=D.useRef(!1);return AR(()=>{n.current=!0}),D.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Hf({fromRouteId:e},s)))},[t,e])}const pT={};function jF(t,e,n){!e&&!pT[t]&&(pT[t]=!0)}function LF(t,e){t==null||t.v7_startTransition,(t==null?void 0:t.v7_relativeSplatPath)===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function ix(t){let{to:e,replace:n,state:r,relative:i}=t;Ud()||An(!1);let{future:s,static:a}=D.useContext(uo),{matches:l}=D.useContext(Sa),{pathname:c}=ho(),u=qr(),d=Ww(e,Gw(l,s.v7_relativeSplatPath),c,i==="path"),f=JSON.stringify(d);return D.useEffect(()=>u(JSON.parse(f),{replace:n,state:r,relative:i}),[u,f,i,n,r]),null}function DF(t){return bF(t.context)}function Ot(t){An(!1)}function IF(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Yo.Pop,navigator:s,static:a=!1,future:l}=t;Ud()&&An(!1);let c=e.replace(/^\/*/,"/"),u=D.useMemo(()=>({basename:c,navigator:s,static:a,future:Hf({v7_relativeSplatPath:!1},l)}),[c,l,s,a]);typeof r=="string"&&(r=Id(r));let{pathname:d="/",search:f="",hash:m="",state:g=null,key:v="default"}=r,_=D.useMemo(()=>{let b=Md(d,c);return b==null?null:{location:{pathname:b,search:f,hash:m,state:g,key:v},navigationType:i}},[c,d,f,m,g,v,i]);return _==null?null:D.createElement(uo.Provider,{value:u},D.createElement(Bx.Provider,{children:n,value:_}))}function Xw(t){let{children:e,location:n}=t;return _F(b2(e),n)}new Promise(()=>{});function b2(t,e){e===void 0&&(e=[]);let n=[];return D.Children.forEach(t,(r,i)=>{if(!D.isValidElement(r))return;let s=[...e,i];if(r.type===D.Fragment){n.push.apply(n,b2(r.props.children,s));return}r.type!==Ot&&An(!1),!r.props.index||!r.props.children||An(!1);let a={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=b2(r.props.children,s)),n.push(a)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function sx(){return sx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},sx.apply(this,arguments)}function PR(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function UF(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function OF(t,e){return t.button===0&&(!e||e==="_self")&&!UF(t)}function _2(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function FF(t,e){let n=_2(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(s=>{n.append(i,s)})}),n}const zF=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],BF=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],VF="6";try{window.__reactRouterVersion=VF}catch{}const HF=D.createContext({isTransitioning:!1}),GF="startTransition",mT=bk[GF];function WF(t){let{basename:e,children:n,future:r,window:i}=t,s=D.useRef();s.current==null&&(s.current=WO({window:i,v5Compat:!0}));let a=s.current,[l,c]=D.useState({action:a.action,location:a.location}),{v7_startTransition:u}=r||{},d=D.useCallback(f=>{u&&mT?mT(()=>c(f)):c(f)},[c,u]);return D.useLayoutEffect(()=>a.listen(d),[a,d]),D.useEffect(()=>LF(r),[r]),D.createElement(IF,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:a,future:r})}const XF=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",YF=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,qF=D.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:a,state:l,target:c,to:u,preventScrollReset:d,viewTransition:f}=e,m=PR(e,zF),{basename:g}=D.useContext(uo),v,_=!1;if(typeof u=="string"&&YF.test(u)&&(v=u,XF))try{let S=new URL(window.location.href),E=u.startsWith("//")?new URL(S.protocol+u):new URL(u),A=Md(E.pathname,g);E.origin===S.origin&&A!=null?u=A+E.search+E.hash:_=!0}catch{}let b=xF(u,{relative:i}),x=ZF(u,{replace:a,state:l,target:c,preventScrollReset:d,relative:i,viewTransition:f});function y(S){r&&r(S),S.defaultPrevented||x(S)}return D.createElement("a",sx({},m,{href:v||b,onClick:_||s?r:y,ref:n,target:c}))}),hf=D.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:i=!1,className:s="",end:a=!1,style:l,to:c,viewTransition:u,children:d}=e,f=PR(e,BF),m=Hx(c,{relative:f.relative}),g=ho(),v=D.useContext(NR),{navigator:_,basename:b}=D.useContext(uo),x=v!=null&&JF(m)&&u===!0,y=_.encodeLocation?_.encodeLocation(m).pathname:m.pathname,S=g.pathname,E=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;i||(S=S.toLowerCase(),E=E?E.toLowerCase():null,y=y.toLowerCase()),E&&b&&(E=Md(E,b)||E);const A=y!=="/"&&y.endsWith("/")?y.length-1:y.length;let T=S===y||!a&&S.startsWith(y)&&S.charAt(A)==="/",C=E!=null&&(E===y||!a&&E.startsWith(y)&&E.charAt(y.length)==="/"),j={isActive:T,isPending:C,isTransitioning:x},k=T?r:void 0,P;typeof s=="function"?P=s(j):P=[s,T?"active":null,C?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let H=typeof l=="function"?l(j):l;return D.createElement(qF,sx({},f,{"aria-current":k,className:P,ref:n,style:H,to:c,viewTransition:u}),typeof d=="function"?d(j):d)});var w2;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(w2||(w2={}));var gT;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(gT||(gT={}));function $F(t){let e=D.useContext(zx);return e||An(!1),e}function ZF(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:a,viewTransition:l}=e===void 0?{}:e,c=qr(),u=ho(),d=Hx(t,{relative:a});return D.useCallback(f=>{if(OF(f,n)){f.preventDefault();let m=r!==void 0?r:tx(u)===tx(d);c(t,{replace:m,state:i,preventScrollReset:s,relative:a,viewTransition:l})}},[u,c,d,r,i,n,t,s,a,l])}function KF(t){let e=D.useRef(_2(t)),n=D.useRef(!1),r=ho(),i=D.useMemo(()=>FF(r.search,n.current?null:e.current),[r.search]),s=qr(),a=D.useCallback((l,c)=>{const u=_2(typeof l=="function"?l(i):l);n.current=!0,s("?"+u,c)},[s,i]);return[i,a]}function JF(t,e){e===void 0&&(e={});let n=D.useContext(HF);n==null&&An(!1);let{basename:r}=$F(w2.useViewTransitionState),i=Hx(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=Md(n.currentLocation.pathname,r)||n.currentLocation.pathname,a=Md(n.nextLocation.pathname,r)||n.nextLocation.pathname;return nx(i.pathname,a)!=null||nx(i.pathname,s)!=null}const Yw=D.createContext({});function qw(t){const e=D.useRef(null);return e.current===null&&(e.current=t()),e.current}const $w=typeof window<"u",RR=$w?D.useLayoutEffect:D.useEffect,Gx=D.createContext(null);function Zw(t,e){t.indexOf(e)===-1&&t.push(e)}function Kw(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const ro=(t,e,n)=>n>e?e:n<t?t:n;let Jw=()=>{};const io={},jR=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function LR(t){return typeof t=="object"&&t!==null}const DR=t=>/^0[^.\s]+$/u.test(t);function Qw(t){let e;return()=>(e===void 0&&(e=t()),e)}const ms=t=>t,QF=(t,e)=>n=>e(t(n)),Sp=(...t)=>t.reduce(QF),Gf=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class eS{constructor(){this.subscriptions=[]}add(e){return Zw(this.subscriptions,e),()=>Kw(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const a=this.subscriptions[s];a&&a(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const la=t=>t*1e3,fs=t=>t/1e3;function IR(t,e){return e?t*(1e3/e):0}const UR=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,ez=1e-7,tz=12;function nz(t,e,n,r,i){let s,a,l=0;do a=e+(n-e)/2,s=UR(a,r,i)-t,s>0?n=a:e=a;while(Math.abs(s)>ez&&++l<tz);return a}function Mp(t,e,n,r){if(t===e&&n===r)return ms;const i=s=>nz(s,0,1,t,n);return s=>s===0||s===1?s:UR(i(s),e,r)}const OR=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,FR=t=>e=>1-t(1-e),zR=Mp(.33,1.53,.69,.99),tS=FR(zR),BR=OR(tS),VR=t=>(t*=2)<1?.5*tS(t):.5*(2-Math.pow(2,-10*(t-1))),nS=t=>1-Math.sin(Math.acos(t)),HR=FR(nS),GR=OR(nS),rz=Mp(.42,0,1,1),iz=Mp(0,0,.58,1),WR=Mp(.42,0,.58,1),sz=t=>Array.isArray(t)&&typeof t[0]!="number",XR=t=>Array.isArray(t)&&typeof t[0]=="number",az={linear:ms,easeIn:rz,easeInOut:WR,easeOut:iz,circIn:nS,circInOut:GR,circOut:HR,backIn:tS,backInOut:BR,backOut:zR,anticipate:VR},oz=t=>typeof t=="string",xT=t=>{if(XR(t)){Jw(t.length===4);const[e,n,r,i]=t;return Mp(e,n,r,i)}else if(oz(t))return az[t];return t},qm=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],vT={value:null,addProjectionMetrics:null};function lz(t,e){let n=new Set,r=new Set,i=!1,s=!1;const a=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1},c=0;function u(f){a.has(f)&&(d.schedule(f),t()),c++,f(l)}const d={schedule:(f,m=!1,g=!1)=>{const _=g&&i?n:r;return m&&a.add(f),_.has(f)||_.add(f),f},cancel:f=>{r.delete(f),a.delete(f)},process:f=>{if(l=f,i){s=!0;return}i=!0,[n,r]=[r,n],n.forEach(u),e&&vT.value&&vT.value.frameloop[e].push(c),c=0,n.clear(),i=!1,s&&(s=!1,d.process(f))}};return d}const cz=40;function YR(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,a=qm.reduce((S,E)=>(S[E]=lz(s,e?E:void 0),S),{}),{setup:l,read:c,resolveKeyframes:u,preUpdate:d,update:f,preRender:m,render:g,postRender:v}=a,_=()=>{const S=io.useManualTiming?i.timestamp:performance.now();n=!1,io.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(S-i.timestamp,cz),1)),i.timestamp=S,i.isProcessing=!0,l.process(i),c.process(i),u.process(i),d.process(i),f.process(i),m.process(i),g.process(i),v.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(_))},b=()=>{n=!0,r=!0,i.isProcessing||t(_)};return{schedule:qm.reduce((S,E)=>{const A=a[E];return S[E]=(T,C=!1,j=!1)=>(n||b(),A.schedule(T,C,j)),S},{}),cancel:S=>{for(let E=0;E<qm.length;E++)a[qm[E]].cancel(S)},state:i,steps:a}}const{schedule:vn,cancel:cl,state:Er,steps:t1}=YR(typeof requestAnimationFrame<"u"?requestAnimationFrame:ms,!0);let m0;function uz(){m0=void 0}const Ni={now:()=>(m0===void 0&&Ni.set(Er.isProcessing||io.useManualTiming?Er.timestamp:performance.now()),m0),set:t=>{m0=t,queueMicrotask(uz)}},qR=t=>e=>typeof e=="string"&&e.startsWith(t),$R=qR("--"),dz=qR("var(--"),rS=t=>dz(t)?hz.test(t.split("/*")[0].trim()):!1,hz=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Od={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Wf={...Od,transform:t=>ro(0,1,t)},$m={...Od,default:1},ff=t=>Math.round(t*1e5)/1e5,iS=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function fz(t){return t==null}const pz=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,sS=(t,e)=>n=>!!(typeof n=="string"&&pz.test(n)&&n.startsWith(t)||e&&!fz(n)&&Object.prototype.hasOwnProperty.call(n,e)),ZR=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,a,l]=r.match(iS);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(a),alpha:l!==void 0?parseFloat(l):1}},mz=t=>ro(0,255,t),n1={...Od,transform:t=>Math.round(mz(t))},dc={test:sS("rgb","red"),parse:ZR("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+n1.transform(t)+", "+n1.transform(e)+", "+n1.transform(n)+", "+ff(Wf.transform(r))+")"};function gz(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const S2={test:sS("#"),parse:gz,transform:dc.transform},Ep=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Fo=Ep("deg"),ca=Ep("%"),wt=Ep("px"),xz=Ep("vh"),vz=Ep("vw"),yT={...ca,parse:t=>ca.parse(t)/100,transform:t=>ca.transform(t*100)},$u={test:sS("hsl","hue"),parse:ZR("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+ca.transform(ff(e))+", "+ca.transform(ff(n))+", "+ff(Wf.transform(r))+")"},Qn={test:t=>dc.test(t)||S2.test(t)||$u.test(t),parse:t=>dc.test(t)?dc.parse(t):$u.test(t)?$u.parse(t):S2.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?dc.transform(t):$u.transform(t),getAnimatableNone:t=>{const e=Qn.parse(t);return e.alpha=0,Qn.transform(e)}},yz=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function bz(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(iS))==null?void 0:e.length)||0)+(((n=t.match(yz))==null?void 0:n.length)||0)>0}const KR="number",JR="color",_z="var",wz="var(",bT="${}",Sz=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Xf(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const l=e.replace(Sz,c=>(Qn.test(c)?(r.color.push(s),i.push(JR),n.push(Qn.parse(c))):c.startsWith(wz)?(r.var.push(s),i.push(_z),n.push(c)):(r.number.push(s),i.push(KR),n.push(parseFloat(c))),++s,bT)).split(bT);return{values:n,split:l,indexes:r,types:i}}function QR(t){return Xf(t).values}function ej(t){const{split:e,types:n}=Xf(t),r=e.length;return i=>{let s="";for(let a=0;a<r;a++)if(s+=e[a],i[a]!==void 0){const l=n[a];l===KR?s+=ff(i[a]):l===JR?s+=Qn.transform(i[a]):s+=i[a]}return s}}const Mz=t=>typeof t=="number"?0:Qn.test(t)?Qn.getAnimatableNone(t):t;function Ez(t){const e=QR(t);return ej(t)(e.map(Mz))}const ul={test:bz,parse:QR,createTransformer:ej,getAnimatableNone:Ez};function r1(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function Nz({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,a=0;if(!e)i=s=a=n;else{const l=n<.5?n*(1+e):n+e-n*e,c=2*n-l;i=r1(c,l,t+1/3),s=r1(c,l,t),a=r1(c,l,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(a*255),alpha:r}}function ax(t,e){return n=>n>0?e:t}const En=(t,e,n)=>t+(e-t)*n,i1=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},Tz=[S2,dc,$u],Az=t=>Tz.find(e=>e.test(t));function _T(t){const e=Az(t);if(!e)return!1;let n=e.parse(t);return e===$u&&(n=Nz(n)),n}const wT=(t,e)=>{const n=_T(t),r=_T(e);if(!n||!r)return ax(t,e);const i={...n};return s=>(i.red=i1(n.red,r.red,s),i.green=i1(n.green,r.green,s),i.blue=i1(n.blue,r.blue,s),i.alpha=En(n.alpha,r.alpha,s),dc.transform(i))},M2=new Set(["none","hidden"]);function Cz(t,e){return M2.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function kz(t,e){return n=>En(t,e,n)}function aS(t){return typeof t=="number"?kz:typeof t=="string"?rS(t)?ax:Qn.test(t)?wT:jz:Array.isArray(t)?tj:typeof t=="object"?Qn.test(t)?wT:Pz:ax}function tj(t,e){const n=[...t],r=n.length,i=t.map((s,a)=>aS(s)(s,e[a]));return s=>{for(let a=0;a<r;a++)n[a]=i[a](s);return n}}function Pz(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=aS(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function Rz(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const s=e.types[i],a=t.indexes[s][r[s]],l=t.values[a]??0;n[i]=l,r[s]++}return n}const jz=(t,e)=>{const n=ul.createTransformer(e),r=Xf(t),i=Xf(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?M2.has(t)&&!i.values.length||M2.has(e)&&!r.values.length?Cz(t,e):Sp(tj(Rz(r,i),i.values),n):ax(t,e)};function nj(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?En(t,e,n):aS(t)(t,e)}const Lz=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>vn.update(e,n),stop:()=>cl(e),now:()=>Er.isProcessing?Er.timestamp:Ni.now()}},rj=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let s=0;s<i;s++)r+=Math.round(t(s/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},ox=2e4;function oS(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<ox;)e+=n,r=t.next(e);return e>=ox?1/0:e}function Dz(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(oS(r),ox);return{type:"keyframes",ease:s=>r.next(i*s).value/e,duration:fs(i)}}const Iz=5;function ij(t,e,n){const r=Math.max(e-Iz,0);return IR(n-t(r),e-r)}const In={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},s1=.001;function Uz({duration:t=In.duration,bounce:e=In.bounce,velocity:n=In.velocity,mass:r=In.mass}){let i,s,a=1-e;a=ro(In.minDamping,In.maxDamping,a),t=ro(In.minDuration,In.maxDuration,fs(t)),a<1?(i=u=>{const d=u*a,f=d*t,m=d-n,g=E2(u,a),v=Math.exp(-f);return s1-m/g*v},s=u=>{const f=u*a*t,m=f*n+n,g=Math.pow(a,2)*Math.pow(u,2)*t,v=Math.exp(-f),_=E2(Math.pow(u,2),a);return(-i(u)+s1>0?-1:1)*((m-g)*v)/_}):(i=u=>{const d=Math.exp(-u*t),f=(u-n)*t+1;return-s1+d*f},s=u=>{const d=Math.exp(-u*t),f=(n-u)*(t*t);return d*f});const l=5/t,c=Fz(i,s,l);if(t=la(t),isNaN(c))return{stiffness:In.stiffness,damping:In.damping,duration:t};{const u=Math.pow(c,2)*r;return{stiffness:u,damping:a*2*Math.sqrt(r*u),duration:t}}}const Oz=12;function Fz(t,e,n){let r=n;for(let i=1;i<Oz;i++)r=r-t(r)/e(r);return r}function E2(t,e){return t*Math.sqrt(1-e*e)}const zz=["duration","bounce"],Bz=["stiffness","damping","mass"];function ST(t,e){return e.some(n=>t[n]!==void 0)}function Vz(t){let e={velocity:In.velocity,stiffness:In.stiffness,damping:In.damping,mass:In.mass,isResolvedFromDuration:!1,...t};if(!ST(t,Bz)&&ST(t,zz))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*ro(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:In.mass,stiffness:i,damping:s}}else{const n=Uz(t);e={...e,...n,mass:In.mass},e.isResolvedFromDuration=!0}return e}function lx(t=In.visualDuration,e=In.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],a=n.keyframes[n.keyframes.length-1],l={done:!1,value:s},{stiffness:c,damping:u,mass:d,duration:f,velocity:m,isResolvedFromDuration:g}=Vz({...n,velocity:-fs(n.velocity||0)}),v=m||0,_=u/(2*Math.sqrt(c*d)),b=a-s,x=fs(Math.sqrt(c/d)),y=Math.abs(b)<5;r||(r=y?In.restSpeed.granular:In.restSpeed.default),i||(i=y?In.restDelta.granular:In.restDelta.default);let S;if(_<1){const A=E2(x,_);S=T=>{const C=Math.exp(-_*x*T);return a-C*((v+_*x*b)/A*Math.sin(A*T)+b*Math.cos(A*T))}}else if(_===1)S=A=>a-Math.exp(-x*A)*(b+(v+x*b)*A);else{const A=x*Math.sqrt(_*_-1);S=T=>{const C=Math.exp(-_*x*T),j=Math.min(A*T,300);return a-C*((v+_*x*b)*Math.sinh(j)+A*b*Math.cosh(j))/A}}const E={calculatedDuration:g&&f||null,next:A=>{const T=S(A);if(g)l.done=A>=f;else{let C=A===0?v:0;_<1&&(C=A===0?la(v):ij(S,A,T));const j=Math.abs(C)<=r,k=Math.abs(a-T)<=i;l.done=j&&k}return l.value=l.done?a:T,l},toString:()=>{const A=Math.min(oS(E),ox),T=rj(C=>E.next(A*C).value,A,30);return A+"ms "+T},toTransition:()=>{}};return E}lx.applyToOptions=t=>{const e=Dz(t,100,lx);return t.ease=e.ease,t.duration=la(e.duration),t.type="keyframes",t};function N2({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:a,min:l,max:c,restDelta:u=.5,restSpeed:d}){const f=t[0],m={done:!1,value:f},g=j=>l!==void 0&&j<l||c!==void 0&&j>c,v=j=>l===void 0?c:c===void 0||Math.abs(l-j)<Math.abs(c-j)?l:c;let _=n*e;const b=f+_,x=a===void 0?b:a(b);x!==b&&(_=x-f);const y=j=>-_*Math.exp(-j/r),S=j=>x+y(j),E=j=>{const k=y(j),P=S(j);m.done=Math.abs(k)<=u,m.value=m.done?x:P};let A,T;const C=j=>{g(m.value)&&(A=j,T=lx({keyframes:[m.value,v(m.value)],velocity:ij(S,j,m.value),damping:i,stiffness:s,restDelta:u,restSpeed:d}))};return C(0),{calculatedDuration:null,next:j=>{let k=!1;return!T&&A===void 0&&(k=!0,E(j),C(j)),A!==void 0&&j>=A?T.next(j-A):(!k&&E(j),m)}}}function Hz(t,e,n){const r=[],i=n||io.mix||nj,s=t.length-1;for(let a=0;a<s;a++){let l=i(t[a],t[a+1]);if(e){const c=Array.isArray(e)?e[a]||ms:e;l=Sp(c,l)}r.push(l)}return r}function Gz(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(Jw(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const a=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const l=Hz(e,r,i),c=l.length,u=d=>{if(a&&d<t[0])return e[0];let f=0;if(c>1)for(;f<t.length-2&&!(d<t[f+1]);f++);const m=Gf(t[f],t[f+1],d);return l[f](m)};return n?d=>u(ro(t[0],t[s-1],d)):u}function Wz(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Gf(0,e,r);t.push(En(n,1,i))}}function Xz(t){const e=[0];return Wz(e,t.length-1),e}function Yz(t,e){return t.map(n=>n*e)}function qz(t,e){return t.map(()=>e||WR).splice(0,t.length-1)}function pf({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=sz(r)?r.map(xT):xT(r),s={done:!1,value:e[0]},a=Yz(n&&n.length===e.length?n:Xz(e),t),l=Gz(a,e,{ease:Array.isArray(i)?i:qz(e,i)});return{calculatedDuration:t,next:c=>(s.value=l(c),s.done=c>=t,s)}}const $z=t=>t!==null;function lS(t,{repeat:e,repeatType:n="loop"},r,i=1){const s=t.filter($z),l=i<0||e&&n!=="loop"&&e%2===1?0:s.length-1;return!l||r===void 0?s[l]:r}const Zz={decay:N2,inertia:N2,tween:pf,keyframes:pf,spring:lx};function sj(t){typeof t.type=="string"&&(t.type=Zz[t.type])}class cS{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const Kz=t=>t/100;class uS extends cS{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,i;const{motionValue:n}=this.options;n&&n.updatedAt!==Ni.now()&&this.tick(Ni.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(r=this.options).onStop)==null||i.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;sj(e);const{type:n=pf,repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:a=0}=e;let{keyframes:l}=e;const c=n||pf;c!==pf&&typeof l[0]!="number"&&(this.mixKeyframes=Sp(Kz,nj(l[0],l[1])),l=[0,100]);const u=c({...e,keyframes:l});s==="mirror"&&(this.mirroredGenerator=c({...e,keyframes:[...l].reverse(),velocity:-a})),u.calculatedDuration===null&&(u.calculatedDuration=oS(u));const{calculatedDuration:d}=u;this.calculatedDuration=d,this.resolvedDuration=d+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=u}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:i,mixKeyframes:s,mirroredGenerator:a,resolvedDuration:l,calculatedDuration:c}=this;if(this.startTime===null)return r.next(0);const{delay:u=0,keyframes:d,repeat:f,repeatType:m,repeatDelay:g,type:v,onUpdate:_,finalKeyframe:b}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const x=this.currentTime-u*(this.playbackSpeed>=0?1:-1),y=this.playbackSpeed>=0?x<0:x>i;this.currentTime=Math.max(x,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let S=this.currentTime,E=r;if(f){const j=Math.min(this.currentTime,i)/l;let k=Math.floor(j),P=j%1;!P&&j>=1&&(P=1),P===1&&k--,k=Math.min(k,f+1),!!(k%2)&&(m==="reverse"?(P=1-P,g&&(P-=g/l)):m==="mirror"&&(E=a)),S=ro(0,1,P)*l}const A=y?{done:!1,value:d[0]}:E.next(S);s&&(A.value=s(A.value));let{done:T}=A;!y&&c!==null&&(T=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const C=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&T);return C&&v!==N2&&(A.value=lS(d,this.options,b,this.speed)),_&&_(A.value),C&&this.finish(),A}then(e,n){return this.finished.then(e,n)}get duration(){return fs(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+fs(e)}get time(){return fs(this.currentTime)}set time(e){var n;e=la(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Ni.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=fs(this.currentTime))}play(){var i,s;if(this.isStopped)return;const{driver:e=Lz,startTime:n}=this.options;this.driver||(this.driver=e(a=>this.tick(a))),(s=(i=this.options).onPlay)==null||s.call(i);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Ni.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function Jz(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const hc=t=>t*180/Math.PI,T2=t=>{const e=hc(Math.atan2(t[1],t[0]));return A2(e)},Qz={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:T2,rotateZ:T2,skewX:t=>hc(Math.atan(t[1])),skewY:t=>hc(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},A2=t=>(t=t%360,t<0&&(t+=360),t),MT=T2,ET=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),NT=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),e6={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:ET,scaleY:NT,scale:t=>(ET(t)+NT(t))/2,rotateX:t=>A2(hc(Math.atan2(t[6],t[5]))),rotateY:t=>A2(hc(Math.atan2(-t[2],t[0]))),rotateZ:MT,rotate:MT,skewX:t=>hc(Math.atan(t[4])),skewY:t=>hc(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function C2(t){return t.includes("scale")?1:0}function k2(t,e){if(!t||t==="none")return C2(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=e6,i=n;else{const l=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=Qz,i=l}if(!i)return C2(e);const s=r[e],a=i[1].split(",").map(n6);return typeof s=="function"?s(a):a[s]}const t6=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return k2(n,e)};function n6(t){return parseFloat(t.trim())}const Fd=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],zd=new Set(Fd),TT=t=>t===Od||t===wt,r6=new Set(["x","y","z"]),i6=Fd.filter(t=>!r6.has(t));function s6(t){const e=[];return i6.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const yc={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>k2(e,"x"),y:(t,{transform:e})=>k2(e,"y")};yc.translateX=yc.x;yc.translateY=yc.y;const bc=new Set;let P2=!1,R2=!1,j2=!1;function aj(){if(R2){const t=Array.from(bc).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=s6(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,a])=>{var l;(l=r.getValue(s))==null||l.set(a)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}R2=!1,P2=!1,bc.forEach(t=>t.complete(j2)),bc.clear()}function oj(){bc.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(R2=!0)})}function a6(){j2=!0,oj(),aj(),j2=!1}class dS{constructor(e,n,r,i,s,a=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=a}scheduleResolve(){this.state="scheduled",this.isAsync?(bc.add(this),P2||(P2=!0,vn.read(oj),vn.resolveKeyframes(aj))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;if(e[0]===null){const s=i==null?void 0:i.get(),a=e[e.length-1];if(s!==void 0)e[0]=s;else if(r&&n){const l=r.readValue(n,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),i&&s===void 0&&i.set(e[0])}Jz(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),bc.delete(this)}cancel(){this.state==="scheduled"&&(bc.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const o6=t=>t.startsWith("--");function l6(t,e,n){o6(e)?t.style.setProperty(e,n):t.style[e]=n}const c6=Qw(()=>window.ScrollTimeline!==void 0),u6={};function d6(t,e){const n=Qw(t);return()=>u6[e]??n()}const lj=d6(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),ef=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,AT={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ef([0,.65,.55,1]),circOut:ef([.55,0,1,.45]),backIn:ef([.31,.01,.66,-.59]),backOut:ef([.33,1.53,.69,.99])};function cj(t,e){if(t)return typeof t=="function"?lj()?rj(t,e):"ease-out":XR(t)?ef(t):Array.isArray(t)?t.map(n=>cj(n,e)||AT.easeOut):AT[t]}function h6(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:a="loop",ease:l="easeOut",times:c}={},u=void 0){const d={[e]:n};c&&(d.offset=c);const f=cj(l,i);Array.isArray(f)&&(d.easing=f);const m={delay:r,duration:i,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:s+1,direction:a==="reverse"?"alternate":"normal"};return u&&(m.pseudoElement=u),t.animate(d,m)}function uj(t){return typeof t=="function"&&"applyToOptions"in t}function f6({type:t,...e}){return uj(t)&&lj()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class p6 extends cS{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:i,pseudoElement:s,allowFlatten:a=!1,finalKeyframe:l,onComplete:c}=e;this.isPseudoElement=!!s,this.allowFlatten=a,this.options=e,Jw(typeof e.type!="string");const u=f6(e);this.animation=h6(n,r,i,u,s),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const d=lS(i,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(d):l6(n,r,d),this.animation.cancel()}c==null||c(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return fs(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+fs(e)}get time(){return fs(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=la(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&c6()?(this.animation.timeline=e,ms):n(this)}}const dj={anticipate:VR,backInOut:BR,circInOut:GR};function m6(t){return t in dj}function g6(t){typeof t.ease=="string"&&m6(t.ease)&&(t.ease=dj[t.ease])}const CT=10;class x6 extends p6{constructor(e){g6(e),sj(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:i,element:s,...a}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const l=new uS({...a,autoplay:!1}),c=la(this.finishedTime??this.time);n.setWithVelocity(l.sample(c-CT).value,l.sample(c).value,CT),l.stop()}}const kT=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(ul.test(t)||t==="0")&&!t.startsWith("url("));function v6(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function y6(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],a=kT(i,e),l=kT(s,e);return!a||!l?!1:v6(t)||(n==="spring"||uj(n))&&r}function L2(t){t.duration=0,t.type="keyframes"}const b6=new Set(["opacity","clipPath","filter","transform"]),_6=Qw(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function w6(t){var d;const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:s,type:a}=t;if(!(((d=e==null?void 0:e.owner)==null?void 0:d.current)instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:u}=e.owner.getProps();return _6()&&n&&b6.has(n)&&(n!=="transform"||!u)&&!c&&!r&&i!=="mirror"&&s!==0&&a!=="inertia"}const S6=40;class M6 extends cS{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:a="loop",keyframes:l,name:c,motionValue:u,element:d,...f}){var v;super(),this.stop=()=>{var _,b;this._animation&&(this._animation.stop(),(_=this.stopTimeline)==null||_.call(this)),(b=this.keyframeResolver)==null||b.cancel()},this.createdAt=Ni.now();const m={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:a,name:c,motionValue:u,element:d,...f},g=(d==null?void 0:d.KeyframeResolver)||dS;this.keyframeResolver=new g(l,(_,b,x)=>this.onKeyframesResolved(_,b,m,!x),c,u,d),(v=this.keyframeResolver)==null||v.scheduleResolve()}onKeyframesResolved(e,n,r,i){this.keyframeResolver=void 0;const{name:s,type:a,velocity:l,delay:c,isHandoff:u,onUpdate:d}=r;this.resolvedAt=Ni.now(),y6(e,s,a,l)||((io.instantAnimations||!c)&&(d==null||d(lS(e,r,n))),e[0]=e[e.length-1],L2(r),r.repeat=0);const m={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>S6?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},g=!u&&w6(m)?new x6({...m,element:m.motionValue.owner.current}):new uS(m);g.finished.then(()=>this.notifyFinished()).catch(ms),this.pendingTimeline&&(this.stopTimeline=g.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=g}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),a6()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const E6=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function N6(t){const e=E6.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function hj(t,e,n=1){const[r,i]=N6(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const a=s.trim();return jR(a)?parseFloat(a):a}return rS(i)?hj(i,e,n+1):i}function hS(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const fj=new Set(["width","height","top","left","right","bottom",...Fd]),T6={test:t=>t==="auto",parse:t=>t},pj=t=>e=>e.test(t),mj=[Od,wt,ca,Fo,vz,xz,T6],PT=t=>mj.find(pj(t));function A6(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||DR(t):!0}const C6=new Set(["brightness","contrast","saturate","opacity"]);function k6(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(iS)||[];if(!r)return t;const i=n.replace(r,"");let s=C6.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const P6=/\b([a-z-]*)\(.*?\)/gu,D2={...ul,getAnimatableNone:t=>{const e=t.match(P6);return e?e.map(k6).join(" "):t}},RT={...Od,transform:Math.round},R6={rotate:Fo,rotateX:Fo,rotateY:Fo,rotateZ:Fo,scale:$m,scaleX:$m,scaleY:$m,scaleZ:$m,skew:Fo,skewX:Fo,skewY:Fo,distance:wt,translateX:wt,translateY:wt,translateZ:wt,x:wt,y:wt,z:wt,perspective:wt,transformPerspective:wt,opacity:Wf,originX:yT,originY:yT,originZ:wt},fS={borderWidth:wt,borderTopWidth:wt,borderRightWidth:wt,borderBottomWidth:wt,borderLeftWidth:wt,borderRadius:wt,radius:wt,borderTopLeftRadius:wt,borderTopRightRadius:wt,borderBottomRightRadius:wt,borderBottomLeftRadius:wt,width:wt,maxWidth:wt,height:wt,maxHeight:wt,top:wt,right:wt,bottom:wt,left:wt,padding:wt,paddingTop:wt,paddingRight:wt,paddingBottom:wt,paddingLeft:wt,margin:wt,marginTop:wt,marginRight:wt,marginBottom:wt,marginLeft:wt,backgroundPositionX:wt,backgroundPositionY:wt,...R6,zIndex:RT,fillOpacity:Wf,strokeOpacity:Wf,numOctaves:RT},j6={...fS,color:Qn,backgroundColor:Qn,outlineColor:Qn,fill:Qn,stroke:Qn,borderColor:Qn,borderTopColor:Qn,borderRightColor:Qn,borderBottomColor:Qn,borderLeftColor:Qn,filter:D2,WebkitFilter:D2},gj=t=>j6[t];function xj(t,e){let n=gj(t);return n!==D2&&(n=ul),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const L6=new Set(["auto","none","0"]);function D6(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!L6.has(s)&&Xf(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=xj(n,i)}class I6 extends dS{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let u=e[c];if(typeof u=="string"&&(u=u.trim(),rS(u))){const d=hj(u,n.current);d!==void 0&&(e[c]=d),c===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!fj.has(r)||e.length!==2)return;const[i,s]=e,a=PT(i),l=PT(s);if(a!==l)if(TT(a)&&TT(l))for(let c=0;c<e.length;c++){const u=e[c];typeof u=="string"&&(e[c]=parseFloat(u))}else yc[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||A6(e[i]))&&r.push(i);r.length&&D6(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=yc[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var l;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const s=r.length-1,a=r[s];r[s]=yc[n](e.measureViewportBox(),window.getComputedStyle(e.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),(l=this.removedTransforms)!=null&&l.length&&this.removedTransforms.forEach(([c,u])=>{e.getValue(c).set(u)}),this.resolveNoneKeyframes()}}function U6(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;e&&(r=e.current);const i=(n==null?void 0:n[t])??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const vj=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function yj(t){return LR(t)&&"offsetHeight"in t}const jT=30,O6=t=>!isNaN(parseFloat(t));class F6{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var s;const i=Ni.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((s=this.events.change)==null||s.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Ni.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=O6(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new eS);const r=this.events[e].add(n);return e==="change"?()=>{r(),vn.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Ni.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>jT)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,jT);return IR(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ed(t,e){return new F6(t,e)}const{schedule:pS,cancel:wne}=YR(queueMicrotask,!1),As={x:!1,y:!1};function bj(){return As.x||As.y}function z6(t){return t==="x"||t==="y"?As[t]?null:(As[t]=!0,()=>{As[t]=!1}):As.x||As.y?null:(As.x=As.y=!0,()=>{As.x=As.y=!1})}function _j(t,e){const n=U6(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function LT(t){return!(t.pointerType==="touch"||bj())}function B6(t,e,n={}){const[r,i,s]=_j(t,n),a=l=>{if(!LT(l))return;const{target:c}=l,u=e(c,l);if(typeof u!="function"||!c)return;const d=f=>{LT(f)&&(u(f),c.removeEventListener("pointerleave",d))};c.addEventListener("pointerleave",d,i)};return r.forEach(l=>{l.addEventListener("pointerenter",a,i)}),s}const wj=(t,e)=>e?t===e?!0:wj(t,e.parentElement):!1,mS=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,V6=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function H6(t){return V6.has(t.tagName)||t.tabIndex!==-1}const g0=new WeakSet;function DT(t){return e=>{e.key==="Enter"&&t(e)}}function a1(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const G6=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=DT(()=>{if(g0.has(n))return;a1(n,"down");const i=DT(()=>{a1(n,"up")}),s=()=>a1(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function IT(t){return mS(t)&&!bj()}function W6(t,e,n={}){const[r,i,s]=_j(t,n),a=l=>{const c=l.currentTarget;if(!IT(l))return;g0.add(c);const u=e(c,l),d=(g,v)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",m),g0.has(c)&&g0.delete(c),IT(g)&&typeof u=="function"&&u(g,{success:v})},f=g=>{d(g,c===window||c===document||n.useGlobalTarget||wj(c,g.target))},m=g=>{d(g,!1)};window.addEventListener("pointerup",f,i),window.addEventListener("pointercancel",m,i)};return r.forEach(l=>{(n.useGlobalTarget?window:l).addEventListener("pointerdown",a,i),yj(l)&&(l.addEventListener("focus",u=>G6(u,i)),!H6(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),s}function Sj(t){return LR(t)&&"ownerSVGElement"in t}function X6(t){return Sj(t)&&t.tagName==="svg"}const Vr=t=>!!(t&&t.getVelocity),Y6=[...mj,Qn,ul],q6=t=>Y6.find(pj(t)),gS=D.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function UT(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function $6(...t){return e=>{let n=!1;const r=t.map(i=>{const s=UT(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():UT(t[i],null)}}}}function Z6(...t){return D.useCallback($6(...t),t)}class K6 extends D.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,i=yj(r)&&r.offsetWidth||0,s=this.props.sizeRef.current;s.height=n.offsetHeight||0,s.width=n.offsetWidth||0,s.top=n.offsetTop,s.left=n.offsetLeft,s.right=i-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function J6({children:t,isPresent:e,anchorX:n,root:r}){const i=D.useId(),s=D.useRef(null),a=D.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=D.useContext(gS),c=Z6(s,t==null?void 0:t.ref);return D.useInsertionEffect(()=>{const{width:u,height:d,top:f,left:m,right:g}=a.current;if(e||!s.current||!u||!d)return;const v=n==="left"?`left: ${m}`:`right: ${g}`;s.current.dataset.motionPopId=i;const _=document.createElement("style");l&&(_.nonce=l);const b=r??document.head;return b.appendChild(_),_.sheet&&_.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${d}px !important;
            ${v}px !important;
            top: ${f}px !important;
          }
        `),()=>{b.contains(_)&&b.removeChild(_)}},[e]),o.jsx(K6,{isPresent:e,childRef:s,sizeRef:a,children:D.cloneElement(t,{ref:c})})}const Q6=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:a,anchorX:l,root:c})=>{const u=qw(eB),d=D.useId();let f=!0,m=D.useMemo(()=>(f=!1,{id:d,initial:e,isPresent:n,custom:i,onExitComplete:g=>{u.set(g,!0);for(const v of u.values())if(!v)return;r&&r()},register:g=>(u.set(g,!1),()=>u.delete(g))}),[n,u,r]);return s&&f&&(m={...m}),D.useMemo(()=>{u.forEach((g,v)=>u.set(v,!1))},[n]),D.useEffect(()=>{!n&&!u.size&&r&&r()},[n]),a==="popLayout"&&(t=o.jsx(J6,{isPresent:n,anchorX:l,root:c,children:t})),o.jsx(Gx.Provider,{value:m,children:t})};function eB(){return new Map}function Mj(t=!0){const e=D.useContext(Gx);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,s=D.useId();D.useEffect(()=>{if(t)return i(s)},[t]);const a=D.useCallback(()=>t&&r&&r(s),[s,r,t]);return!n&&r?[!1,a]:[!0]}const Zm=t=>t.key||"";function OT(t){const e=[];return D.Children.forEach(t,n=>{D.isValidElement(n)&&e.push(n)}),e}const cn=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:a=!1,anchorX:l="left",root:c})=>{const[u,d]=Mj(a),f=D.useMemo(()=>OT(t),[t]),m=a&&!u?[]:f.map(Zm),g=D.useRef(!0),v=D.useRef(f),_=qw(()=>new Map),[b,x]=D.useState(f),[y,S]=D.useState(f);RR(()=>{g.current=!1,v.current=f;for(let T=0;T<y.length;T++){const C=Zm(y[T]);m.includes(C)?_.delete(C):_.get(C)!==!0&&_.set(C,!1)}},[y,m.length,m.join("-")]);const E=[];if(f!==b){let T=[...f];for(let C=0;C<y.length;C++){const j=y[C],k=Zm(j);m.includes(k)||(T.splice(C,0,j),E.push(j))}return s==="wait"&&E.length&&(T=E),S(OT(T)),x(f),null}const{forceRender:A}=D.useContext(Yw);return o.jsx(o.Fragment,{children:y.map(T=>{const C=Zm(T),j=a&&!u?!1:f===y||m.includes(C),k=()=>{if(_.has(C))_.set(C,!0);else return;let P=!0;_.forEach(H=>{H||(P=!1)}),P&&(A==null||A(),S(v.current),a&&(d==null||d()),r&&r())};return o.jsx(Q6,{isPresent:j,initial:!g.current||n?void 0:!1,custom:e,presenceAffectsLayout:i,mode:s,root:c,onExitComplete:j?void 0:k,anchorX:l,children:T},C)})})},Ej=D.createContext({strict:!1}),FT={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Nd={};for(const t in FT)Nd[t]={isEnabled:e=>FT[t].some(n=>!!e[n])};function tB(t){for(const e in t)Nd[e]={...Nd[e],...t[e]}}const nB=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function cx(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||nB.has(t)}let Nj=t=>!cx(t);function rB(t){typeof t=="function"&&(Nj=e=>e.startsWith("on")?!cx(e):t(e))}try{rB(require("@emotion/is-prop-valid").default)}catch{}function iB(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(Nj(i)||n===!0&&cx(i)||!e&&!cx(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}const Wx=D.createContext({});function Xx(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Yf(t){return typeof t=="string"||Array.isArray(t)}const xS=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],vS=["initial",...xS];function Yx(t){return Xx(t.animate)||vS.some(e=>Yf(t[e]))}function Tj(t){return!!(Yx(t)||t.variants)}function sB(t,e){if(Yx(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Yf(n)?n:void 0,animate:Yf(r)?r:void 0}}return t.inherit!==!1?e:{}}function aB(t){const{initial:e,animate:n}=sB(t,D.useContext(Wx));return D.useMemo(()=>({initial:e,animate:n}),[zT(e),zT(n)])}function zT(t){return Array.isArray(t)?t.join(" "):t}function BT(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Th={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(wt.test(t))t=parseFloat(t);else return t;const n=BT(t,e.target.x),r=BT(t,e.target.y);return`${n}% ${r}%`}},oB={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=ul.parse(t);if(i.length>5)return r;const s=ul.createTransformer(t),a=typeof i[0]!="number"?1:0,l=n.x.scale*e.x,c=n.y.scale*e.y;i[0+a]/=l,i[1+a]/=c;const u=En(l,c,.5);return typeof i[2+a]=="number"&&(i[2+a]/=u),typeof i[3+a]=="number"&&(i[3+a]/=u),s(i)}},I2={borderRadius:{...Th,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Th,borderTopRightRadius:Th,borderBottomLeftRadius:Th,borderBottomRightRadius:Th,boxShadow:oB};function Aj(t,{layout:e,layoutId:n}){return zd.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!I2[t]||t==="opacity")}const lB={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},cB=Fd.length;function uB(t,e,n){let r="",i=!0;for(let s=0;s<cB;s++){const a=Fd[s],l=t[a];if(l===void 0)continue;let c=!0;if(typeof l=="number"?c=l===(a.startsWith("scale")?1:0):c=parseFloat(l)===0,!c||n){const u=vj(l,fS[a]);if(!c){i=!1;const d=lB[a]||a;r+=`${d}(${u}) `}n&&(e[a]=u)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function yS(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let a=!1,l=!1;for(const c in e){const u=e[c];if(zd.has(c)){a=!0;continue}else if($R(c)){i[c]=u;continue}else{const d=vj(u,fS[c]);c.startsWith("origin")?(l=!0,s[c]=d):r[c]=d}}if(e.transform||(a||n?r.transform=uB(e,t.transform,n):r.transform&&(r.transform="none")),l){const{originX:c="50%",originY:u="50%",originZ:d=0}=s;r.transformOrigin=`${c} ${u} ${d}`}}const bS=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Cj(t,e,n){for(const r in e)!Vr(e[r])&&!Aj(r,n)&&(t[r]=e[r])}function dB({transformTemplate:t},e){return D.useMemo(()=>{const n=bS();return yS(n,e,t),Object.assign({},n.vars,n.style)},[e])}function hB(t,e){const n=t.style||{},r={};return Cj(r,n,t),Object.assign(r,dB(t,e)),r}function fB(t,e){const n={},r=hB(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const pB={offset:"stroke-dashoffset",array:"stroke-dasharray"},mB={offset:"strokeDashoffset",array:"strokeDasharray"};function gB(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?pB:mB;t[s.offset]=wt.transform(-r);const a=wt.transform(e),l=wt.transform(n);t[s.array]=`${a} ${l}`}function kj(t,{attrX:e,attrY:n,attrScale:r,pathLength:i,pathSpacing:s=1,pathOffset:a=0,...l},c,u,d){if(yS(t,l,u),c){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:f,style:m}=t;f.transform&&(m.transform=f.transform,delete f.transform),(m.transform||f.transformOrigin)&&(m.transformOrigin=f.transformOrigin??"50% 50%",delete f.transformOrigin),m.transform&&(m.transformBox=(d==null?void 0:d.transformBox)??"fill-box",delete f.transformBox),e!==void 0&&(f.x=e),n!==void 0&&(f.y=n),r!==void 0&&(f.scale=r),i!==void 0&&gB(f,i,s,a,!1)}const Pj=()=>({...bS(),attrs:{}}),Rj=t=>typeof t=="string"&&t.toLowerCase()==="svg";function xB(t,e,n,r){const i=D.useMemo(()=>{const s=Pj();return kj(s,e,Rj(r),t.transformTemplate,t.style),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};Cj(s,t.style,t),i.style={...s,...i.style}}return i}const vB=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function _S(t){return typeof t!="string"||t.includes("-")?!1:!!(vB.indexOf(t)>-1||/[A-Z]/u.test(t))}function yB(t,e,n,{latestValues:r},i,s=!1){const l=(_S(t)?xB:fB)(e,r,i,t),c=iB(e,typeof t=="string",s),u=t!==D.Fragment?{...c,...l,ref:n}:{},{children:d}=e,f=D.useMemo(()=>Vr(d)?d.get():d,[d]);return D.createElement(t,{...u,children:f})}function VT(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function wS(t,e,n,r){if(typeof e=="function"){const[i,s]=VT(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=VT(r);e=e(n!==void 0?n:t.custom,i,s)}return e}function x0(t){return Vr(t)?t.get():t}function bB({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,i){return{latestValues:_B(n,r,i,t),renderState:e()}}function _B(t,e,n,r){const i={},s=r(t,{});for(const m in s)i[m]=x0(s[m]);let{initial:a,animate:l}=t;const c=Yx(t),u=Tj(t);e&&u&&!c&&t.inherit!==!1&&(a===void 0&&(a=e.initial),l===void 0&&(l=e.animate));let d=n?n.initial===!1:!1;d=d||a===!1;const f=d?l:a;if(f&&typeof f!="boolean"&&!Xx(f)){const m=Array.isArray(f)?f:[f];for(let g=0;g<m.length;g++){const v=wS(t,m[g]);if(v){const{transitionEnd:_,transition:b,...x}=v;for(const y in x){let S=x[y];if(Array.isArray(S)){const E=d?S.length-1:0;S=S[E]}S!==null&&(i[y]=S)}for(const y in _)i[y]=_[y]}}}return i}const jj=t=>(e,n)=>{const r=D.useContext(Wx),i=D.useContext(Gx),s=()=>bB(t,e,r,i);return n?s():qw(s)};function SS(t,e,n){var s;const{style:r}=t,i={};for(const a in r)(Vr(r[a])||e.style&&Vr(e.style[a])||Aj(a,t)||((s=n==null?void 0:n.getValue(a))==null?void 0:s.liveStyle)!==void 0)&&(i[a]=r[a]);return i}const wB=jj({scrapeMotionValuesFromProps:SS,createRenderState:bS});function Lj(t,e,n){const r=SS(t,e,n);for(const i in t)if(Vr(t[i])||Vr(e[i])){const s=Fd.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}const SB=jj({scrapeMotionValuesFromProps:Lj,createRenderState:Pj}),MB=Symbol.for("motionComponentSymbol");function Zu(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function EB(t,e,n){return D.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Zu(n)&&(n.current=r))},[e])}const MS=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),NB="framerAppearId",Dj="data-"+MS(NB),Ij=D.createContext({});function TB(t,e,n,r,i){var _,b;const{visualElement:s}=D.useContext(Wx),a=D.useContext(Ej),l=D.useContext(Gx),c=D.useContext(gS).reducedMotion,u=D.useRef(null);r=r||a.renderer,!u.current&&r&&(u.current=r(t,{visualState:e,parent:s,props:n,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:c}));const d=u.current,f=D.useContext(Ij);d&&!d.projection&&i&&(d.type==="html"||d.type==="svg")&&AB(u.current,n,i,f);const m=D.useRef(!1);D.useInsertionEffect(()=>{d&&m.current&&d.update(n,l)});const g=n[Dj],v=D.useRef(!!g&&!((_=window.MotionHandoffIsComplete)!=null&&_.call(window,g))&&((b=window.MotionHasOptimisedAnimation)==null?void 0:b.call(window,g)));return RR(()=>{d&&(m.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),d.scheduleRenderMicrotask(),v.current&&d.animationState&&d.animationState.animateChanges())}),D.useEffect(()=>{d&&(!v.current&&d.animationState&&d.animationState.animateChanges(),v.current&&(queueMicrotask(()=>{var x;(x=window.MotionHandoffMarkAsComplete)==null||x.call(window,g)}),v.current=!1),d.enteringChildren=void 0)}),d}function AB(t,e,n,r){const{layoutId:i,layout:s,drag:a,dragConstraints:l,layoutScroll:c,layoutRoot:u,layoutCrossfade:d}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:Uj(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!a||l&&Zu(l),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,crossfade:d,layoutScroll:c,layoutRoot:u})}function Uj(t){if(t)return t.options.allowProjection!==!1?t.projection:Uj(t.parent)}function o1(t,{forwardMotionProps:e=!1}={},n,r){n&&tB(n);const i=_S(t)?SB:wB;function s(l,c){let u;const d={...D.useContext(gS),...l,layoutId:CB(l)},{isStatic:f}=d,m=aB(l),g=i(l,f);if(!f&&$w){kB();const v=PB(d);u=v.MeasureLayout,m.visualElement=TB(t,g,d,r,v.ProjectionNode)}return o.jsxs(Wx.Provider,{value:m,children:[u&&m.visualElement?o.jsx(u,{visualElement:m.visualElement,...d}):null,yB(t,l,EB(g,m.visualElement,c),g,f,e)]})}s.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const a=D.forwardRef(s);return a[MB]=t,a}function CB({layoutId:t}){const e=D.useContext(Yw).id;return e&&t!==void 0?e+"-"+t:t}function kB(t,e){D.useContext(Ej).strict}function PB(t){const{drag:e,layout:n}=Nd;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function RB(t,e){if(typeof Proxy>"u")return o1;const n=new Map,r=(s,a)=>o1(s,a,t,e),i=(s,a)=>r(s,a);return new Proxy(i,{get:(s,a)=>a==="create"?r:(n.has(a)||n.set(a,o1(a,void 0,t,e)),n.get(a))})}function Oj({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function jB({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function LB(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function l1(t){return t===void 0||t===1}function U2({scale:t,scaleX:e,scaleY:n}){return!l1(t)||!l1(e)||!l1(n)}function Ql(t){return U2(t)||Fj(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function Fj(t){return HT(t.x)||HT(t.y)}function HT(t){return t&&t!=="0%"}function ux(t,e,n){const r=t-n,i=e*r;return n+i}function GT(t,e,n,r,i){return i!==void 0&&(t=ux(t,i,r)),ux(t,n,r)+e}function O2(t,e=0,n=1,r,i){t.min=GT(t.min,e,n,r,i),t.max=GT(t.max,e,n,r,i)}function zj(t,{x:e,y:n}){O2(t.x,e.translate,e.scale,e.originPoint),O2(t.y,n.translate,n.scale,n.originPoint)}const WT=.999999999999,XT=1.0000000000001;function DB(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,a;for(let l=0;l<i;l++){s=n[l],a=s.projectionDelta;const{visualElement:c}=s.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Ju(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,zj(t,a)),r&&Ql(s.latestValues)&&Ju(t,s.latestValues))}e.x<XT&&e.x>WT&&(e.x=1),e.y<XT&&e.y>WT&&(e.y=1)}function Ku(t,e){t.min=t.min+e,t.max=t.max+e}function YT(t,e,n,r,i=.5){const s=En(t.min,t.max,i);O2(t,e,n,s,r)}function Ju(t,e){YT(t.x,e.x,e.scaleX,e.scale,e.originX),YT(t.y,e.y,e.scaleY,e.scale,e.originY)}function Bj(t,e){return Oj(LB(t.getBoundingClientRect(),e))}function IB(t,e,n){const r=Bj(t,n),{scroll:i}=e;return i&&(Ku(r.x,i.offset.x),Ku(r.y,i.offset.y)),r}const qT=()=>({translate:0,scale:1,origin:0,originPoint:0}),Qu=()=>({x:qT(),y:qT()}),$T=()=>({min:0,max:0}),ir=()=>({x:$T(),y:$T()}),F2={current:null},Vj={current:!1};function UB(){if(Vj.current=!0,!!$w)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>F2.current=t.matches;t.addEventListener("change",e),e()}else F2.current=!1}const OB=new WeakMap;function FB(t,e,n){for(const r in e){const i=e[r],s=n[r];if(Vr(i))t.addValue(r,i);else if(Vr(s))t.addValue(r,Ed(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const a=t.getValue(r);a.liveStyle===!0?a.jump(i):a.hasAnimated||a.set(i)}else{const a=t.getStaticValue(r);t.addValue(r,Ed(a!==void 0?a:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const ZT=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class zB{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:a},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=dS,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=Ni.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,vn.render(this.render,!1,!0))};const{latestValues:c,renderState:u}=a;this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=u,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=l,this.blockInitialAnimation=!!s,this.isControllingVariants=Yx(n),this.isVariantNode=Tj(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...f}=this.scrapeMotionValuesFromProps(n,{},this);for(const m in f){const g=f[m];c[m]!==void 0&&Vr(g)&&g.set(c[m])}}mount(e){var n;this.current=e,OB.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,i)=>this.bindToMotionValue(i,r)),Vj.current||UB(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:F2.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),cl(this.notifyUpdate),cl(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=zd.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&vn.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s&&s(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Nd){const n=Nd[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ir()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<ZT.length;r++){const i=ZT[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,a=e[s];a&&(this.propEventSubscriptions[i]=this.on(i,a))}this.prevMotionValues=FB(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Ed(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(jR(r)||DR(r))?r=parseFloat(r):!q6(r)&&ul.test(n)&&(r=xj(e,n)),this.setBaseTarget(e,Vr(r)?r.get():r)),Vr(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var s;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const a=wS(this.props,n,(s=this.presenceContext)==null?void 0:s.custom);a&&(r=a[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Vr(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new eS),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){pS.render(this.render)}}class Hj extends zB{constructor(){super(...arguments),this.KeyframeResolver=I6}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Vr(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function Gj(t,{style:e,vars:n},r,i){const s=t.style;let a;for(a in e)s[a]=e[a];i==null||i.applyProjectionStyles(s,r);for(a in n)s.setProperty(a,n[a])}function BB(t){return window.getComputedStyle(t)}class VB extends Hj{constructor(){super(...arguments),this.type="html",this.renderInstance=Gj}readValueFromInstance(e,n){var r;if(zd.has(n))return(r=this.projection)!=null&&r.isProjecting?C2(n):t6(e,n);{const i=BB(e),s=($R(n)?i.getPropertyValue(n):i[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return Bj(e,n)}build(e,n,r){yS(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return SS(e,n,r)}}const Wj=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function HB(t,e,n,r){Gj(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(Wj.has(i)?i:MS(i),e.attrs[i])}class GB extends Hj{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ir}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(zd.has(n)){const r=gj(n);return r&&r.default||0}return n=Wj.has(n)?n:MS(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return Lj(e,n,r)}build(e,n,r){kj(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,i){HB(e,n,r,i)}mount(e){this.isSVGTag=Rj(e.tagName),super.mount(e)}}const WB=(t,e)=>_S(t)?new GB(e):new VB(e,{allowProjection:t!==D.Fragment});function fd(t,e,n){const r=t.getProps();return wS(r,e,n!==void 0?n:r.custom,t)}const z2=t=>Array.isArray(t);function XB(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Ed(n))}function YB(t){return z2(t)?t[t.length-1]||0:t}function qB(t,e){const n=fd(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const a in s){const l=YB(s[a]);XB(t,a,l)}}function $B(t){return!!(Vr(t)&&t.add)}function B2(t,e){const n=t.getValue("willChange");if($B(n))return n.add(e);if(!n&&io.WillChange){const r=new io.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function Xj(t){return t.props[Dj]}const ZB=t=>t!==null;function KB(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(ZB),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return!s||r===void 0?i[s]:r}const JB={type:"spring",stiffness:500,damping:25,restSpeed:10},QB=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),e8={type:"keyframes",duration:.8},t8={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},n8=(t,{keyframes:e})=>e.length>2?e8:zd.has(t)?t.startsWith("scale")?QB(e[1]):JB:t8;function r8({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:a,repeatDelay:l,from:c,elapsed:u,...d}){return!!Object.keys(d).length}const ES=(t,e,n,r={},i,s)=>a=>{const l=hS(r,t)||{},c=l.delay||r.delay||0;let{elapsed:u=0}=r;u=u-la(c);const d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...l,delay:-u,onUpdate:m=>{e.set(m),l.onUpdate&&l.onUpdate(m)},onComplete:()=>{a(),l.onComplete&&l.onComplete()},name:t,motionValue:e,element:s?void 0:i};r8(l)||Object.assign(d,n8(t,d)),d.duration&&(d.duration=la(d.duration)),d.repeatDelay&&(d.repeatDelay=la(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let f=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(L2(d),d.delay===0&&(f=!0)),(io.instantAnimations||io.skipAnimations)&&(f=!0,L2(d),d.delay=0),d.allowFlatten=!l.type&&!l.ease,f&&!s&&e.get()!==void 0){const m=KB(d.keyframes,l);if(m!==void 0){vn.update(()=>{d.onUpdate(m),d.onComplete()});return}}return l.isSync?new uS(d):new M6(d)};function i8({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function Yj(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s=t.getDefaultTransition(),transitionEnd:a,...l}=e;r&&(s=r);const c=[],u=i&&t.animationState&&t.animationState.getState()[i];for(const d in l){const f=t.getValue(d,t.latestValues[d]??null),m=l[d];if(m===void 0||u&&i8(u,d))continue;const g={delay:n,...hS(s||{},d)},v=f.get();if(v!==void 0&&!f.isAnimating&&!Array.isArray(m)&&m===v&&!g.velocity)continue;let _=!1;if(window.MotionHandoffAnimation){const x=Xj(t);if(x){const y=window.MotionHandoffAnimation(x,d,vn);y!==null&&(g.startTime=y,_=!0)}}B2(t,d),f.start(ES(d,f,m,t.shouldReduceMotion&&fj.has(d)?{type:!1}:g,t,_));const b=f.animation;b&&c.push(b)}return a&&Promise.all(c).then(()=>{vn.update(()=>{a&&qB(t,a)})}),c}function qj(t,e,n,r=0,i=1){const s=Array.from(t).sort((u,d)=>u.sortNodePosition(d)).indexOf(e),a=t.size,l=(a-1)*r;return typeof n=="function"?n(s,a):i===1?s*r:l-s*r}function V2(t,e,n={}){var c;const r=fd(t,e,n.type==="exit"?(c=t.presenceContext)==null?void 0:c.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(Yj(t,r,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:f,staggerDirection:m}=i;return s8(t,e,u,d,f,m,n)}:()=>Promise.resolve(),{when:l}=i;if(l){const[u,d]=l==="beforeChildren"?[s,a]:[a,s];return u().then(()=>d())}else return Promise.all([s(),a(n.delay)])}function s8(t,e,n=0,r=0,i=0,s=1,a){const l=[];for(const c of t.variantChildren)c.notify("AnimationStart",e),l.push(V2(c,e,{...a,delay:n+(typeof r=="function"?0:r)+qj(t.variantChildren,c,r,i,s)}).then(()=>c.notify("AnimationComplete",e)));return Promise.all(l)}function a8(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>V2(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=V2(t,e,n);else{const i=typeof e=="function"?fd(t,e,n.custom):e;r=Promise.all(Yj(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function $j(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const o8=vS.length;function Zj(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?Zj(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<o8;n++){const r=vS[n],i=t.props[r];(Yf(i)||i===!1)&&(e[r]=i)}return e}const l8=[...xS].reverse(),c8=xS.length;function u8(t){return e=>Promise.all(e.map(({animation:n,options:r})=>a8(t,n,r)))}function d8(t){let e=u8(t),n=KT(),r=!0;const i=c=>(u,d)=>{var m;const f=fd(t,d,c==="exit"?(m=t.presenceContext)==null?void 0:m.custom:void 0);if(f){const{transition:g,transitionEnd:v,..._}=f;u={...u,..._,...v}}return u};function s(c){e=c(t)}function a(c){const{props:u}=t,d=Zj(t.parent)||{},f=[],m=new Set;let g={},v=1/0;for(let b=0;b<c8;b++){const x=l8[b],y=n[x],S=u[x]!==void 0?u[x]:d[x],E=Yf(S),A=x===c?y.isActive:null;A===!1&&(v=b);let T=S===d[x]&&S!==u[x]&&E;if(T&&r&&t.manuallyAnimateOnMount&&(T=!1),y.protectedKeys={...g},!y.isActive&&A===null||!S&&!y.prevProp||Xx(S)||typeof S=="boolean")continue;const C=h8(y.prevProp,S);let j=C||x===c&&y.isActive&&!T&&E||b>v&&E,k=!1;const P=Array.isArray(S)?S:[S];let H=P.reduce(i(x),{});A===!1&&(H={});const{prevResolvedValues:B={}}=y,Y={...B,...H},V=re=>{j=!0,m.has(re)&&(k=!0,m.delete(re)),y.needsAnimating[re]=!0;const I=t.getValue(re);I&&(I.liveStyle=!1)};for(const re in Y){const I=H[re],F=B[re];if(g.hasOwnProperty(re))continue;let z=!1;z2(I)&&z2(F)?z=!$j(I,F):z=I!==F,z?I!=null?V(re):m.add(re):I!==void 0&&m.has(re)?V(re):y.protectedKeys[re]=!0}y.prevProp=S,y.prevResolvedValues=H,y.isActive&&(g={...g,...H}),r&&t.blockInitialAnimation&&(j=!1);const Q=T&&C;j&&(!Q||k)&&f.push(...P.map(re=>{const I={type:x};if(typeof re=="string"&&r&&!Q&&t.manuallyAnimateOnMount&&t.parent){const{parent:F}=t,z=fd(F,re);if(F.enteringChildren&&z){const{delayChildren:U}=z.transition||{};I.delay=qj(F.enteringChildren,t,U)}}return{animation:re,options:I}}))}if(m.size){const b={};if(typeof u.initial!="boolean"){const x=fd(t,Array.isArray(u.initial)?u.initial[0]:u.initial);x&&x.transition&&(b.transition=x.transition)}m.forEach(x=>{const y=t.getBaseTarget(x),S=t.getValue(x);S&&(S.liveStyle=!0),b[x]=y??null}),f.push({animation:b})}let _=!!f.length;return r&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(_=!1),r=!1,_?e(f):Promise.resolve()}function l(c,u){var f;if(n[c].isActive===u)return Promise.resolve();(f=t.variantChildren)==null||f.forEach(m=>{var g;return(g=m.animationState)==null?void 0:g.setActive(c,u)}),n[c].isActive=u;const d=a(c);for(const m in n)n[m].protectedKeys={};return d}return{animateChanges:a,setActive:l,setAnimateFunction:s,getState:()=>n,reset:()=>{n=KT()}}}function h8(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!$j(e,t):!1}function Fl(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function KT(){return{animate:Fl(!0),whileInView:Fl(),whileHover:Fl(),whileTap:Fl(),whileDrag:Fl(),whileFocus:Fl(),exit:Fl()}}class vl{constructor(e){this.isMounted=!1,this.node=e}update(){}}class f8 extends vl{constructor(e){super(e),e.animationState||(e.animationState=d8(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Xx(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let p8=0;class m8 extends vl{constructor(){super(...arguments),this.id=p8++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const g8={animation:{Feature:f8},exit:{Feature:m8}};function qf(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function Np(t){return{point:{x:t.pageX,y:t.pageY}}}const x8=t=>e=>mS(e)&&t(e,Np(e));function mf(t,e,n,r){return qf(t,e,x8(n),r)}const Kj=1e-4,v8=1-Kj,y8=1+Kj,Jj=.01,b8=0-Jj,_8=0+Jj;function li(t){return t.max-t.min}function w8(t,e,n){return Math.abs(t-e)<=n}function JT(t,e,n,r=.5){t.origin=r,t.originPoint=En(e.min,e.max,t.origin),t.scale=li(n)/li(e),t.translate=En(n.min,n.max,t.origin)-t.originPoint,(t.scale>=v8&&t.scale<=y8||isNaN(t.scale))&&(t.scale=1),(t.translate>=b8&&t.translate<=_8||isNaN(t.translate))&&(t.translate=0)}function gf(t,e,n,r){JT(t.x,e.x,n.x,r?r.originX:void 0),JT(t.y,e.y,n.y,r?r.originY:void 0)}function QT(t,e,n){t.min=n.min+e.min,t.max=t.min+li(e)}function S8(t,e,n){QT(t.x,e.x,n.x),QT(t.y,e.y,n.y)}function eA(t,e,n){t.min=e.min-n.min,t.max=t.min+li(e)}function dx(t,e,n){eA(t.x,e.x,n.x),eA(t.y,e.y,n.y)}function cs(t){return[t("x"),t("y")]}const Qj=({current:t})=>t?t.ownerDocument.defaultView:null,tA=(t,e)=>Math.abs(t-e);function M8(t,e){const n=tA(t.x,e.x),r=tA(t.y,e.y);return Math.sqrt(n**2+r**2)}class eL{constructor(e,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:s=!1,distanceThreshold:a=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=u1(this.lastMoveEventInfo,this.history),g=this.startEvent!==null,v=M8(m.offset,{x:0,y:0})>=this.distanceThreshold;if(!g&&!v)return;const{point:_}=m,{timestamp:b}=Er;this.history.push({..._,timestamp:b});const{onStart:x,onMove:y}=this.handlers;g||(x&&x(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),y&&y(this.lastMoveEvent,m)},this.handlePointerMove=(m,g)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=c1(g,this.transformPagePoint),vn.update(this.updatePoint,!0)},this.handlePointerUp=(m,g)=>{this.end();const{onEnd:v,onSessionEnd:_,resumeAnimation:b}=this.handlers;if(this.dragSnapToOrigin&&b&&b(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=u1(m.type==="pointercancel"?this.lastMoveEventInfo:c1(g,this.transformPagePoint),this.history);this.startEvent&&v&&v(m,x),_&&_(m,x)},!mS(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=a,this.contextWindow=i||window;const l=Np(e),c=c1(l,this.transformPagePoint),{point:u}=c,{timestamp:d}=Er;this.history=[{...u,timestamp:d}];const{onSessionStart:f}=n;f&&f(e,u1(c,this.history)),this.removeListeners=Sp(mf(this.contextWindow,"pointermove",this.handlePointerMove),mf(this.contextWindow,"pointerup",this.handlePointerUp),mf(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),cl(this.updatePoint)}}function c1(t,e){return e?{point:e(t.point)}:t}function nA(t,e){return{x:t.x-e.x,y:t.y-e.y}}function u1({point:t},e){return{point:t,delta:nA(t,tL(e)),offset:nA(t,E8(e)),velocity:N8(e,.1)}}function E8(t){return t[0]}function tL(t){return t[t.length-1]}function N8(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=tL(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>la(e)));)n--;if(!r)return{x:0,y:0};const s=fs(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const a={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function T8(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?En(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?En(n,t,r.max):Math.min(t,n)),t}function rA(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function A8(t,{top:e,left:n,bottom:r,right:i}){return{x:rA(t.x,n,i),y:rA(t.y,e,r)}}function iA(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function C8(t,e){return{x:iA(t.x,e.x),y:iA(t.y,e.y)}}function k8(t,e){let n=.5;const r=li(t),i=li(e);return i>r?n=Gf(e.min,e.max-r,t.min):r>i&&(n=Gf(t.min,t.max-i,e.min)),ro(0,1,n)}function P8(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const H2=.35;function R8(t=H2){return t===!1?t=0:t===!0&&(t=H2),{x:sA(t,"left","right"),y:sA(t,"top","bottom")}}function sA(t,e,n){return{min:aA(t,e),max:aA(t,n)}}function aA(t,e){return typeof t=="number"?t:t[e]||0}const j8=new WeakMap;class L8{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ir(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const s=f=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Np(f).point)},a=(f,m)=>{const{drag:g,dragPropagation:v,onDragStart:_}=this.getProps();if(g&&!v&&(this.openDragLock&&this.openDragLock(),this.openDragLock=z6(g),!this.openDragLock))return;this.latestPointerEvent=f,this.latestPanInfo=m,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),cs(x=>{let y=this.getAxisMotionValue(x).get()||0;if(ca.test(y)){const{projection:S}=this.visualElement;if(S&&S.layout){const E=S.layout.layoutBox[x];E&&(y=li(E)*(parseFloat(y)/100))}}this.originPoint[x]=y}),_&&vn.postRender(()=>_(f,m)),B2(this.visualElement,"transform");const{animationState:b}=this.visualElement;b&&b.setActive("whileDrag",!0)},l=(f,m)=>{this.latestPointerEvent=f,this.latestPanInfo=m;const{dragPropagation:g,dragDirectionLock:v,onDirectionLock:_,onDrag:b}=this.getProps();if(!g&&!this.openDragLock)return;const{offset:x}=m;if(v&&this.currentDirection===null){this.currentDirection=D8(x),this.currentDirection!==null&&_&&_(this.currentDirection);return}this.updateAxis("x",m.point,x),this.updateAxis("y",m.point,x),this.visualElement.render(),b&&b(f,m)},c=(f,m)=>{this.latestPointerEvent=f,this.latestPanInfo=m,this.stop(f,m),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>cs(f=>{var m;return this.getAnimationState(f)==="paused"&&((m=this.getAxisMotionValue(f).animation)==null?void 0:m.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new eL(e,{onSessionStart:s,onStart:a,onMove:l,onSessionEnd:c,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,distanceThreshold:r,contextWindow:Qj(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,i=n||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!i||!r)return;const{velocity:a}=i;this.startAnimation(a);const{onDragEnd:l}=this.getProps();l&&vn.postRender(()=>l(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!Km(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let a=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(a=T8(a,this.constraints[e],this.elastic[e])),s.set(a)}resolveConstraints(){var s;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(s=this.visualElement.projection)==null?void 0:s.layout,i=this.constraints;e&&Zu(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=A8(r.layoutBox,e):this.constraints=!1,this.elastic=R8(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&cs(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=P8(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Zu(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=IB(r,i.root,this.visualElement.getTransformPagePoint());let a=C8(i.layout.layoutBox,s);if(n){const l=n(jB(a));this.hasMutatedConstraints=!!l,l&&(a=Oj(l))}return a}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:a,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},u=cs(d=>{if(!Km(d,n,this.currentDirection))return;let f=c&&c[d]||{};a&&(f={min:0,max:0});const m=i?200:1e6,g=i?40:1e7,v={type:"inertia",velocity:r?e[d]:0,bounceStiffness:m,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...s,...f};return this.startAxisValueAnimation(d,v)});return Promise.all(u).then(l)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return B2(this.visualElement,e),r.start(ES(e,r,0,n,this.visualElement,!1))}stopAnimation(){cs(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){cs(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){cs(n=>{const{drag:r}=this.getProps();if(!Km(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:a,max:l}=i.layout.layoutBox[n];s.set(e[n]-En(a,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Zu(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};cs(a=>{const l=this.getAxisMotionValue(a);if(l&&this.constraints!==!1){const c=l.get();i[a]=k8({min:c,max:c},this.constraints[a])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),cs(a=>{if(!Km(a,e,null))return;const l=this.getAxisMotionValue(a),{min:c,max:u}=this.constraints[a];l.set(En(c,u,i[a]))})}addListeners(){if(!this.visualElement.current)return;j8.set(this.visualElement,this);const e=this.visualElement.current,n=mf(e,"pointerdown",c=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();Zu(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),vn.read(r);const a=qf(window,"resize",()=>this.scalePositionWithinConstraints()),l=i.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(cs(d=>{const f=this.getAxisMotionValue(d);f&&(this.originPoint[d]+=c[d].translate,f.set(f.get()+c[d].translate))}),this.visualElement.render())});return()=>{a(),n(),s(),l&&l()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:a=H2,dragMomentum:l=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:a,dragMomentum:l}}}function Km(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function D8(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class I8 extends vl{constructor(e){super(e),this.removeGroupControls=ms,this.removeListeners=ms,this.controls=new L8(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ms}unmount(){this.removeGroupControls(),this.removeListeners()}}const oA=t=>(e,n)=>{t&&vn.postRender(()=>t(e,n))};class U8 extends vl{constructor(){super(...arguments),this.removePointerDownListener=ms}onPointerDown(e){this.session=new eL(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Qj(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:oA(e),onStart:oA(n),onMove:r,onEnd:(s,a)=>{delete this.session,i&&vn.postRender(()=>i(s,a))}}}mount(){this.removePointerDownListener=mf(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const v0={hasAnimatedSinceResize:!0,hasEverUpdated:!1};let d1=!1;class O8 extends D.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),d1&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),v0.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,{projection:a}=r;return a&&(a.isPresent=s,d1=!0,i||e.layoutDependency!==n||n===void 0||e.isPresent!==s?a.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?a.promote():a.relegate()||vn.postRender(()=>{const l=a.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),pS.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;d1=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function nL(t){const[e,n]=Mj(),r=D.useContext(Yw);return o.jsx(O8,{...t,layoutGroup:r,switchLayoutGroup:D.useContext(Ij),isPresent:e,safeToRemove:n})}function F8(t,e,n){const r=Vr(t)?t:Ed(t);return r.start(ES("",r,e,n)),r.animation}const z8=(t,e)=>t.depth-e.depth;class B8{constructor(){this.children=[],this.isDirty=!1}add(e){Zw(this.children,e),this.isDirty=!0}remove(e){Kw(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(z8),this.isDirty=!1,this.children.forEach(e)}}function V8(t,e){const n=Ni.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(cl(r),t(s-e))};return vn.setup(r,!0),()=>cl(r)}const rL=["TopLeft","TopRight","BottomLeft","BottomRight"],H8=rL.length,lA=t=>typeof t=="string"?parseFloat(t):t,cA=t=>typeof t=="number"||wt.test(t);function G8(t,e,n,r,i,s){i?(t.opacity=En(0,n.opacity??1,W8(r)),t.opacityExit=En(e.opacity??1,0,X8(r))):s&&(t.opacity=En(e.opacity??1,n.opacity??1,r));for(let a=0;a<H8;a++){const l=`border${rL[a]}Radius`;let c=uA(e,l),u=uA(n,l);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||cA(c)===cA(u)?(t[l]=Math.max(En(lA(c),lA(u),r),0),(ca.test(u)||ca.test(c))&&(t[l]+="%")):t[l]=u}(e.rotate||n.rotate)&&(t.rotate=En(e.rotate||0,n.rotate||0,r))}function uA(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const W8=iL(0,.5,HR),X8=iL(.5,.95,ms);function iL(t,e,n){return r=>r<t?0:r>e?1:n(Gf(t,e,r))}function dA(t,e){t.min=e.min,t.max=e.max}function Ms(t,e){dA(t.x,e.x),dA(t.y,e.y)}function hA(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function fA(t,e,n,r,i){return t-=e,t=ux(t,1/n,r),i!==void 0&&(t=ux(t,1/i,r)),t}function Y8(t,e=0,n=1,r=.5,i,s=t,a=t){if(ca.test(e)&&(e=parseFloat(e),e=En(a.min,a.max,e/100)-a.min),typeof e!="number")return;let l=En(s.min,s.max,r);t===s&&(l-=e),t.min=fA(t.min,e,n,l,i),t.max=fA(t.max,e,n,l,i)}function pA(t,e,[n,r,i],s,a){Y8(t,e[n],e[r],e[i],e.scale,s,a)}const q8=["x","scaleX","originX"],$8=["y","scaleY","originY"];function mA(t,e,n,r){pA(t.x,e,q8,n?n.x:void 0,r?r.x:void 0),pA(t.y,e,$8,n?n.y:void 0,r?r.y:void 0)}function gA(t){return t.translate===0&&t.scale===1}function sL(t){return gA(t.x)&&gA(t.y)}function xA(t,e){return t.min===e.min&&t.max===e.max}function Z8(t,e){return xA(t.x,e.x)&&xA(t.y,e.y)}function vA(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function aL(t,e){return vA(t.x,e.x)&&vA(t.y,e.y)}function yA(t){return li(t.x)/li(t.y)}function bA(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class K8{constructor(){this.members=[]}add(e){Zw(this.members,e),e.scheduleRender()}remove(e){if(Kw(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function J8(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,a=(n==null?void 0:n.z)||0;if((i||s||a)&&(r=`translate3d(${i}px, ${s}px, ${a}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:u,rotate:d,rotateX:f,rotateY:m,skewX:g,skewY:v}=n;u&&(r=`perspective(${u}px) ${r}`),d&&(r+=`rotate(${d}deg) `),f&&(r+=`rotateX(${f}deg) `),m&&(r+=`rotateY(${m}deg) `),g&&(r+=`skewX(${g}deg) `),v&&(r+=`skewY(${v}deg) `)}const l=t.x.scale*e.x,c=t.y.scale*e.y;return(l!==1||c!==1)&&(r+=`scale(${l}, ${c})`),r||"none"}const h1=["","X","Y","Z"],Q8=1e3;let eV=0;function f1(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function oL(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=Xj(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",vn,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&oL(r)}function lL({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(a={},l=e==null?void 0:e()){this.id=eV++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(rV),this.nodes.forEach(oV),this.nodes.forEach(lV),this.nodes.forEach(iV)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new B8)}addEventListener(a,l){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new eS),this.eventHandlers.get(a).add(l)}notifyListeners(a,...l){const c=this.eventHandlers.get(a);c&&c.notify(...l)}hasListeners(a){return this.eventHandlers.has(a)}mount(a){if(this.instance)return;this.isSVG=Sj(a)&&!X6(a),this.instance=a;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||l)&&(this.isLayoutDirty=!0),t){let d,f=0;const m=()=>this.root.updateBlockedByResize=!1;vn.read(()=>{f=window.innerWidth}),t(a,()=>{const g=window.innerWidth;g!==f&&(f=g,this.root.updateBlockedByResize=!0,d&&d(),d=V8(m,250),v0.hasAnimatedSinceResize&&(v0.hasAnimatedSinceResize=!1,this.nodes.forEach(SA)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f,hasRelativeLayoutChanged:m,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const v=this.options.transition||u.getDefaultTransition()||fV,{onLayoutAnimationStart:_,onLayoutAnimationComplete:b}=u.getProps(),x=!this.targetLayout||!aL(this.targetLayout,g),y=!f&&m;if(this.options.layoutRoot||this.resumeFrom||y||f&&(x||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const S={...hS(v,"layout"),onPlay:_,onComplete:b};(u.shouldReduceMotion||this.options.layoutRoot)&&(S.delay=0,S.type=!1),this.startAnimation(S),this.setAnimationOrigin(d,y)}else f||SA(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),cl(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(cV),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&oL(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const f=this.path[d];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(_A);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(wA);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(aV),this.nodes.forEach(tV),this.nodes.forEach(nV)):this.nodes.forEach(wA),this.clearAllSnapshots();const l=Ni.now();Er.delta=ro(0,1e3/60,l-Er.timestamp),Er.timestamp=l,Er.isProcessing=!0,t1.update.process(Er),t1.preRender.process(Er),t1.render.process(Er),Er.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,pS.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(sV),this.sharedNodes.forEach(uV)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,vn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){vn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!li(this.snapshot.measuredBox.x)&&!li(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=ir(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(l=!1),l&&this.instance){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!i)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!sL(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;a&&this.instance&&(l||Ql(this.latestValues)||d)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return a&&(c=this.removeTransform(c)),pV(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:a}=this.options;if(!a)return ir();const l=a.measureViewportBox();if(!(((u=this.scroll)==null?void 0:u.wasRoot)||this.path.some(mV))){const{scroll:d}=this.root;d&&(Ku(l.x,d.offset.x),Ku(l.y,d.offset.y))}return l}removeElementScroll(a){var c;const l=ir();if(Ms(l,a),(c=this.scroll)!=null&&c.wasRoot)return l;for(let u=0;u<this.path.length;u++){const d=this.path[u],{scroll:f,options:m}=d;d!==this.root&&f&&m.layoutScroll&&(f.wasRoot&&Ms(l,a),Ku(l.x,f.offset.x),Ku(l.y,f.offset.y))}return l}applyTransform(a,l=!1){const c=ir();Ms(c,a);for(let u=0;u<this.path.length;u++){const d=this.path[u];!l&&d.options.layoutScroll&&d.scroll&&d!==d.root&&Ju(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),Ql(d.latestValues)&&Ju(c,d.latestValues)}return Ql(this.latestValues)&&Ju(c,this.latestValues),c}removeTransform(a){const l=ir();Ms(l,a);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!Ql(u.latestValues))continue;U2(u.latestValues)&&u.updateSnapshot();const d=ir(),f=u.measurePageBox();Ms(d,f),mA(l,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return Ql(this.latestValues)&&mA(l,this.latestValues),l}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Er.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var g;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(a||c&&this.isSharedProjectionDirty||this.isProjectionDirty||(g=this.parent)!=null&&g.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:f}=this.options;if(!this.layout||!(d||f))return;this.resolvedRelativeTargetAt=Er.timestamp;const m=this.getClosestProjectingParent();m&&this.linkedParentVersion!==m.layoutVersion&&!m.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(m&&m.layout?this.createRelativeTarget(m,this.layout.layoutBox,m.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=ir(),this.targetWithTransforms=ir()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),S8(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ms(this.target,this.layout.layoutBox),zj(this.target,this.targetDelta)):Ms(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?this.createRelativeTarget(m,this.target,m.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||U2(this.parent.latestValues)||Fj(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(a,l,c){this.relativeParent=a,this.linkedParentVersion=a.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ir(),this.relativeTargetOrigin=ir(),dx(this.relativeTargetOrigin,l,c),Ms(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var v;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||(v=this.parent)!=null&&v.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Er.timestamp&&(c=!1),c)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;Ms(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,m=this.treeScale.y;DB(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=ir());const{target:g}=a;if(!g){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(hA(this.prevProjectionDelta.x,this.projectionDelta.x),hA(this.prevProjectionDelta.y,this.projectionDelta.y)),gf(this.projectionDelta,this.layoutCorrected,g,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==m||!bA(this.projectionDelta.x,this.prevProjectionDelta.x)||!bA(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var l;if((l=this.options.visualElement)==null||l.scheduleRender(),a){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Qu(),this.projectionDelta=Qu(),this.projectionDeltaWithTransform=Qu()}setAnimationOrigin(a,l=!1){const c=this.snapshot,u=c?c.latestValues:{},d={...this.latestValues},f=Qu();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const m=ir(),g=c?c.source:void 0,v=this.layout?this.layout.source:void 0,_=g!==v,b=this.getStack(),x=!b||b.members.length<=1,y=!!(_&&!x&&this.options.crossfade===!0&&!this.path.some(hV));this.animationProgress=0;let S;this.mixTargetDelta=E=>{const A=E/1e3;MA(f.x,a.x,A),MA(f.y,a.y,A),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(dx(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),dV(this.relativeTarget,this.relativeTargetOrigin,m,A),S&&Z8(this.relativeTarget,S)&&(this.isProjectionDirty=!1),S||(S=ir()),Ms(S,this.relativeTarget)),_&&(this.animationValues=d,G8(d,u,this.latestValues,A,y,x)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=A},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){var l,c,u;this.notifyListeners("animationStart"),(l=this.currentAnimation)==null||l.stop(),(u=(c=this.resumingFrom)==null?void 0:c.currentAnimation)==null||u.stop(),this.pendingAnimation&&(cl(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=vn.update(()=>{v0.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Ed(0)),this.currentAnimation=F8(this.motionValue,[0,1e3],{...a,velocity:0,isSync:!0,onUpdate:d=>{this.mixTargetDelta(d),a.onUpdate&&a.onUpdate(d)},onStop:()=>{},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Q8),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:l,target:c,layout:u,latestValues:d}=a;if(!(!l||!c||!u)){if(this!==a&&this.layout&&u&&cL(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||ir();const f=li(this.layout.layoutBox.x);c.x.min=a.target.x.min,c.x.max=c.x.min+f;const m=li(this.layout.layoutBox.y);c.y.min=a.target.y.min,c.y.max=c.y.min+m}Ms(l,c),Ju(l,d),gf(this.projectionDeltaWithTransform,this.layoutCorrected,l,d)}}registerSharedNode(a,l){this.sharedNodes.has(a)||this.sharedNodes.set(a,new K8),this.sharedNodes.get(a).add(l);const u=l.options.initialPromotionConfig;l.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(l):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var l;const{layoutId:a}=this.options;return a?((l=this.getStack())==null?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:a}=this.options;return a?(l=this.getStack())==null?void 0:l.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:l,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),a&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let l=!1;const{latestValues:c}=a;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const u={};c.z&&f1("z",a,u,this.animationValues);for(let d=0;d<h1.length;d++)f1(`rotate${h1[d]}`,a,u,this.animationValues),f1(`skew${h1[d]}`,a,u,this.animationValues);a.render();for(const d in u)a.setStaticValue(d,u[d]),this.animationValues&&(this.animationValues[d]=u[d]);a.scheduleRender()}applyProjectionStyles(a,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){a.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,a.visibility="",a.opacity="",a.pointerEvents=x0(l==null?void 0:l.pointerEvents)||"",a.transform=c?c(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(a.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,a.pointerEvents=x0(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!Ql(this.latestValues)&&(a.transform=c?c({},""):"none",this.hasProjected=!1);return}a.visibility="";const d=u.animationValues||u.latestValues;this.applyTransformsToTarget();let f=J8(this.projectionDeltaWithTransform,this.treeScale,d);c&&(f=c(d,f)),a.transform=f;const{x:m,y:g}=this.projectionDelta;a.transformOrigin=`${m.origin*100}% ${g.origin*100}% 0`,u.animationValues?a.opacity=u===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:a.opacity=u===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const v in I2){if(d[v]===void 0)continue;const{correct:_,applyTo:b,isCSSVariable:x}=I2[v],y=f==="none"?d[v]:_(d[v],u);if(b){const S=b.length;for(let E=0;E<S;E++)a[b[E]]=y}else x?this.options.visualElement.renderState.vars[v]=y:a[v]=y}this.options.layoutId&&(a.pointerEvents=u===this?x0(l==null?void 0:l.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var l;return(l=a.currentAnimation)==null?void 0:l.stop()}),this.root.nodes.forEach(_A),this.root.sharedNodes.clear()}}}function tV(t){t.updateLayout()}function nV(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,a=e.source!==t.layout.source;s==="size"?cs(f=>{const m=a?e.measuredBox[f]:e.layoutBox[f],g=li(m);m.min=r[f].min,m.max=m.min+g}):cL(s,e.layoutBox,r)&&cs(f=>{const m=a?e.measuredBox[f]:e.layoutBox[f],g=li(r[f]);m.max=m.min+g,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[f].max=t.relativeTarget[f].min+g)});const l=Qu();gf(l,r,e.layoutBox);const c=Qu();a?gf(c,t.applyTransform(i,!0),e.measuredBox):gf(c,r,e.layoutBox);const u=!sL(l);let d=!1;if(!t.resumeFrom){const f=t.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:m,layout:g}=f;if(m&&g){const v=ir();dx(v,e.layoutBox,m.layoutBox);const _=ir();dx(_,r,g.layoutBox),aL(v,_)||(d=!0),f.options.layoutRoot&&(t.relativeTarget=_,t.relativeTargetOrigin=v,t.relativeParent=f)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:c,layoutDelta:l,hasLayoutChanged:u,hasRelativeLayoutChanged:d})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function rV(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function iV(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function sV(t){t.clearSnapshot()}function _A(t){t.clearMeasurements()}function wA(t){t.isLayoutDirty=!1}function aV(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function SA(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function oV(t){t.resolveTargetDelta()}function lV(t){t.calcProjection()}function cV(t){t.resetSkewAndRotation()}function uV(t){t.removeLeadSnapshot()}function MA(t,e,n){t.translate=En(e.translate,0,n),t.scale=En(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function EA(t,e,n,r){t.min=En(e.min,n.min,r),t.max=En(e.max,n.max,r)}function dV(t,e,n,r){EA(t.x,e.x,n.x,r),EA(t.y,e.y,n.y,r)}function hV(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const fV={duration:.45,ease:[.4,0,.1,1]},NA=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),TA=NA("applewebkit/")&&!NA("chrome/")?Math.round:ms;function AA(t){t.min=TA(t.min),t.max=TA(t.max)}function pV(t){AA(t.x),AA(t.y)}function cL(t,e,n){return t==="position"||t==="preserve-aspect"&&!w8(yA(e),yA(n),.2)}function mV(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const gV=lL({attachResizeListener:(t,e)=>qf(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),p1={current:void 0},uL=lL({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!p1.current){const t=new gV({});t.mount(window),t.setOptions({layoutScroll:!0}),p1.current=t}return p1.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),xV={pan:{Feature:U8},drag:{Feature:I8,ProjectionNode:uL,MeasureLayout:nL}};function CA(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&vn.postRender(()=>s(e,Np(e)))}class vV extends vl{mount(){const{current:e}=this.node;e&&(this.unmount=B6(e,(n,r)=>(CA(this.node,r,"Start"),i=>CA(this.node,i,"End"))))}unmount(){}}class yV extends vl{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Sp(qf(this.node.current,"focus",()=>this.onFocus()),qf(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function kA(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&vn.postRender(()=>s(e,Np(e)))}class bV extends vl{mount(){const{current:e}=this.node;e&&(this.unmount=W6(e,(n,r)=>(kA(this.node,r,"Start"),(i,{success:s})=>kA(this.node,i,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const G2=new WeakMap,m1=new WeakMap,_V=t=>{const e=G2.get(t.target);e&&e(t)},wV=t=>{t.forEach(_V)};function SV({root:t,...e}){const n=t||document;m1.has(n)||m1.set(n,{});const r=m1.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(wV,{root:t,...e})),r[i]}function MV(t,e,n){const r=SV(e);return G2.set(t,n),r.observe(t),()=>{G2.delete(t),r.unobserve(t)}}const EV={some:0,all:1};class NV extends vl{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,a={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:EV[i]},l=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,s&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:f}=this.node.getProps(),m=u?d:f;m&&m(c)};return MV(this.node.current,a,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(TV(e,n))&&this.startObserver()}unmount(){}}function TV({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const AV={inView:{Feature:NV},tap:{Feature:bV},focus:{Feature:yV},hover:{Feature:vV}},CV={layout:{ProjectionNode:uL,MeasureLayout:nL}},kV={...g8,...AV,...xV,...CV},Et=RB(kV,WB);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var PV={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RV=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Ie=(t,e)=>{const n=D.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:a,className:l="",children:c,...u},d)=>D.createElement("svg",{ref:d,...PV,width:i,height:i,stroke:r,strokeWidth:a?Number(s)*24/Number(i):s,className:["lucide",`lucide-${RV(t)}`,l].join(" "),...u},[...e.map(([f,m])=>D.createElement(f,m)),...Array.isArray(c)?c:[c]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pd=Ie("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zs=Ie("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jV=Ie("AlertOctagon",[["polygon",{points:"7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2",key:"h1p8hx"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ui=Ie("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LV=Ie("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DV=Ie("ArrowDownLeft",[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IV=Ie("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UV=Ie("ArrowLeftRight",[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qx=Ie("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OV=Ie("ArrowRightLeft",[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const so=Ie("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dL=Ie("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hL=Ie("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FV=Ie("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fL=Ie("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pL=Ie("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mL=Ie("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zV=Ie("BarChart",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BV=Ie("Bath",[["path",{d:"M9 6 6.5 3.5a1.5 1.5 0 0 0-1-.5C4.683 3 4 3.683 4 4.5V17a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-5",key:"1r8yf5"}],["line",{x1:"10",x2:"8",y1:"5",y2:"7",key:"h5g8z4"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"7",x2:"7",y1:"19",y2:"21",key:"16jp00"}],["line",{x1:"17",x2:"17",y1:"19",y2:"21",key:"1pxrnk"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gL=Ie("Bed",[["path",{d:"M2 4v16",key:"vw9hq8"}],["path",{d:"M2 8h18a2 2 0 0 1 2 2v10",key:"1dgv2r"}],["path",{d:"M2 17h20",key:"18nfp3"}],["path",{d:"M6 8v9",key:"1yriud"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dl=Ie("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NS=Ie("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VV=Ie("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fo=Ie("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ga=Ie("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xL=Ie("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bd=Ie("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HV=Ie("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GV=Ie("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WV=Ie("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ua=Ie("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $x=Ie("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ai=Ie("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vs=Ie("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XV=Ie("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const da=Ie("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YV=Ie("Chrome",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["line",{x1:"21.17",x2:"12",y1:"8",y2:"8",key:"a0cw5f"}],["line",{x1:"3.95",x2:"8.54",y1:"6.06",y2:"14",key:"1kftof"}],["line",{x1:"10.88",x2:"15.46",y1:"21.94",y2:"14",key:"1ymyh8"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pn=Ie("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qV=Ie("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ki=Ie("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PA=Ie("Dog",[["path",{d:"M10 5.172C10 3.782 8.423 2.679 6.5 3c-2.823.47-4.113 6.006-4 7 .08.703 1.725 1.722 3.656 1 1.261-.472 1.96-1.45 2.344-2.5",key:"19br0u"}],["path",{d:"M14.267 5.172c0-1.39 1.577-2.493 3.5-2.172 2.823.47 4.113 6.006 4 7-.08.703-1.725 1.722-3.656 1-1.261-.472-1.855-1.45-2.239-2.5",key:"11n1an"}],["path",{d:"M8 14v.5",key:"1nzgdb"}],["path",{d:"M16 14v.5",key:"1lajdz"}],["path",{d:"M11.25 16.25h1.5L12 17l-.75-.75Z",key:"12kq1m"}],["path",{d:"M4.42 11.247A13.152 13.152 0 0 0 4 14.556C4 18.728 7.582 21 12 21s8-2.272 8-6.444c0-1.061-.162-2.2-.493-3.309m-9.243-6.082A8.801 8.801 0 0 1 12 5c.78 0 1.5.108 2.161.306",key:"wsu29d"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vr=Ie("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yr=Ie("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $V=Ie("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZV=Ie("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vL=Ie("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KV=Ie("FileCheck",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JV=Ie("FileCode",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m10 13-2 2 2 2",key:"17smn8"}],["path",{d:"m14 17 2-2-2-2",key:"14mezr"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QV=Ie("FileImage",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"13",r:"2",key:"6v46hv"}],["path",{d:"m20 17-1.1-1.1a2 2 0 0 0-2.81.01L10 22",key:"14ir3o"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eH=Ie("FilePen",[["path",{d:"M12 22h6a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v10",key:"x7tsz2"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10.4 12.6a2 2 0 1 1 3 3L8 21l-4 1 1-4Z",key:"o3xyfb"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TS=Ie("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rn=Ie("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W2=Ie("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tH=Ie("Files",[["path",{d:"M20 7h-3a2 2 0 0 1-2-2V2",key:"x099mo"}],["path",{d:"M9 18a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h7l4 4v10a2 2 0 0 1-2 2Z",key:"18t6ie"}],["path",{d:"M3 7.6v12.8A1.6 1.6 0 0 0 4.6 22h9.8",key:"1nja0z"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const po=Ie("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yL=Ie("Fingerprint",[["path",{d:"M2 12C2 6.5 6.5 2 12 2a10 10 0 0 1 8 4",key:"1jc9o5"}],["path",{d:"M5 19.5C5.5 18 6 15 6 12c0-.7.12-1.37.34-2",key:"1mxgy1"}],["path",{d:"M17.29 21.02c.12-.6.43-2.3.5-3.02",key:"ptglia"}],["path",{d:"M12 10a2 2 0 0 0-2 2c0 1.02-.1 2.51-.26 4",key:"1nerag"}],["path",{d:"M8.65 22c.21-.66.45-1.32.57-2",key:"13wd9y"}],["path",{d:"M14 13.12c0 2.38 0 6.38-1 8.88",key:"o46ks0"}],["path",{d:"M2 16h.01",key:"1gqxmh"}],["path",{d:"M21.8 16c.2-2 .131-5.354 0-6",key:"drycrb"}],["path",{d:"M9 6.8a6 6 0 0 1 9 5.2c0 .47 0 1.17-.02 2",key:"1fgabc"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nH=Ie("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zx=Ie("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bL=Ie("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ys=Ie("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _L=Ie("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AS=Ie("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kx=Ie("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wL=Ie("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rH=Ie("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iH=Ie("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SL=Ie("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CS=Ie("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xa=Ie("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tp=Ie("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sH=Ie("Maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aH=Ie("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bs=Ie("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oc=Ie("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oH=Ie("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lH=Ie("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kS=Ie("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cH=Ie("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ws=Ie("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uH=Ie("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RA=Ie("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dH=Ie("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ML=Ie("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hH=Ie("Ruler",[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const di=Ie("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PS=Ie("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jx=Ie("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fH=Ie("ShieldAlert",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qx=Ie("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ao=Ie("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EL=Ie("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NL=Ie("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pH=Ie("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mH=Ie("Thermometer",[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hx=Ie("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gH=Ie("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xH=Ie("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RS=Ie("UploadCloud",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M12 12v9",key:"192myk"}],["path",{d:"m16 16-4-4-4 4",key:"119tzi"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X2=Ie("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vH=Ie("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TL=Ie("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vs=Ie("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ev=Ie("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yH=Ie("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ft=Ie("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const va=Ie("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bH=Ie("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function AL(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=AL(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function _H(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=AL(t))&&(r&&(r+=" "),r+=e);return r}const jS="-",wH=t=>{const e=MH(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:a=>{const l=a.split(jS);return l[0]===""&&l.length!==1&&l.shift(),CL(l,e)||SH(a)},getConflictingClassGroupIds:(a,l)=>{const c=n[a]||[];return l&&r[a]?[...c,...r[a]]:c}}},CL=(t,e)=>{var a;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),i=r?CL(t.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const s=t.join(jS);return(a=e.validators.find(({validator:l})=>l(s)))==null?void 0:a.classGroupId},jA=/^\[(.+)\]$/,SH=t=>{if(jA.test(t)){const e=jA.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},MH=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return NH(Object.entries(t.classGroups),n).forEach(([s,a])=>{Y2(a,r,s,e)}),r},Y2=(t,e,n,r)=>{t.forEach(i=>{if(typeof i=="string"){const s=i===""?e:LA(e,i);s.classGroupId=n;return}if(typeof i=="function"){if(EH(i)){Y2(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([s,a])=>{Y2(a,LA(e,s),n,r)})})},LA=(t,e)=>{let n=t;return e.split(jS).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},EH=t=>t.isThemeGetter,NH=(t,e)=>e?t.map(([n,r])=>{const i=r.map(s=>typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([a,l])=>[e+a,l])):s);return[n,i]}):t,TH=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const i=(s,a)=>{n.set(s,a),e++,e>t&&(e=0,r=n,n=new Map)};return{get(s){let a=n.get(s);if(a!==void 0)return a;if((a=r.get(s))!==void 0)return i(s,a),a},set(s,a){n.has(s)?n.set(s,a):i(s,a)}}},kL="!",AH=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,i=e[0],s=e.length,a=l=>{const c=[];let u=0,d=0,f;for(let b=0;b<l.length;b++){let x=l[b];if(u===0){if(x===i&&(r||l.slice(b,b+s)===e)){c.push(l.slice(d,b)),d=b+s;continue}if(x==="/"){f=b;continue}}x==="["?u++:x==="]"&&u--}const m=c.length===0?l:l.substring(d),g=m.startsWith(kL),v=g?m.substring(1):m,_=f&&f>d?f-d:void 0;return{modifiers:c,hasImportantModifier:g,baseClassName:v,maybePostfixModifierPosition:_}};return n?l=>n({className:l,parseClassName:a}):a},CH=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},kH=t=>({cache:TH(t.cacheSize),parseClassName:AH(t),...wH(t)}),PH=/\s+/,RH=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i}=e,s=[],a=t.trim().split(PH);let l="";for(let c=a.length-1;c>=0;c-=1){const u=a[c],{modifiers:d,hasImportantModifier:f,baseClassName:m,maybePostfixModifierPosition:g}=n(u);let v=!!g,_=r(v?m.substring(0,g):m);if(!_){if(!v){l=u+(l.length>0?" "+l:l);continue}if(_=r(m),!_){l=u+(l.length>0?" "+l:l);continue}v=!1}const b=CH(d).join(":"),x=f?b+kL:b,y=x+_;if(s.includes(y))continue;s.push(y);const S=i(_,v);for(let E=0;E<S.length;++E){const A=S[E];s.push(x+A)}l=u+(l.length>0?" "+l:l)}return l};function jH(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=PL(e))&&(r&&(r+=" "),r+=n);return r}const PL=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=PL(t[r]))&&(n&&(n+=" "),n+=e);return n};function LH(t,...e){let n,r,i,s=a;function a(c){const u=e.reduce((d,f)=>f(d),t());return n=kH(u),r=n.cache.get,i=n.cache.set,s=l,l(c)}function l(c){const u=r(c);if(u)return u;const d=RH(c,n);return i(c,d),d}return function(){return s(jH.apply(null,arguments))}}const hn=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},RL=/^\[(?:([a-z-]+):)?(.+)\]$/i,DH=/^\d+\/\d+$/,IH=new Set(["px","full","screen"]),UH=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,OH=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,FH=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,zH=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,BH=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ia=t=>md(t)||IH.has(t)||DH.test(t),Ao=t=>Vd(t,"length",$H),md=t=>!!t&&!Number.isNaN(Number(t)),g1=t=>Vd(t,"number",md),Ah=t=>!!t&&Number.isInteger(Number(t)),VH=t=>t.endsWith("%")&&md(t.slice(0,-1)),Pt=t=>RL.test(t),Co=t=>UH.test(t),HH=new Set(["length","size","percentage"]),GH=t=>Vd(t,HH,jL),WH=t=>Vd(t,"position",jL),XH=new Set(["image","url"]),YH=t=>Vd(t,XH,KH),qH=t=>Vd(t,"",ZH),Ch=()=>!0,Vd=(t,e,n)=>{const r=RL.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},$H=t=>OH.test(t)&&!FH.test(t),jL=()=>!1,ZH=t=>zH.test(t),KH=t=>BH.test(t),JH=()=>{const t=hn("colors"),e=hn("spacing"),n=hn("blur"),r=hn("brightness"),i=hn("borderColor"),s=hn("borderRadius"),a=hn("borderSpacing"),l=hn("borderWidth"),c=hn("contrast"),u=hn("grayscale"),d=hn("hueRotate"),f=hn("invert"),m=hn("gap"),g=hn("gradientColorStops"),v=hn("gradientColorStopPositions"),_=hn("inset"),b=hn("margin"),x=hn("opacity"),y=hn("padding"),S=hn("saturate"),E=hn("scale"),A=hn("sepia"),T=hn("skew"),C=hn("space"),j=hn("translate"),k=()=>["auto","contain","none"],P=()=>["auto","hidden","clip","visible","scroll"],H=()=>["auto",Pt,e],B=()=>[Pt,e],Y=()=>["",Ia,Ao],V=()=>["auto",md,Pt],Q=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],ee=()=>["solid","dashed","dotted","double","none"],re=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],I=()=>["start","end","center","between","around","evenly","stretch"],F=()=>["","0",Pt],z=()=>["auto","avoid","all","avoid-page","page","left","right","column"],U=()=>[md,Pt];return{cacheSize:500,separator:":",theme:{colors:[Ch],spacing:[Ia,Ao],blur:["none","",Co,Pt],brightness:U(),borderColor:[t],borderRadius:["none","","full",Co,Pt],borderSpacing:B(),borderWidth:Y(),contrast:U(),grayscale:F(),hueRotate:U(),invert:F(),gap:B(),gradientColorStops:[t],gradientColorStopPositions:[VH,Ao],inset:H(),margin:H(),opacity:U(),padding:B(),saturate:U(),scale:U(),sepia:F(),skew:U(),space:B(),translate:B()},classGroups:{aspect:[{aspect:["auto","square","video",Pt]}],container:["container"],columns:[{columns:[Co]}],"break-after":[{"break-after":z()}],"break-before":[{"break-before":z()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Q(),Pt]}],overflow:[{overflow:P()}],"overflow-x":[{"overflow-x":P()}],"overflow-y":[{"overflow-y":P()}],overscroll:[{overscroll:k()}],"overscroll-x":[{"overscroll-x":k()}],"overscroll-y":[{"overscroll-y":k()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[_]}],"inset-x":[{"inset-x":[_]}],"inset-y":[{"inset-y":[_]}],start:[{start:[_]}],end:[{end:[_]}],top:[{top:[_]}],right:[{right:[_]}],bottom:[{bottom:[_]}],left:[{left:[_]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Ah,Pt]}],basis:[{basis:H()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Pt]}],grow:[{grow:F()}],shrink:[{shrink:F()}],order:[{order:["first","last","none",Ah,Pt]}],"grid-cols":[{"grid-cols":[Ch]}],"col-start-end":[{col:["auto",{span:["full",Ah,Pt]},Pt]}],"col-start":[{"col-start":V()}],"col-end":[{"col-end":V()}],"grid-rows":[{"grid-rows":[Ch]}],"row-start-end":[{row:["auto",{span:[Ah,Pt]},Pt]}],"row-start":[{"row-start":V()}],"row-end":[{"row-end":V()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Pt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Pt]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...I()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...I(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...I(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[b]}],mx:[{mx:[b]}],my:[{my:[b]}],ms:[{ms:[b]}],me:[{me:[b]}],mt:[{mt:[b]}],mr:[{mr:[b]}],mb:[{mb:[b]}],ml:[{ml:[b]}],"space-x":[{"space-x":[C]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[C]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Pt,e]}],"min-w":[{"min-w":[Pt,e,"min","max","fit"]}],"max-w":[{"max-w":[Pt,e,"none","full","min","max","fit","prose",{screen:[Co]},Co]}],h:[{h:[Pt,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Pt,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Pt,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Pt,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Co,Ao]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",g1]}],"font-family":[{font:[Ch]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Pt]}],"line-clamp":[{"line-clamp":["none",md,g1]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ia,Pt]}],"list-image":[{"list-image":["none",Pt]}],"list-style-type":[{list:["none","disc","decimal",Pt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[x]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[x]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ee(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Ia,Ao]}],"underline-offset":[{"underline-offset":["auto",Ia,Pt]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:B()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Pt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Pt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[x]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Q(),WH]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",GH]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},YH]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[v]}],"gradient-via-pos":[{via:[v]}],"gradient-to-pos":[{to:[v]}],"gradient-from":[{from:[g]}],"gradient-via":[{via:[g]}],"gradient-to":[{to:[g]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[x]}],"border-style":[{border:[...ee(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[x]}],"divide-style":[{divide:ee()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...ee()]}],"outline-offset":[{"outline-offset":[Ia,Pt]}],"outline-w":[{outline:[Ia,Ao]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:Y()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[x]}],"ring-offset-w":[{"ring-offset":[Ia,Ao]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Co,qH]}],"shadow-color":[{shadow:[Ch]}],opacity:[{opacity:[x]}],"mix-blend":[{"mix-blend":[...re(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":re()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Co,Pt]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[f]}],saturate:[{saturate:[S]}],sepia:[{sepia:[A]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[x]}],"backdrop-saturate":[{"backdrop-saturate":[S]}],"backdrop-sepia":[{"backdrop-sepia":[A]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Pt]}],duration:[{duration:U()}],ease:[{ease:["linear","in","out","in-out",Pt]}],delay:[{delay:U()}],animate:[{animate:["none","spin","ping","pulse","bounce",Pt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[E]}],"scale-x":[{"scale-x":[E]}],"scale-y":[{"scale-y":[E]}],rotate:[{rotate:[Ah,Pt]}],"translate-x":[{"translate-x":[j]}],"translate-y":[{"translate-y":[j]}],"skew-x":[{"skew-x":[T]}],"skew-y":[{"skew-y":[T]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Pt]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Pt]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":B()}],"scroll-mx":[{"scroll-mx":B()}],"scroll-my":[{"scroll-my":B()}],"scroll-ms":[{"scroll-ms":B()}],"scroll-me":[{"scroll-me":B()}],"scroll-mt":[{"scroll-mt":B()}],"scroll-mr":[{"scroll-mr":B()}],"scroll-mb":[{"scroll-mb":B()}],"scroll-ml":[{"scroll-ml":B()}],"scroll-p":[{"scroll-p":B()}],"scroll-px":[{"scroll-px":B()}],"scroll-py":[{"scroll-py":B()}],"scroll-ps":[{"scroll-ps":B()}],"scroll-pe":[{"scroll-pe":B()}],"scroll-pt":[{"scroll-pt":B()}],"scroll-pr":[{"scroll-pr":B()}],"scroll-pb":[{"scroll-pb":B()}],"scroll-pl":[{"scroll-pl":B()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Pt]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Ia,Ao,g1]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},QH=LH(JH);function pe(...t){return QH(_H(t))}const LL=D.createContext(void 0);function Fc(){const t=D.useContext(LL);if(!t)throw new Error("useToast must be used within a ToastProvider");return t}function eG({children:t}){const[e,n]=D.useState([]),r=D.useCallback(u=>{const d=Math.random().toString(36).substring(7);n(f=>[...f,{...u,id:d}]),setTimeout(()=>{i(d)},4e3)},[]),i=D.useCallback(u=>{n(d=>d.filter(f=>f.id!==u))},[]),s=(u,d)=>r({type:"success",title:u,message:d}),a=(u,d)=>r({type:"error",title:u,message:d}),l=(u,d)=>r({type:"info",title:u,message:d}),c=(u,d)=>r({type:"warning",title:u,message:d});return o.jsxs(LL.Provider,{value:{toast:r,success:s,error:a,info:l,warning:c},children:[t,wa.createPortal(o.jsx("div",{className:"fixed bottom-6 right-6 z-[200] flex flex-col gap-2 pointer-events-none",children:o.jsx(cn,{mode:"popLayout",children:e.map(u=>o.jsx(tG,{toast:u,onDismiss:()=>i(u.id)},u.id))})}),document.body)]})}function tG({toast:t,onDismiss:e}){const n={success:"bg-background border-emerald-500/20 text-foreground",error:"bg-background border-rose-500/20 text-foreground",info:"bg-background border-blue-500/20 text-foreground",warning:"bg-background border-amber-500/20 text-foreground"},r={success:o.jsx(ua,{className:"w-5 h-5 text-emerald-500"}),error:o.jsx(zs,{className:"w-5 h-5 text-rose-500"}),info:o.jsx(AS,{className:"w-5 h-5 text-blue-500"}),warning:o.jsx(ui,{className:"w-5 h-5 text-amber-500"})};return o.jsxs(Et.div,{layout:!0,initial:{opacity:0,y:50,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,scale:.9,transition:{duration:.2}},className:pe("pointer-events-auto min-w-[320px] max-w-[420px] p-4 rounded-xl border shadow-lg flex items-start gap-3 backdrop-blur-sm",n[t.type]),children:[o.jsx("div",{className:"mt-0.5",children:r[t.type]}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-semibold text-sm",children:t.title}),t.message&&o.jsx("p",{className:"text-sm text-muted-foreground mt-1 leading-relaxed",children:t.message})]}),o.jsx("button",{onClick:e,className:"text-muted-foreground hover:text-foreground transition-colors",children:o.jsx(va,{size:16})})]})}const DL="data:image/svg+xml,%3csvg%20width='160'%20height='33'%20viewBox='0%200%20160%2033'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M0.787781%2032V7.04H9.09178V13.856C9.90778%209.728%2012.3078%206.56%2016.7238%206.56C17.2998%206.56%2017.9238%206.608%2018.5958%206.8V14.72C17.9718%2014.576%2017.4438%2014.528%2016.7718%2014.528C11.7798%2014.528%209.09178%2017.792%209.09178%2022.304V32H0.787781ZM31.0252%2032.48C24.0172%2032.48%2017.7772%2027.776%2017.7772%2019.568C17.7772%2011.12%2024.1132%206.56%2030.5932%206.56C36.9292%206.56%2044.5612%2010.928%2042.8332%2022.736H25.8892C26.8972%2024.752%2029.0572%2025.76%2031.9372%2025.76C33.9532%2025.76%2035.7772%2025.376%2037.6012%2024.128L41.2492%2028.016C39.2332%2030.56%2035.7292%2032.48%2031.0252%2032.48ZM25.6012%2016.88H35.5372C34.9612%2014.528%2032.8012%2013.472%2030.6892%2013.472C28.5772%2013.472%2026.4652%2014.528%2025.6012%2016.88ZM44.1978%2032V7.04H52.5018V9.968C53.9418%207.952%2056.2938%206.56%2059.6058%206.56C64.6458%206.56%2068.8698%209.68%2068.8698%2017.312V32H60.5658V18.752C60.5658%2016.16%2059.3178%2013.904%2056.4858%2013.904C53.7018%2013.904%2052.5018%2016.16%2052.5018%2018.752V32H44.1978ZM81.6337%2032.288C76.6417%2032.288%2073.0417%2029.888%2073.0417%2023.648V13.568H69.2497V7.04H73.0417V0.655997H81.3457V7.04H86.6257V13.568H81.3457V22.4C81.3457%2023.552%2082.0177%2024.992%2084.3697%2024.992C84.9457%2024.992%2085.8577%2024.896%2086.7217%2024.608V30.896C85.7617%2031.952%2083.5057%2032.288%2081.6337%2032.288ZM98.3564%2032.48C92.7884%2032.48%2086.5484%2028.256%2086.5484%2019.52C86.5484%2010.784%2092.7884%206.56%2098.3564%206.56C102.724%206.56%20105.076%208.96%20105.268%209.392H105.412V7.04H113.716V32H105.412V29.648H105.268C105.076%2030.08%20102.724%2032.48%2098.3564%2032.48ZM94.7084%2019.52C94.7084%2023.024%2097.2524%2025.136%20100.132%2025.136C103.108%2025.136%20105.604%2023.072%20105.604%2019.52C105.604%2015.968%20103.108%2013.904%20100.132%2013.904C97.2524%2013.904%2094.7084%2016.016%2094.7084%2019.52ZM116.016%2032V7.04H124.32V13.856C125.136%209.728%20127.536%206.56%20131.952%206.56C132.528%206.56%20133.152%206.608%20133.824%206.8V14.72C133.2%2014.576%20132.672%2014.528%20132%2014.528C127.008%2014.528%20124.32%2017.792%20124.32%2022.304V32H116.016ZM159.58%207.04L159.532%2032H151.228V29.072C149.788%2031.088%20147.436%2032.48%20144.124%2032.48C139.084%2032.48%20134.86%2029.36%20134.86%2021.728L134.908%207.04H143.212L143.164%2020.288C143.164%2022.88%20144.412%2025.136%20147.244%2025.136C150.028%2025.136%20151.228%2022.88%20151.228%2020.288L151.276%207.04H159.58Z'%20fill='white'/%3e%3c/svg%3e",nG=[{label:"Core",items:[{name:"Dashboard",icon:rH,href:"/app/dashboard"},{name:"Properties",icon:fo,href:"/app/properties"},{name:"Tenants",icon:ev,href:"/app/tenants"},{name:"Leases",icon:rn,href:"/app/leases"}]},{label:"Operations",items:[{name:"Maintenance",icon:Ft,href:"/app/maintenance"},{name:"Payments",icon:ki,href:"/app/payments"},{name:"Accounting",icon:xL,href:"/app/accounting"}]},{label:"Reference",items:[{name:"Documents",icon:tH,href:"/app/documents"},{name:"Reports",icon:mL,href:"/app/reports"},{name:"Messages",icon:Bs,href:"/app/messages"}]},{label:"System",items:[{name:"Users",icon:vH,href:"/app/users"},{name:"Settings",icon:Jx,href:"/app/settings"}]}];function rG(){return o.jsxs("aside",{className:"fixed left-0 top-0 z-30 w-64 h-screen bg-sidebar text-sidebar-text border-r border-sidebar-hover flex flex-col pt-6 tall-desktop:pt-12",children:[o.jsx("div",{className:"px-6 mb-6 tall-desktop:mb-12 shrink-0",children:o.jsx("div",{className:"flex items-center gap-2",children:o.jsx("img",{src:DL,alt:"Rentaru",className:"h-6 w-auto"})})}),o.jsxs("div",{className:"flex-1 flex flex-col overflow-y-auto custom-scrollbar pb-4",children:[o.jsx("nav",{className:"flex-1 px-4 space-y-6",children:nG.map((t,e)=>o.jsxs("div",{children:[o.jsx("h3",{className:"text-[0.625rem] font-semibold text-sidebar-text/50 uppercase tracking-wider mb-2 pl-2",children:t.label}),o.jsx("div",{className:"space-y-1",children:t.items.map(n=>n.href==="#"||n.href.startsWith("#")?o.jsxs("div",{className:pe("flex items-center gap-3 px-3 py-2 rounded-md text-sm font-medium transition-all duration-200 group text-sidebar-text hover:bg-sidebar-hover hover:text-sidebar-textActive cursor-pointer"),children:[o.jsx(n.icon,{className:"w-4 h-4 transition-colors text-sidebar-text group-hover:text-sidebar-textActive"}),n.name]},n.name):o.jsx(hf,{to:n.href,className:({isActive:i})=>pe("flex items-center gap-3 px-3 py-2 rounded-md text-sm font-medium transition-all duration-200 group",i?"bg-sidebar-active text-sidebar-textActive shadow-sm":"hover:bg-sidebar-hover hover:text-sidebar-textActive"),children:({isActive:i})=>o.jsxs(o.Fragment,{children:[o.jsx(n.icon,{className:pe("w-4 h-4 transition-colors",i?"text-white":"text-sidebar-text group-hover:text-sidebar-textActive")}),n.name]})},n.name))})]},e))}),o.jsx("div",{className:"px-4 mt-auto pt-4 border-t border-sidebar-hover",children:o.jsxs("a",{href:"#",className:"flex items-center gap-3 px-3 py-2 rounded-md text-sm font-medium text-sidebar-text hover:bg-sidebar-hover hover:text-red-400 transition-colors group",children:[o.jsx(CS,{className:"w-4 h-4 group-hover:text-red-400"}),"Log Out"]})})]})]})}const iG=[{id:"p1",entityType:"property",primaryLabel:"Sunset Apartments",secondaryLabel:"12 units  Portland, OR",href:"/app/properties/p1"},{id:"p2",entityType:"property",primaryLabel:"Pine Street Duplex",secondaryLabel:"2 units  Bend, OR",href:"/app/properties/p2"},{id:"u1",entityType:"unit",primaryLabel:"Unit 3B",secondaryLabel:"Sunset Apartments",href:"/app/properties/p1/units/u1"},{id:"u2",entityType:"unit",primaryLabel:"Unit 1A",secondaryLabel:"Pine Street Duplex",href:"/app/properties/p2/units/u2"},{id:"t1",entityType:"tenant",primaryLabel:"John Smith",secondaryLabel:"Unit 3B  Sunset Apartments",status:{label:"Overdue Rent",severity:"critical"},href:"/app/tenants/t1"},{id:"t2",entityType:"tenant",primaryLabel:"Sarah Jenkins",secondaryLabel:"Unit 1A  Pine Street Duplex",href:"/app/tenants/t2"},{id:"m1",entityType:"maintenance",primaryLabel:"Water Leak",secondaryLabel:"Unit 3B  Reported 2h ago",status:{label:"Urgent",severity:"critical"},href:"/app/maintenance/m1"},{id:"m2",entityType:"maintenance",primaryLabel:"Broken Heater",secondaryLabel:"Unit 1A  In Progress",status:{label:"Medium",severity:"warning"},href:"/app/maintenance/m2"},{id:"l1",entityType:"lease",primaryLabel:"Lease Agreement",secondaryLabel:"Unit 3B  Expiring in 21 days",status:{label:"Expiring",severity:"warning"},href:"/app/leases/l1"},{id:"pay1",entityType:"payment",primaryLabel:"Rent Payment",secondaryLabel:"John Smith  $1,250",status:{label:"Paid",severity:"info"},href:"/app/payments/pay1"}];function sG(){const[t,e]=D.useState(!1),[n,r]=D.useState(""),[i,s]=D.useState(0),a=D.useRef(null),l=D.useRef(null),c=qr(),u=D.useMemo(()=>n.trim()?iG.filter(g=>{var v;return g.primaryLabel.toLowerCase().includes(n.toLowerCase())||((v=g.secondaryLabel)==null?void 0:v.toLowerCase().includes(n.toLowerCase()))||g.entityType.toLowerCase().includes(n.toLowerCase())}):[],[n]),d=D.useMemo(()=>{const g={};return u.forEach(v=>{g[v.entityType]||(g[v.entityType]=[]),g[v.entityType].push(v)}),g},[u]),f=D.useMemo(()=>Object.values(d).flat(),[d]);D.useEffect(()=>{const g=v=>{var _;(v.metaKey||v.ctrlKey)&&v.key==="k"&&(v.preventDefault(),e(!0),setTimeout(()=>{var b;return(b=a.current)==null?void 0:b.focus()},10)),v.key==="Escape"&&(e(!1),(_=a.current)==null||_.blur())};return window.addEventListener("keydown",g),()=>window.removeEventListener("keydown",g)},[]),D.useEffect(()=>{if(!t)return;const g=v=>{v.key==="ArrowDown"?(v.preventDefault(),s(_=>(_+1)%f.length)):v.key==="ArrowUp"?(v.preventDefault(),s(_=>(_-1+f.length)%f.length)):v.key==="Enter"&&(v.preventDefault(),f[i]&&m(f[i]))};return window.addEventListener("keydown",g),()=>window.removeEventListener("keydown",g)},[t,f,i]),D.useEffect(()=>{const g=v=>{l.current&&!l.current.contains(v.target)&&e(!1)};return document.addEventListener("mousedown",g),()=>document.removeEventListener("mousedown",g)},[]);const m=g=>{c(g.href),e(!1),r("")};return o.jsxs("div",{ref:l,className:"relative z-50",children:[o.jsxs("div",{className:pe("relative flex items-center transition-all duration-200 ease-out h-10 rounded-full px-4 gap-2 border w-[600px]",t?"border-primary ring-4 ring-primary/10 bg-background shadow-xl":"border-border/60 bg-muted/40 hover:bg-muted/60 hover:border-border"),children:[o.jsx(di,{className:pe("w-4 h-4 transition-colors duration-200",t?"text-primary":"text-muted-foreground")}),o.jsx("input",{ref:a,type:"text",value:n,onChange:g=>{r(g.target.value),e(!0),s(0)},onFocus:()=>e(!0),placeholder:"Search properties, tenants, units...",className:"bg-transparent border-none outline-none text-sm w-full placeholder:text-muted-foreground/60 h-full"}),o.jsx(cn,{children:!t&&o.jsxs(Et.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"hidden sm:flex items-center gap-1 px-1.5 py-0.5 rounded border border-border/50 bg-background/50 text-[10px] font-medium text-muted-foreground pointer-events-none",children:[o.jsx("span",{className:"text-xs",children:""}),"K"]})})]}),t&&o.jsx(aG,{isOpen:t,anchorRef:l,onClose:()=>e(!1),children:o.jsxs(Et.div,{initial:{opacity:0,y:4},animate:{opacity:1,y:0},exit:{opacity:0},transition:{duration:.1},className:"w-full bg-background/40 backdrop-blur-xl backdrop-saturate-150 border border-border/50 rounded-xl shadow-2xl flex flex-col max-h-[70vh] overflow-hidden z-[100]",children:[u.length>0?o.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar py-2",children:Object.keys(d).map(g=>o.jsxs("div",{children:[o.jsx("div",{className:"px-4 py-2 text-[10px] font-bold uppercase tracking-wider text-muted-foreground/70 bg-muted/30 sticky top-0 backdrop-blur-md z-10",children:lG(g)}),o.jsx("div",{className:"px-2 py-1",children:d[g].map((v,_)=>{const b=f.indexOf(v),x=b===i;return o.jsxs("div",{onClick:()=>m(v),onMouseEnter:()=>s(b),className:pe("group flex items-center justify-between px-3 py-2.5 rounded-lg cursor-pointer transition-all duration-150",x?"bg-primary/10":"hover:bg-muted/50"),children:[o.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[o.jsx("div",{className:pe("p-2 rounded-md shrink-0 flex items-center justify-center transition-colors",x?"bg-background shadow-sm text-primary":"bg-muted/50 text-muted-foreground"),children:oG(v.entityType)}),o.jsxs("div",{className:"min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:pe("text-sm font-medium truncate",x?"text-primary":"text-foreground"),children:v.primaryLabel}),v.status&&o.jsx("span",{className:pe("text-[9px] px-1.5 py-0.5 rounded-full font-bold uppercase tracking-wide",cG(v.status.severity)),children:v.status.label})]}),o.jsx("div",{className:"text-xs text-muted-foreground truncate",children:v.secondaryLabel})]})]}),x&&o.jsxs("div",{className:"animate-in fade-in zoom-in-95 duration-200 px-2 flex items-center text-xs font-medium text-muted-foreground",children:[o.jsx("span",{className:"mr-2",children:"Open"}),o.jsx("kbd",{className:"hidden sm:inline-flex h-5 items-center gap-1 rounded border bg-muted px-1.5 font-mono text-[10px] font-medium text-muted-foreground opacity-100",children:o.jsx("span",{className:"text-xs",children:""})})]})]},v.id)})})]},g))}):o.jsxs("div",{className:"flex-1 p-12 flex flex-col items-center justify-center text-center opacity-50",children:[o.jsx(di,{className:"w-12 h-12 mb-4 text-muted-foreground/30"}),o.jsxs("p",{className:"text-sm font-medium",children:['No results found for "',n,'"']}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Try searching for properties, units, or tenants."})]}),o.jsxs("div",{className:"shrink-0 p-2 border-t border-border bg-muted/40 backdrop-blur-md text-[10px] text-muted-foreground flex items-center justify-between px-4 z-20",children:[o.jsxs("div",{className:"flex gap-4",children:[o.jsxs("span",{children:[o.jsx("span",{className:"font-bold",children:""})," to navigate"]}),o.jsxs("span",{children:[o.jsx("span",{className:"font-bold",children:""})," to select"]}),o.jsxs("span",{children:[o.jsx("span",{className:"font-bold",children:"Esc"})," to close"]})]}),o.jsxs("div",{children:[u.length," results"]})]})]})})]})}function aG({children:t,anchorRef:e,isOpen:n,onClose:r}){const[i,s]=D.useState(null);return D.useEffect(()=>{if(n&&e.current){const a=()=>{var c;const l=(c=e.current)==null?void 0:c.getBoundingClientRect();l&&s({top:l.bottom+8,left:l.left,width:l.width})};return a(),window.addEventListener("resize",a),window.addEventListener("scroll",a,!0),()=>{window.removeEventListener("resize",a),window.removeEventListener("scroll",a,!0)}}},[n,e]),!n||!i?null:wa.createPortal(o.jsx(cn,{children:o.jsx("div",{style:{position:"fixed",top:i.top,left:i.left,width:i.width,zIndex:100},className:"z-[100]",children:t})}),document.body)}function oG(t){switch(t){case"property":return o.jsx(ga,{className:"w-4 h-4"});case"unit":return o.jsx(ys,{className:"w-4 h-4"});case"tenant":return o.jsx(Vs,{className:"w-4 h-4"});case"lease":return o.jsx(rn,{className:"w-4 h-4"});case"maintenance":return o.jsx(Ft,{className:"w-4 h-4"});case"payment":return o.jsx(ki,{className:"w-4 h-4"});case"document":return o.jsx(W2,{className:"w-4 h-4"});case"user":return o.jsx(ao,{className:"w-4 h-4"});default:return o.jsx(di,{className:"w-4 h-4"})}}function lG(t){return t==="property"?"Properties":t==="maintenance"?"Maintenance Tickets":t.charAt(0).toUpperCase()+t.slice(1)+"s"}function cG(t){switch(t){case"critical":return"bg-red-500/10 text-red-600 dark:text-red-400";case"warning":return"bg-amber-500/10 text-amber-600 dark:text-amber-400";case"info":return"bg-blue-500/10 text-blue-600 dark:text-blue-400";default:return"bg-slate-100 text-slate-600"}}function fx({icon:t,badge:e,className:n,...r}){return o.jsxs("button",{className:pe("relative p-2 rounded-full hover:bg-muted transition-colors duration-200 text-muted-foreground hover:text-foreground",n),...r,children:[o.jsx(t,{className:"w-5 h-5"}),e!==void 0&&o.jsx("span",{className:"absolute top-1.5 right-1.5 w-4 h-4 bg-primary text-[10px] font-bold text-white rounded-full flex items-center justify-center ring-2 ring-background translate-x-[6px]",children:e})]})}function uG(){const[t,e]=D.useState(!1),n=D.useRef(null),r=qr();D.useEffect(()=>{const a=l=>{n.current&&!n.current.contains(l.target)&&e(!1)};return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[]);const i=a=>{e(!1),r(a)},s={hidden:{opacity:0,y:10,scale:.95},visible:{opacity:1,y:0,scale:1,transition:{type:"spring",stiffness:300,damping:20,staggerChildren:.05}},exit:{opacity:0,y:10,scale:.95,transition:{duration:.2}}};return o.jsxs("div",{className:"relative",ref:n,children:[o.jsxs("button",{onClick:()=>e(!t),className:"flex items-center gap-2 p-1.5 rounded-full hover:bg-muted transition-all duration-200 group",children:[o.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/10 border border-primary/20 flex items-center justify-center overflow-hidden",children:o.jsx("span",{className:"text-primary font-bold text-xs",children:"J"})}),o.jsx(vs,{className:pe("w-4 h-4 text-muted-foreground transition-transform duration-200",t&&"rotate-180")})]}),o.jsx(cn,{children:t&&o.jsxs(Et.div,{variants:s,initial:"hidden",animate:"visible",exit:"exit",className:"absolute right-0 mt-2 w-72 bg-card border border-border rounded-xl shadow-xl z-50 overflow-hidden",children:[o.jsx("div",{className:"p-4 border-b border-border bg-muted/20",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-primary flex items-center justify-center text-white font-bold text-lg",children:"J"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-semibold",children:"John Doe"}),o.jsx("p",{className:"text-xs text-muted-foreground truncate max-w-[180px]",children:"john.doe@example.com"}),o.jsx("span",{className:"inline-flex mt-1 px-2 py-0.5 rounded-full bg-primary/10 text-[10px] font-bold text-primary uppercase",children:"Admin"})]})]})}),o.jsxs("div",{className:"py-2",children:[o.jsxs("div",{className:"px-2 py-1",children:[o.jsx("p",{className:"px-3 py-1 text-[10px] font-bold text-muted-foreground uppercase tracking-wider",children:"Organization"}),o.jsxs("div",{className:"mt-1 space-y-1",children:[o.jsx(au,{icon:ga,label:"Skyline Properties",active:!0}),o.jsx(au,{icon:UV,label:"Switch Organization"})]})]}),o.jsx("div",{className:"my-1 border-t border-border mx-2"}),o.jsx("div",{className:"px-2 py-1",children:o.jsxs("div",{className:"space-y-1",children:[o.jsx(au,{icon:Jx,label:"Account Settings",onClick:()=>i("/app/settings/account")}),o.jsx(au,{icon:ki,label:"Billing & Plan",onClick:()=>i("/app/settings/billing")}),o.jsx(au,{icon:Qx,label:"Security & Compliance",onClick:()=>i("/app/settings/security")})]})}),o.jsx("div",{className:"my-1 border-t border-border mx-2"}),o.jsx("div",{className:"px-2 py-1",children:o.jsx("div",{className:"space-y-1",children:o.jsx(au,{icon:CS,label:"Sign Out",variant:"destructive",onClick:()=>i("/login")})})})]})]})})]})}function au({icon:t,label:e,active:n,variant:r="default",onClick:i}){return o.jsxs("button",{onClick:i,className:pe("w-full flex items-center gap-3 px-3 py-2 rounded-lg text-sm transition-all duration-200",r==="destructive"?"text-red-500 hover:bg-red-50":n?"bg-primary/5 text-primary font-medium":"text-foreground/70 hover:bg-muted hover:text-foreground"),children:[o.jsx(t,{className:pe("w-4 h-4",n?"text-primary":"text-current opacity-70")}),o.jsx("span",{className:"flex-1 text-left",children:e}),n&&o.jsx("div",{className:"w-1 h-1 rounded-full bg-primary"})]})}const dG=[{id:"1",type:"rent_payment_received",priority:"success",title:"Rent payment received",description:"Unit 4B - John Smith has paid $2,400 for January rent.",isRead:!1,createdAt:"2 mins ago",actions:[{label:"View Transaction",deepLink:"/accounting"}]},{id:"2",type:"maintenance_request_created",priority:"high",title:"Urgent maintenance request",description:"Unit 12A - Active water leak reported in master bath.",isRead:!1,createdAt:"15 mins ago",actions:[{label:"Assign Vendor",deepLink:"/maintenance"}]},{id:"3",type:"lease_expiring",priority:"medium",title:"Lease expiring soon",description:"Unit 7C - Sarah Johnson's lease expires in 30 days.",isRead:!1,createdAt:"2 hours ago",actions:[{label:"Start Renewal",deepLink:"/leases"}]},{id:"4",type:"message_received",priority:"medium",title:"New message from tenant",description:'Mike Miller: "Hi, I sent the signed parking agreement."',isRead:!0,createdAt:"5 hours ago",actions:[{label:"Reply",deepLink:"/messages"}]},{id:"5",type:"system_alert",priority:"low",title:"System Update",description:"Rentaru Platform v2.1.0 has been deployed successfully.",isRead:!0,createdAt:"1 day ago"}];function IL({isOpen:t,onClose:e}){const n=D.useRef(null),[r,i]=D.useState(dG);D.useEffect(()=>{const l=c=>{n.current&&!n.current.contains(c.target)&&e()};return t&&document.addEventListener("mousedown",l),()=>document.removeEventListener("mousedown",l)},[t,e]),D.useEffect(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[t]),D.useEffect(()=>{const l=c=>{c.key==="Escape"&&e()};return window.addEventListener("keydown",l),()=>window.removeEventListener("keydown",l)},[e]);const s=l=>{i(c=>c.filter(u=>u.id!==l))},a=()=>{i(l=>l.map(c=>({...c,isRead:!0})))};return wa.createPortal(o.jsx(cn,{children:t&&o.jsxs(o.Fragment,{children:[o.jsx(Et.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/40 backdrop-blur-[2px] z-[100]",onClick:e}),o.jsxs(Et.div,{ref:n,initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",damping:25,stiffness:200},className:"fixed right-0 top-0 h-screen w-full max-w-[420px] bg-background border-l border-border shadow-2xl z-[101] flex flex-col",children:[o.jsxs("div",{className:"p-6 border-b border-border flex items-center justify-between bg-muted/20",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:o.jsx(dl,{className:"w-5 h-5 text-primary"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-lg font-semibold leading-none",children:"Notifications"}),o.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["You have ",r.filter(l=>!l.isRead).length," unread events"]})]})]}),o.jsx("button",{onClick:e,className:"p-2 rounded-full hover:bg-muted transition-colors text-muted-foreground hover:text-foreground",children:o.jsx(va,{className:"w-5 h-5"})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-4 py-6 space-y-4",children:o.jsx(cn,{initial:!1,children:r.length>0?r.map(l=>o.jsx(hG,{notification:l,onClear:()=>s(l.id)},l.id)):o.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center p-8 opacity-50",children:[o.jsx(dl,{className:"w-12 h-12 mb-4 text-muted-foreground/20"}),o.jsx("p",{className:"text-sm font-medium",children:"All caught up!"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"No new notifications at this time."})]})})}),o.jsx("div",{className:"p-4 border-t border-border bg-muted/10",children:o.jsx("button",{onClick:a,className:"w-full py-2 text-sm font-medium text-primary hover:bg-primary/5 rounded-lg transition-colors",children:"Mark all as read"})})]})]})}),document.body)}function hG({notification:t,onClear:e}){const n=fG(t.type),r=pG(t.priority),i=mG(t.priority);return o.jsxs(Et.div,{layout:!0,initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,scale:.95},className:pe("group relative p-4 rounded-xl border transition-all duration-200",t.isRead?"bg-background border-border":"bg-primary/5 border-primary/10 shadow-sm"),children:[!t.isRead&&o.jsx("div",{className:"absolute top-3 left-3 w-2 h-2 rounded-full bg-primary z-10"}),o.jsxs("div",{className:"flex gap-4",children:[o.jsx("div",{className:pe("mt-0.5 p-2 rounded-lg h-fit",i),children:o.jsx(n,{className:pe("w-4 h-4",r)})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-start justify-between gap-2",children:[o.jsx("h3",{className:pe("text-sm font-semibold leading-tight pr-4",r),children:t.title}),o.jsx("button",{onClick:s=>{s.stopPropagation(),e()},className:"p-1 rounded-md hover:bg-muted text-muted-foreground transition-all shrink-0",title:"Clear notification",children:o.jsx(va,{className:"w-3 h-3"})})]}),t.description&&o.jsx("p",{className:"text-xs text-muted-foreground leading-normal mt-1",children:t.description}),o.jsxs("div",{className:"mt-3 flex items-end justify-between gap-4",children:[o.jsx("div",{className:"flex flex-wrap gap-2",children:t.actions&&t.actions.map((s,a)=>o.jsxs("a",{href:s.deepLink,className:"inline-flex items-center gap-1.5 px-2 py-1 rounded-md bg-primary/5 hover:bg-primary/10 text-xs font-medium text-primary transition-colors group/link",children:[s.label,o.jsx($V,{className:"w-3 h-3 group-hover/link:translate-x-0.5 group-hover/link:-translate-y-0.5 transition-transform"})]},a))}),o.jsxs("span",{className:"text-[10px] text-muted-foreground flex items-center gap-1 shrink-0 pb-1",children:[o.jsx(Pn,{className:"w-3 h-3"}),t.createdAt]})]})]})]})]})}function fG(t){return t==="lease_expiring"?Pn:t.startsWith("rent")||t==="refund_issued"?ki:t.startsWith("maintenance")||t==="vendor_assigned"?Ft:t.startsWith("lease")?rn:t.startsWith("application")||t==="background_check_completed"?Vs:t==="message_received"?Bs:t==="document_uploaded"?rn:t==="system_alert"?ui:dl}function pG(t){switch(t){case"success":return"text-emerald-600 dark:text-emerald-400";case"high":return"text-rose-600 dark:text-rose-400";case"medium":return"text-amber-600 dark:text-amber-400";case"info":return"text-blue-600 dark:text-blue-400";case"low":return"text-slate-500 dark:text-slate-400";default:return"text-slate-500"}}function mG(t){switch(t){case"success":return"bg-emerald-500/10";case"high":return"bg-rose-500/10";case"medium":return"bg-amber-500/10";case"info":return"bg-blue-500/10";case"low":return"bg-slate-500/10";default:return"bg-slate-500/10"}}function gG(){const[t,e]=D.useState(!1);return o.jsxs("div",{className:"sticky top-0 z-40 w-full h-14 bg-background/80 backdrop-blur-md border-b border-border flex items-center justify-end px-6 gap-3",children:[o.jsx(sG,{}),o.jsx("div",{className:"h-6 w-[1px] bg-border mx-1"}),o.jsx(fx,{icon:dl,badge:3,title:"Notifications",onClick:()=>e(!0)}),o.jsx(fx,{icon:Zx,title:"Help & Support"}),o.jsx("div",{className:"h-6 w-[1px] bg-border mx-1"}),o.jsx(uG,{}),o.jsx(IL,{isOpen:t,onClose:()=>e(!1)})]})}function xG({children:t}){return o.jsxs("div",{className:"flex min-h-screen bg-background font-sans antialiased text-foreground",children:[o.jsx(rG,{}),o.jsxs("div",{className:"flex-1 flex flex-col min-h-screen overflow-hidden pl-64",children:[o.jsx(gG,{}),o.jsx("main",{className:"flex-1 overflow-y-auto bg-muted/20",children:o.jsx("div",{className:"container mx-auto p-8 max-w-7xl",children:t})})]})]})}const x1={rentStatus:"overdue",unreadMessages:2,activeMaintenance:1,balance:1450},vG=[{items:[{name:"Home",icon:ys,href:"/tenant/home"},{name:"Payments",icon:ki,href:"/tenant/payments",badge:{label:`$${x1.balance}`,variant:"critical"}},{name:"Maintenance",icon:Ft,href:"/tenant/maintenance",badge:{label:x1.activeMaintenance,variant:"info"}},{name:"Lease & Docs",icon:rn,href:"/tenant/documents"},{name:"My Unit",icon:ga,href:"/tenant/unit"},{name:"Messages",icon:Bs,href:"/tenant/messages",badge:{label:x1.unreadMessages,variant:"info"}}]}],yG=({badge:t})=>{if(!t)return null;const e={neutral:"bg-slate-800 text-slate-300",info:"bg-blue-500/20 text-blue-200",warning:"bg-amber-500/20 text-amber-200",critical:"bg-rose-500/20 text-rose-200",success:"bg-emerald-500/20 text-emerald-200"};return o.jsx("span",{className:pe("text-[10px] font-bold px-1.5 py-0.5 rounded-full ml-auto",e[t.variant]),children:t.label})};function bG(){const[t,e]=D.useState(!1);return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"lg:hidden fixed top-0 left-0 right-0 h-14 bg-background border-b z-40 flex items-center justify-between px-4",children:[o.jsxs("div",{className:"flex items-center gap-2 font-bold text-lg",children:[o.jsx("div",{className:"w-8 h-8 bg-indigo-600 rounded-lg flex items-center justify-center text-white",children:"R"}),o.jsx("span",{children:"Rentaru"})]}),o.jsx("button",{onClick:()=>e(!t),className:"p-2",children:t?o.jsx(va,{}):o.jsx(aH,{})})]}),o.jsxs("aside",{className:pe("fixed inset-y-0 left-0 z-30 w-64 bg-sidebar text-sidebar-text border-r border-sidebar-hover transform transition-transform duration-200 ease-in-out lg:translate-x-0 pt-6 tall-desktop:pt-12 flex flex-col",t?"translate-x-0 mt-14 shadow-2xl":"-translate-x-full lg:mt-0"),children:[o.jsx("div",{className:"hidden lg:flex px-6 mb-8 tall-desktop:mb-12 shrink-0 items-center gap-2",children:o.jsx("img",{src:DL,alt:"Rentaru",className:"h-6 w-auto"})}),o.jsx("nav",{className:"flex-1 overflow-y-auto px-4 space-y-6 pb-6 custom-scrollbar",children:vG.map((n,r)=>o.jsxs("div",{children:[n.label&&o.jsx("h3",{className:"px-3 mb-2 text-xs font-semibold text-sidebar-text/50 uppercase tracking-wider",children:n.label}),o.jsx("div",{className:"space-y-1",children:n.items.map(i=>!i.hidden&&o.jsxs(hf,{to:i.href,onClick:()=>e(!1),className:({isActive:s})=>pe("flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors relative group",s?"bg-sidebar-active text-sidebar-textActive shadow-sm":"text-sidebar-text hover:bg-sidebar-hover hover:text-sidebar-textActive"),children:[o.jsx(i.icon,{size:18,className:pe("shrink-0",({isActive:s})=>s?"text-white":"text-sidebar-text group-hover:text-sidebar-textActive")}),o.jsx("span",{children:i.name}),o.jsx(yG,{badge:i.badge})]},i.name))})]},r))}),o.jsxs("div",{className:"p-4 border-t border-sidebar-hover space-y-1",children:[o.jsxs(hf,{to:"/tenant/settings",className:({isActive:n})=>pe("flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors hover:text-sidebar-textActive hover:bg-sidebar-hover",n?"bg-sidebar-active text-sidebar-textActive":"text-sidebar-text"),children:[o.jsx(Jx,{size:18}),o.jsx("span",{children:"Settings"})]}),o.jsxs(hf,{to:"/tenant/help",className:({isActive:n})=>pe("flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors hover:text-sidebar-textActive hover:bg-sidebar-hover",n?"bg-sidebar-active text-sidebar-textActive":"text-sidebar-text"),children:[o.jsx(Zx,{size:18}),o.jsx("span",{children:"Help & Support"})]}),o.jsxs("button",{className:"w-full flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors text-sidebar-text hover:text-red-400 hover:bg-sidebar-hover",children:[o.jsx(CS,{size:18}),o.jsx("span",{children:"Log Out"})]})]}),o.jsx("div",{className:"p-4 border-t border-sidebar-hover bg-sidebar-hover/30",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-sidebar-active flex items-center justify-center border border-sidebar-hover text-sm font-medium text-sidebar-textActive",children:"JS"}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"text-sm font-medium truncate text-sidebar-textActive",children:"John Smith"}),o.jsx("p",{className:"text-xs text-sidebar-text/70 truncate",children:"Unit 3B  Sunset Apts"})]})]})})]}),t&&o.jsx("div",{className:"fixed inset-0 bg-background/80 backdrop-blur-sm z-20 lg:hidden",onClick:()=>e(!1)})]})}function _G(){const[t,e]=D.useState(!1);return o.jsxs("div",{className:"sticky top-0 z-40 w-full h-14 bg-background/80 backdrop-blur-md border-b border-border flex items-center justify-end px-6 gap-3",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(fx,{icon:dl,badge:2,title:"Notifications",onClick:()=>e(!0)}),o.jsx(fx,{icon:Zx,title:"Help & Support"})]}),o.jsx(IL,{isOpen:t,onClose:()=>e(!1)})]})}function wG({children:t}){return o.jsxs("div",{className:"flex bg-background min-h-screen",children:[o.jsx(bG,{}),o.jsxs("main",{className:"flex-1 transition-all duration-300 ease-in-out lg:ml-64",children:[o.jsx(_G,{}),o.jsx("div",{className:"p-6 md:p-8 max-w-7xl mx-auto animate-in fade-in slide-in-from-bottom-2 duration-500",children:t})]})]})}const Jm=({label:t,value:e,subtext:n,alert:r=!1})=>o.jsxs("div",{className:pe("bg-card p-4 rounded-xl border shadow-sm flex flex-col justify-between transition-all hover:shadow-md",r?"border-amber-200 bg-amber-50/50 dark:bg-amber-950/10 dark:border-amber-900/50":"border-border"),children:[o.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:t}),o.jsxs("div",{className:"mt-2",children:[o.jsx("div",{className:"text-2xl font-bold tracking-tight text-foreground",children:e}),n&&o.jsx("div",{className:pe("text-xs font-medium mt-1 flex items-center gap-1",r?"text-amber-600 dark:text-amber-500":"text-muted-foreground"),children:n})]})]});function SG(){return o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[o.jsx(Jm,{label:"Occupancy",value:"94.2%",subtext:o.jsx("span",{className:"text-red-500 flex items-center",children:" 1.1% from last month"})}),o.jsx(Jm,{label:"Rent Collected (MTD)",value:"$128,400",subtext:"of $136,500 expected"}),o.jsx(Jm,{label:"Overdue Rent",value:"$4,250",subtext:"3 tenants overdue",alert:!0}),o.jsx(Jm,{label:"Active Maintenance",value:"6 Open",subtext:"2 Urgent requests"})]})}const MG=["1M","3M","6M","YTD"];function UL({value:t="3M",onChange:e}){const[n,r]=D.useState(t||"3M"),i=s=>{r(s),e&&e(s)};return o.jsx("div",{className:"flex gap-1 bg-muted p-1 rounded-lg",children:MG.map(s=>o.jsxs("button",{onClick:()=>i(s),className:pe("relative px-3 py-1 rounded-md text-xs font-medium transition-colors z-10",n===s?"text-primary-foreground":"text-muted-foreground hover:text-foreground"),children:[n===s&&o.jsx(Et.div,{layoutId:"time-range-indicator",className:"absolute inset-0 bg-primary rounded-md shadow-sm -z-10",transition:{type:"spring",bounce:.15,duration:.3}}),s]},s))})}function EG({height:t="200px"}){return o.jsxs("div",{className:"flex-1 bg-muted/30 rounded-lg border border-dashed border-border flex items-center justify-center relative overflow-hidden group w-full",style:{minHeight:t},children:[o.jsx("div",{className:"absolute inset-x-0 bottom-0 top-8 flex items-end justify-between px-8 pb-4 opacity-40",children:[40,65,45,80,55,70,90,60,75,50,85,95].map((e,n)=>o.jsx("div",{style:{height:`${e}%`},className:"w-full mx-1 bg-primary rounded-t-sm opacity-80"},n))}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-background/50 to-transparent pointer-events-none"}),o.jsx("span",{className:"text-muted-foreground font-medium z-10 bg-card/80 px-3 py-1 rounded-full shadow-sm backdrop-blur-sm border text-xs",children:" Interactive Financial Chart"})]})}/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const tv="160",ec={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},tc={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},OL=0,q2=1,FL=2,NG=3,zL=0,nv=1,xf=2,ks=3,ya=0,Hr=1,Gi=2,TG=2,Ja=0,_c=1,$2=2,Z2=3,K2=4,BL=5,Go=100,VL=101,HL=102,J2=103,Q2=104,GL=200,WL=201,XL=202,YL=203,px=204,mx=205,qL=206,$L=207,ZL=208,KL=209,JL=210,QL=211,e4=212,t4=213,n4=214,r4=0,i4=1,s4=2,$f=3,a4=4,o4=5,l4=6,c4=7,Ap=0,u4=1,d4=2,ha=0,h4=1,f4=2,p4=3,LS=4,m4=5,g4=6,e_="attached",x4="detached",rv=300,oo=301,hl=302,Zf=303,Kf=304,Hd=306,Jf=1e3,Br=1001,Qf=1002,Wn=1003,gx=1004,AG=1004,vf=1005,CG=1005,Mn=1006,DS=1007,kG=1007,fl=1008,PG=1008,fa=1009,v4=1010,y4=1011,iv=1012,IS=1013,$a=1014,Ls=1015,Td=1016,US=1017,OS=1018,rl=1020,b4=1021,oi=1023,_4=1024,w4=1025,il=1026,Rc=1027,S4=1028,FS=1029,M4=1030,zS=1031,BS=1033,y0=33776,b0=33777,_0=33778,w0=33779,t_=35840,n_=35841,r_=35842,i_=35843,VS=36196,s_=37492,a_=37496,o_=37808,l_=37809,c_=37810,u_=37811,d_=37812,h_=37813,f_=37814,p_=37815,m_=37816,g_=37817,x_=37818,v_=37819,y_=37820,b_=37821,S0=36492,__=36494,w_=36495,E4=36283,S_=36284,M_=36285,E_=36286,N4=2200,T4=2201,A4=2202,ep=2300,tp=2301,M0=2302,fc=2400,pc=2401,np=2402,sv=2500,HS=2501,RG=0,jG=1,LG=2,GS=3e3,sl=3001,C4=3200,WS=3201,yl=0,k4=1,Wi="",ar="srgb",ba="srgb-linear",av="display-p3",Cp="display-p3-linear",rp="linear",on="srgb",ip="rec709",sp="p3",DG=0,nc=7680,IG=7681,UG=7682,OG=7683,FG=34055,zG=34056,BG=5386,VG=512,HG=513,GG=514,WG=515,XG=516,YG=517,qG=518,N_=519,P4=512,R4=513,j4=514,XS=515,L4=516,D4=517,I4=518,U4=519,ap=35044,$G=35048,ZG=35040,KG=35045,JG=35049,QG=35041,e9=35046,t9=35050,n9=35042,r9="100",T_="300 es",xx=1035,Ds=2e3,Ad=2001;let mo=class{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(n)===-1&&r[e].push(n)}hasEventListener(e,n){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(n)!==-1}removeEventListener(e,n){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(n);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,a=i.length;s<a;s++)i[s].call(this,e);e.target=null}}};const Ir=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let DA=1234567;const wc=Math.PI/180,Cd=180/Math.PI;function qi(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(Ir[t&255]+Ir[t>>8&255]+Ir[t>>16&255]+Ir[t>>24&255]+"-"+Ir[e&255]+Ir[e>>8&255]+"-"+Ir[e>>16&15|64]+Ir[e>>24&255]+"-"+Ir[n&63|128]+Ir[n>>8&255]+"-"+Ir[n>>16&255]+Ir[n>>24&255]+Ir[r&255]+Ir[r>>8&255]+Ir[r>>16&255]+Ir[r>>24&255]).toLowerCase()}function On(t,e,n){return Math.max(e,Math.min(n,t))}function YS(t,e){return(t%e+e)%e}function i9(t,e,n,r,i){return r+(t-e)*(i-r)/(n-e)}function s9(t,e,n){return t!==e?(n-t)/(e-t):0}function yf(t,e,n){return(1-n)*t+n*e}function a9(t,e,n,r){return yf(t,e,1-Math.exp(-n*r))}function o9(t,e=1){return e-Math.abs(YS(t,e*2)-e)}function l9(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))}function c9(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(t*6-15)+10))}function u9(t,e){return t+Math.floor(Math.random()*(e-t+1))}function d9(t,e){return t+Math.random()*(e-t)}function h9(t){return t*(.5-Math.random())}function f9(t){t!==void 0&&(DA=t);let e=DA+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function p9(t){return t*wc}function m9(t){return t*Cd}function A_(t){return(t&t-1)===0&&t!==0}function g9(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function vx(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function x9(t,e,n,r,i){const s=Math.cos,a=Math.sin,l=s(n/2),c=a(n/2),u=s((e+r)/2),d=a((e+r)/2),f=s((e-r)/2),m=a((e-r)/2),g=s((r-e)/2),v=a((r-e)/2);switch(i){case"XYX":t.set(l*d,c*f,c*m,l*u);break;case"YZY":t.set(c*m,l*d,c*f,l*u);break;case"ZXZ":t.set(c*f,c*m,l*d,l*u);break;case"XZX":t.set(l*d,c*v,c*g,l*u);break;case"YXY":t.set(c*g,l*d,c*v,l*u);break;case"ZYZ":t.set(c*v,c*g,l*d,l*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function Mi(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return t/4294967295;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/2147483647,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function jt(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return Math.round(t*4294967295);case Uint16Array:return Math.round(t*65535);case Uint8Array:return Math.round(t*255);case Int32Array:return Math.round(t*2147483647);case Int16Array:return Math.round(t*32767);case Int8Array:return Math.round(t*127);default:throw new Error("Invalid component type.")}}const O4={DEG2RAD:wc,RAD2DEG:Cd,generateUUID:qi,clamp:On,euclideanModulo:YS,mapLinear:i9,inverseLerp:s9,lerp:yf,damp:a9,pingpong:o9,smoothstep:l9,smootherstep:c9,randInt:u9,randFloat:d9,randFloatSpread:h9,seededRandom:f9,degToRad:p9,radToDeg:m9,isPowerOfTwo:A_,ceilPowerOfTwo:g9,floorPowerOfTwo:vx,setQuaternionFromProperEuler:x9,normalize:jt,denormalize:Mi};class ke{constructor(e=0,n=0){ke.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,r=this.y,i=e.elements;return this.x=i[0]*n+i[3]*r+i[6],this.y=i[1]*n+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(On(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y;return n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const r=Math.cos(n),i=Math.sin(n),s=this.x-e.x,a=this.y-e.y;return this.x=s*r-a*i+e.x,this.y=s*i+a*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Rt{constructor(e,n,r,i,s,a,l,c,u){Rt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,n,r,i,s,a,l,c,u)}set(e,n,r,i,s,a,l,c,u){const d=this.elements;return d[0]=e,d[1]=i,d[2]=l,d[3]=n,d[4]=s,d[5]=c,d[6]=r,d[7]=a,d[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],this}extractBasis(e,n,r){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,s=this.elements,a=r[0],l=r[3],c=r[6],u=r[1],d=r[4],f=r[7],m=r[2],g=r[5],v=r[8],_=i[0],b=i[3],x=i[6],y=i[1],S=i[4],E=i[7],A=i[2],T=i[5],C=i[8];return s[0]=a*_+l*y+c*A,s[3]=a*b+l*S+c*T,s[6]=a*x+l*E+c*C,s[1]=u*_+d*y+f*A,s[4]=u*b+d*S+f*T,s[7]=u*x+d*E+f*C,s[2]=m*_+g*y+v*A,s[5]=m*b+g*S+v*T,s[8]=m*x+g*E+v*C,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[1],i=e[2],s=e[3],a=e[4],l=e[5],c=e[6],u=e[7],d=e[8];return n*a*d-n*l*u-r*s*d+r*l*c+i*s*u-i*a*c}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],s=e[3],a=e[4],l=e[5],c=e[6],u=e[7],d=e[8],f=d*a-l*u,m=l*c-d*s,g=u*s-a*c,v=n*f+r*m+i*g;if(v===0)return this.set(0,0,0,0,0,0,0,0,0);const _=1/v;return e[0]=f*_,e[1]=(i*u-d*r)*_,e[2]=(l*r-i*a)*_,e[3]=m*_,e[4]=(d*n-i*c)*_,e[5]=(i*s-l*n)*_,e[6]=g*_,e[7]=(r*c-u*n)*_,e[8]=(a*n-r*s)*_,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,r,i,s,a,l){const c=Math.cos(s),u=Math.sin(s);return this.set(r*c,r*u,-r*(c*a+u*l)+a+e,-i*u,i*c,-i*(-u*a+c*l)+l+n,0,0,1),this}scale(e,n){return this.premultiply(v1.makeScale(e,n)),this}rotate(e){return this.premultiply(v1.makeRotation(-e)),this}translate(e,n){return this.premultiply(v1.makeTranslation(e,n)),this}makeTranslation(e,n){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,n,0,0,1),this}makeRotation(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,r,n,0,0,0,1),this}makeScale(e,n){return this.set(e,0,0,0,n,0,0,0,1),this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<9;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<9;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const v1=new Rt;function F4(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}const v9={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function ed(t,e){return new v9[t](e)}function op(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function z4(){const t=op("canvas");return t.style.display="block",t}const IA={};function bf(t){t in IA||(IA[t]=!0,console.warn(t))}const UA=new Rt().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),OA=new Rt().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),Qm={[ba]:{transfer:rp,primaries:ip,toReference:t=>t,fromReference:t=>t},[ar]:{transfer:on,primaries:ip,toReference:t=>t.convertSRGBToLinear(),fromReference:t=>t.convertLinearToSRGB()},[Cp]:{transfer:rp,primaries:sp,toReference:t=>t.applyMatrix3(OA),fromReference:t=>t.applyMatrix3(UA)},[av]:{transfer:on,primaries:sp,toReference:t=>t.convertSRGBToLinear().applyMatrix3(OA),fromReference:t=>t.applyMatrix3(UA).convertLinearToSRGB()}},y9=new Set([ba,Cp]),Jt={enabled:!0,_workingColorSpace:ba,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(t){if(!y9.has(t))throw new Error(`Unsupported working color space, "${t}".`);this._workingColorSpace=t},convert:function(t,e,n){if(this.enabled===!1||e===n||!e||!n)return t;const r=Qm[e].toReference,i=Qm[n].fromReference;return i(r(t))},fromWorkingColorSpace:function(t,e){return this.convert(t,this._workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this._workingColorSpace)},getPrimaries:function(t){return Qm[t].primaries},getTransfer:function(t){return t===Wi?rp:Qm[t].transfer}};function gd(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function y1(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}let ou;class qS{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{ou===void 0&&(ou=op("canvas")),ou.width=e.width,ou.height=e.height;const r=ou.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),n=ou}return n.width>2048||n.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),n.toDataURL("image/jpeg",.6)):n.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const n=op("canvas");n.width=e.width,n.height=e.height;const r=n.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),s=i.data;for(let a=0;a<s.length;a++)s[a]=gd(s[a]/255)*255;return r.putImageData(i,0,0),n}else if(e.data){const n=e.data.slice(0);for(let r=0;r<n.length;r++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[r]=Math.floor(gd(n[r]/255)*255):n[r]=gd(n[r]);return{data:n,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let b9=0;class mc{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:b9++}),this.uuid=qi(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let a=0,l=i.length;a<l;a++)i[a].isDataTexture?s.push(b1(i[a].image)):s.push(b1(i[a]))}else s=b1(i);r.url=s}return n||(e.images[this.uuid]=r),r}}function b1(t){return typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap?qS.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let _9=0;class Cn extends mo{constructor(e=Cn.DEFAULT_IMAGE,n=Cn.DEFAULT_MAPPING,r=Br,i=Br,s=Mn,a=fl,l=oi,c=fa,u=Cn.DEFAULT_ANISOTROPY,d=Wi){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:_9++}),this.uuid=qi(),this.name="",this.source=new mc(e),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=s,this.minFilter=a,this.anisotropy=u,this.format=l,this.internalFormat=null,this.type=c,this.offset=new ke(0,0),this.repeat=new ke(1,1),this.center=new ke(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Rt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof d=="string"?this.colorSpace=d:(bf("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=d===sl?ar:Wi),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),n||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==rv)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Jf:e.x=e.x-Math.floor(e.x);break;case Br:e.x=e.x<0?0:1;break;case Qf:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Jf:e.y=e.y-Math.floor(e.y);break;case Br:e.y=e.y<0?0:1;break;case Qf:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return bf("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===ar?sl:GS}set encoding(e){bf("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===sl?ar:Wi}}Cn.DEFAULT_IMAGE=null;Cn.DEFAULT_MAPPING=rv;Cn.DEFAULT_ANISOTROPY=1;class Yt{constructor(e=0,n=0,r=0,i=1){Yt.prototype.isVector4=!0,this.x=e,this.y=n,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,r,i){return this.x=e,this.y=n,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,s=this.w,a=e.elements;return this.x=a[0]*n+a[4]*r+a[8]*i+a[12]*s,this.y=a[1]*n+a[5]*r+a[9]*i+a[13]*s,this.z=a[2]*n+a[6]*r+a[10]*i+a[14]*s,this.w=a[3]*n+a[7]*r+a[11]*i+a[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,r,i,s;const c=e.elements,u=c[0],d=c[4],f=c[8],m=c[1],g=c[5],v=c[9],_=c[2],b=c[6],x=c[10];if(Math.abs(d-m)<.01&&Math.abs(f-_)<.01&&Math.abs(v-b)<.01){if(Math.abs(d+m)<.1&&Math.abs(f+_)<.1&&Math.abs(v+b)<.1&&Math.abs(u+g+x-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const S=(u+1)/2,E=(g+1)/2,A=(x+1)/2,T=(d+m)/4,C=(f+_)/4,j=(v+b)/4;return S>E&&S>A?S<.01?(r=0,i=.707106781,s=.707106781):(r=Math.sqrt(S),i=T/r,s=C/r):E>A?E<.01?(r=.707106781,i=0,s=.707106781):(i=Math.sqrt(E),r=T/i,s=j/i):A<.01?(r=.707106781,i=.707106781,s=0):(s=Math.sqrt(A),r=C/s,i=j/s),this.set(r,i,s,n),this}let y=Math.sqrt((b-v)*(b-v)+(f-_)*(f-_)+(m-d)*(m-d));return Math.abs(y)<.001&&(y=1),this.x=(b-v)/y,this.y=(f-_)/y,this.z=(m-d)/y,this.w=Math.acos((u+g+x-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this.w=Math.max(e.w,Math.min(n.w,this.w)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this.w=Math.max(e,Math.min(n,this.w)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this.w=e.w+(n.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class B4 extends mo{constructor(e=1,n=1,r={}){super(),this.isRenderTarget=!0,this.width=e,this.height=n,this.depth=1,this.scissor=new Yt(0,0,e,n),this.scissorTest=!1,this.viewport=new Yt(0,0,e,n);const i={width:e,height:n,depth:1};r.encoding!==void 0&&(bf("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),r.colorSpace=r.encoding===sl?ar:Wi),r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Mn,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0},r),this.texture=new Cn(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=r.generateMipmaps,this.texture.internalFormat=r.internalFormat,this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.depthTexture=r.depthTexture,this.samples=r.samples}setSize(e,n,r=1){(this.width!==e||this.height!==n||this.depth!==r)&&(this.width=e,this.height=n,this.depth=r,this.texture.image.width=e,this.texture.image.height=n,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const n=Object.assign({},e.texture.image);return this.texture.source=new mc(n),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Hs extends B4{constructor(e=1,n=1,r={}){super(e,n,r),this.isWebGLRenderTarget=!0}}class ov extends Cn{constructor(e=null,n=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=Wn,this.minFilter=Wn,this.wrapR=Br,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class w9 extends Hs{constructor(e=1,n=1,r=1,i={}){super(e,n,i),this.isWebGLArrayRenderTarget=!0,this.depth=r,this.texture=new ov(null,e,n,r),this.texture.isRenderTargetTexture=!0}}class $S extends Cn{constructor(e=null,n=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=Wn,this.minFilter=Wn,this.wrapR=Br,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class S9 extends Hs{constructor(e=1,n=1,r=1,i={}){super(e,n,i),this.isWebGL3DRenderTarget=!0,this.depth=r,this.texture=new $S(null,e,n,r),this.texture.isRenderTargetTexture=!0}}class M9 extends Hs{constructor(e=1,n=1,r=1,i={}){super(e,n,i),this.isWebGLMultipleRenderTargets=!0;const s=this.texture;this.texture=[];for(let a=0;a<r;a++)this.texture[a]=s.clone(),this.texture[a].isRenderTargetTexture=!0}setSize(e,n,r=1){if(this.width!==e||this.height!==n||this.depth!==r){this.width=e,this.height=n,this.depth=r;for(let i=0,s=this.texture.length;i<s;i++)this.texture[i].image.width=e,this.texture[i].image.height=n,this.texture[i].image.depth=r;this.dispose()}this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let n=0,r=e.texture.length;n<r;n++)this.texture[n]=e.texture[n].clone(),this.texture[n].isRenderTargetTexture=!0;return this}}class Gr{constructor(e=0,n=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=r,this._w=i}static slerpFlat(e,n,r,i,s,a,l){let c=r[i+0],u=r[i+1],d=r[i+2],f=r[i+3];const m=s[a+0],g=s[a+1],v=s[a+2],_=s[a+3];if(l===0){e[n+0]=c,e[n+1]=u,e[n+2]=d,e[n+3]=f;return}if(l===1){e[n+0]=m,e[n+1]=g,e[n+2]=v,e[n+3]=_;return}if(f!==_||c!==m||u!==g||d!==v){let b=1-l;const x=c*m+u*g+d*v+f*_,y=x>=0?1:-1,S=1-x*x;if(S>Number.EPSILON){const A=Math.sqrt(S),T=Math.atan2(A,x*y);b=Math.sin(b*T)/A,l=Math.sin(l*T)/A}const E=l*y;if(c=c*b+m*E,u=u*b+g*E,d=d*b+v*E,f=f*b+_*E,b===1-l){const A=1/Math.sqrt(c*c+u*u+d*d+f*f);c*=A,u*=A,d*=A,f*=A}}e[n]=c,e[n+1]=u,e[n+2]=d,e[n+3]=f}static multiplyQuaternionsFlat(e,n,r,i,s,a){const l=r[i],c=r[i+1],u=r[i+2],d=r[i+3],f=s[a],m=s[a+1],g=s[a+2],v=s[a+3];return e[n]=l*v+d*f+c*g-u*m,e[n+1]=c*v+d*m+u*f-l*g,e[n+2]=u*v+d*g+l*m-c*f,e[n+3]=d*v-l*f-c*m-u*g,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,r,i){return this._x=e,this._y=n,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n=!0){const r=e._x,i=e._y,s=e._z,a=e._order,l=Math.cos,c=Math.sin,u=l(r/2),d=l(i/2),f=l(s/2),m=c(r/2),g=c(i/2),v=c(s/2);switch(a){case"XYZ":this._x=m*d*f+u*g*v,this._y=u*g*f-m*d*v,this._z=u*d*v+m*g*f,this._w=u*d*f-m*g*v;break;case"YXZ":this._x=m*d*f+u*g*v,this._y=u*g*f-m*d*v,this._z=u*d*v-m*g*f,this._w=u*d*f+m*g*v;break;case"ZXY":this._x=m*d*f-u*g*v,this._y=u*g*f+m*d*v,this._z=u*d*v+m*g*f,this._w=u*d*f-m*g*v;break;case"ZYX":this._x=m*d*f-u*g*v,this._y=u*g*f+m*d*v,this._z=u*d*v-m*g*f,this._w=u*d*f+m*g*v;break;case"YZX":this._x=m*d*f+u*g*v,this._y=u*g*f+m*d*v,this._z=u*d*v-m*g*f,this._w=u*d*f-m*g*v;break;case"XZY":this._x=m*d*f-u*g*v,this._y=u*g*f-m*d*v,this._z=u*d*v+m*g*f,this._w=u*d*f+m*g*v;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return n===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const r=n/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,r=n[0],i=n[4],s=n[8],a=n[1],l=n[5],c=n[9],u=n[2],d=n[6],f=n[10],m=r+l+f;if(m>0){const g=.5/Math.sqrt(m+1);this._w=.25/g,this._x=(d-c)*g,this._y=(s-u)*g,this._z=(a-i)*g}else if(r>l&&r>f){const g=2*Math.sqrt(1+r-l-f);this._w=(d-c)/g,this._x=.25*g,this._y=(i+a)/g,this._z=(s+u)/g}else if(l>f){const g=2*Math.sqrt(1+l-r-f);this._w=(s-u)/g,this._x=(i+a)/g,this._y=.25*g,this._z=(c+d)/g}else{const g=2*Math.sqrt(1+f-r-l);this._w=(a-i)/g,this._x=(s+u)/g,this._y=(c+d)/g,this._z=.25*g}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let r=e.dot(n)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(On(this.dot(e),-1,1)))}rotateTowards(e,n){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,n/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const r=e._x,i=e._y,s=e._z,a=e._w,l=n._x,c=n._y,u=n._z,d=n._w;return this._x=r*d+a*l+i*u-s*c,this._y=i*d+a*c+s*l-r*u,this._z=s*d+a*u+r*c-i*l,this._w=a*d-r*l-i*c-s*u,this._onChangeCallback(),this}slerp(e,n){if(n===0)return this;if(n===1)return this.copy(e);const r=this._x,i=this._y,s=this._z,a=this._w;let l=a*e._w+r*e._x+i*e._y+s*e._z;if(l<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,l=-l):this.copy(e),l>=1)return this._w=a,this._x=r,this._y=i,this._z=s,this;const c=1-l*l;if(c<=Number.EPSILON){const g=1-n;return this._w=g*a+n*this._w,this._x=g*r+n*this._x,this._y=g*i+n*this._y,this._z=g*s+n*this._z,this.normalize(),this}const u=Math.sqrt(c),d=Math.atan2(u,l),f=Math.sin((1-n)*d)/u,m=Math.sin(n*d)/u;return this._w=a*f+this._w*m,this._x=r*f+this._x*m,this._y=i*f+this._y*m,this._z=s*f+this._z*m,this._onChangeCallback(),this}slerpQuaternions(e,n,r){return this.copy(e).slerp(n,r)}random(){const e=Math.random(),n=Math.sqrt(1-e),r=Math.sqrt(e),i=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(n*Math.cos(i),r*Math.sin(s),r*Math.cos(s),n*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class X{constructor(e=0,n=0,r=0){X.prototype.isVector3=!0,this.x=e,this.y=n,this.z=r}set(e,n,r){return r===void 0&&(r=this.z),this.x=e,this.y=n,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(FA.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(FA.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*n+s[3]*r+s[6]*i,this.y=s[1]*n+s[4]*r+s[7]*i,this.z=s[2]*n+s[5]*r+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,s=e.elements,a=1/(s[3]*n+s[7]*r+s[11]*i+s[15]);return this.x=(s[0]*n+s[4]*r+s[8]*i+s[12])*a,this.y=(s[1]*n+s[5]*r+s[9]*i+s[13])*a,this.z=(s[2]*n+s[6]*r+s[10]*i+s[14])*a,this}applyQuaternion(e){const n=this.x,r=this.y,i=this.z,s=e.x,a=e.y,l=e.z,c=e.w,u=2*(a*i-l*r),d=2*(l*n-s*i),f=2*(s*r-a*n);return this.x=n+c*u+a*f-l*d,this.y=r+c*d+l*u-s*f,this.z=i+c*f+s*d-a*u,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*n+s[4]*r+s[8]*i,this.y=s[1]*n+s[5]*r+s[9]*i,this.z=s[2]*n+s[6]*r+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){const r=e.x,i=e.y,s=e.z,a=n.x,l=n.y,c=n.z;return this.x=i*c-s*l,this.y=s*a-r*c,this.z=r*l-i*a,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const r=e.dot(this)/n;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return _1.copy(this).projectOnVector(e),this.sub(_1)}reflect(e){return this.sub(_1.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(On(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return n*n+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,r){const i=Math.sin(n)*e;return this.x=i*Math.sin(r),this.y=Math.cos(n)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,r){return this.x=e*Math.sin(n),this.y=r,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=r,this.z=i,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,n=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(n),this.y=r*Math.sin(n),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const _1=new X,FA=new Gr;class Wr{constructor(e=new X(1/0,1/0,1/0),n=new X(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n+=3)this.expandByPoint(Es.fromArray(e,n));return this}setFromBufferAttribute(e){this.makeEmpty();for(let n=0,r=e.count;n<r;n++)this.expandByPoint(Es.fromBufferAttribute(e,n));return this}setFromPoints(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const r=Es.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,n=!1){return this.makeEmpty(),this.expandByObject(e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,n=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0){const s=r.getAttribute("position");if(n===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let a=0,l=s.count;a<l;a++)e.isMesh===!0?e.getVertexPosition(a,Es):Es.fromBufferAttribute(s,a),Es.applyMatrix4(e.matrixWorld),this.expandByPoint(Es);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),eg.copy(e.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),eg.copy(r.boundingBox)),eg.applyMatrix4(e.matrixWorld),this.union(eg)}const i=e.children;for(let s=0,a=i.length;s<a;s++)this.expandByObject(i[s],n);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Es),Es.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,r;return e.normal.x>0?(n=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),n<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(kh),tg.subVectors(this.max,kh),lu.subVectors(e.a,kh),cu.subVectors(e.b,kh),uu.subVectors(e.c,kh),ko.subVectors(cu,lu),Po.subVectors(uu,cu),zl.subVectors(lu,uu);let n=[0,-ko.z,ko.y,0,-Po.z,Po.y,0,-zl.z,zl.y,ko.z,0,-ko.x,Po.z,0,-Po.x,zl.z,0,-zl.x,-ko.y,ko.x,0,-Po.y,Po.x,0,-zl.y,zl.x,0];return!w1(n,lu,cu,uu,tg)||(n=[1,0,0,0,1,0,0,0,1],!w1(n,lu,cu,uu,tg))?!1:(ng.crossVectors(ko,Po),n=[ng.x,ng.y,ng.z],w1(n,lu,cu,uu,tg))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Es).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Es).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Ua[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Ua[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Ua[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Ua[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Ua[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Ua[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Ua[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Ua[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Ua),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Ua=[new X,new X,new X,new X,new X,new X,new X,new X],Es=new X,eg=new Wr,lu=new X,cu=new X,uu=new X,ko=new X,Po=new X,zl=new X,kh=new X,tg=new X,ng=new X,Bl=new X;function w1(t,e,n,r,i){for(let s=0,a=t.length-3;s<=a;s+=3){Bl.fromArray(t,s);const l=i.x*Math.abs(Bl.x)+i.y*Math.abs(Bl.y)+i.z*Math.abs(Bl.z),c=e.dot(Bl),u=n.dot(Bl),d=r.dot(Bl);if(Math.max(-Math.max(c,u,d),Math.min(c,u,d))>l)return!1}return!0}const E9=new Wr,Ph=new X,S1=new X;class Tr{constructor(e=new X,n=-1){this.isSphere=!0,this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const r=this.center;n!==void 0?r.copy(n):E9.setFromPoints(e).getCenter(r);let i=0;for(let s=0,a=e.length;s<a;s++)i=Math.max(i,r.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const r=this.center.distanceToSquared(e);return n.copy(e),r>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Ph.subVectors(e,this.center);const n=Ph.lengthSq();if(n>this.radius*this.radius){const r=Math.sqrt(n),i=(r-this.radius)*.5;this.center.addScaledVector(Ph,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(S1.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Ph.copy(e.center).add(S1)),this.expandByPoint(Ph.copy(e.center).sub(S1))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Oa=new X,M1=new X,rg=new X,Ro=new X,E1=new X,ig=new X,N1=new X;class zc{constructor(e=new X,n=new X(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Oa)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const r=n.dot(this.direction);return r<0?n.copy(this.origin):n.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=Oa.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(Oa.copy(this.origin).addScaledVector(this.direction,n),Oa.distanceToSquared(e))}distanceSqToSegment(e,n,r,i){M1.copy(e).add(n).multiplyScalar(.5),rg.copy(n).sub(e).normalize(),Ro.copy(this.origin).sub(M1);const s=e.distanceTo(n)*.5,a=-this.direction.dot(rg),l=Ro.dot(this.direction),c=-Ro.dot(rg),u=Ro.lengthSq(),d=Math.abs(1-a*a);let f,m,g,v;if(d>0)if(f=a*c-l,m=a*l-c,v=s*d,f>=0)if(m>=-v)if(m<=v){const _=1/d;f*=_,m*=_,g=f*(f+a*m+2*l)+m*(a*f+m+2*c)+u}else m=s,f=Math.max(0,-(a*m+l)),g=-f*f+m*(m+2*c)+u;else m=-s,f=Math.max(0,-(a*m+l)),g=-f*f+m*(m+2*c)+u;else m<=-v?(f=Math.max(0,-(-a*s+l)),m=f>0?-s:Math.min(Math.max(-s,-c),s),g=-f*f+m*(m+2*c)+u):m<=v?(f=0,m=Math.min(Math.max(-s,-c),s),g=m*(m+2*c)+u):(f=Math.max(0,-(a*s+l)),m=f>0?s:Math.min(Math.max(-s,-c),s),g=-f*f+m*(m+2*c)+u);else m=a>0?-s:s,f=Math.max(0,-(a*m+l)),g=-f*f+m*(m+2*c)+u;return r&&r.copy(this.origin).addScaledVector(this.direction,f),i&&i.copy(M1).addScaledVector(rg,m),g}intersectSphere(e,n){Oa.subVectors(e.center,this.origin);const r=Oa.dot(this.direction),i=Oa.dot(Oa)-r*r,s=e.radius*e.radius;if(i>s)return null;const a=Math.sqrt(s-i),l=r-a,c=r+a;return c<0?null:l<0?this.at(c,n):this.at(l,n)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/n;return r>=0?r:null}intersectPlane(e,n){const r=this.distanceToPlane(e);return r===null?null:this.at(r,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let r,i,s,a,l,c;const u=1/this.direction.x,d=1/this.direction.y,f=1/this.direction.z,m=this.origin;return u>=0?(r=(e.min.x-m.x)*u,i=(e.max.x-m.x)*u):(r=(e.max.x-m.x)*u,i=(e.min.x-m.x)*u),d>=0?(s=(e.min.y-m.y)*d,a=(e.max.y-m.y)*d):(s=(e.max.y-m.y)*d,a=(e.min.y-m.y)*d),r>a||s>i||((s>r||isNaN(r))&&(r=s),(a<i||isNaN(i))&&(i=a),f>=0?(l=(e.min.z-m.z)*f,c=(e.max.z-m.z)*f):(l=(e.max.z-m.z)*f,c=(e.min.z-m.z)*f),r>c||l>i)||((l>r||r!==r)&&(r=l),(c<i||i!==i)&&(i=c),i<0)?null:this.at(r>=0?r:i,n)}intersectsBox(e){return this.intersectBox(e,Oa)!==null}intersectTriangle(e,n,r,i,s){E1.subVectors(n,e),ig.subVectors(r,e),N1.crossVectors(E1,ig);let a=this.direction.dot(N1),l;if(a>0){if(i)return null;l=1}else if(a<0)l=-1,a=-a;else return null;Ro.subVectors(this.origin,e);const c=l*this.direction.dot(ig.crossVectors(Ro,ig));if(c<0)return null;const u=l*this.direction.dot(E1.cross(Ro));if(u<0||c+u>a)return null;const d=-l*Ro.dot(N1);return d<0?null:this.at(d/a,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class St{constructor(e,n,r,i,s,a,l,c,u,d,f,m,g,v,_,b){St.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,n,r,i,s,a,l,c,u,d,f,m,g,v,_,b)}set(e,n,r,i,s,a,l,c,u,d,f,m,g,v,_,b){const x=this.elements;return x[0]=e,x[4]=n,x[8]=r,x[12]=i,x[1]=s,x[5]=a,x[9]=l,x[13]=c,x[2]=u,x[6]=d,x[10]=f,x[14]=m,x[3]=g,x[7]=v,x[11]=_,x[15]=b,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new St().fromArray(this.elements)}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],this}copyPosition(e){const n=this.elements,r=e.elements;return n[12]=r[12],n[13]=r[13],n[14]=r[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,r){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,n,r){return this.set(e.x,n.x,r.x,0,e.y,n.y,r.y,0,e.z,n.z,r.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,r=e.elements,i=1/du.setFromMatrixColumn(e,0).length(),s=1/du.setFromMatrixColumn(e,1).length(),a=1/du.setFromMatrixColumn(e,2).length();return n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[3]=0,n[4]=r[4]*s,n[5]=r[5]*s,n[6]=r[6]*s,n[7]=0,n[8]=r[8]*a,n[9]=r[9]*a,n[10]=r[10]*a,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){const n=this.elements,r=e.x,i=e.y,s=e.z,a=Math.cos(r),l=Math.sin(r),c=Math.cos(i),u=Math.sin(i),d=Math.cos(s),f=Math.sin(s);if(e.order==="XYZ"){const m=a*d,g=a*f,v=l*d,_=l*f;n[0]=c*d,n[4]=-c*f,n[8]=u,n[1]=g+v*u,n[5]=m-_*u,n[9]=-l*c,n[2]=_-m*u,n[6]=v+g*u,n[10]=a*c}else if(e.order==="YXZ"){const m=c*d,g=c*f,v=u*d,_=u*f;n[0]=m+_*l,n[4]=v*l-g,n[8]=a*u,n[1]=a*f,n[5]=a*d,n[9]=-l,n[2]=g*l-v,n[6]=_+m*l,n[10]=a*c}else if(e.order==="ZXY"){const m=c*d,g=c*f,v=u*d,_=u*f;n[0]=m-_*l,n[4]=-a*f,n[8]=v+g*l,n[1]=g+v*l,n[5]=a*d,n[9]=_-m*l,n[2]=-a*u,n[6]=l,n[10]=a*c}else if(e.order==="ZYX"){const m=a*d,g=a*f,v=l*d,_=l*f;n[0]=c*d,n[4]=v*u-g,n[8]=m*u+_,n[1]=c*f,n[5]=_*u+m,n[9]=g*u-v,n[2]=-u,n[6]=l*c,n[10]=a*c}else if(e.order==="YZX"){const m=a*c,g=a*u,v=l*c,_=l*u;n[0]=c*d,n[4]=_-m*f,n[8]=v*f+g,n[1]=f,n[5]=a*d,n[9]=-l*d,n[2]=-u*d,n[6]=g*f+v,n[10]=m-_*f}else if(e.order==="XZY"){const m=a*c,g=a*u,v=l*c,_=l*u;n[0]=c*d,n[4]=-f,n[8]=u*d,n[1]=m*f+_,n[5]=a*d,n[9]=g*f-v,n[2]=v*f-g,n[6]=l*d,n[10]=_*f+m}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(N9,e,T9)}lookAt(e,n,r){const i=this.elements;return Bi.subVectors(e,n),Bi.lengthSq()===0&&(Bi.z=1),Bi.normalize(),jo.crossVectors(r,Bi),jo.lengthSq()===0&&(Math.abs(r.z)===1?Bi.x+=1e-4:Bi.z+=1e-4,Bi.normalize(),jo.crossVectors(r,Bi)),jo.normalize(),sg.crossVectors(Bi,jo),i[0]=jo.x,i[4]=sg.x,i[8]=Bi.x,i[1]=jo.y,i[5]=sg.y,i[9]=Bi.y,i[2]=jo.z,i[6]=sg.z,i[10]=Bi.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,s=this.elements,a=r[0],l=r[4],c=r[8],u=r[12],d=r[1],f=r[5],m=r[9],g=r[13],v=r[2],_=r[6],b=r[10],x=r[14],y=r[3],S=r[7],E=r[11],A=r[15],T=i[0],C=i[4],j=i[8],k=i[12],P=i[1],H=i[5],B=i[9],Y=i[13],V=i[2],Q=i[6],ee=i[10],re=i[14],I=i[3],F=i[7],z=i[11],U=i[15];return s[0]=a*T+l*P+c*V+u*I,s[4]=a*C+l*H+c*Q+u*F,s[8]=a*j+l*B+c*ee+u*z,s[12]=a*k+l*Y+c*re+u*U,s[1]=d*T+f*P+m*V+g*I,s[5]=d*C+f*H+m*Q+g*F,s[9]=d*j+f*B+m*ee+g*z,s[13]=d*k+f*Y+m*re+g*U,s[2]=v*T+_*P+b*V+x*I,s[6]=v*C+_*H+b*Q+x*F,s[10]=v*j+_*B+b*ee+x*z,s[14]=v*k+_*Y+b*re+x*U,s[3]=y*T+S*P+E*V+A*I,s[7]=y*C+S*H+E*Q+A*F,s[11]=y*j+S*B+E*ee+A*z,s[15]=y*k+S*Y+E*re+A*U,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[4],i=e[8],s=e[12],a=e[1],l=e[5],c=e[9],u=e[13],d=e[2],f=e[6],m=e[10],g=e[14],v=e[3],_=e[7],b=e[11],x=e[15];return v*(+s*c*f-i*u*f-s*l*m+r*u*m+i*l*g-r*c*g)+_*(+n*c*g-n*u*m+s*a*m-i*a*g+i*u*d-s*c*d)+b*(+n*u*f-n*l*g-s*a*f+r*a*g+s*l*d-r*u*d)+x*(-i*l*d-n*c*f+n*l*m+i*a*f-r*a*m+r*c*d)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=n,i[14]=r),this}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],s=e[3],a=e[4],l=e[5],c=e[6],u=e[7],d=e[8],f=e[9],m=e[10],g=e[11],v=e[12],_=e[13],b=e[14],x=e[15],y=f*b*u-_*m*u+_*c*g-l*b*g-f*c*x+l*m*x,S=v*m*u-d*b*u-v*c*g+a*b*g+d*c*x-a*m*x,E=d*_*u-v*f*u+v*l*g-a*_*g-d*l*x+a*f*x,A=v*f*c-d*_*c-v*l*m+a*_*m+d*l*b-a*f*b,T=n*y+r*S+i*E+s*A;if(T===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const C=1/T;return e[0]=y*C,e[1]=(_*m*s-f*b*s-_*i*g+r*b*g+f*i*x-r*m*x)*C,e[2]=(l*b*s-_*c*s+_*i*u-r*b*u-l*i*x+r*c*x)*C,e[3]=(f*c*s-l*m*s-f*i*u+r*m*u+l*i*g-r*c*g)*C,e[4]=S*C,e[5]=(d*b*s-v*m*s+v*i*g-n*b*g-d*i*x+n*m*x)*C,e[6]=(v*c*s-a*b*s-v*i*u+n*b*u+a*i*x-n*c*x)*C,e[7]=(a*m*s-d*c*s+d*i*u-n*m*u-a*i*g+n*c*g)*C,e[8]=E*C,e[9]=(v*f*s-d*_*s-v*r*g+n*_*g+d*r*x-n*f*x)*C,e[10]=(a*_*s-v*l*s+v*r*u-n*_*u-a*r*x+n*l*x)*C,e[11]=(d*l*s-a*f*s-d*r*u+n*f*u+a*r*g-n*l*g)*C,e[12]=A*C,e[13]=(d*_*i-v*f*i+v*r*m-n*_*m-d*r*b+n*f*b)*C,e[14]=(v*l*i-a*_*i-v*r*c+n*_*c+a*r*b-n*l*b)*C,e[15]=(a*f*i-d*l*i+d*r*c-n*f*c-a*r*m+n*l*m)*C,this}scale(e){const n=this.elements,r=e.x,i=e.y,s=e.z;return n[0]*=r,n[4]*=i,n[8]*=s,n[1]*=r,n[5]*=i,n[9]*=s,n[2]*=r,n[6]*=i,n[10]*=s,n[3]*=r,n[7]*=i,n[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,r,i))}makeTranslation(e,n,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,n,0,0,1,r,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,n,-r,0,0,r,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,0,r,0,0,1,0,0,-r,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,0,r,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const r=Math.cos(n),i=Math.sin(n),s=1-r,a=e.x,l=e.y,c=e.z,u=s*a,d=s*l;return this.set(u*a+r,u*l-i*c,u*c+i*l,0,u*l+i*c,d*l+r,d*c-i*a,0,u*c-i*l,d*c+i*a,s*c*c+r,0,0,0,0,1),this}makeScale(e,n,r){return this.set(e,0,0,0,0,n,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,n,r,i,s,a){return this.set(1,r,s,0,e,1,a,0,n,i,1,0,0,0,0,1),this}compose(e,n,r){const i=this.elements,s=n._x,a=n._y,l=n._z,c=n._w,u=s+s,d=a+a,f=l+l,m=s*u,g=s*d,v=s*f,_=a*d,b=a*f,x=l*f,y=c*u,S=c*d,E=c*f,A=r.x,T=r.y,C=r.z;return i[0]=(1-(_+x))*A,i[1]=(g+E)*A,i[2]=(v-S)*A,i[3]=0,i[4]=(g-E)*T,i[5]=(1-(m+x))*T,i[6]=(b+y)*T,i[7]=0,i[8]=(v+S)*C,i[9]=(b-y)*C,i[10]=(1-(m+_))*C,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,n,r){const i=this.elements;let s=du.set(i[0],i[1],i[2]).length();const a=du.set(i[4],i[5],i[6]).length(),l=du.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],Ns.copy(this);const u=1/s,d=1/a,f=1/l;return Ns.elements[0]*=u,Ns.elements[1]*=u,Ns.elements[2]*=u,Ns.elements[4]*=d,Ns.elements[5]*=d,Ns.elements[6]*=d,Ns.elements[8]*=f,Ns.elements[9]*=f,Ns.elements[10]*=f,n.setFromRotationMatrix(Ns),r.x=s,r.y=a,r.z=l,this}makePerspective(e,n,r,i,s,a,l=Ds){const c=this.elements,u=2*s/(n-e),d=2*s/(r-i),f=(n+e)/(n-e),m=(r+i)/(r-i);let g,v;if(l===Ds)g=-(a+s)/(a-s),v=-2*a*s/(a-s);else if(l===Ad)g=-a/(a-s),v=-a*s/(a-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+l);return c[0]=u,c[4]=0,c[8]=f,c[12]=0,c[1]=0,c[5]=d,c[9]=m,c[13]=0,c[2]=0,c[6]=0,c[10]=g,c[14]=v,c[3]=0,c[7]=0,c[11]=-1,c[15]=0,this}makeOrthographic(e,n,r,i,s,a,l=Ds){const c=this.elements,u=1/(n-e),d=1/(r-i),f=1/(a-s),m=(n+e)*u,g=(r+i)*d;let v,_;if(l===Ds)v=(a+s)*f,_=-2*f;else if(l===Ad)v=s*f,_=-1*f;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+l);return c[0]=2*u,c[4]=0,c[8]=0,c[12]=-m,c[1]=0,c[5]=2*d,c[9]=0,c[13]=-g,c[2]=0,c[6]=0,c[10]=_,c[14]=-v,c[3]=0,c[7]=0,c[11]=0,c[15]=1,this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<16;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<16;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e[n+9]=r[9],e[n+10]=r[10],e[n+11]=r[11],e[n+12]=r[12],e[n+13]=r[13],e[n+14]=r[14],e[n+15]=r[15],e}}const du=new X,Ns=new St,N9=new X(0,0,0),T9=new X(1,1,1),jo=new X,sg=new X,Bi=new X,zA=new St,BA=new Gr;class kp{constructor(e=0,n=0,r=0,i=kp.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=n,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,r,i=this._order){return this._x=e,this._y=n,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,r=!0){const i=e.elements,s=i[0],a=i[4],l=i[8],c=i[1],u=i[5],d=i[9],f=i[2],m=i[6],g=i[10];switch(n){case"XYZ":this._y=Math.asin(On(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-d,g),this._z=Math.atan2(-a,s)):(this._x=Math.atan2(m,u),this._z=0);break;case"YXZ":this._x=Math.asin(-On(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(l,g),this._z=Math.atan2(c,u)):(this._y=Math.atan2(-f,s),this._z=0);break;case"ZXY":this._x=Math.asin(On(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(-f,g),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(c,s));break;case"ZYX":this._y=Math.asin(-On(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(m,g),this._z=Math.atan2(c,s)):(this._x=0,this._z=Math.atan2(-a,u));break;case"YZX":this._z=Math.asin(On(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-d,u),this._y=Math.atan2(-f,s)):(this._x=0,this._y=Math.atan2(l,g));break;case"XZY":this._z=Math.asin(-On(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(m,u),this._y=Math.atan2(l,s)):(this._x=Math.atan2(-d,g),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,r){return zA.makeRotationFromQuaternion(e),this.setFromRotationMatrix(zA,n,r)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return BA.setFromEuler(this),this.setFromQuaternion(BA,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}kp.DEFAULT_ORDER="XYZ";class Sc{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let A9=0;const VA=new X,hu=new Gr,Fa=new St,ag=new X,Rh=new X,C9=new X,k9=new Gr,HA=new X(1,0,0),GA=new X(0,1,0),WA=new X(0,0,1),P9={type:"added"},R9={type:"removed"};class Xt extends mo{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:A9++}),this.uuid=qi(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Xt.DEFAULT_UP.clone();const e=new X,n=new kp,r=new Gr,i=new X(1,1,1);function s(){r.setFromEuler(n,!1)}function a(){n.setFromQuaternion(r,void 0,!1)}n._onChange(s),r._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new St},normalMatrix:{value:new Rt}}),this.matrix=new St,this.matrixWorld=new St,this.matrixAutoUpdate=Xt.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Xt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Sc,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return hu.setFromAxisAngle(e,n),this.quaternion.multiply(hu),this}rotateOnWorldAxis(e,n){return hu.setFromAxisAngle(e,n),this.quaternion.premultiply(hu),this}rotateX(e){return this.rotateOnAxis(HA,e)}rotateY(e){return this.rotateOnAxis(GA,e)}rotateZ(e){return this.rotateOnAxis(WA,e)}translateOnAxis(e,n){return VA.copy(e).applyQuaternion(this.quaternion),this.position.add(VA.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(HA,e)}translateY(e){return this.translateOnAxis(GA,e)}translateZ(e){return this.translateOnAxis(WA,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Fa.copy(this.matrixWorld).invert())}lookAt(e,n,r){e.isVector3?ag.copy(e):ag.set(e,n,r);const i=this.parent;this.updateWorldMatrix(!0,!1),Rh.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Fa.lookAt(Rh,ag,this.up):Fa.lookAt(ag,Rh,this.up),this.quaternion.setFromRotationMatrix(Fa),i&&(Fa.extractRotation(i.matrixWorld),hu.setFromRotationMatrix(Fa),this.quaternion.premultiply(hu.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(P9)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(R9)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Fa.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Fa.multiply(e.parent.matrixWorld)),e.applyMatrix4(Fa),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let r=0,i=this.children.length;r<i;r++){const a=this.children[r].getObjectByProperty(e,n);if(a!==void 0)return a}}getObjectsByProperty(e,n,r=[]){this[e]===n&&r.push(this);const i=this.children;for(let s=0,a=i.length;s<a;s++)i[s].getObjectsByProperty(e,n,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Rh,e,C9),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Rh,k9,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverseVisible(e)}traverseAncestors(e){const n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let r=0,i=n.length;r<i;r++){const s=n[r];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,n){const r=this.parent;if(e===!0&&r!==null&&r.matrixWorldAutoUpdate===!0&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),n===!0){const i=this.children;for(let s=0,a=i.length;s<a;s++){const l=i[s];l.matrixWorldAutoUpdate===!0&&l.updateWorldMatrix(!1,!0)}}}toJSON(e){const n=e===void 0||typeof e=="string",r={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map(l=>({boxInitialized:l.boxInitialized,boxMin:l.box.min.toArray(),boxMax:l.box.max.toArray(),sphereInitialized:l.sphereInitialized,sphereRadius:l.sphere.radius,sphereCenter:l.sphere.center.toArray()})),i.maxGeometryCount=this._maxGeometryCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(e),this.boundingSphere!==null&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),this.boundingBox!==null&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()}));function s(l,c){return l[c.uuid]===void 0&&(l[c.uuid]=c.toJSON(e)),c.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const l=this.geometry.parameters;if(l!==void 0&&l.shapes!==void 0){const c=l.shapes;if(Array.isArray(c))for(let u=0,d=c.length;u<d;u++){const f=c[u];s(e.shapes,f)}else s(e.shapes,c)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const l=[];for(let c=0,u=this.material.length;c<u;c++)l.push(s(e.materials,this.material[c]));i.material=l}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let l=0;l<this.children.length;l++)i.children.push(this.children[l].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let l=0;l<this.animations.length;l++){const c=this.animations[l];i.animations.push(s(e.animations,c))}}if(n){const l=a(e.geometries),c=a(e.materials),u=a(e.textures),d=a(e.images),f=a(e.shapes),m=a(e.skeletons),g=a(e.animations),v=a(e.nodes);l.length>0&&(r.geometries=l),c.length>0&&(r.materials=c),u.length>0&&(r.textures=u),d.length>0&&(r.images=d),f.length>0&&(r.shapes=f),m.length>0&&(r.skeletons=m),g.length>0&&(r.animations=g),v.length>0&&(r.nodes=v)}return r.object=i,r;function a(l){const c=[];for(const u in l){const d=l[u];delete d.metadata,c.push(d)}return c}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}Xt.DEFAULT_UP=new X(0,1,0);Xt.DEFAULT_MATRIX_AUTO_UPDATE=!0;Xt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Ts=new X,za=new X,T1=new X,Ba=new X,fu=new X,pu=new X,XA=new X,A1=new X,C1=new X,k1=new X;let og=!1;class Si{constructor(e=new X,n=new X,r=new X){this.a=e,this.b=n,this.c=r}static getNormal(e,n,r,i){i.subVectors(r,n),Ts.subVectors(e,n),i.cross(Ts);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,n,r,i,s){Ts.subVectors(i,n),za.subVectors(r,n),T1.subVectors(e,n);const a=Ts.dot(Ts),l=Ts.dot(za),c=Ts.dot(T1),u=za.dot(za),d=za.dot(T1),f=a*u-l*l;if(f===0)return s.set(0,0,0),null;const m=1/f,g=(u*c-l*d)*m,v=(a*d-l*c)*m;return s.set(1-g-v,v,g)}static containsPoint(e,n,r,i){return this.getBarycoord(e,n,r,i,Ba)===null?!1:Ba.x>=0&&Ba.y>=0&&Ba.x+Ba.y<=1}static getUV(e,n,r,i,s,a,l,c){return og===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),og=!0),this.getInterpolation(e,n,r,i,s,a,l,c)}static getInterpolation(e,n,r,i,s,a,l,c){return this.getBarycoord(e,n,r,i,Ba)===null?(c.x=0,c.y=0,"z"in c&&(c.z=0),"w"in c&&(c.w=0),null):(c.setScalar(0),c.addScaledVector(s,Ba.x),c.addScaledVector(a,Ba.y),c.addScaledVector(l,Ba.z),c)}static isFrontFacing(e,n,r,i){return Ts.subVectors(r,n),za.subVectors(e,n),Ts.cross(za).dot(i)<0}set(e,n,r){return this.a.copy(e),this.b.copy(n),this.c.copy(r),this}setFromPointsAndIndices(e,n,r,i){return this.a.copy(e[n]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,n,r,i){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Ts.subVectors(this.c,this.b),za.subVectors(this.a,this.b),Ts.cross(za).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Si.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return Si.getBarycoord(e,this.a,this.b,this.c,n)}getUV(e,n,r,i,s){return og===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),og=!0),Si.getInterpolation(e,this.a,this.b,this.c,n,r,i,s)}getInterpolation(e,n,r,i,s){return Si.getInterpolation(e,this.a,this.b,this.c,n,r,i,s)}containsPoint(e){return Si.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Si.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){const r=this.a,i=this.b,s=this.c;let a,l;fu.subVectors(i,r),pu.subVectors(s,r),A1.subVectors(e,r);const c=fu.dot(A1),u=pu.dot(A1);if(c<=0&&u<=0)return n.copy(r);C1.subVectors(e,i);const d=fu.dot(C1),f=pu.dot(C1);if(d>=0&&f<=d)return n.copy(i);const m=c*f-d*u;if(m<=0&&c>=0&&d<=0)return a=c/(c-d),n.copy(r).addScaledVector(fu,a);k1.subVectors(e,s);const g=fu.dot(k1),v=pu.dot(k1);if(v>=0&&g<=v)return n.copy(s);const _=g*u-c*v;if(_<=0&&u>=0&&v<=0)return l=u/(u-v),n.copy(r).addScaledVector(pu,l);const b=d*v-g*f;if(b<=0&&f-d>=0&&g-v>=0)return XA.subVectors(s,i),l=(f-d)/(f-d+(g-v)),n.copy(i).addScaledVector(XA,l);const x=1/(b+_+m);return a=_*x,l=m*x,n.copy(r).addScaledVector(fu,a).addScaledVector(pu,l)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const V4={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Lo={h:0,s:0,l:0},lg={h:0,s:0,l:0};function P1(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*6*(2/3-n):t}class nt{constructor(e,n,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,n,r)}set(e,n,r){if(n===void 0&&r===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,n,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=ar){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Jt.toWorkingColorSpace(this,n),this}setRGB(e,n,r,i=Jt.workingColorSpace){return this.r=e,this.g=n,this.b=r,Jt.toWorkingColorSpace(this,i),this}setHSL(e,n,r,i=Jt.workingColorSpace){if(e=YS(e,1),n=On(n,0,1),r=On(r,0,1),n===0)this.r=this.g=this.b=r;else{const s=r<=.5?r*(1+n):r+n-r*n,a=2*r-s;this.r=P1(a,s,e+1/3),this.g=P1(a,s,e),this.b=P1(a,s,e-1/3)}return Jt.toWorkingColorSpace(this,i),this}setStyle(e,n=ar){function r(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const a=i[1],l=i[2];switch(a){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return r(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,n);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return r(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,n);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return r(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],a=s.length;if(a===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,n);if(a===6)return this.setHex(parseInt(s,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e,n=ar){const r=V4[e.toLowerCase()];return r!==void 0?this.setHex(r,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=gd(e.r),this.g=gd(e.g),this.b=gd(e.b),this}copyLinearToSRGB(e){return this.r=y1(e.r),this.g=y1(e.g),this.b=y1(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=ar){return Jt.fromWorkingColorSpace(Ur.copy(this),e),Math.round(On(Ur.r*255,0,255))*65536+Math.round(On(Ur.g*255,0,255))*256+Math.round(On(Ur.b*255,0,255))}getHexString(e=ar){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=Jt.workingColorSpace){Jt.fromWorkingColorSpace(Ur.copy(this),n);const r=Ur.r,i=Ur.g,s=Ur.b,a=Math.max(r,i,s),l=Math.min(r,i,s);let c,u;const d=(l+a)/2;if(l===a)c=0,u=0;else{const f=a-l;switch(u=d<=.5?f/(a+l):f/(2-a-l),a){case r:c=(i-s)/f+(i<s?6:0);break;case i:c=(s-r)/f+2;break;case s:c=(r-i)/f+4;break}c/=6}return e.h=c,e.s=u,e.l=d,e}getRGB(e,n=Jt.workingColorSpace){return Jt.fromWorkingColorSpace(Ur.copy(this),n),e.r=Ur.r,e.g=Ur.g,e.b=Ur.b,e}getStyle(e=ar){Jt.fromWorkingColorSpace(Ur.copy(this),e);const n=Ur.r,r=Ur.g,i=Ur.b;return e!==ar?`color(${e} ${n.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(n*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,n,r){return this.getHSL(Lo),this.setHSL(Lo.h+e,Lo.s+n,Lo.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,r){return this.r=e.r+(n.r-e.r)*r,this.g=e.g+(n.g-e.g)*r,this.b=e.b+(n.b-e.b)*r,this}lerpHSL(e,n){this.getHSL(Lo),e.getHSL(lg);const r=yf(Lo.h,lg.h,n),i=yf(Lo.s,lg.s,n),s=yf(Lo.l,lg.l,n);return this.setHSL(r,i,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const n=this.r,r=this.g,i=this.b,s=e.elements;return this.r=s[0]*n+s[3]*r+s[6]*i,this.g=s[1]*n+s[4]*r+s[7]*i,this.b=s[2]*n+s[5]*r+s[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Ur=new nt;nt.NAMES=V4;let j9=0;class Cr extends mo{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:j9++}),this.uuid=qi(),this.name="",this.type="Material",this.blending=_c,this.side=ya,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=px,this.blendDst=mx,this.blendEquation=Go,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new nt(0,0,0),this.blendAlpha=0,this.depthFunc=$f,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=N_,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=nc,this.stencilZFail=nc,this.stencilZPass=nc,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const n in e){const r=e[n];if(r===void 0){console.warn(`THREE.Material: parameter '${n}' has value of undefined.`);continue}const i=this[n];if(i===void 0){console.warn(`THREE.Material: '${n}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[n]=r}}toJSON(e){const n=e===void 0||typeof e=="string";n&&(e={textures:{},images:{}});const r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==_c&&(r.blending=this.blending),this.side!==ya&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==px&&(r.blendSrc=this.blendSrc),this.blendDst!==mx&&(r.blendDst=this.blendDst),this.blendEquation!==Go&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==$f&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==N_&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==nc&&(r.stencilFail=this.stencilFail),this.stencilZFail!==nc&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==nc&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(s){const a=[];for(const l in s){const c=s[l];delete c.metadata,a.push(c)}return a}if(n){const s=i(e.textures),a=i(e.images);s.length>0&&(r.textures=s),a.length>0&&(r.images=a)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const n=e.clippingPlanes;let r=null;if(n!==null){const i=n.length;r=new Array(i);for(let s=0;s!==i;++s)r[s]=n[s].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class go extends Cr{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new nt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Ap,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Xa=L9();function L9(){const t=new ArrayBuffer(4),e=new Float32Array(t),n=new Uint32Array(t),r=new Uint32Array(512),i=new Uint32Array(512);for(let c=0;c<256;++c){const u=c-127;u<-27?(r[c]=0,r[c|256]=32768,i[c]=24,i[c|256]=24):u<-14?(r[c]=1024>>-u-14,r[c|256]=1024>>-u-14|32768,i[c]=-u-1,i[c|256]=-u-1):u<=15?(r[c]=u+15<<10,r[c|256]=u+15<<10|32768,i[c]=13,i[c|256]=13):u<128?(r[c]=31744,r[c|256]=64512,i[c]=24,i[c|256]=24):(r[c]=31744,r[c|256]=64512,i[c]=13,i[c|256]=13)}const s=new Uint32Array(2048),a=new Uint32Array(64),l=new Uint32Array(64);for(let c=1;c<1024;++c){let u=c<<13,d=0;for(;!(u&8388608);)u<<=1,d-=8388608;u&=-8388609,d+=947912704,s[c]=u|d}for(let c=1024;c<2048;++c)s[c]=939524096+(c-1024<<13);for(let c=1;c<31;++c)a[c]=c<<23;a[31]=1199570944,a[32]=2147483648;for(let c=33;c<63;++c)a[c]=2147483648+(c-32<<23);a[63]=3347054592;for(let c=1;c<64;++c)c!==32&&(l[c]=1024);return{floatView:e,uint32View:n,baseTable:r,shiftTable:i,mantissaTable:s,exponentTable:a,offsetTable:l}}function _i(t){Math.abs(t)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),t=On(t,-65504,65504),Xa.floatView[0]=t;const e=Xa.uint32View[0],n=e>>23&511;return Xa.baseTable[n]+((e&8388607)>>Xa.shiftTable[n])}function tf(t){const e=t>>10;return Xa.uint32View[0]=Xa.mantissaTable[Xa.offsetTable[e]+(t&1023)]+Xa.exponentTable[e],Xa.floatView[0]}const D9={toHalfFloat:_i,fromHalfFloat:tf},Jn=new X,cg=new ke;class qt{constructor(e,n,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=r,this.usage=ap,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=Ls,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return console.warn("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,n,r){e*=this.itemSize,r*=n.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=n.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let n=0,r=this.count;n<r;n++)cg.fromBufferAttribute(this,n),cg.applyMatrix3(e),this.setXY(n,cg.x,cg.y);else if(this.itemSize===3)for(let n=0,r=this.count;n<r;n++)Jn.fromBufferAttribute(this,n),Jn.applyMatrix3(e),this.setXYZ(n,Jn.x,Jn.y,Jn.z);return this}applyMatrix4(e){for(let n=0,r=this.count;n<r;n++)Jn.fromBufferAttribute(this,n),Jn.applyMatrix4(e),this.setXYZ(n,Jn.x,Jn.y,Jn.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)Jn.fromBufferAttribute(this,n),Jn.applyNormalMatrix(e),this.setXYZ(n,Jn.x,Jn.y,Jn.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)Jn.fromBufferAttribute(this,n),Jn.transformDirection(e),this.setXYZ(n,Jn.x,Jn.y,Jn.z);return this}set(e,n=0){return this.array.set(e,n),this}getComponent(e,n){let r=this.array[e*this.itemSize+n];return this.normalized&&(r=Mi(r,this.array)),r}setComponent(e,n,r){return this.normalized&&(r=jt(r,this.array)),this.array[e*this.itemSize+n]=r,this}getX(e){let n=this.array[e*this.itemSize];return this.normalized&&(n=Mi(n,this.array)),n}setX(e,n){return this.normalized&&(n=jt(n,this.array)),this.array[e*this.itemSize]=n,this}getY(e){let n=this.array[e*this.itemSize+1];return this.normalized&&(n=Mi(n,this.array)),n}setY(e,n){return this.normalized&&(n=jt(n,this.array)),this.array[e*this.itemSize+1]=n,this}getZ(e){let n=this.array[e*this.itemSize+2];return this.normalized&&(n=Mi(n,this.array)),n}setZ(e,n){return this.normalized&&(n=jt(n,this.array)),this.array[e*this.itemSize+2]=n,this}getW(e){let n=this.array[e*this.itemSize+3];return this.normalized&&(n=Mi(n,this.array)),n}setW(e,n){return this.normalized&&(n=jt(n,this.array)),this.array[e*this.itemSize+3]=n,this}setXY(e,n,r){return e*=this.itemSize,this.normalized&&(n=jt(n,this.array),r=jt(r,this.array)),this.array[e+0]=n,this.array[e+1]=r,this}setXYZ(e,n,r,i){return e*=this.itemSize,this.normalized&&(n=jt(n,this.array),r=jt(r,this.array),i=jt(i,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,n,r,i,s){return e*=this.itemSize,this.normalized&&(n=jt(n,this.array),r=jt(r,this.array),i=jt(i,this.array),s=jt(s,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==ap&&(e.usage=this.usage),e}}class I9 extends qt{constructor(e,n,r){super(new Int8Array(e),n,r)}}class U9 extends qt{constructor(e,n,r){super(new Uint8Array(e),n,r)}}class O9 extends qt{constructor(e,n,r){super(new Uint8ClampedArray(e),n,r)}}class F9 extends qt{constructor(e,n,r){super(new Int16Array(e),n,r)}}class ZS extends qt{constructor(e,n,r){super(new Uint16Array(e),n,r)}}class z9 extends qt{constructor(e,n,r){super(new Int32Array(e),n,r)}}class KS extends qt{constructor(e,n,r){super(new Uint32Array(e),n,r)}}class B9 extends qt{constructor(e,n,r){super(new Uint16Array(e),n,r),this.isFloat16BufferAttribute=!0}getX(e){let n=tf(this.array[e*this.itemSize]);return this.normalized&&(n=Mi(n,this.array)),n}setX(e,n){return this.normalized&&(n=jt(n,this.array)),this.array[e*this.itemSize]=_i(n),this}getY(e){let n=tf(this.array[e*this.itemSize+1]);return this.normalized&&(n=Mi(n,this.array)),n}setY(e,n){return this.normalized&&(n=jt(n,this.array)),this.array[e*this.itemSize+1]=_i(n),this}getZ(e){let n=tf(this.array[e*this.itemSize+2]);return this.normalized&&(n=Mi(n,this.array)),n}setZ(e,n){return this.normalized&&(n=jt(n,this.array)),this.array[e*this.itemSize+2]=_i(n),this}getW(e){let n=tf(this.array[e*this.itemSize+3]);return this.normalized&&(n=Mi(n,this.array)),n}setW(e,n){return this.normalized&&(n=jt(n,this.array)),this.array[e*this.itemSize+3]=_i(n),this}setXY(e,n,r){return e*=this.itemSize,this.normalized&&(n=jt(n,this.array),r=jt(r,this.array)),this.array[e+0]=_i(n),this.array[e+1]=_i(r),this}setXYZ(e,n,r,i){return e*=this.itemSize,this.normalized&&(n=jt(n,this.array),r=jt(r,this.array),i=jt(i,this.array)),this.array[e+0]=_i(n),this.array[e+1]=_i(r),this.array[e+2]=_i(i),this}setXYZW(e,n,r,i,s){return e*=this.itemSize,this.normalized&&(n=jt(n,this.array),r=jt(r,this.array),i=jt(i,this.array),s=jt(s,this.array)),this.array[e+0]=_i(n),this.array[e+1]=_i(r),this.array[e+2]=_i(i),this.array[e+3]=_i(s),this}}class ot extends qt{constructor(e,n,r){super(new Float32Array(e),n,r)}}class V9 extends qt{constructor(e,n,r){super(new Float64Array(e),n,r)}}let H9=0;const as=new St,R1=new Xt,mu=new X,Vi=new Wr,jh=new Wr,mr=new X;class At extends mo{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:H9++}),this.uuid=qi(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(F4(e)?KS:ZS)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,r=0){this.groups.push({start:e,count:n,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const s=new Rt().getNormalMatrix(e);r.applyNormalMatrix(s),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return as.makeRotationFromQuaternion(e),this.applyMatrix4(as),this}rotateX(e){return as.makeRotationX(e),this.applyMatrix4(as),this}rotateY(e){return as.makeRotationY(e),this.applyMatrix4(as),this}rotateZ(e){return as.makeRotationZ(e),this.applyMatrix4(as),this}translate(e,n,r){return as.makeTranslation(e,n,r),this.applyMatrix4(as),this}scale(e,n,r){return as.makeScale(e,n,r),this.applyMatrix4(as),this}lookAt(e){return R1.lookAt(e),R1.updateMatrix(),this.applyMatrix4(R1.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(mu).negate(),this.translate(mu.x,mu.y,mu.z),this}setFromPoints(e){const n=[];for(let r=0,i=e.length;r<i;r++){const s=e[r];n.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new ot(n,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Wr);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new X(-1/0,-1/0,-1/0),new X(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let r=0,i=n.length;r<i;r++){const s=n[r];Vi.setFromBufferAttribute(s),this.morphTargetsRelative?(mr.addVectors(this.boundingBox.min,Vi.min),this.boundingBox.expandByPoint(mr),mr.addVectors(this.boundingBox.max,Vi.max),this.boundingBox.expandByPoint(mr)):(this.boundingBox.expandByPoint(Vi.min),this.boundingBox.expandByPoint(Vi.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Tr);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new X,1/0);return}if(e){const r=this.boundingSphere.center;if(Vi.setFromBufferAttribute(e),n)for(let s=0,a=n.length;s<a;s++){const l=n[s];jh.setFromBufferAttribute(l),this.morphTargetsRelative?(mr.addVectors(Vi.min,jh.min),Vi.expandByPoint(mr),mr.addVectors(Vi.max,jh.max),Vi.expandByPoint(mr)):(Vi.expandByPoint(jh.min),Vi.expandByPoint(jh.max))}Vi.getCenter(r);let i=0;for(let s=0,a=e.count;s<a;s++)mr.fromBufferAttribute(e,s),i=Math.max(i,r.distanceToSquared(mr));if(n)for(let s=0,a=n.length;s<a;s++){const l=n[s],c=this.morphTargetsRelative;for(let u=0,d=l.count;u<d;u++)mr.fromBufferAttribute(l,u),c&&(mu.fromBufferAttribute(e,u),mr.add(mu)),i=Math.max(i,r.distanceToSquared(mr))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=e.array,i=n.position.array,s=n.normal.array,a=n.uv.array,l=i.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new qt(new Float32Array(4*l),4));const c=this.getAttribute("tangent").array,u=[],d=[];for(let P=0;P<l;P++)u[P]=new X,d[P]=new X;const f=new X,m=new X,g=new X,v=new ke,_=new ke,b=new ke,x=new X,y=new X;function S(P,H,B){f.fromArray(i,P*3),m.fromArray(i,H*3),g.fromArray(i,B*3),v.fromArray(a,P*2),_.fromArray(a,H*2),b.fromArray(a,B*2),m.sub(f),g.sub(f),_.sub(v),b.sub(v);const Y=1/(_.x*b.y-b.x*_.y);isFinite(Y)&&(x.copy(m).multiplyScalar(b.y).addScaledVector(g,-_.y).multiplyScalar(Y),y.copy(g).multiplyScalar(_.x).addScaledVector(m,-b.x).multiplyScalar(Y),u[P].add(x),u[H].add(x),u[B].add(x),d[P].add(y),d[H].add(y),d[B].add(y))}let E=this.groups;E.length===0&&(E=[{start:0,count:r.length}]);for(let P=0,H=E.length;P<H;++P){const B=E[P],Y=B.start,V=B.count;for(let Q=Y,ee=Y+V;Q<ee;Q+=3)S(r[Q+0],r[Q+1],r[Q+2])}const A=new X,T=new X,C=new X,j=new X;function k(P){C.fromArray(s,P*3),j.copy(C);const H=u[P];A.copy(H),A.sub(C.multiplyScalar(C.dot(H))).normalize(),T.crossVectors(j,H);const Y=T.dot(d[P])<0?-1:1;c[P*4]=A.x,c[P*4+1]=A.y,c[P*4+2]=A.z,c[P*4+3]=Y}for(let P=0,H=E.length;P<H;++P){const B=E[P],Y=B.start,V=B.count;for(let Q=Y,ee=Y+V;Q<ee;Q+=3)k(r[Q+0]),k(r[Q+1]),k(r[Q+2])}}computeVertexNormals(){const e=this.index,n=this.getAttribute("position");if(n!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new qt(new Float32Array(n.count*3),3),this.setAttribute("normal",r);else for(let m=0,g=r.count;m<g;m++)r.setXYZ(m,0,0,0);const i=new X,s=new X,a=new X,l=new X,c=new X,u=new X,d=new X,f=new X;if(e)for(let m=0,g=e.count;m<g;m+=3){const v=e.getX(m+0),_=e.getX(m+1),b=e.getX(m+2);i.fromBufferAttribute(n,v),s.fromBufferAttribute(n,_),a.fromBufferAttribute(n,b),d.subVectors(a,s),f.subVectors(i,s),d.cross(f),l.fromBufferAttribute(r,v),c.fromBufferAttribute(r,_),u.fromBufferAttribute(r,b),l.add(d),c.add(d),u.add(d),r.setXYZ(v,l.x,l.y,l.z),r.setXYZ(_,c.x,c.y,c.z),r.setXYZ(b,u.x,u.y,u.z)}else for(let m=0,g=n.count;m<g;m+=3)i.fromBufferAttribute(n,m+0),s.fromBufferAttribute(n,m+1),a.fromBufferAttribute(n,m+2),d.subVectors(a,s),f.subVectors(i,s),d.cross(f),r.setXYZ(m+0,d.x,d.y,d.z),r.setXYZ(m+1,d.x,d.y,d.z),r.setXYZ(m+2,d.x,d.y,d.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let n=0,r=e.count;n<r;n++)mr.fromBufferAttribute(e,n),mr.normalize(),e.setXYZ(n,mr.x,mr.y,mr.z)}toNonIndexed(){function e(l,c){const u=l.array,d=l.itemSize,f=l.normalized,m=new u.constructor(c.length*d);let g=0,v=0;for(let _=0,b=c.length;_<b;_++){l.isInterleavedBufferAttribute?g=c[_]*l.data.stride+l.offset:g=c[_]*d;for(let x=0;x<d;x++)m[v++]=u[g++]}return new qt(m,d,f)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new At,r=this.index.array,i=this.attributes;for(const l in i){const c=i[l],u=e(c,r);n.setAttribute(l,u)}const s=this.morphAttributes;for(const l in s){const c=[],u=s[l];for(let d=0,f=u.length;d<f;d++){const m=u[d],g=e(m,r);c.push(g)}n.morphAttributes[l]=c}n.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let l=0,c=a.length;l<c;l++){const u=a[l];n.addGroup(u.start,u.count,u.materialIndex)}return n}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const c=this.parameters;for(const u in c)c[u]!==void 0&&(e[u]=c[u]);return e}e.data={attributes:{}};const n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const r=this.attributes;for(const c in r){const u=r[c];e.data.attributes[c]=u.toJSON(e.data)}const i={};let s=!1;for(const c in this.morphAttributes){const u=this.morphAttributes[c],d=[];for(let f=0,m=u.length;f<m;f++){const g=u[f];d.push(g.toJSON(e.data))}d.length>0&&(i[c]=d,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const l=this.boundingSphere;return l!==null&&(e.data.boundingSphere={center:l.center.toArray(),radius:l.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(n));const i=e.attributes;for(const u in i){const d=i[u];this.setAttribute(u,d.clone(n))}const s=e.morphAttributes;for(const u in s){const d=[],f=s[u];for(let m=0,g=f.length;m<g;m++)d.push(f[m].clone(n));this.morphAttributes[u]=d}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let u=0,d=a.length;u<d;u++){const f=a[u];this.addGroup(f.start,f.count,f.materialIndex)}const l=e.boundingBox;l!==null&&(this.boundingBox=l.clone());const c=e.boundingSphere;return c!==null&&(this.boundingSphere=c.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const YA=new St,Vl=new zc,ug=new Tr,qA=new X,gu=new X,xu=new X,vu=new X,j1=new X,dg=new X,hg=new ke,fg=new ke,pg=new ke,$A=new X,ZA=new X,KA=new X,mg=new X,gg=new X;class Fn extends Xt{constructor(e=new At,n=new go){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=i.length;s<a;s++){const l=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}getVertexPosition(e,n){const r=this.geometry,i=r.attributes.position,s=r.morphAttributes.position,a=r.morphTargetsRelative;n.fromBufferAttribute(i,e);const l=this.morphTargetInfluences;if(s&&l){dg.set(0,0,0);for(let c=0,u=s.length;c<u;c++){const d=l[c],f=s[c];d!==0&&(j1.fromBufferAttribute(f,e),a?dg.addScaledVector(j1,d):dg.addScaledVector(j1.sub(n),d))}n.add(dg)}return n}raycast(e,n){const r=this.geometry,i=this.material,s=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),ug.copy(r.boundingSphere),ug.applyMatrix4(s),Vl.copy(e.ray).recast(e.near),!(ug.containsPoint(Vl.origin)===!1&&(Vl.intersectSphere(ug,qA)===null||Vl.origin.distanceToSquared(qA)>(e.far-e.near)**2))&&(YA.copy(s).invert(),Vl.copy(e.ray).applyMatrix4(YA),!(r.boundingBox!==null&&Vl.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,n,Vl)))}_computeIntersections(e,n,r){let i;const s=this.geometry,a=this.material,l=s.index,c=s.attributes.position,u=s.attributes.uv,d=s.attributes.uv1,f=s.attributes.normal,m=s.groups,g=s.drawRange;if(l!==null)if(Array.isArray(a))for(let v=0,_=m.length;v<_;v++){const b=m[v],x=a[b.materialIndex],y=Math.max(b.start,g.start),S=Math.min(l.count,Math.min(b.start+b.count,g.start+g.count));for(let E=y,A=S;E<A;E+=3){const T=l.getX(E),C=l.getX(E+1),j=l.getX(E+2);i=xg(this,x,e,r,u,d,f,T,C,j),i&&(i.faceIndex=Math.floor(E/3),i.face.materialIndex=b.materialIndex,n.push(i))}}else{const v=Math.max(0,g.start),_=Math.min(l.count,g.start+g.count);for(let b=v,x=_;b<x;b+=3){const y=l.getX(b),S=l.getX(b+1),E=l.getX(b+2);i=xg(this,a,e,r,u,d,f,y,S,E),i&&(i.faceIndex=Math.floor(b/3),n.push(i))}}else if(c!==void 0)if(Array.isArray(a))for(let v=0,_=m.length;v<_;v++){const b=m[v],x=a[b.materialIndex],y=Math.max(b.start,g.start),S=Math.min(c.count,Math.min(b.start+b.count,g.start+g.count));for(let E=y,A=S;E<A;E+=3){const T=E,C=E+1,j=E+2;i=xg(this,x,e,r,u,d,f,T,C,j),i&&(i.faceIndex=Math.floor(E/3),i.face.materialIndex=b.materialIndex,n.push(i))}}else{const v=Math.max(0,g.start),_=Math.min(c.count,g.start+g.count);for(let b=v,x=_;b<x;b+=3){const y=b,S=b+1,E=b+2;i=xg(this,a,e,r,u,d,f,y,S,E),i&&(i.faceIndex=Math.floor(b/3),n.push(i))}}}}function G9(t,e,n,r,i,s,a,l){let c;if(e.side===Hr?c=r.intersectTriangle(a,s,i,!0,l):c=r.intersectTriangle(i,s,a,e.side===ya,l),c===null)return null;gg.copy(l),gg.applyMatrix4(t.matrixWorld);const u=n.ray.origin.distanceTo(gg);return u<n.near||u>n.far?null:{distance:u,point:gg.clone(),object:t}}function xg(t,e,n,r,i,s,a,l,c,u){t.getVertexPosition(l,gu),t.getVertexPosition(c,xu),t.getVertexPosition(u,vu);const d=G9(t,e,n,r,gu,xu,vu,mg);if(d){i&&(hg.fromBufferAttribute(i,l),fg.fromBufferAttribute(i,c),pg.fromBufferAttribute(i,u),d.uv=Si.getInterpolation(mg,gu,xu,vu,hg,fg,pg,new ke)),s&&(hg.fromBufferAttribute(s,l),fg.fromBufferAttribute(s,c),pg.fromBufferAttribute(s,u),d.uv1=Si.getInterpolation(mg,gu,xu,vu,hg,fg,pg,new ke),d.uv2=d.uv1),a&&($A.fromBufferAttribute(a,l),ZA.fromBufferAttribute(a,c),KA.fromBufferAttribute(a,u),d.normal=Si.getInterpolation(mg,gu,xu,vu,$A,ZA,KA,new X),d.normal.dot(r.direction)>0&&d.normal.multiplyScalar(-1));const f={a:l,b:c,c:u,normal:new X,materialIndex:0};Si.getNormal(gu,xu,vu,f.normal),d.face=f}return d}class Bc extends At{constructor(e=1,n=1,r=1,i=1,s=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:r,widthSegments:i,heightSegments:s,depthSegments:a};const l=this;i=Math.floor(i),s=Math.floor(s),a=Math.floor(a);const c=[],u=[],d=[],f=[];let m=0,g=0;v("z","y","x",-1,-1,r,n,e,a,s,0),v("z","y","x",1,-1,r,n,-e,a,s,1),v("x","z","y",1,1,e,r,n,i,a,2),v("x","z","y",1,-1,e,r,-n,i,a,3),v("x","y","z",1,-1,e,n,r,i,s,4),v("x","y","z",-1,-1,e,n,-r,i,s,5),this.setIndex(c),this.setAttribute("position",new ot(u,3)),this.setAttribute("normal",new ot(d,3)),this.setAttribute("uv",new ot(f,2));function v(_,b,x,y,S,E,A,T,C,j,k){const P=E/C,H=A/j,B=E/2,Y=A/2,V=T/2,Q=C+1,ee=j+1;let re=0,I=0;const F=new X;for(let z=0;z<ee;z++){const U=z*H-Y;for(let Z=0;Z<Q;Z++){const K=Z*P-B;F[_]=K*y,F[b]=U*S,F[x]=V,u.push(F.x,F.y,F.z),F[_]=0,F[b]=0,F[x]=T>0?1:-1,d.push(F.x,F.y,F.z),f.push(Z/C),f.push(1-z/j),re+=1}}for(let z=0;z<j;z++)for(let U=0;U<C;U++){const Z=m+U+Q*z,K=m+U+Q*(z+1),ne=m+(U+1)+Q*(z+1),ie=m+(U+1)+Q*z;c.push(Z,K,ie),c.push(K,ne,ie),I+=6}l.addGroup(g,I,k),g+=I,m+=re}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Bc(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function kd(t){const e={};for(const n in t){e[n]={};for(const r in t[n]){const i=t[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[n][r]=null):e[n][r]=i.clone():Array.isArray(i)?e[n][r]=i.slice():e[n][r]=i}}return e}function ii(t){const e={};for(let n=0;n<t.length;n++){const r=kd(t[n]);for(const i in r)e[i]=r[i]}return e}function W9(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}function H4(t){return t.getRenderTarget()===null?t.outputColorSpace:Jt.workingColorSpace}const JS={clone:kd,merge:ii};var X9=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Y9=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class _a extends Cr{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=X9,this.fragmentShader=Y9,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1,clipCullDistance:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=kd(e.uniforms),this.uniformsGroups=W9(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const n=super.toJSON(e);n.glslVersion=this.glslVersion,n.uniforms={};for(const i in this.uniforms){const a=this.uniforms[i].value;a&&a.isTexture?n.uniforms[i]={type:"t",value:a.toJSON(e).uuid}:a&&a.isColor?n.uniforms[i]={type:"c",value:a.getHex()}:a&&a.isVector2?n.uniforms[i]={type:"v2",value:a.toArray()}:a&&a.isVector3?n.uniforms[i]={type:"v3",value:a.toArray()}:a&&a.isVector4?n.uniforms[i]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?n.uniforms[i]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?n.uniforms[i]={type:"m4",value:a.toArray()}:n.uniforms[i]={value:a}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader,n.lights=this.lights,n.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(n.extensions=r),n}}class Pp extends Xt{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new St,this.projectionMatrix=new St,this.projectionMatrixInverse=new St,this.coordinateSystem=Ds}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class Yn extends Pp{constructor(e=50,n=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const n=.5*this.getFilmHeight()/e;this.fov=Cd*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(wc*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Cd*2*Math.atan(Math.tan(wc*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,n,r,i,s,a){this.aspect=e/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let n=e*Math.tan(wc*.5*this.fov)/this.zoom,r=2*n,i=this.aspect*r,s=-.5*i;const a=this.view;if(this.view!==null&&this.view.enabled){const c=a.fullWidth,u=a.fullHeight;s+=a.offsetX*i/c,n-=a.offsetY*r/u,i*=a.width/c,r*=a.height/u}const l=this.filmOffset;l!==0&&(s+=e*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,n,n-r,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}}const yu=-90,bu=1;class G4 extends Xt{constructor(e,n,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new Yn(yu,bu,e,n);i.layers=this.layers,this.add(i);const s=new Yn(yu,bu,e,n);s.layers=this.layers,this.add(s);const a=new Yn(yu,bu,e,n);a.layers=this.layers,this.add(a);const l=new Yn(yu,bu,e,n);l.layers=this.layers,this.add(l);const c=new Yn(yu,bu,e,n);c.layers=this.layers,this.add(c);const u=new Yn(yu,bu,e,n);u.layers=this.layers,this.add(u)}updateCoordinateSystem(){const e=this.coordinateSystem,n=this.children.concat(),[r,i,s,a,l,c]=n;for(const u of n)this.remove(u);if(e===Ds)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),l.up.set(0,1,0),l.lookAt(0,0,1),c.up.set(0,1,0),c.lookAt(0,0,-1);else if(e===Ad)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),l.up.set(0,-1,0),l.lookAt(0,0,1),c.up.set(0,-1,0),c.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const u of n)this.add(u),u.updateMatrixWorld()}update(e,n){this.parent===null&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,a,l,c,u,d]=this.children,f=e.getRenderTarget(),m=e.getActiveCubeFace(),g=e.getActiveMipmapLevel(),v=e.xr.enabled;e.xr.enabled=!1;const _=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0,i),e.render(n,s),e.setRenderTarget(r,1,i),e.render(n,a),e.setRenderTarget(r,2,i),e.render(n,l),e.setRenderTarget(r,3,i),e.render(n,c),e.setRenderTarget(r,4,i),e.render(n,u),r.texture.generateMipmaps=_,e.setRenderTarget(r,5,i),e.render(n,d),e.setRenderTarget(f,m,g),e.xr.enabled=v,r.texture.needsPMREMUpdate=!0}}class Rp extends Cn{constructor(e,n,r,i,s,a,l,c,u,d){e=e!==void 0?e:[],n=n!==void 0?n:oo,super(e,n,r,i,s,a,l,c,u,d),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class W4 extends Hs{constructor(e=1,n={}){super(e,e,n),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];n.encoding!==void 0&&(bf("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),n.colorSpace=n.encoding===sl?ar:Wi),this.texture=new Rp(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:Mn}fromEquirectangularTexture(e,n){this.texture.type=n.type,this.texture.colorSpace=n.colorSpace,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new Bc(5,5,5),s=new _a({name:"CubemapFromEquirect",uniforms:kd(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:Hr,blending:Ja});s.uniforms.tEquirect.value=n;const a=new Fn(i,s),l=n.minFilter;return n.minFilter===fl&&(n.minFilter=Mn),new G4(1,10,this).update(e,a),n.minFilter=l,a.geometry.dispose(),a.material.dispose(),this}clear(e,n,r,i){const s=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(n,r,i);e.setRenderTarget(s)}}const L1=new X,q9=new X,$9=new Rt;class Wa{constructor(e=new X(1,0,0),n=0){this.isPlane=!0,this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,r,i){return this.normal.set(e,n,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,r){const i=L1.subVectors(r,n).cross(q9.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,n){const r=e.delta(L1),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:n.copy(e.start).addScaledVector(r,s)}intersectsLine(e){const n=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return n<0&&r>0||r<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const r=n||$9.getNormalMatrix(e),i=this.coplanarPoint(L1).applyMatrix4(e),s=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Hl=new Tr,vg=new X;class jp{constructor(e=new Wa,n=new Wa,r=new Wa,i=new Wa,s=new Wa,a=new Wa){this.planes=[e,n,r,i,s,a]}set(e,n,r,i,s,a){const l=this.planes;return l[0].copy(e),l[1].copy(n),l[2].copy(r),l[3].copy(i),l[4].copy(s),l[5].copy(a),this}copy(e){const n=this.planes;for(let r=0;r<6;r++)n[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,n=Ds){const r=this.planes,i=e.elements,s=i[0],a=i[1],l=i[2],c=i[3],u=i[4],d=i[5],f=i[6],m=i[7],g=i[8],v=i[9],_=i[10],b=i[11],x=i[12],y=i[13],S=i[14],E=i[15];if(r[0].setComponents(c-s,m-u,b-g,E-x).normalize(),r[1].setComponents(c+s,m+u,b+g,E+x).normalize(),r[2].setComponents(c+a,m+d,b+v,E+y).normalize(),r[3].setComponents(c-a,m-d,b-v,E-y).normalize(),r[4].setComponents(c-l,m-f,b-_,E-S).normalize(),n===Ds)r[5].setComponents(c+l,m+f,b+_,E+S).normalize();else if(n===Ad)r[5].setComponents(l,f,_,S).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+n);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Hl.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const n=e.geometry;n.boundingSphere===null&&n.computeBoundingSphere(),Hl.copy(n.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Hl)}intersectsSprite(e){return Hl.center.set(0,0,0),Hl.radius=.7071067811865476,Hl.applyMatrix4(e.matrixWorld),this.intersectsSphere(Hl)}intersectsSphere(e){const n=this.planes,r=e.center,i=-e.radius;for(let s=0;s<6;s++)if(n[s].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const n=this.planes;for(let r=0;r<6;r++){const i=n[r];if(vg.x=i.normal.x>0?e.max.x:e.min.x,vg.y=i.normal.y>0?e.max.y:e.min.y,vg.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(vg)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let r=0;r<6;r++)if(n[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function X4(){let t=null,e=!1,n=null,r=null;function i(s,a){n(s,a),r=t.requestAnimationFrame(i)}return{start:function(){e!==!0&&n!==null&&(r=t.requestAnimationFrame(i),e=!0)},stop:function(){t.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(s){n=s},setContext:function(s){t=s}}}function Z9(t,e){const n=e.isWebGL2,r=new WeakMap;function i(u,d){const f=u.array,m=u.usage,g=f.byteLength,v=t.createBuffer();t.bindBuffer(d,v),t.bufferData(d,f,m),u.onUploadCallback();let _;if(f instanceof Float32Array)_=t.FLOAT;else if(f instanceof Uint16Array)if(u.isFloat16BufferAttribute)if(n)_=t.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else _=t.UNSIGNED_SHORT;else if(f instanceof Int16Array)_=t.SHORT;else if(f instanceof Uint32Array)_=t.UNSIGNED_INT;else if(f instanceof Int32Array)_=t.INT;else if(f instanceof Int8Array)_=t.BYTE;else if(f instanceof Uint8Array)_=t.UNSIGNED_BYTE;else if(f instanceof Uint8ClampedArray)_=t.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+f);return{buffer:v,type:_,bytesPerElement:f.BYTES_PER_ELEMENT,version:u.version,size:g}}function s(u,d,f){const m=d.array,g=d._updateRange,v=d.updateRanges;if(t.bindBuffer(f,u),g.count===-1&&v.length===0&&t.bufferSubData(f,0,m),v.length!==0){for(let _=0,b=v.length;_<b;_++){const x=v[_];n?t.bufferSubData(f,x.start*m.BYTES_PER_ELEMENT,m,x.start,x.count):t.bufferSubData(f,x.start*m.BYTES_PER_ELEMENT,m.subarray(x.start,x.start+x.count))}d.clearUpdateRanges()}g.count!==-1&&(n?t.bufferSubData(f,g.offset*m.BYTES_PER_ELEMENT,m,g.offset,g.count):t.bufferSubData(f,g.offset*m.BYTES_PER_ELEMENT,m.subarray(g.offset,g.offset+g.count)),g.count=-1),d.onUploadCallback()}function a(u){return u.isInterleavedBufferAttribute&&(u=u.data),r.get(u)}function l(u){u.isInterleavedBufferAttribute&&(u=u.data);const d=r.get(u);d&&(t.deleteBuffer(d.buffer),r.delete(u))}function c(u,d){if(u.isGLBufferAttribute){const m=r.get(u);(!m||m.version<u.version)&&r.set(u,{buffer:u.buffer,type:u.type,bytesPerElement:u.elementSize,version:u.version});return}u.isInterleavedBufferAttribute&&(u=u.data);const f=r.get(u);if(f===void 0)r.set(u,i(u,d));else if(f.version<u.version){if(f.size!==u.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");s(f.buffer,u,d),f.version=u.version}}return{get:a,remove:l,update:c}}class bl extends At{constructor(e=1,n=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:r,heightSegments:i};const s=e/2,a=n/2,l=Math.floor(r),c=Math.floor(i),u=l+1,d=c+1,f=e/l,m=n/c,g=[],v=[],_=[],b=[];for(let x=0;x<d;x++){const y=x*m-a;for(let S=0;S<u;S++){const E=S*f-s;v.push(E,-y,0),_.push(0,0,1),b.push(S/l),b.push(1-x/c)}}for(let x=0;x<c;x++)for(let y=0;y<l;y++){const S=y+u*x,E=y+u*(x+1),A=y+1+u*(x+1),T=y+1+u*x;g.push(S,E,T),g.push(E,A,T)}this.setIndex(g),this.setAttribute("position",new ot(v,3)),this.setAttribute("normal",new ot(_,3)),this.setAttribute("uv",new ot(b,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new bl(e.width,e.height,e.widthSegments,e.heightSegments)}}var K9=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,J9=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,Q9=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,e7=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,t7=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,n7=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,r7=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,i7=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,s7=`#ifdef USE_BATCHING
	attribute float batchId;
	uniform highp sampler2D batchingTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,a7=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( batchId );
#endif`,o7=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,l7=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,c7=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,u7=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,d7=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,h7=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,f7=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,p7=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,m7=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,g7=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,x7=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,v7=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,y7=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,b7=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,_7=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,w7=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,S7=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,M7=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,E7=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,N7=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,T7="gl_FragColor = linearToOutputTexel( gl_FragColor );",A7=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,C7=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,k7=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,P7=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,R7=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,j7=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,L7=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,D7=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,I7=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,U7=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,O7=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,F7=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,z7=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,B7=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,V7=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,H7=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,G7=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,W7=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,X7=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,Y7=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,q7=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,$7=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,Z7=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,K7=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,J7=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Q7=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,eW=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,tW=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,nW=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,rW=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,iW=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,sW=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,aW=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,oW=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,lW=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,cW=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,uW=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,dW=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,hW=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,fW=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,pW=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,mW=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,gW=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,xW=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,vW=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,yW=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,bW=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,_W=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,wW=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,SW=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,MW=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,EW=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,NW=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,TW=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,AW=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,CW=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,kW=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,PW=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,RW=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,jW=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,LW=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,DW=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,IW=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,UW=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,OW=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,FW=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,zW=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,BW=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,VW=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,HW=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color *= toneMappingExposure;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	return color;
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,GW=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,WW=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,XW=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,YW=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,qW=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,$W=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const ZW=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,KW=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,JW=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,QW=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,eX=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,tX=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,nX=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,rX=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,iX=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,sX=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,aX=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,oX=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,lX=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,cX=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,uX=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,dX=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,hX=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fX=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,pX=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,mX=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,gX=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,xX=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,vX=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,yX=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,bX=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,_X=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,wX=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,SX=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,MX=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,EX=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,NX=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,TX=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,AX=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,CX=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,kt={alphahash_fragment:K9,alphahash_pars_fragment:J9,alphamap_fragment:Q9,alphamap_pars_fragment:e7,alphatest_fragment:t7,alphatest_pars_fragment:n7,aomap_fragment:r7,aomap_pars_fragment:i7,batching_pars_vertex:s7,batching_vertex:a7,begin_vertex:o7,beginnormal_vertex:l7,bsdfs:c7,iridescence_fragment:u7,bumpmap_pars_fragment:d7,clipping_planes_fragment:h7,clipping_planes_pars_fragment:f7,clipping_planes_pars_vertex:p7,clipping_planes_vertex:m7,color_fragment:g7,color_pars_fragment:x7,color_pars_vertex:v7,color_vertex:y7,common:b7,cube_uv_reflection_fragment:_7,defaultnormal_vertex:w7,displacementmap_pars_vertex:S7,displacementmap_vertex:M7,emissivemap_fragment:E7,emissivemap_pars_fragment:N7,colorspace_fragment:T7,colorspace_pars_fragment:A7,envmap_fragment:C7,envmap_common_pars_fragment:k7,envmap_pars_fragment:P7,envmap_pars_vertex:R7,envmap_physical_pars_fragment:G7,envmap_vertex:j7,fog_vertex:L7,fog_pars_vertex:D7,fog_fragment:I7,fog_pars_fragment:U7,gradientmap_pars_fragment:O7,lightmap_fragment:F7,lightmap_pars_fragment:z7,lights_lambert_fragment:B7,lights_lambert_pars_fragment:V7,lights_pars_begin:H7,lights_toon_fragment:W7,lights_toon_pars_fragment:X7,lights_phong_fragment:Y7,lights_phong_pars_fragment:q7,lights_physical_fragment:$7,lights_physical_pars_fragment:Z7,lights_fragment_begin:K7,lights_fragment_maps:J7,lights_fragment_end:Q7,logdepthbuf_fragment:eW,logdepthbuf_pars_fragment:tW,logdepthbuf_pars_vertex:nW,logdepthbuf_vertex:rW,map_fragment:iW,map_pars_fragment:sW,map_particle_fragment:aW,map_particle_pars_fragment:oW,metalnessmap_fragment:lW,metalnessmap_pars_fragment:cW,morphcolor_vertex:uW,morphnormal_vertex:dW,morphtarget_pars_vertex:hW,morphtarget_vertex:fW,normal_fragment_begin:pW,normal_fragment_maps:mW,normal_pars_fragment:gW,normal_pars_vertex:xW,normal_vertex:vW,normalmap_pars_fragment:yW,clearcoat_normal_fragment_begin:bW,clearcoat_normal_fragment_maps:_W,clearcoat_pars_fragment:wW,iridescence_pars_fragment:SW,opaque_fragment:MW,packing:EW,premultiplied_alpha_fragment:NW,project_vertex:TW,dithering_fragment:AW,dithering_pars_fragment:CW,roughnessmap_fragment:kW,roughnessmap_pars_fragment:PW,shadowmap_pars_fragment:RW,shadowmap_pars_vertex:jW,shadowmap_vertex:LW,shadowmask_pars_fragment:DW,skinbase_vertex:IW,skinning_pars_vertex:UW,skinning_vertex:OW,skinnormal_vertex:FW,specularmap_fragment:zW,specularmap_pars_fragment:BW,tonemapping_fragment:VW,tonemapping_pars_fragment:HW,transmission_fragment:GW,transmission_pars_fragment:WW,uv_pars_fragment:XW,uv_pars_vertex:YW,uv_vertex:qW,worldpos_vertex:$W,background_vert:ZW,background_frag:KW,backgroundCube_vert:JW,backgroundCube_frag:QW,cube_vert:eX,cube_frag:tX,depth_vert:nX,depth_frag:rX,distanceRGBA_vert:iX,distanceRGBA_frag:sX,equirect_vert:aX,equirect_frag:oX,linedashed_vert:lX,linedashed_frag:cX,meshbasic_vert:uX,meshbasic_frag:dX,meshlambert_vert:hX,meshlambert_frag:fX,meshmatcap_vert:pX,meshmatcap_frag:mX,meshnormal_vert:gX,meshnormal_frag:xX,meshphong_vert:vX,meshphong_frag:yX,meshphysical_vert:bX,meshphysical_frag:_X,meshtoon_vert:wX,meshtoon_frag:SX,points_vert:MX,points_frag:EX,shadow_vert:NX,shadow_frag:TX,sprite_vert:AX,sprite_frag:CX},Ze={common:{diffuse:{value:new nt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Rt},alphaMap:{value:null},alphaMapTransform:{value:new Rt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Rt}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Rt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Rt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Rt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Rt},normalScale:{value:new ke(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Rt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Rt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Rt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Rt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new nt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new nt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Rt},alphaTest:{value:0},uvTransform:{value:new Rt}},sprite:{diffuse:{value:new nt(16777215)},opacity:{value:1},center:{value:new ke(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Rt},alphaMap:{value:null},alphaMapTransform:{value:new Rt},alphaTest:{value:0}}},js={basic:{uniforms:ii([Ze.common,Ze.specularmap,Ze.envmap,Ze.aomap,Ze.lightmap,Ze.fog]),vertexShader:kt.meshbasic_vert,fragmentShader:kt.meshbasic_frag},lambert:{uniforms:ii([Ze.common,Ze.specularmap,Ze.envmap,Ze.aomap,Ze.lightmap,Ze.emissivemap,Ze.bumpmap,Ze.normalmap,Ze.displacementmap,Ze.fog,Ze.lights,{emissive:{value:new nt(0)}}]),vertexShader:kt.meshlambert_vert,fragmentShader:kt.meshlambert_frag},phong:{uniforms:ii([Ze.common,Ze.specularmap,Ze.envmap,Ze.aomap,Ze.lightmap,Ze.emissivemap,Ze.bumpmap,Ze.normalmap,Ze.displacementmap,Ze.fog,Ze.lights,{emissive:{value:new nt(0)},specular:{value:new nt(1118481)},shininess:{value:30}}]),vertexShader:kt.meshphong_vert,fragmentShader:kt.meshphong_frag},standard:{uniforms:ii([Ze.common,Ze.envmap,Ze.aomap,Ze.lightmap,Ze.emissivemap,Ze.bumpmap,Ze.normalmap,Ze.displacementmap,Ze.roughnessmap,Ze.metalnessmap,Ze.fog,Ze.lights,{emissive:{value:new nt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:kt.meshphysical_vert,fragmentShader:kt.meshphysical_frag},toon:{uniforms:ii([Ze.common,Ze.aomap,Ze.lightmap,Ze.emissivemap,Ze.bumpmap,Ze.normalmap,Ze.displacementmap,Ze.gradientmap,Ze.fog,Ze.lights,{emissive:{value:new nt(0)}}]),vertexShader:kt.meshtoon_vert,fragmentShader:kt.meshtoon_frag},matcap:{uniforms:ii([Ze.common,Ze.bumpmap,Ze.normalmap,Ze.displacementmap,Ze.fog,{matcap:{value:null}}]),vertexShader:kt.meshmatcap_vert,fragmentShader:kt.meshmatcap_frag},points:{uniforms:ii([Ze.points,Ze.fog]),vertexShader:kt.points_vert,fragmentShader:kt.points_frag},dashed:{uniforms:ii([Ze.common,Ze.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:kt.linedashed_vert,fragmentShader:kt.linedashed_frag},depth:{uniforms:ii([Ze.common,Ze.displacementmap]),vertexShader:kt.depth_vert,fragmentShader:kt.depth_frag},normal:{uniforms:ii([Ze.common,Ze.bumpmap,Ze.normalmap,Ze.displacementmap,{opacity:{value:1}}]),vertexShader:kt.meshnormal_vert,fragmentShader:kt.meshnormal_frag},sprite:{uniforms:ii([Ze.sprite,Ze.fog]),vertexShader:kt.sprite_vert,fragmentShader:kt.sprite_frag},background:{uniforms:{uvTransform:{value:new Rt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:kt.background_vert,fragmentShader:kt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:kt.backgroundCube_vert,fragmentShader:kt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:kt.cube_vert,fragmentShader:kt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:kt.equirect_vert,fragmentShader:kt.equirect_frag},distanceRGBA:{uniforms:ii([Ze.common,Ze.displacementmap,{referencePosition:{value:new X},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:kt.distanceRGBA_vert,fragmentShader:kt.distanceRGBA_frag},shadow:{uniforms:ii([Ze.lights,Ze.fog,{color:{value:new nt(0)},opacity:{value:1}}]),vertexShader:kt.shadow_vert,fragmentShader:kt.shadow_frag}};js.physical={uniforms:ii([js.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Rt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Rt},clearcoatNormalScale:{value:new ke(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Rt},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Rt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Rt},sheen:{value:0},sheenColor:{value:new nt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Rt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Rt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Rt},transmissionSamplerSize:{value:new ke},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Rt},attenuationDistance:{value:0},attenuationColor:{value:new nt(0)},specularColor:{value:new nt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Rt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Rt},anisotropyVector:{value:new ke},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Rt}}]),vertexShader:kt.meshphysical_vert,fragmentShader:kt.meshphysical_frag};const yg={r:0,b:0,g:0};function kX(t,e,n,r,i,s,a){const l=new nt(0);let c=s===!0?0:1,u,d,f=null,m=0,g=null;function v(b,x){let y=!1,S=x.isScene===!0?x.background:null;S&&S.isTexture&&(S=(x.backgroundBlurriness>0?n:e).get(S)),S===null?_(l,c):S&&S.isColor&&(_(S,1),y=!0);const E=t.xr.getEnvironmentBlendMode();E==="additive"?r.buffers.color.setClear(0,0,0,1,a):E==="alpha-blend"&&r.buffers.color.setClear(0,0,0,0,a),(t.autoClear||y)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),S&&(S.isCubeTexture||S.mapping===Hd)?(d===void 0&&(d=new Fn(new Bc(1,1,1),new _a({name:"BackgroundCubeMaterial",uniforms:kd(js.backgroundCube.uniforms),vertexShader:js.backgroundCube.vertexShader,fragmentShader:js.backgroundCube.fragmentShader,side:Hr,depthTest:!1,depthWrite:!1,fog:!1})),d.geometry.deleteAttribute("normal"),d.geometry.deleteAttribute("uv"),d.onBeforeRender=function(A,T,C){this.matrixWorld.copyPosition(C.matrixWorld)},Object.defineProperty(d.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(d)),d.material.uniforms.envMap.value=S,d.material.uniforms.flipEnvMap.value=S.isCubeTexture&&S.isRenderTargetTexture===!1?-1:1,d.material.uniforms.backgroundBlurriness.value=x.backgroundBlurriness,d.material.uniforms.backgroundIntensity.value=x.backgroundIntensity,d.material.toneMapped=Jt.getTransfer(S.colorSpace)!==on,(f!==S||m!==S.version||g!==t.toneMapping)&&(d.material.needsUpdate=!0,f=S,m=S.version,g=t.toneMapping),d.layers.enableAll(),b.unshift(d,d.geometry,d.material,0,0,null)):S&&S.isTexture&&(u===void 0&&(u=new Fn(new bl(2,2),new _a({name:"BackgroundMaterial",uniforms:kd(js.background.uniforms),vertexShader:js.background.vertexShader,fragmentShader:js.background.fragmentShader,side:ya,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(u)),u.material.uniforms.t2D.value=S,u.material.uniforms.backgroundIntensity.value=x.backgroundIntensity,u.material.toneMapped=Jt.getTransfer(S.colorSpace)!==on,S.matrixAutoUpdate===!0&&S.updateMatrix(),u.material.uniforms.uvTransform.value.copy(S.matrix),(f!==S||m!==S.version||g!==t.toneMapping)&&(u.material.needsUpdate=!0,f=S,m=S.version,g=t.toneMapping),u.layers.enableAll(),b.unshift(u,u.geometry,u.material,0,0,null))}function _(b,x){b.getRGB(yg,H4(t)),r.buffers.color.setClear(yg.r,yg.g,yg.b,x,a)}return{getClearColor:function(){return l},setClearColor:function(b,x=1){l.set(b),c=x,_(l,c)},getClearAlpha:function(){return c},setClearAlpha:function(b){c=b,_(l,c)},render:v}}function PX(t,e,n,r){const i=t.getParameter(t.MAX_VERTEX_ATTRIBS),s=r.isWebGL2?null:e.get("OES_vertex_array_object"),a=r.isWebGL2||s!==null,l={},c=b(null);let u=c,d=!1;function f(V,Q,ee,re,I){let F=!1;if(a){const z=_(re,ee,Q);u!==z&&(u=z,g(u.object)),F=x(V,re,ee,I),F&&y(V,re,ee,I)}else{const z=Q.wireframe===!0;(u.geometry!==re.id||u.program!==ee.id||u.wireframe!==z)&&(u.geometry=re.id,u.program=ee.id,u.wireframe=z,F=!0)}I!==null&&n.update(I,t.ELEMENT_ARRAY_BUFFER),(F||d)&&(d=!1,j(V,Q,ee,re),I!==null&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n.get(I).buffer))}function m(){return r.isWebGL2?t.createVertexArray():s.createVertexArrayOES()}function g(V){return r.isWebGL2?t.bindVertexArray(V):s.bindVertexArrayOES(V)}function v(V){return r.isWebGL2?t.deleteVertexArray(V):s.deleteVertexArrayOES(V)}function _(V,Q,ee){const re=ee.wireframe===!0;let I=l[V.id];I===void 0&&(I={},l[V.id]=I);let F=I[Q.id];F===void 0&&(F={},I[Q.id]=F);let z=F[re];return z===void 0&&(z=b(m()),F[re]=z),z}function b(V){const Q=[],ee=[],re=[];for(let I=0;I<i;I++)Q[I]=0,ee[I]=0,re[I]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Q,enabledAttributes:ee,attributeDivisors:re,object:V,attributes:{},index:null}}function x(V,Q,ee,re){const I=u.attributes,F=Q.attributes;let z=0;const U=ee.getAttributes();for(const Z in U)if(U[Z].location>=0){const ne=I[Z];let ie=F[Z];if(ie===void 0&&(Z==="instanceMatrix"&&V.instanceMatrix&&(ie=V.instanceMatrix),Z==="instanceColor"&&V.instanceColor&&(ie=V.instanceColor)),ne===void 0||ne.attribute!==ie||ie&&ne.data!==ie.data)return!0;z++}return u.attributesNum!==z||u.index!==re}function y(V,Q,ee,re){const I={},F=Q.attributes;let z=0;const U=ee.getAttributes();for(const Z in U)if(U[Z].location>=0){let ne=F[Z];ne===void 0&&(Z==="instanceMatrix"&&V.instanceMatrix&&(ne=V.instanceMatrix),Z==="instanceColor"&&V.instanceColor&&(ne=V.instanceColor));const ie={};ie.attribute=ne,ne&&ne.data&&(ie.data=ne.data),I[Z]=ie,z++}u.attributes=I,u.attributesNum=z,u.index=re}function S(){const V=u.newAttributes;for(let Q=0,ee=V.length;Q<ee;Q++)V[Q]=0}function E(V){A(V,0)}function A(V,Q){const ee=u.newAttributes,re=u.enabledAttributes,I=u.attributeDivisors;ee[V]=1,re[V]===0&&(t.enableVertexAttribArray(V),re[V]=1),I[V]!==Q&&((r.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](V,Q),I[V]=Q)}function T(){const V=u.newAttributes,Q=u.enabledAttributes;for(let ee=0,re=Q.length;ee<re;ee++)Q[ee]!==V[ee]&&(t.disableVertexAttribArray(ee),Q[ee]=0)}function C(V,Q,ee,re,I,F,z){z===!0?t.vertexAttribIPointer(V,Q,ee,I,F):t.vertexAttribPointer(V,Q,ee,re,I,F)}function j(V,Q,ee,re){if(r.isWebGL2===!1&&(V.isInstancedMesh||re.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;S();const I=re.attributes,F=ee.getAttributes(),z=Q.defaultAttributeValues;for(const U in F){const Z=F[U];if(Z.location>=0){let K=I[U];if(K===void 0&&(U==="instanceMatrix"&&V.instanceMatrix&&(K=V.instanceMatrix),U==="instanceColor"&&V.instanceColor&&(K=V.instanceColor)),K!==void 0){const ne=K.normalized,ie=K.itemSize,de=n.get(K);if(de===void 0)continue;const ae=de.buffer,_e=de.type,je=de.bytesPerElement,Le=r.isWebGL2===!0&&(_e===t.INT||_e===t.UNSIGNED_INT||K.gpuType===IS);if(K.isInterleavedBufferAttribute){const Te=K.data,G=Te.stride,Ee=K.offset;if(Te.isInstancedInterleavedBuffer){for(let me=0;me<Z.locationSize;me++)A(Z.location+me,Te.meshPerAttribute);V.isInstancedMesh!==!0&&re._maxInstanceCount===void 0&&(re._maxInstanceCount=Te.meshPerAttribute*Te.count)}else for(let me=0;me<Z.locationSize;me++)E(Z.location+me);t.bindBuffer(t.ARRAY_BUFFER,ae);for(let me=0;me<Z.locationSize;me++)C(Z.location+me,ie/Z.locationSize,_e,ne,G*je,(Ee+ie/Z.locationSize*me)*je,Le)}else{if(K.isInstancedBufferAttribute){for(let Te=0;Te<Z.locationSize;Te++)A(Z.location+Te,K.meshPerAttribute);V.isInstancedMesh!==!0&&re._maxInstanceCount===void 0&&(re._maxInstanceCount=K.meshPerAttribute*K.count)}else for(let Te=0;Te<Z.locationSize;Te++)E(Z.location+Te);t.bindBuffer(t.ARRAY_BUFFER,ae);for(let Te=0;Te<Z.locationSize;Te++)C(Z.location+Te,ie/Z.locationSize,_e,ne,ie*je,ie/Z.locationSize*Te*je,Le)}}else if(z!==void 0){const ne=z[U];if(ne!==void 0)switch(ne.length){case 2:t.vertexAttrib2fv(Z.location,ne);break;case 3:t.vertexAttrib3fv(Z.location,ne);break;case 4:t.vertexAttrib4fv(Z.location,ne);break;default:t.vertexAttrib1fv(Z.location,ne)}}}}T()}function k(){B();for(const V in l){const Q=l[V];for(const ee in Q){const re=Q[ee];for(const I in re)v(re[I].object),delete re[I];delete Q[ee]}delete l[V]}}function P(V){if(l[V.id]===void 0)return;const Q=l[V.id];for(const ee in Q){const re=Q[ee];for(const I in re)v(re[I].object),delete re[I];delete Q[ee]}delete l[V.id]}function H(V){for(const Q in l){const ee=l[Q];if(ee[V.id]===void 0)continue;const re=ee[V.id];for(const I in re)v(re[I].object),delete re[I];delete ee[V.id]}}function B(){Y(),d=!0,u!==c&&(u=c,g(u.object))}function Y(){c.geometry=null,c.program=null,c.wireframe=!1}return{setup:f,reset:B,resetDefaultState:Y,dispose:k,releaseStatesOfGeometry:P,releaseStatesOfProgram:H,initAttributes:S,enableAttribute:E,disableUnusedAttributes:T}}function RX(t,e,n,r){const i=r.isWebGL2;let s;function a(d){s=d}function l(d,f){t.drawArrays(s,d,f),n.update(f,s,1)}function c(d,f,m){if(m===0)return;let g,v;if(i)g=t,v="drawArraysInstanced";else if(g=e.get("ANGLE_instanced_arrays"),v="drawArraysInstancedANGLE",g===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}g[v](s,d,f,m),n.update(f,s,m)}function u(d,f,m){if(m===0)return;const g=e.get("WEBGL_multi_draw");if(g===null)for(let v=0;v<m;v++)this.render(d[v],f[v]);else{g.multiDrawArraysWEBGL(s,d,0,f,0,m);let v=0;for(let _=0;_<m;_++)v+=f[_];n.update(v,s,1)}}this.setMode=a,this.render=l,this.renderInstances=c,this.renderMultiDraw=u}function jX(t,e,n){let r;function i(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const C=e.get("EXT_texture_filter_anisotropic");r=t.getParameter(C.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function s(C){if(C==="highp"){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";C="mediump"}return C==="mediump"&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const a=typeof WebGL2RenderingContext<"u"&&t.constructor.name==="WebGL2RenderingContext";let l=n.precision!==void 0?n.precision:"highp";const c=s(l);c!==l&&(console.warn("THREE.WebGLRenderer:",l,"not supported, using",c,"instead."),l=c);const u=a||e.has("WEBGL_draw_buffers"),d=n.logarithmicDepthBuffer===!0,f=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),m=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),g=t.getParameter(t.MAX_TEXTURE_SIZE),v=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),_=t.getParameter(t.MAX_VERTEX_ATTRIBS),b=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),x=t.getParameter(t.MAX_VARYING_VECTORS),y=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),S=m>0,E=a||e.has("OES_texture_float"),A=S&&E,T=a?t.getParameter(t.MAX_SAMPLES):0;return{isWebGL2:a,drawBuffers:u,getMaxAnisotropy:i,getMaxPrecision:s,precision:l,logarithmicDepthBuffer:d,maxTextures:f,maxVertexTextures:m,maxTextureSize:g,maxCubemapSize:v,maxAttributes:_,maxVertexUniforms:b,maxVaryings:x,maxFragmentUniforms:y,vertexTextures:S,floatFragmentTextures:E,floatVertexTextures:A,maxSamples:T}}function LX(t){const e=this;let n=null,r=0,i=!1,s=!1;const a=new Wa,l=new Rt,c={value:null,needsUpdate:!1};this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(f,m){const g=f.length!==0||m||r!==0||i;return i=m,r=f.length,g},this.beginShadows=function(){s=!0,d(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(f,m){n=d(f,m,0)},this.setState=function(f,m,g){const v=f.clippingPlanes,_=f.clipIntersection,b=f.clipShadows,x=t.get(f);if(!i||v===null||v.length===0||s&&!b)s?d(null):u();else{const y=s?0:r,S=y*4;let E=x.clippingState||null;c.value=E,E=d(v,m,S,g);for(let A=0;A!==S;++A)E[A]=n[A];x.clippingState=E,this.numIntersection=_?this.numPlanes:0,this.numPlanes+=y}};function u(){c.value!==n&&(c.value=n,c.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function d(f,m,g,v){const _=f!==null?f.length:0;let b=null;if(_!==0){if(b=c.value,v!==!0||b===null){const x=g+_*4,y=m.matrixWorldInverse;l.getNormalMatrix(y),(b===null||b.length<x)&&(b=new Float32Array(x));for(let S=0,E=g;S!==_;++S,E+=4)a.copy(f[S]).applyMatrix4(y,l),a.normal.toArray(b,E),b[E+3]=a.constant}c.value=b,c.needsUpdate=!0}return e.numPlanes=_,e.numIntersection=0,b}}function DX(t){let e=new WeakMap;function n(a,l){return l===Zf?a.mapping=oo:l===Kf&&(a.mapping=hl),a}function r(a){if(a&&a.isTexture){const l=a.mapping;if(l===Zf||l===Kf)if(e.has(a)){const c=e.get(a).texture;return n(c,a.mapping)}else{const c=a.image;if(c&&c.height>0){const u=new W4(c.height/2);return u.fromEquirectangularTexture(t,a),e.set(a,u),a.addEventListener("dispose",i),n(u.texture,a.mapping)}else return null}}return a}function i(a){const l=a.target;l.removeEventListener("dispose",i);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function s(){e=new WeakMap}return{get:r,dispose:s}}class al extends Pp{constructor(e=-1,n=1,r=1,i=-1,s=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=r,this.bottom=i,this.near=s,this.far=a,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,n,r,i,s,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=r-e,a=r+e,l=i+n,c=i-n;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,d=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=u*this.view.offsetX,a=s+u*this.view.width,l-=d*this.view.offsetY,c=l-d*this.view.height}this.projectionMatrix.makeOrthographic(s,a,l,c,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}const td=4,JA=[.125,.215,.35,.446,.526,.582],oc=20,D1=new al,QA=new nt;let I1=null,U1=0,O1=0;const rc=(1+Math.sqrt(5))/2,_u=1/rc,eC=[new X(1,1,1),new X(-1,1,1),new X(1,1,-1),new X(-1,1,-1),new X(0,rc,_u),new X(0,rc,-_u),new X(_u,0,rc),new X(-_u,0,rc),new X(rc,_u,0),new X(-rc,_u,0)];class C_{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,n=0,r=.1,i=100){I1=this._renderer.getRenderTarget(),U1=this._renderer.getActiveCubeFace(),O1=this._renderer.getActiveMipmapLevel(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,r,i,s),n>0&&this._blur(s,0,0,n),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,n=null){return this._fromTexture(e,n)}fromCubemap(e,n=null){return this._fromTexture(e,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=rC(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=nC(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(I1,U1,O1),e.scissorTest=!1,bg(e,0,0,e.width,e.height)}_fromTexture(e,n){e.mapping===oo||e.mapping===hl?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),I1=this._renderer.getRenderTarget(),U1=this._renderer.getActiveCubeFace(),O1=this._renderer.getActiveMipmapLevel();const r=n||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,r={magFilter:Mn,minFilter:Mn,generateMipmaps:!1,type:Td,format:oi,colorSpace:ba,depthBuffer:!1},i=tC(e,n,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==n){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=tC(e,n,r);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=IX(s)),this._blurMaterial=UX(s,e,n)}return i}_compileMaterial(e){const n=new Fn(this._lodPlanes[0],e);this._renderer.compile(n,D1)}_sceneToCubeUV(e,n,r,i){const l=new Yn(90,1,n,r),c=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],d=this._renderer,f=d.autoClear,m=d.toneMapping;d.getClearColor(QA),d.toneMapping=ha,d.autoClear=!1;const g=new go({name:"PMREM.Background",side:Hr,depthWrite:!1,depthTest:!1}),v=new Fn(new Bc,g);let _=!1;const b=e.background;b?b.isColor&&(g.color.copy(b),e.background=null,_=!0):(g.color.copy(QA),_=!0);for(let x=0;x<6;x++){const y=x%3;y===0?(l.up.set(0,c[x],0),l.lookAt(u[x],0,0)):y===1?(l.up.set(0,0,c[x]),l.lookAt(0,u[x],0)):(l.up.set(0,c[x],0),l.lookAt(0,0,u[x]));const S=this._cubeSize;bg(i,y*S,x>2?S:0,S,S),d.setRenderTarget(i),_&&d.render(v,l),d.render(e,l)}v.geometry.dispose(),v.material.dispose(),d.toneMapping=m,d.autoClear=f,e.background=b}_textureToCubeUV(e,n){const r=this._renderer,i=e.mapping===oo||e.mapping===hl;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=rC()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=nC());const s=i?this._cubemapMaterial:this._equirectMaterial,a=new Fn(this._lodPlanes[0],s),l=s.uniforms;l.envMap.value=e;const c=this._cubeSize;bg(n,0,0,3*c,2*c),r.setRenderTarget(n),r.render(a,D1)}_applyPMREM(e){const n=this._renderer,r=n.autoClear;n.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const s=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),a=eC[(i-1)%eC.length];this._blur(e,i-1,i,s,a)}n.autoClear=r}_blur(e,n,r,i,s){const a=this._pingPongRenderTarget;this._halfBlur(e,a,n,r,i,"latitudinal",s),this._halfBlur(a,e,r,r,i,"longitudinal",s)}_halfBlur(e,n,r,i,s,a,l){const c=this._renderer,u=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const d=3,f=new Fn(this._lodPlanes[i],u),m=u.uniforms,g=this._sizeLods[r]-1,v=isFinite(s)?Math.PI/(2*g):2*Math.PI/(2*oc-1),_=s/v,b=isFinite(s)?1+Math.floor(d*_):oc;b>oc&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${b} samples when the maximum is set to ${oc}`);const x=[];let y=0;for(let C=0;C<oc;++C){const j=C/_,k=Math.exp(-j*j/2);x.push(k),C===0?y+=k:C<b&&(y+=2*k)}for(let C=0;C<x.length;C++)x[C]=x[C]/y;m.envMap.value=e.texture,m.samples.value=b,m.weights.value=x,m.latitudinal.value=a==="latitudinal",l&&(m.poleAxis.value=l);const{_lodMax:S}=this;m.dTheta.value=v,m.mipInt.value=S-r;const E=this._sizeLods[i],A=3*E*(i>S-td?i-S+td:0),T=4*(this._cubeSize-E);bg(n,A,T,3*E,2*E),c.setRenderTarget(n),c.render(f,D1)}}function IX(t){const e=[],n=[],r=[];let i=t;const s=t-td+1+JA.length;for(let a=0;a<s;a++){const l=Math.pow(2,i);n.push(l);let c=1/l;a>t-td?c=JA[a-t+td-1]:a===0&&(c=0),r.push(c);const u=1/(l-2),d=-u,f=1+u,m=[d,d,f,d,f,f,d,d,f,f,d,f],g=6,v=6,_=3,b=2,x=1,y=new Float32Array(_*v*g),S=new Float32Array(b*v*g),E=new Float32Array(x*v*g);for(let T=0;T<g;T++){const C=T%3*2/3-1,j=T>2?0:-1,k=[C,j,0,C+2/3,j,0,C+2/3,j+1,0,C,j,0,C+2/3,j+1,0,C,j+1,0];y.set(k,_*v*T),S.set(m,b*v*T);const P=[T,T,T,T,T,T];E.set(P,x*v*T)}const A=new At;A.setAttribute("position",new qt(y,_)),A.setAttribute("uv",new qt(S,b)),A.setAttribute("faceIndex",new qt(E,x)),e.push(A),i>td&&i--}return{lodPlanes:e,sizeLods:n,sigmas:r}}function tC(t,e,n){const r=new Hs(t,e,n);return r.texture.mapping=Hd,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function bg(t,e,n,r,i){t.viewport.set(e,n,r,i),t.scissor.set(e,n,r,i)}function UX(t,e,n){const r=new Float32Array(oc),i=new X(0,1,0);return new _a({name:"SphericalGaussianBlur",defines:{n:oc,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:QS(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Ja,depthTest:!1,depthWrite:!1})}function nC(){return new _a({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:QS(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Ja,depthTest:!1,depthWrite:!1})}function rC(){return new _a({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:QS(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Ja,depthTest:!1,depthWrite:!1})}function QS(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function OX(t){let e=new WeakMap,n=null;function r(l){if(l&&l.isTexture){const c=l.mapping,u=c===Zf||c===Kf,d=c===oo||c===hl;if(u||d)if(l.isRenderTargetTexture&&l.needsPMREMUpdate===!0){l.needsPMREMUpdate=!1;let f=e.get(l);return n===null&&(n=new C_(t)),f=u?n.fromEquirectangular(l,f):n.fromCubemap(l,f),e.set(l,f),f.texture}else{if(e.has(l))return e.get(l).texture;{const f=l.image;if(u&&f&&f.height>0||d&&f&&i(f)){n===null&&(n=new C_(t));const m=u?n.fromEquirectangular(l):n.fromCubemap(l);return e.set(l,m),l.addEventListener("dispose",s),m.texture}else return null}}}return l}function i(l){let c=0;const u=6;for(let d=0;d<u;d++)l[d]!==void 0&&c++;return c===u}function s(l){const c=l.target;c.removeEventListener("dispose",s);const u=e.get(c);u!==void 0&&(e.delete(c),u.dispose())}function a(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:r,dispose:a}}function FX(t){const e={};function n(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=t.getExtension(r)}return e[r]=i,i}return{has:function(r){return n(r)!==null},init:function(r){r.isWebGL2?(n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance")):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(r){const i=n(r);return i===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function zX(t,e,n,r){const i={},s=new WeakMap;function a(f){const m=f.target;m.index!==null&&e.remove(m.index);for(const v in m.attributes)e.remove(m.attributes[v]);for(const v in m.morphAttributes){const _=m.morphAttributes[v];for(let b=0,x=_.length;b<x;b++)e.remove(_[b])}m.removeEventListener("dispose",a),delete i[m.id];const g=s.get(m);g&&(e.remove(g),s.delete(m)),r.releaseStatesOfGeometry(m),m.isInstancedBufferGeometry===!0&&delete m._maxInstanceCount,n.memory.geometries--}function l(f,m){return i[m.id]===!0||(m.addEventListener("dispose",a),i[m.id]=!0,n.memory.geometries++),m}function c(f){const m=f.attributes;for(const v in m)e.update(m[v],t.ARRAY_BUFFER);const g=f.morphAttributes;for(const v in g){const _=g[v];for(let b=0,x=_.length;b<x;b++)e.update(_[b],t.ARRAY_BUFFER)}}function u(f){const m=[],g=f.index,v=f.attributes.position;let _=0;if(g!==null){const y=g.array;_=g.version;for(let S=0,E=y.length;S<E;S+=3){const A=y[S+0],T=y[S+1],C=y[S+2];m.push(A,T,T,C,C,A)}}else if(v!==void 0){const y=v.array;_=v.version;for(let S=0,E=y.length/3-1;S<E;S+=3){const A=S+0,T=S+1,C=S+2;m.push(A,T,T,C,C,A)}}else return;const b=new(F4(m)?KS:ZS)(m,1);b.version=_;const x=s.get(f);x&&e.remove(x),s.set(f,b)}function d(f){const m=s.get(f);if(m){const g=f.index;g!==null&&m.version<g.version&&u(f)}else u(f);return s.get(f)}return{get:l,update:c,getWireframeAttribute:d}}function BX(t,e,n,r){const i=r.isWebGL2;let s;function a(g){s=g}let l,c;function u(g){l=g.type,c=g.bytesPerElement}function d(g,v){t.drawElements(s,v,l,g*c),n.update(v,s,1)}function f(g,v,_){if(_===0)return;let b,x;if(i)b=t,x="drawElementsInstanced";else if(b=e.get("ANGLE_instanced_arrays"),x="drawElementsInstancedANGLE",b===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}b[x](s,v,l,g*c,_),n.update(v,s,_)}function m(g,v,_){if(_===0)return;const b=e.get("WEBGL_multi_draw");if(b===null)for(let x=0;x<_;x++)this.render(g[x]/c,v[x]);else{b.multiDrawElementsWEBGL(s,v,0,l,g,0,_);let x=0;for(let y=0;y<_;y++)x+=v[y];n.update(x,s,1)}}this.setMode=a,this.setIndex=u,this.render=d,this.renderInstances=f,this.renderMultiDraw=m}function VX(t){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function r(s,a,l){switch(n.calls++,a){case t.TRIANGLES:n.triangles+=l*(s/3);break;case t.LINES:n.lines+=l*(s/2);break;case t.LINE_STRIP:n.lines+=l*(s-1);break;case t.LINE_LOOP:n.lines+=l*s;break;case t.POINTS:n.points+=l*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function i(){n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:i,update:r}}function HX(t,e){return t[0]-e[0]}function GX(t,e){return Math.abs(e[1])-Math.abs(t[1])}function WX(t,e,n){const r={},i=new Float32Array(8),s=new WeakMap,a=new Yt,l=[];for(let u=0;u<8;u++)l[u]=[u,0];function c(u,d,f){const m=u.morphTargetInfluences;if(e.isWebGL2===!0){const v=d.morphAttributes.position||d.morphAttributes.normal||d.morphAttributes.color,_=v!==void 0?v.length:0;let b=s.get(d);if(b===void 0||b.count!==_){let Q=function(){Y.dispose(),s.delete(d),d.removeEventListener("dispose",Q)};var g=Q;b!==void 0&&b.texture.dispose();const S=d.morphAttributes.position!==void 0,E=d.morphAttributes.normal!==void 0,A=d.morphAttributes.color!==void 0,T=d.morphAttributes.position||[],C=d.morphAttributes.normal||[],j=d.morphAttributes.color||[];let k=0;S===!0&&(k=1),E===!0&&(k=2),A===!0&&(k=3);let P=d.attributes.position.count*k,H=1;P>e.maxTextureSize&&(H=Math.ceil(P/e.maxTextureSize),P=e.maxTextureSize);const B=new Float32Array(P*H*4*_),Y=new ov(B,P,H,_);Y.type=Ls,Y.needsUpdate=!0;const V=k*4;for(let ee=0;ee<_;ee++){const re=T[ee],I=C[ee],F=j[ee],z=P*H*4*ee;for(let U=0;U<re.count;U++){const Z=U*V;S===!0&&(a.fromBufferAttribute(re,U),B[z+Z+0]=a.x,B[z+Z+1]=a.y,B[z+Z+2]=a.z,B[z+Z+3]=0),E===!0&&(a.fromBufferAttribute(I,U),B[z+Z+4]=a.x,B[z+Z+5]=a.y,B[z+Z+6]=a.z,B[z+Z+7]=0),A===!0&&(a.fromBufferAttribute(F,U),B[z+Z+8]=a.x,B[z+Z+9]=a.y,B[z+Z+10]=a.z,B[z+Z+11]=F.itemSize===4?a.w:1)}}b={count:_,texture:Y,size:new ke(P,H)},s.set(d,b),d.addEventListener("dispose",Q)}let x=0;for(let S=0;S<m.length;S++)x+=m[S];const y=d.morphTargetsRelative?1:1-x;f.getUniforms().setValue(t,"morphTargetBaseInfluence",y),f.getUniforms().setValue(t,"morphTargetInfluences",m),f.getUniforms().setValue(t,"morphTargetsTexture",b.texture,n),f.getUniforms().setValue(t,"morphTargetsTextureSize",b.size)}else{const v=m===void 0?0:m.length;let _=r[d.id];if(_===void 0||_.length!==v){_=[];for(let E=0;E<v;E++)_[E]=[E,0];r[d.id]=_}for(let E=0;E<v;E++){const A=_[E];A[0]=E,A[1]=m[E]}_.sort(GX);for(let E=0;E<8;E++)E<v&&_[E][1]?(l[E][0]=_[E][0],l[E][1]=_[E][1]):(l[E][0]=Number.MAX_SAFE_INTEGER,l[E][1]=0);l.sort(HX);const b=d.morphAttributes.position,x=d.morphAttributes.normal;let y=0;for(let E=0;E<8;E++){const A=l[E],T=A[0],C=A[1];T!==Number.MAX_SAFE_INTEGER&&C?(b&&d.getAttribute("morphTarget"+E)!==b[T]&&d.setAttribute("morphTarget"+E,b[T]),x&&d.getAttribute("morphNormal"+E)!==x[T]&&d.setAttribute("morphNormal"+E,x[T]),i[E]=C,y+=C):(b&&d.hasAttribute("morphTarget"+E)===!0&&d.deleteAttribute("morphTarget"+E),x&&d.hasAttribute("morphNormal"+E)===!0&&d.deleteAttribute("morphNormal"+E),i[E]=0)}const S=d.morphTargetsRelative?1:1-y;f.getUniforms().setValue(t,"morphTargetBaseInfluence",S),f.getUniforms().setValue(t,"morphTargetInfluences",i)}}return{update:c}}function XX(t,e,n,r){let i=new WeakMap;function s(c){const u=r.render.frame,d=c.geometry,f=e.get(c,d);if(i.get(f)!==u&&(e.update(f),i.set(f,u)),c.isInstancedMesh&&(c.hasEventListener("dispose",l)===!1&&c.addEventListener("dispose",l),i.get(c)!==u&&(n.update(c.instanceMatrix,t.ARRAY_BUFFER),c.instanceColor!==null&&n.update(c.instanceColor,t.ARRAY_BUFFER),i.set(c,u))),c.isSkinnedMesh){const m=c.skeleton;i.get(m)!==u&&(m.update(),i.set(m,u))}return f}function a(){i=new WeakMap}function l(c){const u=c.target;u.removeEventListener("dispose",l),n.remove(u.instanceMatrix),u.instanceColor!==null&&n.remove(u.instanceColor)}return{update:s,dispose:a}}class eM extends Cn{constructor(e,n,r,i,s,a,l,c,u,d){if(d=d!==void 0?d:il,d!==il&&d!==Rc)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&d===il&&(r=$a),r===void 0&&d===Rc&&(r=rl),super(null,i,s,a,l,c,d,r,u),this.isDepthTexture=!0,this.image={width:e,height:n},this.magFilter=l!==void 0?l:Wn,this.minFilter=c!==void 0?c:Wn,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const n=super.toJSON(e);return this.compareFunction!==null&&(n.compareFunction=this.compareFunction),n}}const Y4=new Cn,q4=new eM(1,1);q4.compareFunction=XS;const $4=new ov,Z4=new $S,K4=new Rp,iC=[],sC=[],aC=new Float32Array(16),oC=new Float32Array(9),lC=new Float32Array(4);function Gd(t,e,n){const r=t[0];if(r<=0||r>0)return t;const i=e*n;let s=iC[i];if(s===void 0&&(s=new Float32Array(i),iC[i]=s),e!==0){r.toArray(s,0);for(let a=1,l=0;a!==e;++a)l+=n,t[a].toArray(s,l)}return s}function lr(t,e){if(t.length!==e.length)return!1;for(let n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function cr(t,e){for(let n=0,r=e.length;n<r;n++)t[n]=e[n]}function lv(t,e){let n=sC[e];n===void 0&&(n=new Int32Array(e),sC[e]=n);for(let r=0;r!==e;++r)n[r]=t.allocateTextureUnit();return n}function YX(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function qX(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(lr(n,e))return;t.uniform2fv(this.addr,e),cr(n,e)}}function $X(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(lr(n,e))return;t.uniform3fv(this.addr,e),cr(n,e)}}function ZX(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(lr(n,e))return;t.uniform4fv(this.addr,e),cr(n,e)}}function KX(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(lr(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),cr(n,e)}else{if(lr(n,r))return;lC.set(r),t.uniformMatrix2fv(this.addr,!1,lC),cr(n,r)}}function JX(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(lr(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),cr(n,e)}else{if(lr(n,r))return;oC.set(r),t.uniformMatrix3fv(this.addr,!1,oC),cr(n,r)}}function QX(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(lr(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),cr(n,e)}else{if(lr(n,r))return;aC.set(r),t.uniformMatrix4fv(this.addr,!1,aC),cr(n,r)}}function eY(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function tY(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(lr(n,e))return;t.uniform2iv(this.addr,e),cr(n,e)}}function nY(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(lr(n,e))return;t.uniform3iv(this.addr,e),cr(n,e)}}function rY(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(lr(n,e))return;t.uniform4iv(this.addr,e),cr(n,e)}}function iY(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function sY(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(lr(n,e))return;t.uniform2uiv(this.addr,e),cr(n,e)}}function aY(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(lr(n,e))return;t.uniform3uiv(this.addr,e),cr(n,e)}}function oY(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(lr(n,e))return;t.uniform4uiv(this.addr,e),cr(n,e)}}function lY(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i);const s=this.type===t.SAMPLER_2D_SHADOW?q4:Y4;n.setTexture2D(e||s,i)}function cY(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(e||Z4,i)}function uY(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(e||K4,i)}function dY(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(e||$4,i)}function hY(t){switch(t){case 5126:return YX;case 35664:return qX;case 35665:return $X;case 35666:return ZX;case 35674:return KX;case 35675:return JX;case 35676:return QX;case 5124:case 35670:return eY;case 35667:case 35671:return tY;case 35668:case 35672:return nY;case 35669:case 35673:return rY;case 5125:return iY;case 36294:return sY;case 36295:return aY;case 36296:return oY;case 35678:case 36198:case 36298:case 36306:case 35682:return lY;case 35679:case 36299:case 36307:return cY;case 35680:case 36300:case 36308:case 36293:return uY;case 36289:case 36303:case 36311:case 36292:return dY}}function fY(t,e){t.uniform1fv(this.addr,e)}function pY(t,e){const n=Gd(e,this.size,2);t.uniform2fv(this.addr,n)}function mY(t,e){const n=Gd(e,this.size,3);t.uniform3fv(this.addr,n)}function gY(t,e){const n=Gd(e,this.size,4);t.uniform4fv(this.addr,n)}function xY(t,e){const n=Gd(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function vY(t,e){const n=Gd(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function yY(t,e){const n=Gd(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function bY(t,e){t.uniform1iv(this.addr,e)}function _Y(t,e){t.uniform2iv(this.addr,e)}function wY(t,e){t.uniform3iv(this.addr,e)}function SY(t,e){t.uniform4iv(this.addr,e)}function MY(t,e){t.uniform1uiv(this.addr,e)}function EY(t,e){t.uniform2uiv(this.addr,e)}function NY(t,e){t.uniform3uiv(this.addr,e)}function TY(t,e){t.uniform4uiv(this.addr,e)}function AY(t,e,n){const r=this.cache,i=e.length,s=lv(n,i);lr(r,s)||(t.uniform1iv(this.addr,s),cr(r,s));for(let a=0;a!==i;++a)n.setTexture2D(e[a]||Y4,s[a])}function CY(t,e,n){const r=this.cache,i=e.length,s=lv(n,i);lr(r,s)||(t.uniform1iv(this.addr,s),cr(r,s));for(let a=0;a!==i;++a)n.setTexture3D(e[a]||Z4,s[a])}function kY(t,e,n){const r=this.cache,i=e.length,s=lv(n,i);lr(r,s)||(t.uniform1iv(this.addr,s),cr(r,s));for(let a=0;a!==i;++a)n.setTextureCube(e[a]||K4,s[a])}function PY(t,e,n){const r=this.cache,i=e.length,s=lv(n,i);lr(r,s)||(t.uniform1iv(this.addr,s),cr(r,s));for(let a=0;a!==i;++a)n.setTexture2DArray(e[a]||$4,s[a])}function RY(t){switch(t){case 5126:return fY;case 35664:return pY;case 35665:return mY;case 35666:return gY;case 35674:return xY;case 35675:return vY;case 35676:return yY;case 5124:case 35670:return bY;case 35667:case 35671:return _Y;case 35668:case 35672:return wY;case 35669:case 35673:return SY;case 5125:return MY;case 36294:return EY;case 36295:return NY;case 36296:return TY;case 35678:case 36198:case 36298:case 36306:case 35682:return AY;case 35679:case 36299:case 36307:return CY;case 35680:case 36300:case 36308:case 36293:return kY;case 36289:case 36303:case 36311:case 36292:return PY}}class jY{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.type=n.type,this.setValue=hY(n.type)}}class LY{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.type=n.type,this.size=n.size,this.setValue=RY(n.type)}}class DY{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,n,r){const i=this.seq;for(let s=0,a=i.length;s!==a;++s){const l=i[s];l.setValue(e,n[l.id],r)}}}const F1=/(\w+)(\])?(\[|\.)?/g;function cC(t,e){t.seq.push(e),t.map[e.id]=e}function IY(t,e,n){const r=t.name,i=r.length;for(F1.lastIndex=0;;){const s=F1.exec(r),a=F1.lastIndex;let l=s[1];const c=s[2]==="]",u=s[3];if(c&&(l=l|0),u===void 0||u==="["&&a+2===i){cC(n,u===void 0?new jY(l,t,e):new LY(l,t,e));break}else{let f=n.map[l];f===void 0&&(f=new DY(l),cC(n,f)),n=f}}}class E0{constructor(e,n){this.seq=[],this.map={};const r=e.getProgramParameter(n,e.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){const s=e.getActiveUniform(n,i),a=e.getUniformLocation(n,s.name);IY(s,a,this)}}setValue(e,n,r,i){const s=this.map[n];s!==void 0&&s.setValue(e,r,i)}setOptional(e,n,r){const i=n[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,n,r,i){for(let s=0,a=n.length;s!==a;++s){const l=n[s],c=r[l.id];c.needsUpdate!==!1&&l.setValue(e,c.value,i)}}static seqWithValue(e,n){const r=[];for(let i=0,s=e.length;i!==s;++i){const a=e[i];a.id in n&&r.push(a)}return r}}function uC(t,e,n){const r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}const UY=37297;let OY=0;function FY(t,e){const n=t.split(`
`),r=[],i=Math.max(e-6,0),s=Math.min(e+6,n.length);for(let a=i;a<s;a++){const l=a+1;r.push(`${l===e?">":" "} ${l}: ${n[a]}`)}return r.join(`
`)}function zY(t){const e=Jt.getPrimaries(Jt.workingColorSpace),n=Jt.getPrimaries(t);let r;switch(e===n?r="":e===sp&&n===ip?r="LinearDisplayP3ToLinearSRGB":e===ip&&n===sp&&(r="LinearSRGBToLinearDisplayP3"),t){case ba:case Cp:return[r,"LinearTransferOETF"];case ar:case av:return[r,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",t),[r,"LinearTransferOETF"]}}function dC(t,e,n){const r=t.getShaderParameter(e,t.COMPILE_STATUS),i=t.getShaderInfoLog(e).trim();if(r&&i==="")return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const a=parseInt(s[1]);return n.toUpperCase()+`

`+i+`

`+FY(t.getShaderSource(e),a)}else return i}function BY(t,e){const n=zY(e);return`vec4 ${t}( vec4 value ) { return ${n[0]}( ${n[1]}( value ) ); }`}function VY(t,e){let n;switch(e){case h4:n="Linear";break;case f4:n="Reinhard";break;case p4:n="OptimizedCineon";break;case LS:n="ACESFilmic";break;case g4:n="AgX";break;case m4:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function HY(t){return[t.extensionDerivatives||t.envMapCubeUVHeight||t.bumpMap||t.normalMapTangentSpace||t.clearcoatNormalMap||t.flatShading||t.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap||t.transmission)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(nd).join(`
`)}function GY(t){return[t.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":""].filter(nd).join(`
`)}function WY(t){const e=[];for(const n in t){const r=t[n];r!==!1&&e.push("#define "+n+" "+r)}return e.join(`
`)}function XY(t,e){const n={},r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const s=t.getActiveAttrib(e,i),a=s.name;let l=1;s.type===t.FLOAT_MAT2&&(l=2),s.type===t.FLOAT_MAT3&&(l=3),s.type===t.FLOAT_MAT4&&(l=4),n[a]={type:s.type,location:t.getAttribLocation(e,a),locationSize:l}}return n}function nd(t){return t!==""}function hC(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function fC(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const YY=/^[ \t]*#include +<([\w\d./]+)>/gm;function k_(t){return t.replace(YY,$Y)}const qY=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function $Y(t,e){let n=kt[e];if(n===void 0){const r=qY.get(e);if(r!==void 0)n=kt[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return k_(n)}const ZY=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function pC(t){return t.replace(ZY,KY)}function KY(t,e,n,r){let i="";for(let s=parseInt(e);s<parseInt(n);s++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function mC(t){let e="precision "+t.precision+` float;
precision `+t.precision+" int;";return t.precision==="highp"?e+=`
#define HIGH_PRECISION`:t.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function JY(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===nv?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===xf?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===ks&&(e="SHADOWMAP_TYPE_VSM"),e}function QY(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case oo:case hl:e="ENVMAP_TYPE_CUBE";break;case Hd:e="ENVMAP_TYPE_CUBE_UV";break}return e}function eq(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case hl:e="ENVMAP_MODE_REFRACTION";break}return e}function tq(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case Ap:e="ENVMAP_BLENDING_MULTIPLY";break;case u4:e="ENVMAP_BLENDING_MIX";break;case d4:e="ENVMAP_BLENDING_ADD";break}return e}function nq(t){const e=t.envMapCubeUVHeight;if(e===null)return null;const n=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),7*16)),texelHeight:r,maxMip:n}}function rq(t,e,n,r){const i=t.getContext(),s=n.defines;let a=n.vertexShader,l=n.fragmentShader;const c=JY(n),u=QY(n),d=eq(n),f=tq(n),m=nq(n),g=n.isWebGL2?"":HY(n),v=GY(n),_=WY(s),b=i.createProgram();let x,y,S=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(x=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,_].filter(nd).join(`
`),x.length>0&&(x+=`
`),y=[g,"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,_].filter(nd).join(`
`),y.length>0&&(y+=`
`)):(x=[mC(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,_,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+d:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(nd).join(`
`),y=[g,mC(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,_,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.envMap?"#define "+d:"",n.envMap?"#define "+f:"",m?"#define CUBEUV_TEXEL_WIDTH "+m.texelWidth:"",m?"#define CUBEUV_TEXEL_HEIGHT "+m.texelHeight:"",m?"#define CUBEUV_MAX_MIP "+m.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==ha?"#define TONE_MAPPING":"",n.toneMapping!==ha?kt.tonemapping_pars_fragment:"",n.toneMapping!==ha?VY("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",kt.colorspace_pars_fragment,BY("linearToOutputTexel",n.outputColorSpace),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(nd).join(`
`)),a=k_(a),a=hC(a,n),a=fC(a,n),l=k_(l),l=hC(l,n),l=fC(l,n),a=pC(a),l=pC(l),n.isWebGL2&&n.isRawShaderMaterial!==!0&&(S=`#version 300 es
`,x=[v,"precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+x,y=["precision mediump sampler2DArray;","#define varying in",n.glslVersion===T_?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===T_?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+y);const E=S+x+a,A=S+y+l,T=uC(i,i.VERTEX_SHADER,E),C=uC(i,i.FRAGMENT_SHADER,A);i.attachShader(b,T),i.attachShader(b,C),n.index0AttributeName!==void 0?i.bindAttribLocation(b,0,n.index0AttributeName):n.morphTargets===!0&&i.bindAttribLocation(b,0,"position"),i.linkProgram(b);function j(B){if(t.debug.checkShaderErrors){const Y=i.getProgramInfoLog(b).trim(),V=i.getShaderInfoLog(T).trim(),Q=i.getShaderInfoLog(C).trim();let ee=!0,re=!0;if(i.getProgramParameter(b,i.LINK_STATUS)===!1)if(ee=!1,typeof t.debug.onShaderError=="function")t.debug.onShaderError(i,b,T,C);else{const I=dC(i,T,"vertex"),F=dC(i,C,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(b,i.VALIDATE_STATUS)+`

Program Info Log: `+Y+`
`+I+`
`+F)}else Y!==""?console.warn("THREE.WebGLProgram: Program Info Log:",Y):(V===""||Q==="")&&(re=!1);re&&(B.diagnostics={runnable:ee,programLog:Y,vertexShader:{log:V,prefix:x},fragmentShader:{log:Q,prefix:y}})}i.deleteShader(T),i.deleteShader(C),k=new E0(i,b),P=XY(i,b)}let k;this.getUniforms=function(){return k===void 0&&j(this),k};let P;this.getAttributes=function(){return P===void 0&&j(this),P};let H=n.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return H===!1&&(H=i.getProgramParameter(b,UY)),H},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(b),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=OY++,this.cacheKey=e,this.usedTimes=1,this.program=b,this.vertexShader=T,this.fragmentShader=C,this}let iq=0;class sq{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(n),s=this._getShaderStage(r),a=this._getShaderCacheForMaterial(e);return a.has(i)===!1&&(a.add(i),i.usedTimes++),a.has(s)===!1&&(a.add(s),s.usedTimes++),this}remove(e){const n=this.materialCache.get(e);for(const r of n)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const n=this.materialCache;let r=n.get(e);return r===void 0&&(r=new Set,n.set(e,r)),r}_getShaderStage(e){const n=this.shaderCache;let r=n.get(e);return r===void 0&&(r=new aq(e),n.set(e,r)),r}}class aq{constructor(e){this.id=iq++,this.code=e,this.usedTimes=0}}function oq(t,e,n,r,i,s,a){const l=new Sc,c=new sq,u=[],d=i.isWebGL2,f=i.logarithmicDepthBuffer,m=i.vertexTextures;let g=i.precision;const v={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function _(k){return k===0?"uv":`uv${k}`}function b(k,P,H,B,Y){const V=B.fog,Q=Y.geometry,ee=k.isMeshStandardMaterial?B.environment:null,re=(k.isMeshStandardMaterial?n:e).get(k.envMap||ee),I=re&&re.mapping===Hd?re.image.height:null,F=v[k.type];k.precision!==null&&(g=i.getMaxPrecision(k.precision),g!==k.precision&&console.warn("THREE.WebGLProgram.getParameters:",k.precision,"not supported, using",g,"instead."));const z=Q.morphAttributes.position||Q.morphAttributes.normal||Q.morphAttributes.color,U=z!==void 0?z.length:0;let Z=0;Q.morphAttributes.position!==void 0&&(Z=1),Q.morphAttributes.normal!==void 0&&(Z=2),Q.morphAttributes.color!==void 0&&(Z=3);let K,ne,ie,de;if(F){const Mt=js[F];K=Mt.vertexShader,ne=Mt.fragmentShader}else K=k.vertexShader,ne=k.fragmentShader,c.update(k),ie=c.getVertexShaderID(k),de=c.getFragmentShaderID(k);const ae=t.getRenderTarget(),_e=Y.isInstancedMesh===!0,je=Y.isBatchedMesh===!0,Le=!!k.map,Te=!!k.matcap,G=!!re,Ee=!!k.aoMap,me=!!k.lightMap,ve=!!k.bumpMap,he=!!k.normalMap,We=!!k.displacementMap,ge=!!k.emissiveMap,O=!!k.metalnessMap,L=!!k.roughnessMap,q=k.anisotropy>0,fe=k.clearcoat>0,le=k.iridescence>0,ce=k.sheen>0,Pe=k.transmission>0,Ue=q&&!!k.anisotropyMap,Fe=fe&&!!k.clearcoatMap,ze=fe&&!!k.clearcoatNormalMap,$e=fe&&!!k.clearcoatRoughnessMap,Ae=le&&!!k.iridescenceMap,at=le&&!!k.iridescenceThicknessMap,Xe=ce&&!!k.sheenColorMap,Ke=ce&&!!k.sheenRoughnessMap,Be=!!k.specularMap,Re=!!k.specularColorMap,J=!!k.specularIntensityMap,we=Pe&&!!k.transmissionMap,Ge=Pe&&!!k.thicknessMap,De=!!k.gradientMap,Ce=!!k.alphaMap,te=k.alphaTest>0,Ve=!!k.alphaHash,qe=!!k.extensions,lt=!!Q.attributes.uv1,Je=!!Q.attributes.uv2,gt=!!Q.attributes.uv3;let ut=ha;return k.toneMapped&&(ae===null||ae.isXRRenderTarget===!0)&&(ut=t.toneMapping),{isWebGL2:d,shaderID:F,shaderType:k.type,shaderName:k.name,vertexShader:K,fragmentShader:ne,defines:k.defines,customVertexShaderID:ie,customFragmentShaderID:de,isRawShaderMaterial:k.isRawShaderMaterial===!0,glslVersion:k.glslVersion,precision:g,batching:je,instancing:_e,instancingColor:_e&&Y.instanceColor!==null,supportsVertexTextures:m,outputColorSpace:ae===null?t.outputColorSpace:ae.isXRRenderTarget===!0?ae.texture.colorSpace:ba,map:Le,matcap:Te,envMap:G,envMapMode:G&&re.mapping,envMapCubeUVHeight:I,aoMap:Ee,lightMap:me,bumpMap:ve,normalMap:he,displacementMap:m&&We,emissiveMap:ge,normalMapObjectSpace:he&&k.normalMapType===k4,normalMapTangentSpace:he&&k.normalMapType===yl,metalnessMap:O,roughnessMap:L,anisotropy:q,anisotropyMap:Ue,clearcoat:fe,clearcoatMap:Fe,clearcoatNormalMap:ze,clearcoatRoughnessMap:$e,iridescence:le,iridescenceMap:Ae,iridescenceThicknessMap:at,sheen:ce,sheenColorMap:Xe,sheenRoughnessMap:Ke,specularMap:Be,specularColorMap:Re,specularIntensityMap:J,transmission:Pe,transmissionMap:we,thicknessMap:Ge,gradientMap:De,opaque:k.transparent===!1&&k.blending===_c,alphaMap:Ce,alphaTest:te,alphaHash:Ve,combine:k.combine,mapUv:Le&&_(k.map.channel),aoMapUv:Ee&&_(k.aoMap.channel),lightMapUv:me&&_(k.lightMap.channel),bumpMapUv:ve&&_(k.bumpMap.channel),normalMapUv:he&&_(k.normalMap.channel),displacementMapUv:We&&_(k.displacementMap.channel),emissiveMapUv:ge&&_(k.emissiveMap.channel),metalnessMapUv:O&&_(k.metalnessMap.channel),roughnessMapUv:L&&_(k.roughnessMap.channel),anisotropyMapUv:Ue&&_(k.anisotropyMap.channel),clearcoatMapUv:Fe&&_(k.clearcoatMap.channel),clearcoatNormalMapUv:ze&&_(k.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:$e&&_(k.clearcoatRoughnessMap.channel),iridescenceMapUv:Ae&&_(k.iridescenceMap.channel),iridescenceThicknessMapUv:at&&_(k.iridescenceThicknessMap.channel),sheenColorMapUv:Xe&&_(k.sheenColorMap.channel),sheenRoughnessMapUv:Ke&&_(k.sheenRoughnessMap.channel),specularMapUv:Be&&_(k.specularMap.channel),specularColorMapUv:Re&&_(k.specularColorMap.channel),specularIntensityMapUv:J&&_(k.specularIntensityMap.channel),transmissionMapUv:we&&_(k.transmissionMap.channel),thicknessMapUv:Ge&&_(k.thicknessMap.channel),alphaMapUv:Ce&&_(k.alphaMap.channel),vertexTangents:!!Q.attributes.tangent&&(he||q),vertexColors:k.vertexColors,vertexAlphas:k.vertexColors===!0&&!!Q.attributes.color&&Q.attributes.color.itemSize===4,vertexUv1s:lt,vertexUv2s:Je,vertexUv3s:gt,pointsUvs:Y.isPoints===!0&&!!Q.attributes.uv&&(Le||Ce),fog:!!V,useFog:k.fog===!0,fogExp2:V&&V.isFogExp2,flatShading:k.flatShading===!0,sizeAttenuation:k.sizeAttenuation===!0,logarithmicDepthBuffer:f,skinning:Y.isSkinnedMesh===!0,morphTargets:Q.morphAttributes.position!==void 0,morphNormals:Q.morphAttributes.normal!==void 0,morphColors:Q.morphAttributes.color!==void 0,morphTargetsCount:U,morphTextureStride:Z,numDirLights:P.directional.length,numPointLights:P.point.length,numSpotLights:P.spot.length,numSpotLightMaps:P.spotLightMap.length,numRectAreaLights:P.rectArea.length,numHemiLights:P.hemi.length,numDirLightShadows:P.directionalShadowMap.length,numPointLightShadows:P.pointShadowMap.length,numSpotLightShadows:P.spotShadowMap.length,numSpotLightShadowsWithMaps:P.numSpotLightShadowsWithMaps,numLightProbes:P.numLightProbes,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:k.dithering,shadowMapEnabled:t.shadowMap.enabled&&H.length>0,shadowMapType:t.shadowMap.type,toneMapping:ut,useLegacyLights:t._useLegacyLights,decodeVideoTexture:Le&&k.map.isVideoTexture===!0&&Jt.getTransfer(k.map.colorSpace)===on,premultipliedAlpha:k.premultipliedAlpha,doubleSided:k.side===Gi,flipSided:k.side===Hr,useDepthPacking:k.depthPacking>=0,depthPacking:k.depthPacking||0,index0AttributeName:k.index0AttributeName,extensionDerivatives:qe&&k.extensions.derivatives===!0,extensionFragDepth:qe&&k.extensions.fragDepth===!0,extensionDrawBuffers:qe&&k.extensions.drawBuffers===!0,extensionShaderTextureLOD:qe&&k.extensions.shaderTextureLOD===!0,extensionClipCullDistance:qe&&k.extensions.clipCullDistance&&r.has("WEBGL_clip_cull_distance"),rendererExtensionFragDepth:d||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:d||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:d||r.has("EXT_shader_texture_lod"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:k.customProgramCacheKey()}}function x(k){const P=[];if(k.shaderID?P.push(k.shaderID):(P.push(k.customVertexShaderID),P.push(k.customFragmentShaderID)),k.defines!==void 0)for(const H in k.defines)P.push(H),P.push(k.defines[H]);return k.isRawShaderMaterial===!1&&(y(P,k),S(P,k),P.push(t.outputColorSpace)),P.push(k.customProgramCacheKey),P.join()}function y(k,P){k.push(P.precision),k.push(P.outputColorSpace),k.push(P.envMapMode),k.push(P.envMapCubeUVHeight),k.push(P.mapUv),k.push(P.alphaMapUv),k.push(P.lightMapUv),k.push(P.aoMapUv),k.push(P.bumpMapUv),k.push(P.normalMapUv),k.push(P.displacementMapUv),k.push(P.emissiveMapUv),k.push(P.metalnessMapUv),k.push(P.roughnessMapUv),k.push(P.anisotropyMapUv),k.push(P.clearcoatMapUv),k.push(P.clearcoatNormalMapUv),k.push(P.clearcoatRoughnessMapUv),k.push(P.iridescenceMapUv),k.push(P.iridescenceThicknessMapUv),k.push(P.sheenColorMapUv),k.push(P.sheenRoughnessMapUv),k.push(P.specularMapUv),k.push(P.specularColorMapUv),k.push(P.specularIntensityMapUv),k.push(P.transmissionMapUv),k.push(P.thicknessMapUv),k.push(P.combine),k.push(P.fogExp2),k.push(P.sizeAttenuation),k.push(P.morphTargetsCount),k.push(P.morphAttributeCount),k.push(P.numDirLights),k.push(P.numPointLights),k.push(P.numSpotLights),k.push(P.numSpotLightMaps),k.push(P.numHemiLights),k.push(P.numRectAreaLights),k.push(P.numDirLightShadows),k.push(P.numPointLightShadows),k.push(P.numSpotLightShadows),k.push(P.numSpotLightShadowsWithMaps),k.push(P.numLightProbes),k.push(P.shadowMapType),k.push(P.toneMapping),k.push(P.numClippingPlanes),k.push(P.numClipIntersection),k.push(P.depthPacking)}function S(k,P){l.disableAll(),P.isWebGL2&&l.enable(0),P.supportsVertexTextures&&l.enable(1),P.instancing&&l.enable(2),P.instancingColor&&l.enable(3),P.matcap&&l.enable(4),P.envMap&&l.enable(5),P.normalMapObjectSpace&&l.enable(6),P.normalMapTangentSpace&&l.enable(7),P.clearcoat&&l.enable(8),P.iridescence&&l.enable(9),P.alphaTest&&l.enable(10),P.vertexColors&&l.enable(11),P.vertexAlphas&&l.enable(12),P.vertexUv1s&&l.enable(13),P.vertexUv2s&&l.enable(14),P.vertexUv3s&&l.enable(15),P.vertexTangents&&l.enable(16),P.anisotropy&&l.enable(17),P.alphaHash&&l.enable(18),P.batching&&l.enable(19),k.push(l.mask),l.disableAll(),P.fog&&l.enable(0),P.useFog&&l.enable(1),P.flatShading&&l.enable(2),P.logarithmicDepthBuffer&&l.enable(3),P.skinning&&l.enable(4),P.morphTargets&&l.enable(5),P.morphNormals&&l.enable(6),P.morphColors&&l.enable(7),P.premultipliedAlpha&&l.enable(8),P.shadowMapEnabled&&l.enable(9),P.useLegacyLights&&l.enable(10),P.doubleSided&&l.enable(11),P.flipSided&&l.enable(12),P.useDepthPacking&&l.enable(13),P.dithering&&l.enable(14),P.transmission&&l.enable(15),P.sheen&&l.enable(16),P.opaque&&l.enable(17),P.pointsUvs&&l.enable(18),P.decodeVideoTexture&&l.enable(19),k.push(l.mask)}function E(k){const P=v[k.type];let H;if(P){const B=js[P];H=JS.clone(B.uniforms)}else H=k.uniforms;return H}function A(k,P){let H;for(let B=0,Y=u.length;B<Y;B++){const V=u[B];if(V.cacheKey===P){H=V,++H.usedTimes;break}}return H===void 0&&(H=new rq(t,P,k,s),u.push(H)),H}function T(k){if(--k.usedTimes===0){const P=u.indexOf(k);u[P]=u[u.length-1],u.pop(),k.destroy()}}function C(k){c.remove(k)}function j(){c.dispose()}return{getParameters:b,getProgramCacheKey:x,getUniforms:E,acquireProgram:A,releaseProgram:T,releaseShaderCache:C,programs:u,dispose:j}}function lq(){let t=new WeakMap;function e(s){let a=t.get(s);return a===void 0&&(a={},t.set(s,a)),a}function n(s){t.delete(s)}function r(s,a,l){t.get(s)[a]=l}function i(){t=new WeakMap}return{get:e,remove:n,update:r,dispose:i}}function cq(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function gC(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function xC(){const t=[];let e=0;const n=[],r=[],i=[];function s(){e=0,n.length=0,r.length=0,i.length=0}function a(f,m,g,v,_,b){let x=t[e];return x===void 0?(x={id:f.id,object:f,geometry:m,material:g,groupOrder:v,renderOrder:f.renderOrder,z:_,group:b},t[e]=x):(x.id=f.id,x.object=f,x.geometry=m,x.material=g,x.groupOrder=v,x.renderOrder=f.renderOrder,x.z=_,x.group=b),e++,x}function l(f,m,g,v,_,b){const x=a(f,m,g,v,_,b);g.transmission>0?r.push(x):g.transparent===!0?i.push(x):n.push(x)}function c(f,m,g,v,_,b){const x=a(f,m,g,v,_,b);g.transmission>0?r.unshift(x):g.transparent===!0?i.unshift(x):n.unshift(x)}function u(f,m){n.length>1&&n.sort(f||cq),r.length>1&&r.sort(m||gC),i.length>1&&i.sort(m||gC)}function d(){for(let f=e,m=t.length;f<m;f++){const g=t[f];if(g.id===null)break;g.id=null,g.object=null,g.geometry=null,g.material=null,g.group=null}}return{opaque:n,transmissive:r,transparent:i,init:s,push:l,unshift:c,finish:d,sort:u}}function uq(){let t=new WeakMap;function e(r,i){const s=t.get(r);let a;return s===void 0?(a=new xC,t.set(r,[a])):i>=s.length?(a=new xC,s.push(a)):a=s[i],a}function n(){t=new WeakMap}return{get:e,dispose:n}}function dq(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new X,color:new nt};break;case"SpotLight":n={position:new X,direction:new X,color:new nt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new X,color:new nt,distance:0,decay:0};break;case"HemisphereLight":n={direction:new X,skyColor:new nt,groundColor:new nt};break;case"RectAreaLight":n={color:new nt,position:new X,halfWidth:new X,halfHeight:new X};break}return t[e.id]=n,n}}}function hq(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ke};break;case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ke};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ke,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=n,n}}}let fq=0;function pq(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function mq(t,e){const n=new dq,r=hq(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let d=0;d<9;d++)i.probe.push(new X);const s=new X,a=new St,l=new St;function c(d,f){let m=0,g=0,v=0;for(let B=0;B<9;B++)i.probe[B].set(0,0,0);let _=0,b=0,x=0,y=0,S=0,E=0,A=0,T=0,C=0,j=0,k=0;d.sort(pq);const P=f===!0?Math.PI:1;for(let B=0,Y=d.length;B<Y;B++){const V=d[B],Q=V.color,ee=V.intensity,re=V.distance,I=V.shadow&&V.shadow.map?V.shadow.map.texture:null;if(V.isAmbientLight)m+=Q.r*ee*P,g+=Q.g*ee*P,v+=Q.b*ee*P;else if(V.isLightProbe){for(let F=0;F<9;F++)i.probe[F].addScaledVector(V.sh.coefficients[F],ee);k++}else if(V.isDirectionalLight){const F=n.get(V);if(F.color.copy(V.color).multiplyScalar(V.intensity*P),V.castShadow){const z=V.shadow,U=r.get(V);U.shadowBias=z.bias,U.shadowNormalBias=z.normalBias,U.shadowRadius=z.radius,U.shadowMapSize=z.mapSize,i.directionalShadow[_]=U,i.directionalShadowMap[_]=I,i.directionalShadowMatrix[_]=V.shadow.matrix,E++}i.directional[_]=F,_++}else if(V.isSpotLight){const F=n.get(V);F.position.setFromMatrixPosition(V.matrixWorld),F.color.copy(Q).multiplyScalar(ee*P),F.distance=re,F.coneCos=Math.cos(V.angle),F.penumbraCos=Math.cos(V.angle*(1-V.penumbra)),F.decay=V.decay,i.spot[x]=F;const z=V.shadow;if(V.map&&(i.spotLightMap[C]=V.map,C++,z.updateMatrices(V),V.castShadow&&j++),i.spotLightMatrix[x]=z.matrix,V.castShadow){const U=r.get(V);U.shadowBias=z.bias,U.shadowNormalBias=z.normalBias,U.shadowRadius=z.radius,U.shadowMapSize=z.mapSize,i.spotShadow[x]=U,i.spotShadowMap[x]=I,T++}x++}else if(V.isRectAreaLight){const F=n.get(V);F.color.copy(Q).multiplyScalar(ee),F.halfWidth.set(V.width*.5,0,0),F.halfHeight.set(0,V.height*.5,0),i.rectArea[y]=F,y++}else if(V.isPointLight){const F=n.get(V);if(F.color.copy(V.color).multiplyScalar(V.intensity*P),F.distance=V.distance,F.decay=V.decay,V.castShadow){const z=V.shadow,U=r.get(V);U.shadowBias=z.bias,U.shadowNormalBias=z.normalBias,U.shadowRadius=z.radius,U.shadowMapSize=z.mapSize,U.shadowCameraNear=z.camera.near,U.shadowCameraFar=z.camera.far,i.pointShadow[b]=U,i.pointShadowMap[b]=I,i.pointShadowMatrix[b]=V.shadow.matrix,A++}i.point[b]=F,b++}else if(V.isHemisphereLight){const F=n.get(V);F.skyColor.copy(V.color).multiplyScalar(ee*P),F.groundColor.copy(V.groundColor).multiplyScalar(ee*P),i.hemi[S]=F,S++}}y>0&&(e.isWebGL2?t.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Ze.LTC_FLOAT_1,i.rectAreaLTC2=Ze.LTC_FLOAT_2):(i.rectAreaLTC1=Ze.LTC_HALF_1,i.rectAreaLTC2=Ze.LTC_HALF_2):t.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Ze.LTC_FLOAT_1,i.rectAreaLTC2=Ze.LTC_FLOAT_2):t.has("OES_texture_half_float_linear")===!0?(i.rectAreaLTC1=Ze.LTC_HALF_1,i.rectAreaLTC2=Ze.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=m,i.ambient[1]=g,i.ambient[2]=v;const H=i.hash;(H.directionalLength!==_||H.pointLength!==b||H.spotLength!==x||H.rectAreaLength!==y||H.hemiLength!==S||H.numDirectionalShadows!==E||H.numPointShadows!==A||H.numSpotShadows!==T||H.numSpotMaps!==C||H.numLightProbes!==k)&&(i.directional.length=_,i.spot.length=x,i.rectArea.length=y,i.point.length=b,i.hemi.length=S,i.directionalShadow.length=E,i.directionalShadowMap.length=E,i.pointShadow.length=A,i.pointShadowMap.length=A,i.spotShadow.length=T,i.spotShadowMap.length=T,i.directionalShadowMatrix.length=E,i.pointShadowMatrix.length=A,i.spotLightMatrix.length=T+C-j,i.spotLightMap.length=C,i.numSpotLightShadowsWithMaps=j,i.numLightProbes=k,H.directionalLength=_,H.pointLength=b,H.spotLength=x,H.rectAreaLength=y,H.hemiLength=S,H.numDirectionalShadows=E,H.numPointShadows=A,H.numSpotShadows=T,H.numSpotMaps=C,H.numLightProbes=k,i.version=fq++)}function u(d,f){let m=0,g=0,v=0,_=0,b=0;const x=f.matrixWorldInverse;for(let y=0,S=d.length;y<S;y++){const E=d[y];if(E.isDirectionalLight){const A=i.directional[m];A.direction.setFromMatrixPosition(E.matrixWorld),s.setFromMatrixPosition(E.target.matrixWorld),A.direction.sub(s),A.direction.transformDirection(x),m++}else if(E.isSpotLight){const A=i.spot[v];A.position.setFromMatrixPosition(E.matrixWorld),A.position.applyMatrix4(x),A.direction.setFromMatrixPosition(E.matrixWorld),s.setFromMatrixPosition(E.target.matrixWorld),A.direction.sub(s),A.direction.transformDirection(x),v++}else if(E.isRectAreaLight){const A=i.rectArea[_];A.position.setFromMatrixPosition(E.matrixWorld),A.position.applyMatrix4(x),l.identity(),a.copy(E.matrixWorld),a.premultiply(x),l.extractRotation(a),A.halfWidth.set(E.width*.5,0,0),A.halfHeight.set(0,E.height*.5,0),A.halfWidth.applyMatrix4(l),A.halfHeight.applyMatrix4(l),_++}else if(E.isPointLight){const A=i.point[g];A.position.setFromMatrixPosition(E.matrixWorld),A.position.applyMatrix4(x),g++}else if(E.isHemisphereLight){const A=i.hemi[b];A.direction.setFromMatrixPosition(E.matrixWorld),A.direction.transformDirection(x),b++}}}return{setup:c,setupView:u,state:i}}function vC(t,e){const n=new mq(t,e),r=[],i=[];function s(){r.length=0,i.length=0}function a(f){r.push(f)}function l(f){i.push(f)}function c(f){n.setup(r,f)}function u(f){n.setupView(r,f)}return{init:s,state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:c,setupLightsView:u,pushLight:a,pushShadow:l}}function gq(t,e){let n=new WeakMap;function r(s,a=0){const l=n.get(s);let c;return l===void 0?(c=new vC(t,e),n.set(s,[c])):a>=l.length?(c=new vC(t,e),l.push(c)):c=l[a],c}function i(){n=new WeakMap}return{get:r,dispose:i}}class cv extends Cr{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=C4,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class uv extends Cr{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const xq=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,vq=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function yq(t,e,n){let r=new jp;const i=new ke,s=new ke,a=new Yt,l=new cv({depthPacking:WS}),c=new uv,u={},d=n.maxTextureSize,f={[ya]:Hr,[Hr]:ya,[Gi]:Gi},m=new _a({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new ke},radius:{value:4}},vertexShader:xq,fragmentShader:vq}),g=m.clone();g.defines.HORIZONTAL_PASS=1;const v=new At;v.setAttribute("position",new qt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const _=new Fn(v,m),b=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=nv;let x=this.type;this.render=function(T,C,j){if(b.enabled===!1||b.autoUpdate===!1&&b.needsUpdate===!1||T.length===0)return;const k=t.getRenderTarget(),P=t.getActiveCubeFace(),H=t.getActiveMipmapLevel(),B=t.state;B.setBlending(Ja),B.buffers.color.setClear(1,1,1,1),B.buffers.depth.setTest(!0),B.setScissorTest(!1);const Y=x!==ks&&this.type===ks,V=x===ks&&this.type!==ks;for(let Q=0,ee=T.length;Q<ee;Q++){const re=T[Q],I=re.shadow;if(I===void 0){console.warn("THREE.WebGLShadowMap:",re,"has no shadow.");continue}if(I.autoUpdate===!1&&I.needsUpdate===!1)continue;i.copy(I.mapSize);const F=I.getFrameExtents();if(i.multiply(F),s.copy(I.mapSize),(i.x>d||i.y>d)&&(i.x>d&&(s.x=Math.floor(d/F.x),i.x=s.x*F.x,I.mapSize.x=s.x),i.y>d&&(s.y=Math.floor(d/F.y),i.y=s.y*F.y,I.mapSize.y=s.y)),I.map===null||Y===!0||V===!0){const U=this.type!==ks?{minFilter:Wn,magFilter:Wn}:{};I.map!==null&&I.map.dispose(),I.map=new Hs(i.x,i.y,U),I.map.texture.name=re.name+".shadowMap",I.camera.updateProjectionMatrix()}t.setRenderTarget(I.map),t.clear();const z=I.getViewportCount();for(let U=0;U<z;U++){const Z=I.getViewport(U);a.set(s.x*Z.x,s.y*Z.y,s.x*Z.z,s.y*Z.w),B.viewport(a),I.updateMatrices(re,U),r=I.getFrustum(),E(C,j,I.camera,re,this.type)}I.isPointLightShadow!==!0&&this.type===ks&&y(I,j),I.needsUpdate=!1}x=this.type,b.needsUpdate=!1,t.setRenderTarget(k,P,H)};function y(T,C){const j=e.update(_);m.defines.VSM_SAMPLES!==T.blurSamples&&(m.defines.VSM_SAMPLES=T.blurSamples,g.defines.VSM_SAMPLES=T.blurSamples,m.needsUpdate=!0,g.needsUpdate=!0),T.mapPass===null&&(T.mapPass=new Hs(i.x,i.y)),m.uniforms.shadow_pass.value=T.map.texture,m.uniforms.resolution.value=T.mapSize,m.uniforms.radius.value=T.radius,t.setRenderTarget(T.mapPass),t.clear(),t.renderBufferDirect(C,null,j,m,_,null),g.uniforms.shadow_pass.value=T.mapPass.texture,g.uniforms.resolution.value=T.mapSize,g.uniforms.radius.value=T.radius,t.setRenderTarget(T.map),t.clear(),t.renderBufferDirect(C,null,j,g,_,null)}function S(T,C,j,k){let P=null;const H=j.isPointLight===!0?T.customDistanceMaterial:T.customDepthMaterial;if(H!==void 0)P=H;else if(P=j.isPointLight===!0?c:l,t.localClippingEnabled&&C.clipShadows===!0&&Array.isArray(C.clippingPlanes)&&C.clippingPlanes.length!==0||C.displacementMap&&C.displacementScale!==0||C.alphaMap&&C.alphaTest>0||C.map&&C.alphaTest>0){const B=P.uuid,Y=C.uuid;let V=u[B];V===void 0&&(V={},u[B]=V);let Q=V[Y];Q===void 0&&(Q=P.clone(),V[Y]=Q,C.addEventListener("dispose",A)),P=Q}if(P.visible=C.visible,P.wireframe=C.wireframe,k===ks?P.side=C.shadowSide!==null?C.shadowSide:C.side:P.side=C.shadowSide!==null?C.shadowSide:f[C.side],P.alphaMap=C.alphaMap,P.alphaTest=C.alphaTest,P.map=C.map,P.clipShadows=C.clipShadows,P.clippingPlanes=C.clippingPlanes,P.clipIntersection=C.clipIntersection,P.displacementMap=C.displacementMap,P.displacementScale=C.displacementScale,P.displacementBias=C.displacementBias,P.wireframeLinewidth=C.wireframeLinewidth,P.linewidth=C.linewidth,j.isPointLight===!0&&P.isMeshDistanceMaterial===!0){const B=t.properties.get(P);B.light=j}return P}function E(T,C,j,k,P){if(T.visible===!1)return;if(T.layers.test(C.layers)&&(T.isMesh||T.isLine||T.isPoints)&&(T.castShadow||T.receiveShadow&&P===ks)&&(!T.frustumCulled||r.intersectsObject(T))){T.modelViewMatrix.multiplyMatrices(j.matrixWorldInverse,T.matrixWorld);const Y=e.update(T),V=T.material;if(Array.isArray(V)){const Q=Y.groups;for(let ee=0,re=Q.length;ee<re;ee++){const I=Q[ee],F=V[I.materialIndex];if(F&&F.visible){const z=S(T,F,k,P);T.onBeforeShadow(t,T,C,j,Y,z,I),t.renderBufferDirect(j,null,Y,z,T,I),T.onAfterShadow(t,T,C,j,Y,z,I)}}}else if(V.visible){const Q=S(T,V,k,P);T.onBeforeShadow(t,T,C,j,Y,Q,null),t.renderBufferDirect(j,null,Y,Q,T,null),T.onAfterShadow(t,T,C,j,Y,Q,null)}}const B=T.children;for(let Y=0,V=B.length;Y<V;Y++)E(B[Y],C,j,k,P)}function A(T){T.target.removeEventListener("dispose",A);for(const j in u){const k=u[j],P=T.target.uuid;P in k&&(k[P].dispose(),delete k[P])}}}function bq(t,e,n){const r=n.isWebGL2;function i(){let te=!1;const Ve=new Yt;let qe=null;const lt=new Yt(0,0,0,0);return{setMask:function(Je){qe!==Je&&!te&&(t.colorMask(Je,Je,Je,Je),qe=Je)},setLocked:function(Je){te=Je},setClear:function(Je,gt,ut,zt,Mt){Mt===!0&&(Je*=zt,gt*=zt,ut*=zt),Ve.set(Je,gt,ut,zt),lt.equals(Ve)===!1&&(t.clearColor(Je,gt,ut,zt),lt.copy(Ve))},reset:function(){te=!1,qe=null,lt.set(-1,0,0,0)}}}function s(){let te=!1,Ve=null,qe=null,lt=null;return{setTest:function(Je){Je?je(t.DEPTH_TEST):Le(t.DEPTH_TEST)},setMask:function(Je){Ve!==Je&&!te&&(t.depthMask(Je),Ve=Je)},setFunc:function(Je){if(qe!==Je){switch(Je){case r4:t.depthFunc(t.NEVER);break;case i4:t.depthFunc(t.ALWAYS);break;case s4:t.depthFunc(t.LESS);break;case $f:t.depthFunc(t.LEQUAL);break;case a4:t.depthFunc(t.EQUAL);break;case o4:t.depthFunc(t.GEQUAL);break;case l4:t.depthFunc(t.GREATER);break;case c4:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}qe=Je}},setLocked:function(Je){te=Je},setClear:function(Je){lt!==Je&&(t.clearDepth(Je),lt=Je)},reset:function(){te=!1,Ve=null,qe=null,lt=null}}}function a(){let te=!1,Ve=null,qe=null,lt=null,Je=null,gt=null,ut=null,zt=null,Mt=null;return{setTest:function(ft){te||(ft?je(t.STENCIL_TEST):Le(t.STENCIL_TEST))},setMask:function(ft){Ve!==ft&&!te&&(t.stencilMask(ft),Ve=ft)},setFunc:function(ft,$t,sn){(qe!==ft||lt!==$t||Je!==sn)&&(t.stencilFunc(ft,$t,sn),qe=ft,lt=$t,Je=sn)},setOp:function(ft,$t,sn){(gt!==ft||ut!==$t||zt!==sn)&&(t.stencilOp(ft,$t,sn),gt=ft,ut=$t,zt=sn)},setLocked:function(ft){te=ft},setClear:function(ft){Mt!==ft&&(t.clearStencil(ft),Mt=ft)},reset:function(){te=!1,Ve=null,qe=null,lt=null,Je=null,gt=null,ut=null,zt=null,Mt=null}}}const l=new i,c=new s,u=new a,d=new WeakMap,f=new WeakMap;let m={},g={},v=new WeakMap,_=[],b=null,x=!1,y=null,S=null,E=null,A=null,T=null,C=null,j=null,k=new nt(0,0,0),P=0,H=!1,B=null,Y=null,V=null,Q=null,ee=null;const re=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let I=!1,F=0;const z=t.getParameter(t.VERSION);z.indexOf("WebGL")!==-1?(F=parseFloat(/^WebGL (\d)/.exec(z)[1]),I=F>=1):z.indexOf("OpenGL ES")!==-1&&(F=parseFloat(/^OpenGL ES (\d)/.exec(z)[1]),I=F>=2);let U=null,Z={};const K=t.getParameter(t.SCISSOR_BOX),ne=t.getParameter(t.VIEWPORT),ie=new Yt().fromArray(K),de=new Yt().fromArray(ne);function ae(te,Ve,qe,lt){const Je=new Uint8Array(4),gt=t.createTexture();t.bindTexture(te,gt),t.texParameteri(te,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(te,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let ut=0;ut<qe;ut++)r&&(te===t.TEXTURE_3D||te===t.TEXTURE_2D_ARRAY)?t.texImage3D(Ve,0,t.RGBA,1,1,lt,0,t.RGBA,t.UNSIGNED_BYTE,Je):t.texImage2D(Ve+ut,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,Je);return gt}const _e={};_e[t.TEXTURE_2D]=ae(t.TEXTURE_2D,t.TEXTURE_2D,1),_e[t.TEXTURE_CUBE_MAP]=ae(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),r&&(_e[t.TEXTURE_2D_ARRAY]=ae(t.TEXTURE_2D_ARRAY,t.TEXTURE_2D_ARRAY,1,1),_e[t.TEXTURE_3D]=ae(t.TEXTURE_3D,t.TEXTURE_3D,1,1)),l.setClear(0,0,0,1),c.setClear(1),u.setClear(0),je(t.DEPTH_TEST),c.setFunc($f),ge(!1),O(q2),je(t.CULL_FACE),he(Ja);function je(te){m[te]!==!0&&(t.enable(te),m[te]=!0)}function Le(te){m[te]!==!1&&(t.disable(te),m[te]=!1)}function Te(te,Ve){return g[te]!==Ve?(t.bindFramebuffer(te,Ve),g[te]=Ve,r&&(te===t.DRAW_FRAMEBUFFER&&(g[t.FRAMEBUFFER]=Ve),te===t.FRAMEBUFFER&&(g[t.DRAW_FRAMEBUFFER]=Ve)),!0):!1}function G(te,Ve){let qe=_,lt=!1;if(te)if(qe=v.get(Ve),qe===void 0&&(qe=[],v.set(Ve,qe)),te.isWebGLMultipleRenderTargets){const Je=te.texture;if(qe.length!==Je.length||qe[0]!==t.COLOR_ATTACHMENT0){for(let gt=0,ut=Je.length;gt<ut;gt++)qe[gt]=t.COLOR_ATTACHMENT0+gt;qe.length=Je.length,lt=!0}}else qe[0]!==t.COLOR_ATTACHMENT0&&(qe[0]=t.COLOR_ATTACHMENT0,lt=!0);else qe[0]!==t.BACK&&(qe[0]=t.BACK,lt=!0);lt&&(n.isWebGL2?t.drawBuffers(qe):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(qe))}function Ee(te){return b!==te?(t.useProgram(te),b=te,!0):!1}const me={[Go]:t.FUNC_ADD,[VL]:t.FUNC_SUBTRACT,[HL]:t.FUNC_REVERSE_SUBTRACT};if(r)me[J2]=t.MIN,me[Q2]=t.MAX;else{const te=e.get("EXT_blend_minmax");te!==null&&(me[J2]=te.MIN_EXT,me[Q2]=te.MAX_EXT)}const ve={[GL]:t.ZERO,[WL]:t.ONE,[XL]:t.SRC_COLOR,[px]:t.SRC_ALPHA,[JL]:t.SRC_ALPHA_SATURATE,[ZL]:t.DST_COLOR,[qL]:t.DST_ALPHA,[YL]:t.ONE_MINUS_SRC_COLOR,[mx]:t.ONE_MINUS_SRC_ALPHA,[KL]:t.ONE_MINUS_DST_COLOR,[$L]:t.ONE_MINUS_DST_ALPHA,[QL]:t.CONSTANT_COLOR,[e4]:t.ONE_MINUS_CONSTANT_COLOR,[t4]:t.CONSTANT_ALPHA,[n4]:t.ONE_MINUS_CONSTANT_ALPHA};function he(te,Ve,qe,lt,Je,gt,ut,zt,Mt,ft){if(te===Ja){x===!0&&(Le(t.BLEND),x=!1);return}if(x===!1&&(je(t.BLEND),x=!0),te!==BL){if(te!==y||ft!==H){if((S!==Go||T!==Go)&&(t.blendEquation(t.FUNC_ADD),S=Go,T=Go),ft)switch(te){case _c:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case $2:t.blendFunc(t.ONE,t.ONE);break;case Z2:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case K2:t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",te);break}else switch(te){case _c:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case $2:t.blendFunc(t.SRC_ALPHA,t.ONE);break;case Z2:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case K2:t.blendFunc(t.ZERO,t.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",te);break}E=null,A=null,C=null,j=null,k.set(0,0,0),P=0,y=te,H=ft}return}Je=Je||Ve,gt=gt||qe,ut=ut||lt,(Ve!==S||Je!==T)&&(t.blendEquationSeparate(me[Ve],me[Je]),S=Ve,T=Je),(qe!==E||lt!==A||gt!==C||ut!==j)&&(t.blendFuncSeparate(ve[qe],ve[lt],ve[gt],ve[ut]),E=qe,A=lt,C=gt,j=ut),(zt.equals(k)===!1||Mt!==P)&&(t.blendColor(zt.r,zt.g,zt.b,Mt),k.copy(zt),P=Mt),y=te,H=!1}function We(te,Ve){te.side===Gi?Le(t.CULL_FACE):je(t.CULL_FACE);let qe=te.side===Hr;Ve&&(qe=!qe),ge(qe),te.blending===_c&&te.transparent===!1?he(Ja):he(te.blending,te.blendEquation,te.blendSrc,te.blendDst,te.blendEquationAlpha,te.blendSrcAlpha,te.blendDstAlpha,te.blendColor,te.blendAlpha,te.premultipliedAlpha),c.setFunc(te.depthFunc),c.setTest(te.depthTest),c.setMask(te.depthWrite),l.setMask(te.colorWrite);const lt=te.stencilWrite;u.setTest(lt),lt&&(u.setMask(te.stencilWriteMask),u.setFunc(te.stencilFunc,te.stencilRef,te.stencilFuncMask),u.setOp(te.stencilFail,te.stencilZFail,te.stencilZPass)),q(te.polygonOffset,te.polygonOffsetFactor,te.polygonOffsetUnits),te.alphaToCoverage===!0?je(t.SAMPLE_ALPHA_TO_COVERAGE):Le(t.SAMPLE_ALPHA_TO_COVERAGE)}function ge(te){B!==te&&(te?t.frontFace(t.CW):t.frontFace(t.CCW),B=te)}function O(te){te!==OL?(je(t.CULL_FACE),te!==Y&&(te===q2?t.cullFace(t.BACK):te===FL?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):Le(t.CULL_FACE),Y=te}function L(te){te!==V&&(I&&t.lineWidth(te),V=te)}function q(te,Ve,qe){te?(je(t.POLYGON_OFFSET_FILL),(Q!==Ve||ee!==qe)&&(t.polygonOffset(Ve,qe),Q=Ve,ee=qe)):Le(t.POLYGON_OFFSET_FILL)}function fe(te){te?je(t.SCISSOR_TEST):Le(t.SCISSOR_TEST)}function le(te){te===void 0&&(te=t.TEXTURE0+re-1),U!==te&&(t.activeTexture(te),U=te)}function ce(te,Ve,qe){qe===void 0&&(U===null?qe=t.TEXTURE0+re-1:qe=U);let lt=Z[qe];lt===void 0&&(lt={type:void 0,texture:void 0},Z[qe]=lt),(lt.type!==te||lt.texture!==Ve)&&(U!==qe&&(t.activeTexture(qe),U=qe),t.bindTexture(te,Ve||_e[te]),lt.type=te,lt.texture=Ve)}function Pe(){const te=Z[U];te!==void 0&&te.type!==void 0&&(t.bindTexture(te.type,null),te.type=void 0,te.texture=void 0)}function Ue(){try{t.compressedTexImage2D.apply(t,arguments)}catch(te){console.error("THREE.WebGLState:",te)}}function Fe(){try{t.compressedTexImage3D.apply(t,arguments)}catch(te){console.error("THREE.WebGLState:",te)}}function ze(){try{t.texSubImage2D.apply(t,arguments)}catch(te){console.error("THREE.WebGLState:",te)}}function $e(){try{t.texSubImage3D.apply(t,arguments)}catch(te){console.error("THREE.WebGLState:",te)}}function Ae(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(te){console.error("THREE.WebGLState:",te)}}function at(){try{t.compressedTexSubImage3D.apply(t,arguments)}catch(te){console.error("THREE.WebGLState:",te)}}function Xe(){try{t.texStorage2D.apply(t,arguments)}catch(te){console.error("THREE.WebGLState:",te)}}function Ke(){try{t.texStorage3D.apply(t,arguments)}catch(te){console.error("THREE.WebGLState:",te)}}function Be(){try{t.texImage2D.apply(t,arguments)}catch(te){console.error("THREE.WebGLState:",te)}}function Re(){try{t.texImage3D.apply(t,arguments)}catch(te){console.error("THREE.WebGLState:",te)}}function J(te){ie.equals(te)===!1&&(t.scissor(te.x,te.y,te.z,te.w),ie.copy(te))}function we(te){de.equals(te)===!1&&(t.viewport(te.x,te.y,te.z,te.w),de.copy(te))}function Ge(te,Ve){let qe=f.get(Ve);qe===void 0&&(qe=new WeakMap,f.set(Ve,qe));let lt=qe.get(te);lt===void 0&&(lt=t.getUniformBlockIndex(Ve,te.name),qe.set(te,lt))}function De(te,Ve){const lt=f.get(Ve).get(te);d.get(Ve)!==lt&&(t.uniformBlockBinding(Ve,lt,te.__bindingPointIndex),d.set(Ve,lt))}function Ce(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.blendColor(0,0,0,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),r===!0&&(t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),m={},U=null,Z={},g={},v=new WeakMap,_=[],b=null,x=!1,y=null,S=null,E=null,A=null,T=null,C=null,j=null,k=new nt(0,0,0),P=0,H=!1,B=null,Y=null,V=null,Q=null,ee=null,ie.set(0,0,t.canvas.width,t.canvas.height),de.set(0,0,t.canvas.width,t.canvas.height),l.reset(),c.reset(),u.reset()}return{buffers:{color:l,depth:c,stencil:u},enable:je,disable:Le,bindFramebuffer:Te,drawBuffers:G,useProgram:Ee,setBlending:he,setMaterial:We,setFlipSided:ge,setCullFace:O,setLineWidth:L,setPolygonOffset:q,setScissorTest:fe,activeTexture:le,bindTexture:ce,unbindTexture:Pe,compressedTexImage2D:Ue,compressedTexImage3D:Fe,texImage2D:Be,texImage3D:Re,updateUBOMapping:Ge,uniformBlockBinding:De,texStorage2D:Xe,texStorage3D:Ke,texSubImage2D:ze,texSubImage3D:$e,compressedTexSubImage2D:Ae,compressedTexSubImage3D:at,scissor:J,viewport:we,reset:Ce}}function _q(t,e,n,r,i,s,a){const l=i.isWebGL2,c=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,u=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),d=new WeakMap;let f;const m=new WeakMap;let g=!1;try{g=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function v(O,L){return g?new OffscreenCanvas(O,L):op("canvas")}function _(O,L,q,fe){let le=1;if((O.width>fe||O.height>fe)&&(le=fe/Math.max(O.width,O.height)),le<1||L===!0)if(typeof HTMLImageElement<"u"&&O instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&O instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&O instanceof ImageBitmap){const ce=L?vx:Math.floor,Pe=ce(le*O.width),Ue=ce(le*O.height);f===void 0&&(f=v(Pe,Ue));const Fe=q?v(Pe,Ue):f;return Fe.width=Pe,Fe.height=Ue,Fe.getContext("2d").drawImage(O,0,0,Pe,Ue),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+O.width+"x"+O.height+") to ("+Pe+"x"+Ue+")."),Fe}else return"data"in O&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+O.width+"x"+O.height+")."),O;return O}function b(O){return A_(O.width)&&A_(O.height)}function x(O){return l?!1:O.wrapS!==Br||O.wrapT!==Br||O.minFilter!==Wn&&O.minFilter!==Mn}function y(O,L){return O.generateMipmaps&&L&&O.minFilter!==Wn&&O.minFilter!==Mn}function S(O){t.generateMipmap(O)}function E(O,L,q,fe,le=!1){if(l===!1)return L;if(O!==null){if(t[O]!==void 0)return t[O];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+O+"'")}let ce=L;if(L===t.RED&&(q===t.FLOAT&&(ce=t.R32F),q===t.HALF_FLOAT&&(ce=t.R16F),q===t.UNSIGNED_BYTE&&(ce=t.R8)),L===t.RED_INTEGER&&(q===t.UNSIGNED_BYTE&&(ce=t.R8UI),q===t.UNSIGNED_SHORT&&(ce=t.R16UI),q===t.UNSIGNED_INT&&(ce=t.R32UI),q===t.BYTE&&(ce=t.R8I),q===t.SHORT&&(ce=t.R16I),q===t.INT&&(ce=t.R32I)),L===t.RG&&(q===t.FLOAT&&(ce=t.RG32F),q===t.HALF_FLOAT&&(ce=t.RG16F),q===t.UNSIGNED_BYTE&&(ce=t.RG8)),L===t.RGBA){const Pe=le?rp:Jt.getTransfer(fe);q===t.FLOAT&&(ce=t.RGBA32F),q===t.HALF_FLOAT&&(ce=t.RGBA16F),q===t.UNSIGNED_BYTE&&(ce=Pe===on?t.SRGB8_ALPHA8:t.RGBA8),q===t.UNSIGNED_SHORT_4_4_4_4&&(ce=t.RGBA4),q===t.UNSIGNED_SHORT_5_5_5_1&&(ce=t.RGB5_A1)}return(ce===t.R16F||ce===t.R32F||ce===t.RG16F||ce===t.RG32F||ce===t.RGBA16F||ce===t.RGBA32F)&&e.get("EXT_color_buffer_float"),ce}function A(O,L,q){return y(O,q)===!0||O.isFramebufferTexture&&O.minFilter!==Wn&&O.minFilter!==Mn?Math.log2(Math.max(L.width,L.height))+1:O.mipmaps!==void 0&&O.mipmaps.length>0?O.mipmaps.length:O.isCompressedTexture&&Array.isArray(O.image)?L.mipmaps.length:1}function T(O){return O===Wn||O===gx||O===vf?t.NEAREST:t.LINEAR}function C(O){const L=O.target;L.removeEventListener("dispose",C),k(L),L.isVideoTexture&&d.delete(L)}function j(O){const L=O.target;L.removeEventListener("dispose",j),H(L)}function k(O){const L=r.get(O);if(L.__webglInit===void 0)return;const q=O.source,fe=m.get(q);if(fe){const le=fe[L.__cacheKey];le.usedTimes--,le.usedTimes===0&&P(O),Object.keys(fe).length===0&&m.delete(q)}r.remove(O)}function P(O){const L=r.get(O);t.deleteTexture(L.__webglTexture);const q=O.source,fe=m.get(q);delete fe[L.__cacheKey],a.memory.textures--}function H(O){const L=O.texture,q=r.get(O),fe=r.get(L);if(fe.__webglTexture!==void 0&&(t.deleteTexture(fe.__webglTexture),a.memory.textures--),O.depthTexture&&O.depthTexture.dispose(),O.isWebGLCubeRenderTarget)for(let le=0;le<6;le++){if(Array.isArray(q.__webglFramebuffer[le]))for(let ce=0;ce<q.__webglFramebuffer[le].length;ce++)t.deleteFramebuffer(q.__webglFramebuffer[le][ce]);else t.deleteFramebuffer(q.__webglFramebuffer[le]);q.__webglDepthbuffer&&t.deleteRenderbuffer(q.__webglDepthbuffer[le])}else{if(Array.isArray(q.__webglFramebuffer))for(let le=0;le<q.__webglFramebuffer.length;le++)t.deleteFramebuffer(q.__webglFramebuffer[le]);else t.deleteFramebuffer(q.__webglFramebuffer);if(q.__webglDepthbuffer&&t.deleteRenderbuffer(q.__webglDepthbuffer),q.__webglMultisampledFramebuffer&&t.deleteFramebuffer(q.__webglMultisampledFramebuffer),q.__webglColorRenderbuffer)for(let le=0;le<q.__webglColorRenderbuffer.length;le++)q.__webglColorRenderbuffer[le]&&t.deleteRenderbuffer(q.__webglColorRenderbuffer[le]);q.__webglDepthRenderbuffer&&t.deleteRenderbuffer(q.__webglDepthRenderbuffer)}if(O.isWebGLMultipleRenderTargets)for(let le=0,ce=L.length;le<ce;le++){const Pe=r.get(L[le]);Pe.__webglTexture&&(t.deleteTexture(Pe.__webglTexture),a.memory.textures--),r.remove(L[le])}r.remove(L),r.remove(O)}let B=0;function Y(){B=0}function V(){const O=B;return O>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+O+" texture units while this GPU supports only "+i.maxTextures),B+=1,O}function Q(O){const L=[];return L.push(O.wrapS),L.push(O.wrapT),L.push(O.wrapR||0),L.push(O.magFilter),L.push(O.minFilter),L.push(O.anisotropy),L.push(O.internalFormat),L.push(O.format),L.push(O.type),L.push(O.generateMipmaps),L.push(O.premultiplyAlpha),L.push(O.flipY),L.push(O.unpackAlignment),L.push(O.colorSpace),L.join()}function ee(O,L){const q=r.get(O);if(O.isVideoTexture&&We(O),O.isRenderTargetTexture===!1&&O.version>0&&q.__version!==O.version){const fe=O.image;if(fe===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(fe.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{ie(q,O,L);return}}n.bindTexture(t.TEXTURE_2D,q.__webglTexture,t.TEXTURE0+L)}function re(O,L){const q=r.get(O);if(O.version>0&&q.__version!==O.version){ie(q,O,L);return}n.bindTexture(t.TEXTURE_2D_ARRAY,q.__webglTexture,t.TEXTURE0+L)}function I(O,L){const q=r.get(O);if(O.version>0&&q.__version!==O.version){ie(q,O,L);return}n.bindTexture(t.TEXTURE_3D,q.__webglTexture,t.TEXTURE0+L)}function F(O,L){const q=r.get(O);if(O.version>0&&q.__version!==O.version){de(q,O,L);return}n.bindTexture(t.TEXTURE_CUBE_MAP,q.__webglTexture,t.TEXTURE0+L)}const z={[Jf]:t.REPEAT,[Br]:t.CLAMP_TO_EDGE,[Qf]:t.MIRRORED_REPEAT},U={[Wn]:t.NEAREST,[gx]:t.NEAREST_MIPMAP_NEAREST,[vf]:t.NEAREST_MIPMAP_LINEAR,[Mn]:t.LINEAR,[DS]:t.LINEAR_MIPMAP_NEAREST,[fl]:t.LINEAR_MIPMAP_LINEAR},Z={[P4]:t.NEVER,[U4]:t.ALWAYS,[R4]:t.LESS,[XS]:t.LEQUAL,[j4]:t.EQUAL,[I4]:t.GEQUAL,[L4]:t.GREATER,[D4]:t.NOTEQUAL};function K(O,L,q){if(q?(t.texParameteri(O,t.TEXTURE_WRAP_S,z[L.wrapS]),t.texParameteri(O,t.TEXTURE_WRAP_T,z[L.wrapT]),(O===t.TEXTURE_3D||O===t.TEXTURE_2D_ARRAY)&&t.texParameteri(O,t.TEXTURE_WRAP_R,z[L.wrapR]),t.texParameteri(O,t.TEXTURE_MAG_FILTER,U[L.magFilter]),t.texParameteri(O,t.TEXTURE_MIN_FILTER,U[L.minFilter])):(t.texParameteri(O,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(O,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),(O===t.TEXTURE_3D||O===t.TEXTURE_2D_ARRAY)&&t.texParameteri(O,t.TEXTURE_WRAP_R,t.CLAMP_TO_EDGE),(L.wrapS!==Br||L.wrapT!==Br)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(O,t.TEXTURE_MAG_FILTER,T(L.magFilter)),t.texParameteri(O,t.TEXTURE_MIN_FILTER,T(L.minFilter)),L.minFilter!==Wn&&L.minFilter!==Mn&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),L.compareFunction&&(t.texParameteri(O,t.TEXTURE_COMPARE_MODE,t.COMPARE_REF_TO_TEXTURE),t.texParameteri(O,t.TEXTURE_COMPARE_FUNC,Z[L.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){const fe=e.get("EXT_texture_filter_anisotropic");if(L.magFilter===Wn||L.minFilter!==vf&&L.minFilter!==fl||L.type===Ls&&e.has("OES_texture_float_linear")===!1||l===!1&&L.type===Td&&e.has("OES_texture_half_float_linear")===!1)return;(L.anisotropy>1||r.get(L).__currentAnisotropy)&&(t.texParameterf(O,fe.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(L.anisotropy,i.getMaxAnisotropy())),r.get(L).__currentAnisotropy=L.anisotropy)}}function ne(O,L){let q=!1;O.__webglInit===void 0&&(O.__webglInit=!0,L.addEventListener("dispose",C));const fe=L.source;let le=m.get(fe);le===void 0&&(le={},m.set(fe,le));const ce=Q(L);if(ce!==O.__cacheKey){le[ce]===void 0&&(le[ce]={texture:t.createTexture(),usedTimes:0},a.memory.textures++,q=!0),le[ce].usedTimes++;const Pe=le[O.__cacheKey];Pe!==void 0&&(le[O.__cacheKey].usedTimes--,Pe.usedTimes===0&&P(L)),O.__cacheKey=ce,O.__webglTexture=le[ce].texture}return q}function ie(O,L,q){let fe=t.TEXTURE_2D;(L.isDataArrayTexture||L.isCompressedArrayTexture)&&(fe=t.TEXTURE_2D_ARRAY),L.isData3DTexture&&(fe=t.TEXTURE_3D);const le=ne(O,L),ce=L.source;n.bindTexture(fe,O.__webglTexture,t.TEXTURE0+q);const Pe=r.get(ce);if(ce.version!==Pe.__version||le===!0){n.activeTexture(t.TEXTURE0+q);const Ue=Jt.getPrimaries(Jt.workingColorSpace),Fe=L.colorSpace===Wi?null:Jt.getPrimaries(L.colorSpace),ze=L.colorSpace===Wi||Ue===Fe?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,L.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,L.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,L.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,ze);const $e=x(L)&&b(L.image)===!1;let Ae=_(L.image,$e,!1,i.maxTextureSize);Ae=ge(L,Ae);const at=b(Ae)||l,Xe=s.convert(L.format,L.colorSpace);let Ke=s.convert(L.type),Be=E(L.internalFormat,Xe,Ke,L.colorSpace,L.isVideoTexture);K(fe,L,at);let Re;const J=L.mipmaps,we=l&&L.isVideoTexture!==!0&&Be!==VS,Ge=Pe.__version===void 0||le===!0,De=A(L,Ae,at);if(L.isDepthTexture)Be=t.DEPTH_COMPONENT,l?L.type===Ls?Be=t.DEPTH_COMPONENT32F:L.type===$a?Be=t.DEPTH_COMPONENT24:L.type===rl?Be=t.DEPTH24_STENCIL8:Be=t.DEPTH_COMPONENT16:L.type===Ls&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),L.format===il&&Be===t.DEPTH_COMPONENT&&L.type!==iv&&L.type!==$a&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),L.type=$a,Ke=s.convert(L.type)),L.format===Rc&&Be===t.DEPTH_COMPONENT&&(Be=t.DEPTH_STENCIL,L.type!==rl&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),L.type=rl,Ke=s.convert(L.type))),Ge&&(we?n.texStorage2D(t.TEXTURE_2D,1,Be,Ae.width,Ae.height):n.texImage2D(t.TEXTURE_2D,0,Be,Ae.width,Ae.height,0,Xe,Ke,null));else if(L.isDataTexture)if(J.length>0&&at){we&&Ge&&n.texStorage2D(t.TEXTURE_2D,De,Be,J[0].width,J[0].height);for(let Ce=0,te=J.length;Ce<te;Ce++)Re=J[Ce],we?n.texSubImage2D(t.TEXTURE_2D,Ce,0,0,Re.width,Re.height,Xe,Ke,Re.data):n.texImage2D(t.TEXTURE_2D,Ce,Be,Re.width,Re.height,0,Xe,Ke,Re.data);L.generateMipmaps=!1}else we?(Ge&&n.texStorage2D(t.TEXTURE_2D,De,Be,Ae.width,Ae.height),n.texSubImage2D(t.TEXTURE_2D,0,0,0,Ae.width,Ae.height,Xe,Ke,Ae.data)):n.texImage2D(t.TEXTURE_2D,0,Be,Ae.width,Ae.height,0,Xe,Ke,Ae.data);else if(L.isCompressedTexture)if(L.isCompressedArrayTexture){we&&Ge&&n.texStorage3D(t.TEXTURE_2D_ARRAY,De,Be,J[0].width,J[0].height,Ae.depth);for(let Ce=0,te=J.length;Ce<te;Ce++)Re=J[Ce],L.format!==oi?Xe!==null?we?n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,Ce,0,0,0,Re.width,Re.height,Ae.depth,Xe,Re.data,0,0):n.compressedTexImage3D(t.TEXTURE_2D_ARRAY,Ce,Be,Re.width,Re.height,Ae.depth,0,Re.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):we?n.texSubImage3D(t.TEXTURE_2D_ARRAY,Ce,0,0,0,Re.width,Re.height,Ae.depth,Xe,Ke,Re.data):n.texImage3D(t.TEXTURE_2D_ARRAY,Ce,Be,Re.width,Re.height,Ae.depth,0,Xe,Ke,Re.data)}else{we&&Ge&&n.texStorage2D(t.TEXTURE_2D,De,Be,J[0].width,J[0].height);for(let Ce=0,te=J.length;Ce<te;Ce++)Re=J[Ce],L.format!==oi?Xe!==null?we?n.compressedTexSubImage2D(t.TEXTURE_2D,Ce,0,0,Re.width,Re.height,Xe,Re.data):n.compressedTexImage2D(t.TEXTURE_2D,Ce,Be,Re.width,Re.height,0,Re.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):we?n.texSubImage2D(t.TEXTURE_2D,Ce,0,0,Re.width,Re.height,Xe,Ke,Re.data):n.texImage2D(t.TEXTURE_2D,Ce,Be,Re.width,Re.height,0,Xe,Ke,Re.data)}else if(L.isDataArrayTexture)we?(Ge&&n.texStorage3D(t.TEXTURE_2D_ARRAY,De,Be,Ae.width,Ae.height,Ae.depth),n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,Ae.width,Ae.height,Ae.depth,Xe,Ke,Ae.data)):n.texImage3D(t.TEXTURE_2D_ARRAY,0,Be,Ae.width,Ae.height,Ae.depth,0,Xe,Ke,Ae.data);else if(L.isData3DTexture)we?(Ge&&n.texStorage3D(t.TEXTURE_3D,De,Be,Ae.width,Ae.height,Ae.depth),n.texSubImage3D(t.TEXTURE_3D,0,0,0,0,Ae.width,Ae.height,Ae.depth,Xe,Ke,Ae.data)):n.texImage3D(t.TEXTURE_3D,0,Be,Ae.width,Ae.height,Ae.depth,0,Xe,Ke,Ae.data);else if(L.isFramebufferTexture){if(Ge)if(we)n.texStorage2D(t.TEXTURE_2D,De,Be,Ae.width,Ae.height);else{let Ce=Ae.width,te=Ae.height;for(let Ve=0;Ve<De;Ve++)n.texImage2D(t.TEXTURE_2D,Ve,Be,Ce,te,0,Xe,Ke,null),Ce>>=1,te>>=1}}else if(J.length>0&&at){we&&Ge&&n.texStorage2D(t.TEXTURE_2D,De,Be,J[0].width,J[0].height);for(let Ce=0,te=J.length;Ce<te;Ce++)Re=J[Ce],we?n.texSubImage2D(t.TEXTURE_2D,Ce,0,0,Xe,Ke,Re):n.texImage2D(t.TEXTURE_2D,Ce,Be,Xe,Ke,Re);L.generateMipmaps=!1}else we?(Ge&&n.texStorage2D(t.TEXTURE_2D,De,Be,Ae.width,Ae.height),n.texSubImage2D(t.TEXTURE_2D,0,0,0,Xe,Ke,Ae)):n.texImage2D(t.TEXTURE_2D,0,Be,Xe,Ke,Ae);y(L,at)&&S(fe),Pe.__version=ce.version,L.onUpdate&&L.onUpdate(L)}O.__version=L.version}function de(O,L,q){if(L.image.length!==6)return;const fe=ne(O,L),le=L.source;n.bindTexture(t.TEXTURE_CUBE_MAP,O.__webglTexture,t.TEXTURE0+q);const ce=r.get(le);if(le.version!==ce.__version||fe===!0){n.activeTexture(t.TEXTURE0+q);const Pe=Jt.getPrimaries(Jt.workingColorSpace),Ue=L.colorSpace===Wi?null:Jt.getPrimaries(L.colorSpace),Fe=L.colorSpace===Wi||Pe===Ue?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,L.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,L.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,L.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,Fe);const ze=L.isCompressedTexture||L.image[0].isCompressedTexture,$e=L.image[0]&&L.image[0].isDataTexture,Ae=[];for(let Ce=0;Ce<6;Ce++)!ze&&!$e?Ae[Ce]=_(L.image[Ce],!1,!0,i.maxCubemapSize):Ae[Ce]=$e?L.image[Ce].image:L.image[Ce],Ae[Ce]=ge(L,Ae[Ce]);const at=Ae[0],Xe=b(at)||l,Ke=s.convert(L.format,L.colorSpace),Be=s.convert(L.type),Re=E(L.internalFormat,Ke,Be,L.colorSpace),J=l&&L.isVideoTexture!==!0,we=ce.__version===void 0||fe===!0;let Ge=A(L,at,Xe);K(t.TEXTURE_CUBE_MAP,L,Xe);let De;if(ze){J&&we&&n.texStorage2D(t.TEXTURE_CUBE_MAP,Ge,Re,at.width,at.height);for(let Ce=0;Ce<6;Ce++){De=Ae[Ce].mipmaps;for(let te=0;te<De.length;te++){const Ve=De[te];L.format!==oi?Ke!==null?J?n.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ce,te,0,0,Ve.width,Ve.height,Ke,Ve.data):n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ce,te,Re,Ve.width,Ve.height,0,Ve.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):J?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ce,te,0,0,Ve.width,Ve.height,Ke,Be,Ve.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ce,te,Re,Ve.width,Ve.height,0,Ke,Be,Ve.data)}}}else{De=L.mipmaps,J&&we&&(De.length>0&&Ge++,n.texStorage2D(t.TEXTURE_CUBE_MAP,Ge,Re,Ae[0].width,Ae[0].height));for(let Ce=0;Ce<6;Ce++)if($e){J?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ce,0,0,0,Ae[Ce].width,Ae[Ce].height,Ke,Be,Ae[Ce].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ce,0,Re,Ae[Ce].width,Ae[Ce].height,0,Ke,Be,Ae[Ce].data);for(let te=0;te<De.length;te++){const qe=De[te].image[Ce].image;J?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ce,te+1,0,0,qe.width,qe.height,Ke,Be,qe.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ce,te+1,Re,qe.width,qe.height,0,Ke,Be,qe.data)}}else{J?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ce,0,0,0,Ke,Be,Ae[Ce]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ce,0,Re,Ke,Be,Ae[Ce]);for(let te=0;te<De.length;te++){const Ve=De[te];J?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ce,te+1,0,0,Ke,Be,Ve.image[Ce]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ce,te+1,Re,Ke,Be,Ve.image[Ce])}}}y(L,Xe)&&S(t.TEXTURE_CUBE_MAP),ce.__version=le.version,L.onUpdate&&L.onUpdate(L)}O.__version=L.version}function ae(O,L,q,fe,le,ce){const Pe=s.convert(q.format,q.colorSpace),Ue=s.convert(q.type),Fe=E(q.internalFormat,Pe,Ue,q.colorSpace);if(!r.get(L).__hasExternalTextures){const $e=Math.max(1,L.width>>ce),Ae=Math.max(1,L.height>>ce);le===t.TEXTURE_3D||le===t.TEXTURE_2D_ARRAY?n.texImage3D(le,ce,Fe,$e,Ae,L.depth,0,Pe,Ue,null):n.texImage2D(le,ce,Fe,$e,Ae,0,Pe,Ue,null)}n.bindFramebuffer(t.FRAMEBUFFER,O),he(L)?c.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,fe,le,r.get(q).__webglTexture,0,ve(L)):(le===t.TEXTURE_2D||le>=t.TEXTURE_CUBE_MAP_POSITIVE_X&&le<=t.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&t.framebufferTexture2D(t.FRAMEBUFFER,fe,le,r.get(q).__webglTexture,ce),n.bindFramebuffer(t.FRAMEBUFFER,null)}function _e(O,L,q){if(t.bindRenderbuffer(t.RENDERBUFFER,O),L.depthBuffer&&!L.stencilBuffer){let fe=l===!0?t.DEPTH_COMPONENT24:t.DEPTH_COMPONENT16;if(q||he(L)){const le=L.depthTexture;le&&le.isDepthTexture&&(le.type===Ls?fe=t.DEPTH_COMPONENT32F:le.type===$a&&(fe=t.DEPTH_COMPONENT24));const ce=ve(L);he(L)?c.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,ce,fe,L.width,L.height):t.renderbufferStorageMultisample(t.RENDERBUFFER,ce,fe,L.width,L.height)}else t.renderbufferStorage(t.RENDERBUFFER,fe,L.width,L.height);t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,O)}else if(L.depthBuffer&&L.stencilBuffer){const fe=ve(L);q&&he(L)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,fe,t.DEPTH24_STENCIL8,L.width,L.height):he(L)?c.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,fe,t.DEPTH24_STENCIL8,L.width,L.height):t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,L.width,L.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,O)}else{const fe=L.isWebGLMultipleRenderTargets===!0?L.texture:[L.texture];for(let le=0;le<fe.length;le++){const ce=fe[le],Pe=s.convert(ce.format,ce.colorSpace),Ue=s.convert(ce.type),Fe=E(ce.internalFormat,Pe,Ue,ce.colorSpace),ze=ve(L);q&&he(L)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,ze,Fe,L.width,L.height):he(L)?c.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,ze,Fe,L.width,L.height):t.renderbufferStorage(t.RENDERBUFFER,Fe,L.width,L.height)}}t.bindRenderbuffer(t.RENDERBUFFER,null)}function je(O,L){if(L&&L.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(t.FRAMEBUFFER,O),!(L.depthTexture&&L.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(L.depthTexture).__webglTexture||L.depthTexture.image.width!==L.width||L.depthTexture.image.height!==L.height)&&(L.depthTexture.image.width=L.width,L.depthTexture.image.height=L.height,L.depthTexture.needsUpdate=!0),ee(L.depthTexture,0);const fe=r.get(L.depthTexture).__webglTexture,le=ve(L);if(L.depthTexture.format===il)he(L)?c.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,fe,0,le):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,fe,0);else if(L.depthTexture.format===Rc)he(L)?c.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,fe,0,le):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,fe,0);else throw new Error("Unknown depthTexture format")}function Le(O){const L=r.get(O),q=O.isWebGLCubeRenderTarget===!0;if(O.depthTexture&&!L.__autoAllocateDepthBuffer){if(q)throw new Error("target.depthTexture not supported in Cube render targets");je(L.__webglFramebuffer,O)}else if(q){L.__webglDepthbuffer=[];for(let fe=0;fe<6;fe++)n.bindFramebuffer(t.FRAMEBUFFER,L.__webglFramebuffer[fe]),L.__webglDepthbuffer[fe]=t.createRenderbuffer(),_e(L.__webglDepthbuffer[fe],O,!1)}else n.bindFramebuffer(t.FRAMEBUFFER,L.__webglFramebuffer),L.__webglDepthbuffer=t.createRenderbuffer(),_e(L.__webglDepthbuffer,O,!1);n.bindFramebuffer(t.FRAMEBUFFER,null)}function Te(O,L,q){const fe=r.get(O);L!==void 0&&ae(fe.__webglFramebuffer,O,O.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,0),q!==void 0&&Le(O)}function G(O){const L=O.texture,q=r.get(O),fe=r.get(L);O.addEventListener("dispose",j),O.isWebGLMultipleRenderTargets!==!0&&(fe.__webglTexture===void 0&&(fe.__webglTexture=t.createTexture()),fe.__version=L.version,a.memory.textures++);const le=O.isWebGLCubeRenderTarget===!0,ce=O.isWebGLMultipleRenderTargets===!0,Pe=b(O)||l;if(le){q.__webglFramebuffer=[];for(let Ue=0;Ue<6;Ue++)if(l&&L.mipmaps&&L.mipmaps.length>0){q.__webglFramebuffer[Ue]=[];for(let Fe=0;Fe<L.mipmaps.length;Fe++)q.__webglFramebuffer[Ue][Fe]=t.createFramebuffer()}else q.__webglFramebuffer[Ue]=t.createFramebuffer()}else{if(l&&L.mipmaps&&L.mipmaps.length>0){q.__webglFramebuffer=[];for(let Ue=0;Ue<L.mipmaps.length;Ue++)q.__webglFramebuffer[Ue]=t.createFramebuffer()}else q.__webglFramebuffer=t.createFramebuffer();if(ce)if(i.drawBuffers){const Ue=O.texture;for(let Fe=0,ze=Ue.length;Fe<ze;Fe++){const $e=r.get(Ue[Fe]);$e.__webglTexture===void 0&&($e.__webglTexture=t.createTexture(),a.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(l&&O.samples>0&&he(O)===!1){const Ue=ce?L:[L];q.__webglMultisampledFramebuffer=t.createFramebuffer(),q.__webglColorRenderbuffer=[],n.bindFramebuffer(t.FRAMEBUFFER,q.__webglMultisampledFramebuffer);for(let Fe=0;Fe<Ue.length;Fe++){const ze=Ue[Fe];q.__webglColorRenderbuffer[Fe]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,q.__webglColorRenderbuffer[Fe]);const $e=s.convert(ze.format,ze.colorSpace),Ae=s.convert(ze.type),at=E(ze.internalFormat,$e,Ae,ze.colorSpace,O.isXRRenderTarget===!0),Xe=ve(O);t.renderbufferStorageMultisample(t.RENDERBUFFER,Xe,at,O.width,O.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Fe,t.RENDERBUFFER,q.__webglColorRenderbuffer[Fe])}t.bindRenderbuffer(t.RENDERBUFFER,null),O.depthBuffer&&(q.__webglDepthRenderbuffer=t.createRenderbuffer(),_e(q.__webglDepthRenderbuffer,O,!0)),n.bindFramebuffer(t.FRAMEBUFFER,null)}}if(le){n.bindTexture(t.TEXTURE_CUBE_MAP,fe.__webglTexture),K(t.TEXTURE_CUBE_MAP,L,Pe);for(let Ue=0;Ue<6;Ue++)if(l&&L.mipmaps&&L.mipmaps.length>0)for(let Fe=0;Fe<L.mipmaps.length;Fe++)ae(q.__webglFramebuffer[Ue][Fe],O,L,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+Ue,Fe);else ae(q.__webglFramebuffer[Ue],O,L,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+Ue,0);y(L,Pe)&&S(t.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(ce){const Ue=O.texture;for(let Fe=0,ze=Ue.length;Fe<ze;Fe++){const $e=Ue[Fe],Ae=r.get($e);n.bindTexture(t.TEXTURE_2D,Ae.__webglTexture),K(t.TEXTURE_2D,$e,Pe),ae(q.__webglFramebuffer,O,$e,t.COLOR_ATTACHMENT0+Fe,t.TEXTURE_2D,0),y($e,Pe)&&S(t.TEXTURE_2D)}n.unbindTexture()}else{let Ue=t.TEXTURE_2D;if((O.isWebGL3DRenderTarget||O.isWebGLArrayRenderTarget)&&(l?Ue=O.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(Ue,fe.__webglTexture),K(Ue,L,Pe),l&&L.mipmaps&&L.mipmaps.length>0)for(let Fe=0;Fe<L.mipmaps.length;Fe++)ae(q.__webglFramebuffer[Fe],O,L,t.COLOR_ATTACHMENT0,Ue,Fe);else ae(q.__webglFramebuffer,O,L,t.COLOR_ATTACHMENT0,Ue,0);y(L,Pe)&&S(Ue),n.unbindTexture()}O.depthBuffer&&Le(O)}function Ee(O){const L=b(O)||l,q=O.isWebGLMultipleRenderTargets===!0?O.texture:[O.texture];for(let fe=0,le=q.length;fe<le;fe++){const ce=q[fe];if(y(ce,L)){const Pe=O.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:t.TEXTURE_2D,Ue=r.get(ce).__webglTexture;n.bindTexture(Pe,Ue),S(Pe),n.unbindTexture()}}}function me(O){if(l&&O.samples>0&&he(O)===!1){const L=O.isWebGLMultipleRenderTargets?O.texture:[O.texture],q=O.width,fe=O.height;let le=t.COLOR_BUFFER_BIT;const ce=[],Pe=O.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,Ue=r.get(O),Fe=O.isWebGLMultipleRenderTargets===!0;if(Fe)for(let ze=0;ze<L.length;ze++)n.bindFramebuffer(t.FRAMEBUFFER,Ue.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+ze,t.RENDERBUFFER,null),n.bindFramebuffer(t.FRAMEBUFFER,Ue.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+ze,t.TEXTURE_2D,null,0);n.bindFramebuffer(t.READ_FRAMEBUFFER,Ue.__webglMultisampledFramebuffer),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,Ue.__webglFramebuffer);for(let ze=0;ze<L.length;ze++){ce.push(t.COLOR_ATTACHMENT0+ze),O.depthBuffer&&ce.push(Pe);const $e=Ue.__ignoreDepthValues!==void 0?Ue.__ignoreDepthValues:!1;if($e===!1&&(O.depthBuffer&&(le|=t.DEPTH_BUFFER_BIT),O.stencilBuffer&&(le|=t.STENCIL_BUFFER_BIT)),Fe&&t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,Ue.__webglColorRenderbuffer[ze]),$e===!0&&(t.invalidateFramebuffer(t.READ_FRAMEBUFFER,[Pe]),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[Pe])),Fe){const Ae=r.get(L[ze]).__webglTexture;t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,Ae,0)}t.blitFramebuffer(0,0,q,fe,0,0,q,fe,le,t.NEAREST),u&&t.invalidateFramebuffer(t.READ_FRAMEBUFFER,ce)}if(n.bindFramebuffer(t.READ_FRAMEBUFFER,null),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),Fe)for(let ze=0;ze<L.length;ze++){n.bindFramebuffer(t.FRAMEBUFFER,Ue.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+ze,t.RENDERBUFFER,Ue.__webglColorRenderbuffer[ze]);const $e=r.get(L[ze]).__webglTexture;n.bindFramebuffer(t.FRAMEBUFFER,Ue.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+ze,t.TEXTURE_2D,$e,0)}n.bindFramebuffer(t.DRAW_FRAMEBUFFER,Ue.__webglMultisampledFramebuffer)}}function ve(O){return Math.min(i.maxSamples,O.samples)}function he(O){const L=r.get(O);return l&&O.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&L.__useRenderToTexture!==!1}function We(O){const L=a.render.frame;d.get(O)!==L&&(d.set(O,L),O.update())}function ge(O,L){const q=O.colorSpace,fe=O.format,le=O.type;return O.isCompressedTexture===!0||O.isVideoTexture===!0||O.format===xx||q!==ba&&q!==Wi&&(Jt.getTransfer(q)===on?l===!1?e.has("EXT_sRGB")===!0&&fe===oi?(O.format=xx,O.minFilter=Mn,O.generateMipmaps=!1):L=qS.sRGBToLinear(L):(fe!==oi||le!==fa)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",q)),L}this.allocateTextureUnit=V,this.resetTextureUnits=Y,this.setTexture2D=ee,this.setTexture2DArray=re,this.setTexture3D=I,this.setTextureCube=F,this.rebindTextures=Te,this.setupRenderTarget=G,this.updateRenderTargetMipmap=Ee,this.updateMultisampleRenderTarget=me,this.setupDepthRenderbuffer=Le,this.setupFrameBufferTexture=ae,this.useMultisampledRTT=he}function J4(t,e,n){const r=n.isWebGL2;function i(s,a=Wi){let l;const c=Jt.getTransfer(a);if(s===fa)return t.UNSIGNED_BYTE;if(s===US)return t.UNSIGNED_SHORT_4_4_4_4;if(s===OS)return t.UNSIGNED_SHORT_5_5_5_1;if(s===v4)return t.BYTE;if(s===y4)return t.SHORT;if(s===iv)return t.UNSIGNED_SHORT;if(s===IS)return t.INT;if(s===$a)return t.UNSIGNED_INT;if(s===Ls)return t.FLOAT;if(s===Td)return r?t.HALF_FLOAT:(l=e.get("OES_texture_half_float"),l!==null?l.HALF_FLOAT_OES:null);if(s===b4)return t.ALPHA;if(s===oi)return t.RGBA;if(s===_4)return t.LUMINANCE;if(s===w4)return t.LUMINANCE_ALPHA;if(s===il)return t.DEPTH_COMPONENT;if(s===Rc)return t.DEPTH_STENCIL;if(s===xx)return l=e.get("EXT_sRGB"),l!==null?l.SRGB_ALPHA_EXT:null;if(s===S4)return t.RED;if(s===FS)return t.RED_INTEGER;if(s===M4)return t.RG;if(s===zS)return t.RG_INTEGER;if(s===BS)return t.RGBA_INTEGER;if(s===y0||s===b0||s===_0||s===w0)if(c===on)if(l=e.get("WEBGL_compressed_texture_s3tc_srgb"),l!==null){if(s===y0)return l.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===b0)return l.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===_0)return l.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===w0)return l.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(l=e.get("WEBGL_compressed_texture_s3tc"),l!==null){if(s===y0)return l.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===b0)return l.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===_0)return l.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===w0)return l.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===t_||s===n_||s===r_||s===i_)if(l=e.get("WEBGL_compressed_texture_pvrtc"),l!==null){if(s===t_)return l.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===n_)return l.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===r_)return l.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===i_)return l.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===VS)return l=e.get("WEBGL_compressed_texture_etc1"),l!==null?l.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===s_||s===a_)if(l=e.get("WEBGL_compressed_texture_etc"),l!==null){if(s===s_)return c===on?l.COMPRESSED_SRGB8_ETC2:l.COMPRESSED_RGB8_ETC2;if(s===a_)return c===on?l.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:l.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===o_||s===l_||s===c_||s===u_||s===d_||s===h_||s===f_||s===p_||s===m_||s===g_||s===x_||s===v_||s===y_||s===b_)if(l=e.get("WEBGL_compressed_texture_astc"),l!==null){if(s===o_)return c===on?l.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:l.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===l_)return c===on?l.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:l.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===c_)return c===on?l.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:l.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===u_)return c===on?l.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:l.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===d_)return c===on?l.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:l.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===h_)return c===on?l.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:l.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===f_)return c===on?l.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:l.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===p_)return c===on?l.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:l.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===m_)return c===on?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:l.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===g_)return c===on?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:l.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===x_)return c===on?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:l.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===v_)return c===on?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:l.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===y_)return c===on?l.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:l.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===b_)return c===on?l.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:l.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===S0||s===__||s===w_)if(l=e.get("EXT_texture_compression_bptc"),l!==null){if(s===S0)return c===on?l.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:l.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(s===__)return l.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(s===w_)return l.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(s===E4||s===S_||s===M_||s===E_)if(l=e.get("EXT_texture_compression_rgtc"),l!==null){if(s===S0)return l.COMPRESSED_RED_RGTC1_EXT;if(s===S_)return l.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===M_)return l.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===E_)return l.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return s===rl?r?t.UNSIGNED_INT_24_8:(l=e.get("WEBGL_depth_texture"),l!==null?l.UNSIGNED_INT_24_8_WEBGL:null):t[s]!==void 0?t[s]:null}return{convert:i}}class Q4 extends Yn{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class rd extends Xt{constructor(){super(),this.isGroup=!0,this.type="Group"}}const wq={type:"move"};class z1{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new rd,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new rd,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new X,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new X),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new rd,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new X,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new X),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const n=this._hand;if(n)for(const r of e.hand.values())this._getHandJoint(n,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,n,r){let i=null,s=null,a=null;const l=this._targetRay,c=this._grip,u=this._hand;if(e&&n.session.visibilityState!=="visible-blurred"){if(u&&e.hand){a=!0;for(const _ of e.hand.values()){const b=n.getJointPose(_,r),x=this._getHandJoint(u,_);b!==null&&(x.matrix.fromArray(b.transform.matrix),x.matrix.decompose(x.position,x.rotation,x.scale),x.matrixWorldNeedsUpdate=!0,x.jointRadius=b.radius),x.visible=b!==null}const d=u.joints["index-finger-tip"],f=u.joints["thumb-tip"],m=d.position.distanceTo(f.position),g=.02,v=.005;u.inputState.pinching&&m>g+v?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&m<=g-v&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else c!==null&&e.gripSpace&&(s=n.getPose(e.gripSpace,r),s!==null&&(c.matrix.fromArray(s.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,s.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(s.linearVelocity)):c.hasLinearVelocity=!1,s.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(s.angularVelocity)):c.hasAngularVelocity=!1));l!==null&&(i=n.getPose(e.targetRaySpace,r),i===null&&s!==null&&(i=s),i!==null&&(l.matrix.fromArray(i.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,i.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(i.linearVelocity)):l.hasLinearVelocity=!1,i.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(i.angularVelocity)):l.hasAngularVelocity=!1,this.dispatchEvent(wq)))}return l!==null&&(l.visible=i!==null),c!==null&&(c.visible=s!==null),u!==null&&(u.visible=a!==null),this}_getHandJoint(e,n){if(e.joints[n.jointName]===void 0){const r=new rd;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[n.jointName]=r,e.add(r)}return e.joints[n.jointName]}}class Sq extends mo{constructor(e,n){super();const r=this;let i=null,s=1,a=null,l="local-floor",c=1,u=null,d=null,f=null,m=null,g=null,v=null;const _=n.getContextAttributes();let b=null,x=null;const y=[],S=[],E=new ke;let A=null;const T=new Yn;T.layers.enable(1),T.viewport=new Yt;const C=new Yn;C.layers.enable(2),C.viewport=new Yt;const j=[T,C],k=new Q4;k.layers.enable(1),k.layers.enable(2);let P=null,H=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(K){let ne=y[K];return ne===void 0&&(ne=new z1,y[K]=ne),ne.getTargetRaySpace()},this.getControllerGrip=function(K){let ne=y[K];return ne===void 0&&(ne=new z1,y[K]=ne),ne.getGripSpace()},this.getHand=function(K){let ne=y[K];return ne===void 0&&(ne=new z1,y[K]=ne),ne.getHandSpace()};function B(K){const ne=S.indexOf(K.inputSource);if(ne===-1)return;const ie=y[ne];ie!==void 0&&(ie.update(K.inputSource,K.frame,u||a),ie.dispatchEvent({type:K.type,data:K.inputSource}))}function Y(){i.removeEventListener("select",B),i.removeEventListener("selectstart",B),i.removeEventListener("selectend",B),i.removeEventListener("squeeze",B),i.removeEventListener("squeezestart",B),i.removeEventListener("squeezeend",B),i.removeEventListener("end",Y),i.removeEventListener("inputsourceschange",V);for(let K=0;K<y.length;K++){const ne=S[K];ne!==null&&(S[K]=null,y[K].disconnect(ne))}P=null,H=null,e.setRenderTarget(b),g=null,m=null,f=null,i=null,x=null,Z.stop(),r.isPresenting=!1,e.setPixelRatio(A),e.setSize(E.width,E.height,!1),r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(K){s=K,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(K){l=K,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||a},this.setReferenceSpace=function(K){u=K},this.getBaseLayer=function(){return m!==null?m:g},this.getBinding=function(){return f},this.getFrame=function(){return v},this.getSession=function(){return i},this.setSession=async function(K){if(i=K,i!==null){if(b=e.getRenderTarget(),i.addEventListener("select",B),i.addEventListener("selectstart",B),i.addEventListener("selectend",B),i.addEventListener("squeeze",B),i.addEventListener("squeezestart",B),i.addEventListener("squeezeend",B),i.addEventListener("end",Y),i.addEventListener("inputsourceschange",V),_.xrCompatible!==!0&&await n.makeXRCompatible(),A=e.getPixelRatio(),e.getSize(E),i.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const ne={antialias:i.renderState.layers===void 0?_.antialias:!0,alpha:!0,depth:_.depth,stencil:_.stencil,framebufferScaleFactor:s};g=new XRWebGLLayer(i,n,ne),i.updateRenderState({baseLayer:g}),e.setPixelRatio(1),e.setSize(g.framebufferWidth,g.framebufferHeight,!1),x=new Hs(g.framebufferWidth,g.framebufferHeight,{format:oi,type:fa,colorSpace:e.outputColorSpace,stencilBuffer:_.stencil})}else{let ne=null,ie=null,de=null;_.depth&&(de=_.stencil?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT24,ne=_.stencil?Rc:il,ie=_.stencil?rl:$a);const ae={colorFormat:n.RGBA8,depthFormat:de,scaleFactor:s};f=new XRWebGLBinding(i,n),m=f.createProjectionLayer(ae),i.updateRenderState({layers:[m]}),e.setPixelRatio(1),e.setSize(m.textureWidth,m.textureHeight,!1),x=new Hs(m.textureWidth,m.textureHeight,{format:oi,type:fa,depthTexture:new eM(m.textureWidth,m.textureHeight,ie,void 0,void 0,void 0,void 0,void 0,void 0,ne),stencilBuffer:_.stencil,colorSpace:e.outputColorSpace,samples:_.antialias?4:0});const _e=e.properties.get(x);_e.__ignoreDepthValues=m.ignoreDepthValues}x.isXRRenderTarget=!0,this.setFoveation(c),u=null,a=await i.requestReferenceSpace(l),Z.setContext(i),Z.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode};function V(K){for(let ne=0;ne<K.removed.length;ne++){const ie=K.removed[ne],de=S.indexOf(ie);de>=0&&(S[de]=null,y[de].disconnect(ie))}for(let ne=0;ne<K.added.length;ne++){const ie=K.added[ne];let de=S.indexOf(ie);if(de===-1){for(let _e=0;_e<y.length;_e++)if(_e>=S.length){S.push(ie),de=_e;break}else if(S[_e]===null){S[_e]=ie,de=_e;break}if(de===-1)break}const ae=y[de];ae&&ae.connect(ie)}}const Q=new X,ee=new X;function re(K,ne,ie){Q.setFromMatrixPosition(ne.matrixWorld),ee.setFromMatrixPosition(ie.matrixWorld);const de=Q.distanceTo(ee),ae=ne.projectionMatrix.elements,_e=ie.projectionMatrix.elements,je=ae[14]/(ae[10]-1),Le=ae[14]/(ae[10]+1),Te=(ae[9]+1)/ae[5],G=(ae[9]-1)/ae[5],Ee=(ae[8]-1)/ae[0],me=(_e[8]+1)/_e[0],ve=je*Ee,he=je*me,We=de/(-Ee+me),ge=We*-Ee;ne.matrixWorld.decompose(K.position,K.quaternion,K.scale),K.translateX(ge),K.translateZ(We),K.matrixWorld.compose(K.position,K.quaternion,K.scale),K.matrixWorldInverse.copy(K.matrixWorld).invert();const O=je+We,L=Le+We,q=ve-ge,fe=he+(de-ge),le=Te*Le/L*O,ce=G*Le/L*O;K.projectionMatrix.makePerspective(q,fe,le,ce,O,L),K.projectionMatrixInverse.copy(K.projectionMatrix).invert()}function I(K,ne){ne===null?K.matrixWorld.copy(K.matrix):K.matrixWorld.multiplyMatrices(ne.matrixWorld,K.matrix),K.matrixWorldInverse.copy(K.matrixWorld).invert()}this.updateCamera=function(K){if(i===null)return;k.near=C.near=T.near=K.near,k.far=C.far=T.far=K.far,(P!==k.near||H!==k.far)&&(i.updateRenderState({depthNear:k.near,depthFar:k.far}),P=k.near,H=k.far);const ne=K.parent,ie=k.cameras;I(k,ne);for(let de=0;de<ie.length;de++)I(ie[de],ne);ie.length===2?re(k,T,C):k.projectionMatrix.copy(T.projectionMatrix),F(K,k,ne)};function F(K,ne,ie){ie===null?K.matrix.copy(ne.matrixWorld):(K.matrix.copy(ie.matrixWorld),K.matrix.invert(),K.matrix.multiply(ne.matrixWorld)),K.matrix.decompose(K.position,K.quaternion,K.scale),K.updateMatrixWorld(!0),K.projectionMatrix.copy(ne.projectionMatrix),K.projectionMatrixInverse.copy(ne.projectionMatrixInverse),K.isPerspectiveCamera&&(K.fov=Cd*2*Math.atan(1/K.projectionMatrix.elements[5]),K.zoom=1)}this.getCamera=function(){return k},this.getFoveation=function(){if(!(m===null&&g===null))return c},this.setFoveation=function(K){c=K,m!==null&&(m.fixedFoveation=K),g!==null&&g.fixedFoveation!==void 0&&(g.fixedFoveation=K)};let z=null;function U(K,ne){if(d=ne.getViewerPose(u||a),v=ne,d!==null){const ie=d.views;g!==null&&(e.setRenderTargetFramebuffer(x,g.framebuffer),e.setRenderTarget(x));let de=!1;ie.length!==k.cameras.length&&(k.cameras.length=0,de=!0);for(let ae=0;ae<ie.length;ae++){const _e=ie[ae];let je=null;if(g!==null)je=g.getViewport(_e);else{const Te=f.getViewSubImage(m,_e);je=Te.viewport,ae===0&&(e.setRenderTargetTextures(x,Te.colorTexture,m.ignoreDepthValues?void 0:Te.depthStencilTexture),e.setRenderTarget(x))}let Le=j[ae];Le===void 0&&(Le=new Yn,Le.layers.enable(ae),Le.viewport=new Yt,j[ae]=Le),Le.matrix.fromArray(_e.transform.matrix),Le.matrix.decompose(Le.position,Le.quaternion,Le.scale),Le.projectionMatrix.fromArray(_e.projectionMatrix),Le.projectionMatrixInverse.copy(Le.projectionMatrix).invert(),Le.viewport.set(je.x,je.y,je.width,je.height),ae===0&&(k.matrix.copy(Le.matrix),k.matrix.decompose(k.position,k.quaternion,k.scale)),de===!0&&k.cameras.push(Le)}}for(let ie=0;ie<y.length;ie++){const de=S[ie],ae=y[ie];de!==null&&ae!==void 0&&ae.update(de,ne,u||a)}z&&z(K,ne),ne.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:ne}),v=null}const Z=new X4;Z.setAnimationLoop(U),this.setAnimationLoop=function(K){z=K},this.dispose=function(){}}}function Mq(t,e){function n(b,x){b.matrixAutoUpdate===!0&&b.updateMatrix(),x.value.copy(b.matrix)}function r(b,x){x.color.getRGB(b.fogColor.value,H4(t)),x.isFog?(b.fogNear.value=x.near,b.fogFar.value=x.far):x.isFogExp2&&(b.fogDensity.value=x.density)}function i(b,x,y,S,E){x.isMeshBasicMaterial||x.isMeshLambertMaterial?s(b,x):x.isMeshToonMaterial?(s(b,x),f(b,x)):x.isMeshPhongMaterial?(s(b,x),d(b,x)):x.isMeshStandardMaterial?(s(b,x),m(b,x),x.isMeshPhysicalMaterial&&g(b,x,E)):x.isMeshMatcapMaterial?(s(b,x),v(b,x)):x.isMeshDepthMaterial?s(b,x):x.isMeshDistanceMaterial?(s(b,x),_(b,x)):x.isMeshNormalMaterial?s(b,x):x.isLineBasicMaterial?(a(b,x),x.isLineDashedMaterial&&l(b,x)):x.isPointsMaterial?c(b,x,y,S):x.isSpriteMaterial?u(b,x):x.isShadowMaterial?(b.color.value.copy(x.color),b.opacity.value=x.opacity):x.isShaderMaterial&&(x.uniformsNeedUpdate=!1)}function s(b,x){b.opacity.value=x.opacity,x.color&&b.diffuse.value.copy(x.color),x.emissive&&b.emissive.value.copy(x.emissive).multiplyScalar(x.emissiveIntensity),x.map&&(b.map.value=x.map,n(x.map,b.mapTransform)),x.alphaMap&&(b.alphaMap.value=x.alphaMap,n(x.alphaMap,b.alphaMapTransform)),x.bumpMap&&(b.bumpMap.value=x.bumpMap,n(x.bumpMap,b.bumpMapTransform),b.bumpScale.value=x.bumpScale,x.side===Hr&&(b.bumpScale.value*=-1)),x.normalMap&&(b.normalMap.value=x.normalMap,n(x.normalMap,b.normalMapTransform),b.normalScale.value.copy(x.normalScale),x.side===Hr&&b.normalScale.value.negate()),x.displacementMap&&(b.displacementMap.value=x.displacementMap,n(x.displacementMap,b.displacementMapTransform),b.displacementScale.value=x.displacementScale,b.displacementBias.value=x.displacementBias),x.emissiveMap&&(b.emissiveMap.value=x.emissiveMap,n(x.emissiveMap,b.emissiveMapTransform)),x.specularMap&&(b.specularMap.value=x.specularMap,n(x.specularMap,b.specularMapTransform)),x.alphaTest>0&&(b.alphaTest.value=x.alphaTest);const y=e.get(x).envMap;if(y&&(b.envMap.value=y,b.flipEnvMap.value=y.isCubeTexture&&y.isRenderTargetTexture===!1?-1:1,b.reflectivity.value=x.reflectivity,b.ior.value=x.ior,b.refractionRatio.value=x.refractionRatio),x.lightMap){b.lightMap.value=x.lightMap;const S=t._useLegacyLights===!0?Math.PI:1;b.lightMapIntensity.value=x.lightMapIntensity*S,n(x.lightMap,b.lightMapTransform)}x.aoMap&&(b.aoMap.value=x.aoMap,b.aoMapIntensity.value=x.aoMapIntensity,n(x.aoMap,b.aoMapTransform))}function a(b,x){b.diffuse.value.copy(x.color),b.opacity.value=x.opacity,x.map&&(b.map.value=x.map,n(x.map,b.mapTransform))}function l(b,x){b.dashSize.value=x.dashSize,b.totalSize.value=x.dashSize+x.gapSize,b.scale.value=x.scale}function c(b,x,y,S){b.diffuse.value.copy(x.color),b.opacity.value=x.opacity,b.size.value=x.size*y,b.scale.value=S*.5,x.map&&(b.map.value=x.map,n(x.map,b.uvTransform)),x.alphaMap&&(b.alphaMap.value=x.alphaMap,n(x.alphaMap,b.alphaMapTransform)),x.alphaTest>0&&(b.alphaTest.value=x.alphaTest)}function u(b,x){b.diffuse.value.copy(x.color),b.opacity.value=x.opacity,b.rotation.value=x.rotation,x.map&&(b.map.value=x.map,n(x.map,b.mapTransform)),x.alphaMap&&(b.alphaMap.value=x.alphaMap,n(x.alphaMap,b.alphaMapTransform)),x.alphaTest>0&&(b.alphaTest.value=x.alphaTest)}function d(b,x){b.specular.value.copy(x.specular),b.shininess.value=Math.max(x.shininess,1e-4)}function f(b,x){x.gradientMap&&(b.gradientMap.value=x.gradientMap)}function m(b,x){b.metalness.value=x.metalness,x.metalnessMap&&(b.metalnessMap.value=x.metalnessMap,n(x.metalnessMap,b.metalnessMapTransform)),b.roughness.value=x.roughness,x.roughnessMap&&(b.roughnessMap.value=x.roughnessMap,n(x.roughnessMap,b.roughnessMapTransform)),e.get(x).envMap&&(b.envMapIntensity.value=x.envMapIntensity)}function g(b,x,y){b.ior.value=x.ior,x.sheen>0&&(b.sheenColor.value.copy(x.sheenColor).multiplyScalar(x.sheen),b.sheenRoughness.value=x.sheenRoughness,x.sheenColorMap&&(b.sheenColorMap.value=x.sheenColorMap,n(x.sheenColorMap,b.sheenColorMapTransform)),x.sheenRoughnessMap&&(b.sheenRoughnessMap.value=x.sheenRoughnessMap,n(x.sheenRoughnessMap,b.sheenRoughnessMapTransform))),x.clearcoat>0&&(b.clearcoat.value=x.clearcoat,b.clearcoatRoughness.value=x.clearcoatRoughness,x.clearcoatMap&&(b.clearcoatMap.value=x.clearcoatMap,n(x.clearcoatMap,b.clearcoatMapTransform)),x.clearcoatRoughnessMap&&(b.clearcoatRoughnessMap.value=x.clearcoatRoughnessMap,n(x.clearcoatRoughnessMap,b.clearcoatRoughnessMapTransform)),x.clearcoatNormalMap&&(b.clearcoatNormalMap.value=x.clearcoatNormalMap,n(x.clearcoatNormalMap,b.clearcoatNormalMapTransform),b.clearcoatNormalScale.value.copy(x.clearcoatNormalScale),x.side===Hr&&b.clearcoatNormalScale.value.negate())),x.iridescence>0&&(b.iridescence.value=x.iridescence,b.iridescenceIOR.value=x.iridescenceIOR,b.iridescenceThicknessMinimum.value=x.iridescenceThicknessRange[0],b.iridescenceThicknessMaximum.value=x.iridescenceThicknessRange[1],x.iridescenceMap&&(b.iridescenceMap.value=x.iridescenceMap,n(x.iridescenceMap,b.iridescenceMapTransform)),x.iridescenceThicknessMap&&(b.iridescenceThicknessMap.value=x.iridescenceThicknessMap,n(x.iridescenceThicknessMap,b.iridescenceThicknessMapTransform))),x.transmission>0&&(b.transmission.value=x.transmission,b.transmissionSamplerMap.value=y.texture,b.transmissionSamplerSize.value.set(y.width,y.height),x.transmissionMap&&(b.transmissionMap.value=x.transmissionMap,n(x.transmissionMap,b.transmissionMapTransform)),b.thickness.value=x.thickness,x.thicknessMap&&(b.thicknessMap.value=x.thicknessMap,n(x.thicknessMap,b.thicknessMapTransform)),b.attenuationDistance.value=x.attenuationDistance,b.attenuationColor.value.copy(x.attenuationColor)),x.anisotropy>0&&(b.anisotropyVector.value.set(x.anisotropy*Math.cos(x.anisotropyRotation),x.anisotropy*Math.sin(x.anisotropyRotation)),x.anisotropyMap&&(b.anisotropyMap.value=x.anisotropyMap,n(x.anisotropyMap,b.anisotropyMapTransform))),b.specularIntensity.value=x.specularIntensity,b.specularColor.value.copy(x.specularColor),x.specularColorMap&&(b.specularColorMap.value=x.specularColorMap,n(x.specularColorMap,b.specularColorMapTransform)),x.specularIntensityMap&&(b.specularIntensityMap.value=x.specularIntensityMap,n(x.specularIntensityMap,b.specularIntensityMapTransform))}function v(b,x){x.matcap&&(b.matcap.value=x.matcap)}function _(b,x){const y=e.get(x).light;b.referencePosition.value.setFromMatrixPosition(y.matrixWorld),b.nearDistance.value=y.shadow.camera.near,b.farDistance.value=y.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function Eq(t,e,n,r){let i={},s={},a=[];const l=n.isWebGL2?t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS):0;function c(y,S){const E=S.program;r.uniformBlockBinding(y,E)}function u(y,S){let E=i[y.id];E===void 0&&(v(y),E=d(y),i[y.id]=E,y.addEventListener("dispose",b));const A=S.program;r.updateUBOMapping(y,A);const T=e.render.frame;s[y.id]!==T&&(m(y),s[y.id]=T)}function d(y){const S=f();y.__bindingPointIndex=S;const E=t.createBuffer(),A=y.__size,T=y.usage;return t.bindBuffer(t.UNIFORM_BUFFER,E),t.bufferData(t.UNIFORM_BUFFER,A,T),t.bindBuffer(t.UNIFORM_BUFFER,null),t.bindBufferBase(t.UNIFORM_BUFFER,S,E),E}function f(){for(let y=0;y<l;y++)if(a.indexOf(y)===-1)return a.push(y),y;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function m(y){const S=i[y.id],E=y.uniforms,A=y.__cache;t.bindBuffer(t.UNIFORM_BUFFER,S);for(let T=0,C=E.length;T<C;T++){const j=Array.isArray(E[T])?E[T]:[E[T]];for(let k=0,P=j.length;k<P;k++){const H=j[k];if(g(H,T,k,A)===!0){const B=H.__offset,Y=Array.isArray(H.value)?H.value:[H.value];let V=0;for(let Q=0;Q<Y.length;Q++){const ee=Y[Q],re=_(ee);typeof ee=="number"||typeof ee=="boolean"?(H.__data[0]=ee,t.bufferSubData(t.UNIFORM_BUFFER,B+V,H.__data)):ee.isMatrix3?(H.__data[0]=ee.elements[0],H.__data[1]=ee.elements[1],H.__data[2]=ee.elements[2],H.__data[3]=0,H.__data[4]=ee.elements[3],H.__data[5]=ee.elements[4],H.__data[6]=ee.elements[5],H.__data[7]=0,H.__data[8]=ee.elements[6],H.__data[9]=ee.elements[7],H.__data[10]=ee.elements[8],H.__data[11]=0):(ee.toArray(H.__data,V),V+=re.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(t.UNIFORM_BUFFER,B,H.__data)}}}t.bindBuffer(t.UNIFORM_BUFFER,null)}function g(y,S,E,A){const T=y.value,C=S+"_"+E;if(A[C]===void 0)return typeof T=="number"||typeof T=="boolean"?A[C]=T:A[C]=T.clone(),!0;{const j=A[C];if(typeof T=="number"||typeof T=="boolean"){if(j!==T)return A[C]=T,!0}else if(j.equals(T)===!1)return j.copy(T),!0}return!1}function v(y){const S=y.uniforms;let E=0;const A=16;for(let C=0,j=S.length;C<j;C++){const k=Array.isArray(S[C])?S[C]:[S[C]];for(let P=0,H=k.length;P<H;P++){const B=k[P],Y=Array.isArray(B.value)?B.value:[B.value];for(let V=0,Q=Y.length;V<Q;V++){const ee=Y[V],re=_(ee),I=E%A;I!==0&&A-I<re.boundary&&(E+=A-I),B.__data=new Float32Array(re.storage/Float32Array.BYTES_PER_ELEMENT),B.__offset=E,E+=re.storage}}}const T=E%A;return T>0&&(E+=A-T),y.__size=E,y.__cache={},this}function _(y){const S={boundary:0,storage:0};return typeof y=="number"||typeof y=="boolean"?(S.boundary=4,S.storage=4):y.isVector2?(S.boundary=8,S.storage=8):y.isVector3||y.isColor?(S.boundary=16,S.storage=12):y.isVector4?(S.boundary=16,S.storage=16):y.isMatrix3?(S.boundary=48,S.storage=48):y.isMatrix4?(S.boundary=64,S.storage=64):y.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",y),S}function b(y){const S=y.target;S.removeEventListener("dispose",b);const E=a.indexOf(S.__bindingPointIndex);a.splice(E,1),t.deleteBuffer(i[S.id]),delete i[S.id],delete s[S.id]}function x(){for(const y in i)t.deleteBuffer(i[y]);a=[],i={},s={}}return{bind:c,update:u,dispose:x}}class tM{constructor(e={}){const{canvas:n=z4(),context:r=null,depth:i=!0,stencil:s=!0,alpha:a=!1,antialias:l=!1,premultipliedAlpha:c=!0,preserveDrawingBuffer:u=!1,powerPreference:d="default",failIfMajorPerformanceCaveat:f=!1}=e;this.isWebGLRenderer=!0;let m;r!==null?m=r.getContextAttributes().alpha:m=a;const g=new Uint32Array(4),v=new Int32Array(4);let _=null,b=null;const x=[],y=[];this.domElement=n,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=ar,this._useLegacyLights=!1,this.toneMapping=ha,this.toneMappingExposure=1;const S=this;let E=!1,A=0,T=0,C=null,j=-1,k=null;const P=new Yt,H=new Yt;let B=null;const Y=new nt(0);let V=0,Q=n.width,ee=n.height,re=1,I=null,F=null;const z=new Yt(0,0,Q,ee),U=new Yt(0,0,Q,ee);let Z=!1;const K=new jp;let ne=!1,ie=!1,de=null;const ae=new St,_e=new ke,je=new X,Le={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Te(){return C===null?re:1}let G=r;function Ee(W,ue){for(let be=0;be<W.length;be++){const Se=W[be],ye=n.getContext(Se,ue);if(ye!==null)return ye}return null}try{const W={alpha:!0,depth:i,stencil:s,antialias:l,premultipliedAlpha:c,preserveDrawingBuffer:u,powerPreference:d,failIfMajorPerformanceCaveat:f};if("setAttribute"in n&&n.setAttribute("data-engine",`three.js r${tv}`),n.addEventListener("webglcontextlost",Ce,!1),n.addEventListener("webglcontextrestored",te,!1),n.addEventListener("webglcontextcreationerror",Ve,!1),G===null){const ue=["webgl2","webgl","experimental-webgl"];if(S.isWebGL1Renderer===!0&&ue.shift(),G=Ee(ue,W),G===null)throw Ee(ue)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&G instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),G.getShaderPrecisionFormat===void 0&&(G.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(W){throw console.error("THREE.WebGLRenderer: "+W.message),W}let me,ve,he,We,ge,O,L,q,fe,le,ce,Pe,Ue,Fe,ze,$e,Ae,at,Xe,Ke,Be,Re,J,we;function Ge(){me=new FX(G),ve=new jX(G,me,e),me.init(ve),Re=new J4(G,me,ve),he=new bq(G,me,ve),We=new VX(G),ge=new lq,O=new _q(G,me,he,ge,ve,Re,We),L=new DX(S),q=new OX(S),fe=new Z9(G,ve),J=new PX(G,me,fe,ve),le=new zX(G,fe,We,J),ce=new XX(G,le,fe,We),Xe=new WX(G,ve,O),$e=new LX(ge),Pe=new oq(S,L,q,me,ve,J,$e),Ue=new Mq(S,ge),Fe=new uq,ze=new gq(me,ve),at=new kX(S,L,q,he,ce,m,c),Ae=new yq(S,ce,ve),we=new Eq(G,We,ve,he),Ke=new RX(G,me,We,ve),Be=new BX(G,me,We,ve),We.programs=Pe.programs,S.capabilities=ve,S.extensions=me,S.properties=ge,S.renderLists=Fe,S.shadowMap=Ae,S.state=he,S.info=We}Ge();const De=new Sq(S,G);this.xr=De,this.getContext=function(){return G},this.getContextAttributes=function(){return G.getContextAttributes()},this.forceContextLoss=function(){const W=me.get("WEBGL_lose_context");W&&W.loseContext()},this.forceContextRestore=function(){const W=me.get("WEBGL_lose_context");W&&W.restoreContext()},this.getPixelRatio=function(){return re},this.setPixelRatio=function(W){W!==void 0&&(re=W,this.setSize(Q,ee,!1))},this.getSize=function(W){return W.set(Q,ee)},this.setSize=function(W,ue,be=!0){if(De.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}Q=W,ee=ue,n.width=Math.floor(W*re),n.height=Math.floor(ue*re),be===!0&&(n.style.width=W+"px",n.style.height=ue+"px"),this.setViewport(0,0,W,ue)},this.getDrawingBufferSize=function(W){return W.set(Q*re,ee*re).floor()},this.setDrawingBufferSize=function(W,ue,be){Q=W,ee=ue,re=be,n.width=Math.floor(W*be),n.height=Math.floor(ue*be),this.setViewport(0,0,W,ue)},this.getCurrentViewport=function(W){return W.copy(P)},this.getViewport=function(W){return W.copy(z)},this.setViewport=function(W,ue,be,Se){W.isVector4?z.set(W.x,W.y,W.z,W.w):z.set(W,ue,be,Se),he.viewport(P.copy(z).multiplyScalar(re).floor())},this.getScissor=function(W){return W.copy(U)},this.setScissor=function(W,ue,be,Se){W.isVector4?U.set(W.x,W.y,W.z,W.w):U.set(W,ue,be,Se),he.scissor(H.copy(U).multiplyScalar(re).floor())},this.getScissorTest=function(){return Z},this.setScissorTest=function(W){he.setScissorTest(Z=W)},this.setOpaqueSort=function(W){I=W},this.setTransparentSort=function(W){F=W},this.getClearColor=function(W){return W.copy(at.getClearColor())},this.setClearColor=function(){at.setClearColor.apply(at,arguments)},this.getClearAlpha=function(){return at.getClearAlpha()},this.setClearAlpha=function(){at.setClearAlpha.apply(at,arguments)},this.clear=function(W=!0,ue=!0,be=!0){let Se=0;if(W){let ye=!1;if(C!==null){const Qe=C.texture.format;ye=Qe===BS||Qe===zS||Qe===FS}if(ye){const Qe=C.texture.type,ct=Qe===fa||Qe===$a||Qe===iv||Qe===rl||Qe===US||Qe===OS,pt=at.getClearColor(),Oe=at.getClearAlpha(),bt=pt.r,_t=pt.g,xt=pt.b;ct?(g[0]=bt,g[1]=_t,g[2]=xt,g[3]=Oe,G.clearBufferuiv(G.COLOR,0,g)):(v[0]=bt,v[1]=_t,v[2]=xt,v[3]=Oe,G.clearBufferiv(G.COLOR,0,v))}else Se|=G.COLOR_BUFFER_BIT}ue&&(Se|=G.DEPTH_BUFFER_BIT),be&&(Se|=G.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),G.clear(Se)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",Ce,!1),n.removeEventListener("webglcontextrestored",te,!1),n.removeEventListener("webglcontextcreationerror",Ve,!1),Fe.dispose(),ze.dispose(),ge.dispose(),L.dispose(),q.dispose(),ce.dispose(),J.dispose(),we.dispose(),Pe.dispose(),De.dispose(),De.removeEventListener("sessionstart",Mt),De.removeEventListener("sessionend",ft),de&&(de.dispose(),de=null),$t.stop()};function Ce(W){W.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),E=!0}function te(){console.log("THREE.WebGLRenderer: Context Restored."),E=!1;const W=We.autoReset,ue=Ae.enabled,be=Ae.autoUpdate,Se=Ae.needsUpdate,ye=Ae.type;Ge(),We.autoReset=W,Ae.enabled=ue,Ae.autoUpdate=be,Ae.needsUpdate=Se,Ae.type=ye}function Ve(W){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",W.statusMessage)}function qe(W){const ue=W.target;ue.removeEventListener("dispose",qe),lt(ue)}function lt(W){Je(W),ge.remove(W)}function Je(W){const ue=ge.get(W).programs;ue!==void 0&&(ue.forEach(function(be){Pe.releaseProgram(be)}),W.isShaderMaterial&&Pe.releaseShaderCache(W))}this.renderBufferDirect=function(W,ue,be,Se,ye,Qe){ue===null&&(ue=Le);const ct=ye.isMesh&&ye.matrixWorld.determinant()<0,pt=$r(W,ue,be,Se,ye);he.setMaterial(Se,ct);let Oe=be.index,bt=1;if(Se.wireframe===!0){if(Oe=le.getWireframeAttribute(be),Oe===void 0)return;bt=2}const _t=be.drawRange,xt=be.attributes.position;let en=_t.start*bt,$n=(_t.start+_t.count)*bt;Qe!==null&&(en=Math.max(en,Qe.start*bt),$n=Math.min($n,(Qe.start+Qe.count)*bt)),Oe!==null?(en=Math.max(en,0),$n=Math.min($n,Oe.count)):xt!=null&&(en=Math.max(en,0),$n=Math.min($n,xt.count));const Zt=$n-en;if(Zt<0||Zt===1/0)return;J.setup(ye,Se,pt,be,Oe);let bn,mt=Ke;if(Oe!==null&&(bn=fe.get(Oe),mt=Be,mt.setIndex(bn)),ye.isMesh)Se.wireframe===!0?(he.setLineWidth(Se.wireframeLinewidth*Te()),mt.setMode(G.LINES)):mt.setMode(G.TRIANGLES);else if(ye.isLine){let rt=Se.linewidth;rt===void 0&&(rt=1),he.setLineWidth(rt*Te()),ye.isLineSegments?mt.setMode(G.LINES):ye.isLineLoop?mt.setMode(G.LINE_LOOP):mt.setMode(G.LINE_STRIP)}else ye.isPoints?mt.setMode(G.POINTS):ye.isSprite&&mt.setMode(G.TRIANGLES);if(ye.isBatchedMesh)mt.renderMultiDraw(ye._multiDrawStarts,ye._multiDrawCounts,ye._multiDrawCount);else if(ye.isInstancedMesh)mt.renderInstances(en,Zt,ye.count);else if(be.isInstancedBufferGeometry){const rt=be._maxInstanceCount!==void 0?be._maxInstanceCount:1/0,yr=Math.min(be.instanceCount,rt);mt.renderInstances(en,Zt,yr)}else mt.render(en,Zt)};function gt(W,ue,be){W.transparent===!0&&W.side===Gi&&W.forceSinglePass===!1?(W.side=Hr,W.needsUpdate=!0,dn(W,ue,be),W.side=ya,W.needsUpdate=!0,dn(W,ue,be),W.side=Gi):dn(W,ue,be)}this.compile=function(W,ue,be=null){be===null&&(be=W),b=ze.get(be),b.init(),y.push(b),be.traverseVisible(function(ye){ye.isLight&&ye.layers.test(ue.layers)&&(b.pushLight(ye),ye.castShadow&&b.pushShadow(ye))}),W!==be&&W.traverseVisible(function(ye){ye.isLight&&ye.layers.test(ue.layers)&&(b.pushLight(ye),ye.castShadow&&b.pushShadow(ye))}),b.setupLights(S._useLegacyLights);const Se=new Set;return W.traverse(function(ye){const Qe=ye.material;if(Qe)if(Array.isArray(Qe))for(let ct=0;ct<Qe.length;ct++){const pt=Qe[ct];gt(pt,be,ye),Se.add(pt)}else gt(Qe,be,ye),Se.add(Qe)}),y.pop(),b=null,Se},this.compileAsync=function(W,ue,be=null){const Se=this.compile(W,ue,be);return new Promise(ye=>{function Qe(){if(Se.forEach(function(ct){ge.get(ct).currentProgram.isReady()&&Se.delete(ct)}),Se.size===0){ye(W);return}setTimeout(Qe,10)}me.get("KHR_parallel_shader_compile")!==null?Qe():setTimeout(Qe,10)})};let ut=null;function zt(W){ut&&ut(W)}function Mt(){$t.stop()}function ft(){$t.start()}const $t=new X4;$t.setAnimationLoop(zt),typeof self<"u"&&$t.setContext(self),this.setAnimationLoop=function(W){ut=W,De.setAnimationLoop(W),W===null?$t.stop():$t.start()},De.addEventListener("sessionstart",Mt),De.addEventListener("sessionend",ft),this.render=function(W,ue){if(ue!==void 0&&ue.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(E===!0)return;W.matrixWorldAutoUpdate===!0&&W.updateMatrixWorld(),ue.parent===null&&ue.matrixWorldAutoUpdate===!0&&ue.updateMatrixWorld(),De.enabled===!0&&De.isPresenting===!0&&(De.cameraAutoUpdate===!0&&De.updateCamera(ue),ue=De.getCamera()),W.isScene===!0&&W.onBeforeRender(S,W,ue,C),b=ze.get(W,y.length),b.init(),y.push(b),ae.multiplyMatrices(ue.projectionMatrix,ue.matrixWorldInverse),K.setFromProjectionMatrix(ae),ie=this.localClippingEnabled,ne=$e.init(this.clippingPlanes,ie),_=Fe.get(W,x.length),_.init(),x.push(_),sn(W,ue,0,S.sortObjects),_.finish(),S.sortObjects===!0&&_.sort(I,F),this.info.render.frame++,ne===!0&&$e.beginShadows();const be=b.state.shadowsArray;if(Ae.render(be,W,ue),ne===!0&&$e.endShadows(),this.info.autoReset===!0&&this.info.reset(),at.render(_,W),b.setupLights(S._useLegacyLights),ue.isArrayCamera){const Se=ue.cameras;for(let ye=0,Qe=Se.length;ye<Qe;ye++){const ct=Se[ye];Bt(_,W,ct,ct.viewport)}}else Bt(_,W,ue);C!==null&&(O.updateMultisampleRenderTarget(C),O.updateRenderTargetMipmap(C)),W.isScene===!0&&W.onAfterRender(S,W,ue),J.resetDefaultState(),j=-1,k=null,y.pop(),y.length>0?b=y[y.length-1]:b=null,x.pop(),x.length>0?_=x[x.length-1]:_=null};function sn(W,ue,be,Se){if(W.visible===!1)return;if(W.layers.test(ue.layers)){if(W.isGroup)be=W.renderOrder;else if(W.isLOD)W.autoUpdate===!0&&W.update(ue);else if(W.isLight)b.pushLight(W),W.castShadow&&b.pushShadow(W);else if(W.isSprite){if(!W.frustumCulled||K.intersectsSprite(W)){Se&&je.setFromMatrixPosition(W.matrixWorld).applyMatrix4(ae);const ct=ce.update(W),pt=W.material;pt.visible&&_.push(W,ct,pt,be,je.z,null)}}else if((W.isMesh||W.isLine||W.isPoints)&&(!W.frustumCulled||K.intersectsObject(W))){const ct=ce.update(W),pt=W.material;if(Se&&(W.boundingSphere!==void 0?(W.boundingSphere===null&&W.computeBoundingSphere(),je.copy(W.boundingSphere.center)):(ct.boundingSphere===null&&ct.computeBoundingSphere(),je.copy(ct.boundingSphere.center)),je.applyMatrix4(W.matrixWorld).applyMatrix4(ae)),Array.isArray(pt)){const Oe=ct.groups;for(let bt=0,_t=Oe.length;bt<_t;bt++){const xt=Oe[bt],en=pt[xt.materialIndex];en&&en.visible&&_.push(W,ct,en,be,je.z,xt)}}else pt.visible&&_.push(W,ct,pt,be,je.z,null)}}const Qe=W.children;for(let ct=0,pt=Qe.length;ct<pt;ct++)sn(Qe[ct],ue,be,Se)}function Bt(W,ue,be,Se){const ye=W.opaque,Qe=W.transmissive,ct=W.transparent;b.setupLightsView(be),ne===!0&&$e.setGlobalState(S.clippingPlanes,be),Qe.length>0&&yn(ye,Qe,ue,be),Se&&he.viewport(P.copy(Se)),ye.length>0&&nr(ye,ue,be),Qe.length>0&&nr(Qe,ue,be),ct.length>0&&nr(ct,ue,be),he.buffers.depth.setTest(!0),he.buffers.depth.setMask(!0),he.buffers.color.setMask(!0),he.setPolygonOffset(!1)}function yn(W,ue,be,Se){if((be.isScene===!0?be.overrideMaterial:null)!==null)return;const Qe=ve.isWebGL2;de===null&&(de=new Hs(1,1,{generateMipmaps:!0,type:me.has("EXT_color_buffer_half_float")?Td:fa,minFilter:fl,samples:Qe?4:0})),S.getDrawingBufferSize(_e),Qe?de.setSize(_e.x,_e.y):de.setSize(vx(_e.x),vx(_e.y));const ct=S.getRenderTarget();S.setRenderTarget(de),S.getClearColor(Y),V=S.getClearAlpha(),V<1&&S.setClearColor(16777215,.5),S.clear();const pt=S.toneMapping;S.toneMapping=ha,nr(W,be,Se),O.updateMultisampleRenderTarget(de),O.updateRenderTargetMipmap(de);let Oe=!1;for(let bt=0,_t=ue.length;bt<_t;bt++){const xt=ue[bt],en=xt.object,$n=xt.geometry,Zt=xt.material,bn=xt.group;if(Zt.side===Gi&&en.layers.test(Se.layers)){const mt=Zt.side;Zt.side=Hr,Zt.needsUpdate=!0,un(en,be,Se,$n,Zt,bn),Zt.side=mt,Zt.needsUpdate=!0,Oe=!0}}Oe===!0&&(O.updateMultisampleRenderTarget(de),O.updateRenderTargetMipmap(de)),S.setRenderTarget(ct),S.setClearColor(Y,V),S.toneMapping=pt}function nr(W,ue,be){const Se=ue.isScene===!0?ue.overrideMaterial:null;for(let ye=0,Qe=W.length;ye<Qe;ye++){const ct=W[ye],pt=ct.object,Oe=ct.geometry,bt=Se===null?ct.material:Se,_t=ct.group;pt.layers.test(be.layers)&&un(pt,ue,be,Oe,bt,_t)}}function un(W,ue,be,Se,ye,Qe){W.onBeforeRender(S,ue,be,Se,ye,Qe),W.modelViewMatrix.multiplyMatrices(be.matrixWorldInverse,W.matrixWorld),W.normalMatrix.getNormalMatrix(W.modelViewMatrix),ye.onBeforeRender(S,ue,be,Se,W,Qe),ye.transparent===!0&&ye.side===Gi&&ye.forceSinglePass===!1?(ye.side=Hr,ye.needsUpdate=!0,S.renderBufferDirect(be,ue,Se,ye,W,Qe),ye.side=ya,ye.needsUpdate=!0,S.renderBufferDirect(be,ue,Se,ye,W,Qe),ye.side=Gi):S.renderBufferDirect(be,ue,Se,ye,W,Qe),W.onAfterRender(S,ue,be,Se,ye,Qe)}function dn(W,ue,be){ue.isScene!==!0&&(ue=Le);const Se=ge.get(W),ye=b.state.lights,Qe=b.state.shadowsArray,ct=ye.state.version,pt=Pe.getParameters(W,ye.state,Qe,ue,be),Oe=Pe.getProgramCacheKey(pt);let bt=Se.programs;Se.environment=W.isMeshStandardMaterial?ue.environment:null,Se.fog=ue.fog,Se.envMap=(W.isMeshStandardMaterial?q:L).get(W.envMap||Se.environment),bt===void 0&&(W.addEventListener("dispose",qe),bt=new Map,Se.programs=bt);let _t=bt.get(Oe);if(_t!==void 0){if(Se.currentProgram===_t&&Se.lightsStateVersion===ct)return Ri(W,pt),_t}else pt.uniforms=Pe.getUniforms(W),W.onBuild(be,pt,S),W.onBeforeCompile(pt,S),_t=Pe.acquireProgram(pt,Oe),bt.set(Oe,_t),Se.uniforms=pt.uniforms;const xt=Se.uniforms;return(!W.isShaderMaterial&&!W.isRawShaderMaterial||W.clipping===!0)&&(xt.clippingPlanes=$e.uniform),Ri(W,pt),Se.needsLights=qd(W),Se.lightsStateVersion=ct,Se.needsLights&&(xt.ambientLightColor.value=ye.state.ambient,xt.lightProbe.value=ye.state.probe,xt.directionalLights.value=ye.state.directional,xt.directionalLightShadows.value=ye.state.directionalShadow,xt.spotLights.value=ye.state.spot,xt.spotLightShadows.value=ye.state.spotShadow,xt.rectAreaLights.value=ye.state.rectArea,xt.ltc_1.value=ye.state.rectAreaLTC1,xt.ltc_2.value=ye.state.rectAreaLTC2,xt.pointLights.value=ye.state.point,xt.pointLightShadows.value=ye.state.pointShadow,xt.hemisphereLights.value=ye.state.hemi,xt.directionalShadowMap.value=ye.state.directionalShadowMap,xt.directionalShadowMatrix.value=ye.state.directionalShadowMatrix,xt.spotShadowMap.value=ye.state.spotShadowMap,xt.spotLightMatrix.value=ye.state.spotLightMatrix,xt.spotLightMap.value=ye.state.spotLightMap,xt.pointShadowMap.value=ye.state.pointShadowMap,xt.pointShadowMatrix.value=ye.state.pointShadowMatrix),Se.currentProgram=_t,Se.uniformsList=null,_t}function qn(W){if(W.uniformsList===null){const ue=W.currentProgram.getUniforms();W.uniformsList=E0.seqWithValue(ue.seq,W.uniforms)}return W.uniformsList}function Ri(W,ue){const be=ge.get(W);be.outputColorSpace=ue.outputColorSpace,be.batching=ue.batching,be.instancing=ue.instancing,be.instancingColor=ue.instancingColor,be.skinning=ue.skinning,be.morphTargets=ue.morphTargets,be.morphNormals=ue.morphNormals,be.morphColors=ue.morphColors,be.morphTargetsCount=ue.morphTargetsCount,be.numClippingPlanes=ue.numClippingPlanes,be.numIntersection=ue.numClipIntersection,be.vertexAlphas=ue.vertexAlphas,be.vertexTangents=ue.vertexTangents,be.toneMapping=ue.toneMapping}function $r(W,ue,be,Se,ye){ue.isScene!==!0&&(ue=Le),O.resetTextureUnits();const Qe=ue.fog,ct=Se.isMeshStandardMaterial?ue.environment:null,pt=C===null?S.outputColorSpace:C.isXRRenderTarget===!0?C.texture.colorSpace:ba,Oe=(Se.isMeshStandardMaterial?q:L).get(Se.envMap||ct),bt=Se.vertexColors===!0&&!!be.attributes.color&&be.attributes.color.itemSize===4,_t=!!be.attributes.tangent&&(!!Se.normalMap||Se.anisotropy>0),xt=!!be.morphAttributes.position,en=!!be.morphAttributes.normal,$n=!!be.morphAttributes.color;let Zt=ha;Se.toneMapped&&(C===null||C.isXRRenderTarget===!0)&&(Zt=S.toneMapping);const bn=be.morphAttributes.position||be.morphAttributes.normal||be.morphAttributes.color,mt=bn!==void 0?bn.length:0,rt=ge.get(Se),yr=b.state.lights;if(ne===!0&&(ie===!0||W!==k)){const zn=W===k&&Se.id===j;$e.setState(Se,W,zn)}let Ct=!1;Se.version===rt.__version?(rt.needsLights&&rt.lightsStateVersion!==yr.state.version||rt.outputColorSpace!==pt||ye.isBatchedMesh&&rt.batching===!1||!ye.isBatchedMesh&&rt.batching===!0||ye.isInstancedMesh&&rt.instancing===!1||!ye.isInstancedMesh&&rt.instancing===!0||ye.isSkinnedMesh&&rt.skinning===!1||!ye.isSkinnedMesh&&rt.skinning===!0||ye.isInstancedMesh&&rt.instancingColor===!0&&ye.instanceColor===null||ye.isInstancedMesh&&rt.instancingColor===!1&&ye.instanceColor!==null||rt.envMap!==Oe||Se.fog===!0&&rt.fog!==Qe||rt.numClippingPlanes!==void 0&&(rt.numClippingPlanes!==$e.numPlanes||rt.numIntersection!==$e.numIntersection)||rt.vertexAlphas!==bt||rt.vertexTangents!==_t||rt.morphTargets!==xt||rt.morphNormals!==en||rt.morphColors!==$n||rt.toneMapping!==Zt||ve.isWebGL2===!0&&rt.morphTargetsCount!==mt)&&(Ct=!0):(Ct=!0,rt.__version=Se.version);let an=rt.currentProgram;Ct===!0&&(an=dn(Se,ue,ye));let ji=!1,ur=!1,Rn=!1;const tn=an.getUniforms(),mi=rt.uniforms;if(he.useProgram(an.program)&&(ji=!0,ur=!0,Rn=!0),Se.id!==j&&(j=Se.id,ur=!0),ji||k!==W){tn.setValue(G,"projectionMatrix",W.projectionMatrix),tn.setValue(G,"viewMatrix",W.matrixWorldInverse);const zn=tn.map.cameraPosition;zn!==void 0&&zn.setValue(G,je.setFromMatrixPosition(W.matrixWorld)),ve.logarithmicDepthBuffer&&tn.setValue(G,"logDepthBufFC",2/(Math.log(W.far+1)/Math.LN2)),(Se.isMeshPhongMaterial||Se.isMeshToonMaterial||Se.isMeshLambertMaterial||Se.isMeshBasicMaterial||Se.isMeshStandardMaterial||Se.isShaderMaterial)&&tn.setValue(G,"isOrthographic",W.isOrthographicCamera===!0),k!==W&&(k=W,ur=!0,Rn=!0)}if(ye.isSkinnedMesh){tn.setOptional(G,ye,"bindMatrix"),tn.setOptional(G,ye,"bindMatrixInverse");const zn=ye.skeleton;zn&&(ve.floatVertexTextures?(zn.boneTexture===null&&zn.computeBoneTexture(),tn.setValue(G,"boneTexture",zn.boneTexture,O)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}ye.isBatchedMesh&&(tn.setOptional(G,ye,"batchingTexture"),tn.setValue(G,"batchingTexture",ye._matricesTexture,O));const qs=be.morphAttributes;if((qs.position!==void 0||qs.normal!==void 0||qs.color!==void 0&&ve.isWebGL2===!0)&&Xe.update(ye,be,an),(ur||rt.receiveShadow!==ye.receiveShadow)&&(rt.receiveShadow=ye.receiveShadow,tn.setValue(G,"receiveShadow",ye.receiveShadow)),Se.isMeshGouraudMaterial&&Se.envMap!==null&&(mi.envMap.value=Oe,mi.flipEnvMap.value=Oe.isCubeTexture&&Oe.isRenderTargetTexture===!1?-1:1),ur&&(tn.setValue(G,"toneMappingExposure",S.toneMappingExposure),rt.needsLights&&bs(mi,Rn),Qe&&Se.fog===!0&&Ue.refreshFogUniforms(mi,Qe),Ue.refreshMaterialUniforms(mi,Se,re,ee,de),E0.upload(G,qn(rt),mi,O)),Se.isShaderMaterial&&Se.uniformsNeedUpdate===!0&&(E0.upload(G,qn(rt),mi,O),Se.uniformsNeedUpdate=!1),Se.isSpriteMaterial&&tn.setValue(G,"center",ye.center),tn.setValue(G,"modelViewMatrix",ye.modelViewMatrix),tn.setValue(G,"normalMatrix",ye.normalMatrix),tn.setValue(G,"modelMatrix",ye.matrixWorld),Se.isShaderMaterial||Se.isRawShaderMaterial){const zn=Se.uniformsGroups;for(let br=0,Zr=zn.length;br<Zr;br++)if(ve.isWebGL2){const Ea=zn[br];we.update(Ea,an),we.bind(Ea,an)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return an}function bs(W,ue){W.ambientLightColor.needsUpdate=ue,W.lightProbe.needsUpdate=ue,W.directionalLights.needsUpdate=ue,W.directionalLightShadows.needsUpdate=ue,W.pointLights.needsUpdate=ue,W.pointLightShadows.needsUpdate=ue,W.spotLights.needsUpdate=ue,W.spotLightShadows.needsUpdate=ue,W.rectAreaLights.needsUpdate=ue,W.hemisphereLights.needsUpdate=ue}function qd(W){return W.isMeshLambertMaterial||W.isMeshToonMaterial||W.isMeshPhongMaterial||W.isMeshStandardMaterial||W.isShadowMaterial||W.isShaderMaterial&&W.lights===!0}this.getActiveCubeFace=function(){return A},this.getActiveMipmapLevel=function(){return T},this.getRenderTarget=function(){return C},this.setRenderTargetTextures=function(W,ue,be){ge.get(W.texture).__webglTexture=ue,ge.get(W.depthTexture).__webglTexture=be;const Se=ge.get(W);Se.__hasExternalTextures=!0,Se.__hasExternalTextures&&(Se.__autoAllocateDepthBuffer=be===void 0,Se.__autoAllocateDepthBuffer||me.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Se.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(W,ue){const be=ge.get(W);be.__webglFramebuffer=ue,be.__useDefaultFramebuffer=ue===void 0},this.setRenderTarget=function(W,ue=0,be=0){C=W,A=ue,T=be;let Se=!0,ye=null,Qe=!1,ct=!1;if(W){const Oe=ge.get(W);Oe.__useDefaultFramebuffer!==void 0?(he.bindFramebuffer(G.FRAMEBUFFER,null),Se=!1):Oe.__webglFramebuffer===void 0?O.setupRenderTarget(W):Oe.__hasExternalTextures&&O.rebindTextures(W,ge.get(W.texture).__webglTexture,ge.get(W.depthTexture).__webglTexture);const bt=W.texture;(bt.isData3DTexture||bt.isDataArrayTexture||bt.isCompressedArrayTexture)&&(ct=!0);const _t=ge.get(W).__webglFramebuffer;W.isWebGLCubeRenderTarget?(Array.isArray(_t[ue])?ye=_t[ue][be]:ye=_t[ue],Qe=!0):ve.isWebGL2&&W.samples>0&&O.useMultisampledRTT(W)===!1?ye=ge.get(W).__webglMultisampledFramebuffer:Array.isArray(_t)?ye=_t[be]:ye=_t,P.copy(W.viewport),H.copy(W.scissor),B=W.scissorTest}else P.copy(z).multiplyScalar(re).floor(),H.copy(U).multiplyScalar(re).floor(),B=Z;if(he.bindFramebuffer(G.FRAMEBUFFER,ye)&&ve.drawBuffers&&Se&&he.drawBuffers(W,ye),he.viewport(P),he.scissor(H),he.setScissorTest(B),Qe){const Oe=ge.get(W.texture);G.framebufferTexture2D(G.FRAMEBUFFER,G.COLOR_ATTACHMENT0,G.TEXTURE_CUBE_MAP_POSITIVE_X+ue,Oe.__webglTexture,be)}else if(ct){const Oe=ge.get(W.texture),bt=ue||0;G.framebufferTextureLayer(G.FRAMEBUFFER,G.COLOR_ATTACHMENT0,Oe.__webglTexture,be||0,bt)}j=-1},this.readRenderTargetPixels=function(W,ue,be,Se,ye,Qe,ct){if(!(W&&W.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let pt=ge.get(W).__webglFramebuffer;if(W.isWebGLCubeRenderTarget&&ct!==void 0&&(pt=pt[ct]),pt){he.bindFramebuffer(G.FRAMEBUFFER,pt);try{const Oe=W.texture,bt=Oe.format,_t=Oe.type;if(bt!==oi&&Re.convert(bt)!==G.getParameter(G.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const xt=_t===Td&&(me.has("EXT_color_buffer_half_float")||ve.isWebGL2&&me.has("EXT_color_buffer_float"));if(_t!==fa&&Re.convert(_t)!==G.getParameter(G.IMPLEMENTATION_COLOR_READ_TYPE)&&!(_t===Ls&&(ve.isWebGL2||me.has("OES_texture_float")||me.has("WEBGL_color_buffer_float")))&&!xt){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ue>=0&&ue<=W.width-Se&&be>=0&&be<=W.height-ye&&G.readPixels(ue,be,Se,ye,Re.convert(bt),Re.convert(_t),Qe)}finally{const Oe=C!==null?ge.get(C).__webglFramebuffer:null;he.bindFramebuffer(G.FRAMEBUFFER,Oe)}}},this.copyFramebufferToTexture=function(W,ue,be=0){const Se=Math.pow(2,-be),ye=Math.floor(ue.image.width*Se),Qe=Math.floor(ue.image.height*Se);O.setTexture2D(ue,0),G.copyTexSubImage2D(G.TEXTURE_2D,be,0,0,W.x,W.y,ye,Qe),he.unbindTexture()},this.copyTextureToTexture=function(W,ue,be,Se=0){const ye=ue.image.width,Qe=ue.image.height,ct=Re.convert(be.format),pt=Re.convert(be.type);O.setTexture2D(be,0),G.pixelStorei(G.UNPACK_FLIP_Y_WEBGL,be.flipY),G.pixelStorei(G.UNPACK_PREMULTIPLY_ALPHA_WEBGL,be.premultiplyAlpha),G.pixelStorei(G.UNPACK_ALIGNMENT,be.unpackAlignment),ue.isDataTexture?G.texSubImage2D(G.TEXTURE_2D,Se,W.x,W.y,ye,Qe,ct,pt,ue.image.data):ue.isCompressedTexture?G.compressedTexSubImage2D(G.TEXTURE_2D,Se,W.x,W.y,ue.mipmaps[0].width,ue.mipmaps[0].height,ct,ue.mipmaps[0].data):G.texSubImage2D(G.TEXTURE_2D,Se,W.x,W.y,ct,pt,ue.image),Se===0&&be.generateMipmaps&&G.generateMipmap(G.TEXTURE_2D),he.unbindTexture()},this.copyTextureToTexture3D=function(W,ue,be,Se,ye=0){if(S.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const Qe=W.max.x-W.min.x+1,ct=W.max.y-W.min.y+1,pt=W.max.z-W.min.z+1,Oe=Re.convert(Se.format),bt=Re.convert(Se.type);let _t;if(Se.isData3DTexture)O.setTexture3D(Se,0),_t=G.TEXTURE_3D;else if(Se.isDataArrayTexture||Se.isCompressedArrayTexture)O.setTexture2DArray(Se,0),_t=G.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}G.pixelStorei(G.UNPACK_FLIP_Y_WEBGL,Se.flipY),G.pixelStorei(G.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Se.premultiplyAlpha),G.pixelStorei(G.UNPACK_ALIGNMENT,Se.unpackAlignment);const xt=G.getParameter(G.UNPACK_ROW_LENGTH),en=G.getParameter(G.UNPACK_IMAGE_HEIGHT),$n=G.getParameter(G.UNPACK_SKIP_PIXELS),Zt=G.getParameter(G.UNPACK_SKIP_ROWS),bn=G.getParameter(G.UNPACK_SKIP_IMAGES),mt=be.isCompressedTexture?be.mipmaps[ye]:be.image;G.pixelStorei(G.UNPACK_ROW_LENGTH,mt.width),G.pixelStorei(G.UNPACK_IMAGE_HEIGHT,mt.height),G.pixelStorei(G.UNPACK_SKIP_PIXELS,W.min.x),G.pixelStorei(G.UNPACK_SKIP_ROWS,W.min.y),G.pixelStorei(G.UNPACK_SKIP_IMAGES,W.min.z),be.isDataTexture||be.isData3DTexture?G.texSubImage3D(_t,ye,ue.x,ue.y,ue.z,Qe,ct,pt,Oe,bt,mt.data):be.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),G.compressedTexSubImage3D(_t,ye,ue.x,ue.y,ue.z,Qe,ct,pt,Oe,mt.data)):G.texSubImage3D(_t,ye,ue.x,ue.y,ue.z,Qe,ct,pt,Oe,bt,mt),G.pixelStorei(G.UNPACK_ROW_LENGTH,xt),G.pixelStorei(G.UNPACK_IMAGE_HEIGHT,en),G.pixelStorei(G.UNPACK_SKIP_PIXELS,$n),G.pixelStorei(G.UNPACK_SKIP_ROWS,Zt),G.pixelStorei(G.UNPACK_SKIP_IMAGES,bn),ye===0&&Se.generateMipmaps&&G.generateMipmap(_t),he.unbindTexture()},this.initTexture=function(W){W.isCubeTexture?O.setTextureCube(W,0):W.isData3DTexture?O.setTexture3D(W,0):W.isDataArrayTexture||W.isCompressedArrayTexture?O.setTexture2DArray(W,0):O.setTexture2D(W,0),he.unbindTexture()},this.resetState=function(){A=0,T=0,C=null,he.reset(),J.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Ds}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const n=this.getContext();n.drawingBufferColorSpace=e===av?"display-p3":"srgb",n.unpackColorSpace=Jt.workingColorSpace===Cp?"display-p3":"srgb"}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===ar?sl:GS}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===sl?ar:ba}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class eD extends tM{}eD.prototype.isWebGL1Renderer=!0;class dv{constructor(e,n=25e-5){this.isFogExp2=!0,this.name="",this.color=new nt(e),this.density=n}clone(){return new dv(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class hv{constructor(e,n=1,r=1e3){this.isFog=!0,this.name="",this.color=new nt(e),this.near=n,this.far=r}clone(){return new hv(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class yx extends Xt{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(n.object.backgroundIntensity=this.backgroundIntensity),n}}class fv{constructor(e,n){this.isInterleavedBuffer=!0,this.array=e,this.stride=n,this.count=e!==void 0?e.length/n:0,this.usage=ap,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=qi()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return console.warn("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,n,r){e*=this.stride,r*=n.stride;for(let i=0,s=this.stride;i<s;i++)this.array[e+i]=n.array[r+i];return this}set(e,n=0){return this.array.set(e,n),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=qi()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const n=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(n,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=qi()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const ri=new X;class jc{constructor(e,n,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=n,this.offset=r,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let n=0,r=this.data.count;n<r;n++)ri.fromBufferAttribute(this,n),ri.applyMatrix4(e),this.setXYZ(n,ri.x,ri.y,ri.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)ri.fromBufferAttribute(this,n),ri.applyNormalMatrix(e),this.setXYZ(n,ri.x,ri.y,ri.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)ri.fromBufferAttribute(this,n),ri.transformDirection(e),this.setXYZ(n,ri.x,ri.y,ri.z);return this}setX(e,n){return this.normalized&&(n=jt(n,this.array)),this.data.array[e*this.data.stride+this.offset]=n,this}setY(e,n){return this.normalized&&(n=jt(n,this.array)),this.data.array[e*this.data.stride+this.offset+1]=n,this}setZ(e,n){return this.normalized&&(n=jt(n,this.array)),this.data.array[e*this.data.stride+this.offset+2]=n,this}setW(e,n){return this.normalized&&(n=jt(n,this.array)),this.data.array[e*this.data.stride+this.offset+3]=n,this}getX(e){let n=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(n=Mi(n,this.array)),n}getY(e){let n=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(n=Mi(n,this.array)),n}getZ(e){let n=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(n=Mi(n,this.array)),n}getW(e){let n=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(n=Mi(n,this.array)),n}setXY(e,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(n=jt(n,this.array),r=jt(r,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this}setXYZ(e,n,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(n=jt(n,this.array),r=jt(r,this.array),i=jt(i,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,n,r,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(n=jt(n,this.array),r=jt(r,this.array),i=jt(i,this.array),s=jt(s,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)n.push(this.data.array[i+s])}return new qt(new this.array.constructor(n),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new jc(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)n.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:n,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class nM extends Cr{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new nt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let wu;const Lh=new X,Su=new X,Mu=new X,Eu=new ke,Dh=new ke,tD=new St,_g=new X,Ih=new X,wg=new X,yC=new ke,B1=new ke,bC=new ke;class nD extends Xt{constructor(e=new nM){if(super(),this.isSprite=!0,this.type="Sprite",wu===void 0){wu=new At;const n=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new fv(n,5);wu.setIndex([0,1,2,0,2,3]),wu.setAttribute("position",new jc(r,3,0,!1)),wu.setAttribute("uv",new jc(r,2,3,!1))}this.geometry=wu,this.material=e,this.center=new ke(.5,.5)}raycast(e,n){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Su.setFromMatrixScale(this.matrixWorld),tD.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Mu.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Su.multiplyScalar(-Mu.z);const r=this.material.rotation;let i,s;r!==0&&(s=Math.cos(r),i=Math.sin(r));const a=this.center;Sg(_g.set(-.5,-.5,0),Mu,a,Su,i,s),Sg(Ih.set(.5,-.5,0),Mu,a,Su,i,s),Sg(wg.set(.5,.5,0),Mu,a,Su,i,s),yC.set(0,0),B1.set(1,0),bC.set(1,1);let l=e.ray.intersectTriangle(_g,Ih,wg,!1,Lh);if(l===null&&(Sg(Ih.set(-.5,.5,0),Mu,a,Su,i,s),B1.set(0,1),l=e.ray.intersectTriangle(_g,wg,Ih,!1,Lh),l===null))return;const c=e.ray.origin.distanceTo(Lh);c<e.near||c>e.far||n.push({distance:c,point:Lh.clone(),uv:Si.getInterpolation(Lh,_g,Ih,wg,yC,B1,bC,new ke),face:null,object:this})}copy(e,n){return super.copy(e,n),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function Sg(t,e,n,r,i,s){Eu.subVectors(t,n).addScalar(.5).multiply(r),i!==void 0?(Dh.x=s*Eu.x-i*Eu.y,Dh.y=i*Eu.x+s*Eu.y):Dh.copy(Eu),t.copy(e),t.x+=Dh.x,t.y+=Dh.y,t.applyMatrix4(tD)}const Mg=new X,_C=new X;class rD extends Xt{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const n=e.levels;for(let r=0,i=n.length;r<i;r++){const s=n[r];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,n=0,r=0){n=Math.abs(n);const i=this.levels;let s;for(s=0;s<i.length&&!(n<i[s].distance);s++);return i.splice(s,0,{distance:n,hysteresis:r,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const n=this.levels;if(n.length>0){let r,i;for(r=1,i=n.length;r<i;r++){let s=n[r].distance;if(n[r].object.visible&&(s-=s*n[r].hysteresis),e<s)break}return n[r-1].object}return null}raycast(e,n){if(this.levels.length>0){Mg.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(Mg);this.getObjectForDistance(i).raycast(e,n)}}update(e){const n=this.levels;if(n.length>1){Mg.setFromMatrixPosition(e.matrixWorld),_C.setFromMatrixPosition(this.matrixWorld);const r=Mg.distanceTo(_C)/e.zoom;n[0].object.visible=!0;let i,s;for(i=1,s=n.length;i<s;i++){let a=n[i].distance;if(n[i].object.visible&&(a-=a*n[i].hysteresis),r>=a)n[i-1].object.visible=!1,n[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<s;i++)n[i].object.visible=!1}}toJSON(e){const n=super.toJSON(e);this.autoUpdate===!1&&(n.object.autoUpdate=!1),n.object.levels=[];const r=this.levels;for(let i=0,s=r.length;i<s;i++){const a=r[i];n.object.levels.push({object:a.object.uuid,distance:a.distance,hysteresis:a.hysteresis})}return n}}const wC=new X,SC=new Yt,MC=new Yt,Nq=new X,EC=new St,Eg=new X,V1=new Tr,NC=new St,H1=new zc;class iD extends Fn{constructor(e,n){super(e,n),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=e_,this.bindMatrix=new St,this.bindMatrixInverse=new St,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Wr),this.boundingBox.makeEmpty();const n=e.getAttribute("position");for(let r=0;r<n.count;r++)this.getVertexPosition(r,Eg),this.boundingBox.expandByPoint(Eg)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Tr),this.boundingSphere.makeEmpty();const n=e.getAttribute("position");for(let r=0;r<n.count;r++)this.getVertexPosition(r,Eg),this.boundingSphere.expandByPoint(Eg)}copy(e,n){return super.copy(e,n),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,n){const r=this.material,i=this.matrixWorld;r!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),V1.copy(this.boundingSphere),V1.applyMatrix4(i),e.ray.intersectsSphere(V1)!==!1&&(NC.copy(i).invert(),H1.copy(e.ray).applyMatrix4(NC),!(this.boundingBox!==null&&H1.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,n,H1)))}getVertexPosition(e,n){return super.getVertexPosition(e,n),this.applyBoneTransform(e,n),n}bind(e,n){this.skeleton=e,n===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),n=this.matrixWorld),this.bindMatrix.copy(n),this.bindMatrixInverse.copy(n).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Yt,n=this.geometry.attributes.skinWeight;for(let r=0,i=n.count;r<i;r++){e.fromBufferAttribute(n,r);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),n.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===e_?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===x4?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,n){const r=this.skeleton,i=this.geometry;SC.fromBufferAttribute(i.attributes.skinIndex,e),MC.fromBufferAttribute(i.attributes.skinWeight,e),wC.copy(n).applyMatrix4(this.bindMatrix),n.set(0,0,0);for(let s=0;s<4;s++){const a=MC.getComponent(s);if(a!==0){const l=SC.getComponent(s);EC.multiplyMatrices(r.bones[l].matrixWorld,r.boneInverses[l]),n.addScaledVector(Nq.copy(wC).applyMatrix4(EC),a)}}return n.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,n){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,n)}}class rM extends Xt{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Mc extends Cn{constructor(e=null,n=1,r=1,i,s,a,l,c,u=Wn,d=Wn,f,m){super(null,a,l,c,u,d,i,s,f,m),this.isDataTexture=!0,this.image={data:e,width:n,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const TC=new St,Tq=new St;class pv{constructor(e=[],n=[]){this.uuid=qi(),this.bones=e.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,n=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),n.length===0)this.calculateInverses();else if(e.length!==n.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new St)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,n=this.bones.length;e<n;e++){const r=new St;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,n=this.bones.length;e<n;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,n=this.bones.length;e<n;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,n=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let s=0,a=e.length;s<a;s++){const l=e[s]?e[s].matrixWorld:Tq;TC.multiplyMatrices(l,n[s]),TC.toArray(r,s*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new pv(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const n=new Float32Array(e*e*4);n.set(this.boneMatrices);const r=new Mc(n,e,e,oi,Ls);return r.needsUpdate=!0,this.boneMatrices=n,this.boneTexture=r,this}getBoneByName(e){for(let n=0,r=this.bones.length;n<r;n++){const i=this.bones[n];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,n){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){const s=e.bones[r];let a=n[s];a===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),a=new rM),this.bones.push(a),this.boneInverses.push(new St().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const n=this.bones,r=this.boneInverses;for(let i=0,s=n.length;i<s;i++){const a=n[i];e.bones.push(a.uuid);const l=r[i];e.boneInverses.push(l.toArray())}return e}}class Lc extends qt{constructor(e,n,r,i=1){super(e,n,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Nu=new St,AC=new St,Ng=[],CC=new Wr,Aq=new St,Uh=new Fn,Oh=new Tr;class sD extends Fn{constructor(e,n,r){super(e,n),this.isInstancedMesh=!0,this.instanceMatrix=new Lc(new Float32Array(r*16),16),this.instanceColor=null,this.count=r,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<r;i++)this.setMatrixAt(i,Aq)}computeBoundingBox(){const e=this.geometry,n=this.count;this.boundingBox===null&&(this.boundingBox=new Wr),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let r=0;r<n;r++)this.getMatrixAt(r,Nu),CC.copy(e.boundingBox).applyMatrix4(Nu),this.boundingBox.union(CC)}computeBoundingSphere(){const e=this.geometry,n=this.count;this.boundingSphere===null&&(this.boundingSphere=new Tr),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let r=0;r<n;r++)this.getMatrixAt(r,Nu),Oh.copy(e.boundingSphere).applyMatrix4(Nu),this.boundingSphere.union(Oh)}copy(e,n){return super.copy(e,n),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,n){n.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,n){n.fromArray(this.instanceMatrix.array,e*16)}raycast(e,n){const r=this.matrixWorld,i=this.count;if(Uh.geometry=this.geometry,Uh.material=this.material,Uh.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Oh.copy(this.boundingSphere),Oh.applyMatrix4(r),e.ray.intersectsSphere(Oh)!==!1))for(let s=0;s<i;s++){this.getMatrixAt(s,Nu),AC.multiplyMatrices(r,Nu),Uh.matrixWorld=AC,Uh.raycast(e,Ng);for(let a=0,l=Ng.length;a<l;a++){const c=Ng[a];c.instanceId=s,c.object=this,n.push(c)}Ng.length=0}}setColorAt(e,n){this.instanceColor===null&&(this.instanceColor=new Lc(new Float32Array(this.instanceMatrix.count*3),3)),n.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,n){n.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}function Cq(t,e){return t.z-e.z}function kq(t,e){return e.z-t.z}class Pq{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,n){const r=this.pool,i=this.list;this.index>=r.length&&r.push({start:-1,count:-1,z:-1});const s=r[this.index];i.push(s),this.index++,s.start=e.start,s.count=e.count,s.z=n}reset(){this.list.length=0,this.index=0}}const Tu="batchId",Do=new St,kC=new St,Rq=new St,PC=new St,G1=new jp,Tg=new Wr,Gl=new Tr,Fh=new X,W1=new Pq,Or=new Fn,Ag=[];function jq(t,e,n=0){const r=e.itemSize;if(t.isInterleavedBufferAttribute||t.array.constructor!==e.array.constructor){const i=t.count;for(let s=0;s<i;s++)for(let a=0;a<r;a++)e.setComponent(s+n,a,t.getComponent(s,a))}else e.array.set(t.array,n*r);e.needsUpdate=!0}class aD extends Fn{get maxGeometryCount(){return this._maxGeometryCount}constructor(e,n,r=n*2,i){super(new At,i),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawRanges=[],this._reservedRanges=[],this._visibility=[],this._active=[],this._bounds=[],this._maxGeometryCount=e,this._maxVertexCount=n,this._maxIndexCount=r,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._visibilityChanged=!0,this._matricesTexture=null,this._initMatricesTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxGeometryCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const n=new Float32Array(e*e*4),r=new Mc(n,e,e,oi,Ls);this._matricesTexture=r}_initializeGeometry(e){const n=this.geometry,r=this._maxVertexCount,i=this._maxGeometryCount,s=this._maxIndexCount;if(this._geometryInitialized===!1){for(const l in e.attributes){const c=e.getAttribute(l),{array:u,itemSize:d,normalized:f}=c,m=new u.constructor(r*d),g=new c.constructor(m,d,f);g.setUsage(c.usage),n.setAttribute(l,g)}if(e.getIndex()!==null){const l=r>65536?new Uint32Array(s):new Uint16Array(s);n.setIndex(new qt(l,1))}const a=i>65536?new Uint32Array(r):new Uint16Array(r);n.setAttribute(Tu,new qt(a,1)),this._geometryInitialized=!0}}_validateGeometry(e){if(e.getAttribute(Tu))throw new Error(`BatchedMesh: Geometry cannot use attribute "${Tu}"`);const n=this.geometry;if(!!e.getIndex()!=!!n.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const r in n.attributes){if(r===Tu)continue;if(!e.hasAttribute(r))throw new Error(`BatchedMesh: Added geometry missing "${r}". All geometries must have consistent attributes.`);const i=e.getAttribute(r),s=n.getAttribute(r);if(i.itemSize!==s.itemSize||i.normalized!==s.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Wr);const e=this._geometryCount,n=this.boundingBox,r=this._active;n.makeEmpty();for(let i=0;i<e;i++)r[i]!==!1&&(this.getMatrixAt(i,Do),this.getBoundingBoxAt(i,Tg).applyMatrix4(Do),n.union(Tg))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Tr);const e=this._geometryCount,n=this.boundingSphere,r=this._active;n.makeEmpty();for(let i=0;i<e;i++)r[i]!==!1&&(this.getMatrixAt(i,Do),this.getBoundingSphereAt(i,Gl).applyMatrix4(Do),n.union(Gl))}addGeometry(e,n=-1,r=-1){if(this._initializeGeometry(e),this._validateGeometry(e),this._geometryCount>=this._maxGeometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");const i={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let s=null;const a=this._reservedRanges,l=this._drawRanges,c=this._bounds;this._geometryCount!==0&&(s=a[a.length-1]),n===-1?i.vertexCount=e.getAttribute("position").count:i.vertexCount=n,s===null?i.vertexStart=0:i.vertexStart=s.vertexStart+s.vertexCount;const u=e.getIndex(),d=u!==null;if(d&&(r===-1?i.indexCount=u.count:i.indexCount=r,s===null?i.indexStart=0:i.indexStart=s.indexStart+s.indexCount),i.indexStart!==-1&&i.indexStart+i.indexCount>this._maxIndexCount||i.vertexStart+i.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const f=this._visibility,m=this._active,g=this._matricesTexture,v=this._matricesTexture.image.data;f.push(!0),m.push(!0);const _=this._geometryCount;this._geometryCount++,Rq.toArray(v,_*16),g.needsUpdate=!0,a.push(i),l.push({start:d?i.indexStart:i.vertexStart,count:-1}),c.push({boxInitialized:!1,box:new Wr,sphereInitialized:!1,sphere:new Tr});const b=this.geometry.getAttribute(Tu);for(let x=0;x<i.vertexCount;x++)b.setX(i.vertexStart+x,_);return b.needsUpdate=!0,this.setGeometryAt(_,e),_}setGeometryAt(e,n){if(e>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(n);const r=this.geometry,i=r.getIndex()!==null,s=r.getIndex(),a=n.getIndex(),l=this._reservedRanges[e];if(i&&a.count>l.indexCount||n.attributes.position.count>l.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const c=l.vertexStart,u=l.vertexCount;for(const g in r.attributes){if(g===Tu)continue;const v=n.getAttribute(g),_=r.getAttribute(g);jq(v,_,c);const b=v.itemSize;for(let x=v.count,y=u;x<y;x++){const S=c+x;for(let E=0;E<b;E++)_.setComponent(S,E,0)}_.needsUpdate=!0}if(i){const g=l.indexStart;for(let v=0;v<a.count;v++)s.setX(g+v,c+a.getX(v));for(let v=a.count,_=l.indexCount;v<_;v++)s.setX(g+v,c);s.needsUpdate=!0}const d=this._bounds[e];n.boundingBox!==null?(d.box.copy(n.boundingBox),d.boxInitialized=!0):d.boxInitialized=!1,n.boundingSphere!==null?(d.sphere.copy(n.boundingSphere),d.sphereInitialized=!0):d.sphereInitialized=!1;const f=this._drawRanges[e],m=n.getAttribute("position");return f.count=i?a.count:m.count,this._visibilityChanged=!0,e}deleteGeometry(e){const n=this._active;return e>=n.length||n[e]===!1?this:(n[e]=!1,this._visibilityChanged=!0,this)}getBoundingBoxAt(e,n){if(this._active[e]===!1)return this;const i=this._bounds[e],s=i.box,a=this.geometry;if(i.boxInitialized===!1){s.makeEmpty();const l=a.index,c=a.attributes.position,u=this._drawRanges[e];for(let d=u.start,f=u.start+u.count;d<f;d++){let m=d;l&&(m=l.getX(m)),s.expandByPoint(Fh.fromBufferAttribute(c,m))}i.boxInitialized=!0}return n.copy(s),n}getBoundingSphereAt(e,n){if(this._active[e]===!1)return this;const i=this._bounds[e],s=i.sphere,a=this.geometry;if(i.sphereInitialized===!1){s.makeEmpty(),this.getBoundingBoxAt(e,Tg),Tg.getCenter(s.center);const l=a.index,c=a.attributes.position,u=this._drawRanges[e];let d=0;for(let f=u.start,m=u.start+u.count;f<m;f++){let g=f;l&&(g=l.getX(g)),Fh.fromBufferAttribute(c,g),d=Math.max(d,s.center.distanceToSquared(Fh))}s.radius=Math.sqrt(d),i.sphereInitialized=!0}return n.copy(s),n}setMatrixAt(e,n){const r=this._active,i=this._matricesTexture,s=this._matricesTexture.image.data,a=this._geometryCount;return e>=a||r[e]===!1?this:(n.toArray(s,e*16),i.needsUpdate=!0,this)}getMatrixAt(e,n){const r=this._active,i=this._matricesTexture.image.data,s=this._geometryCount;return e>=s||r[e]===!1?null:n.fromArray(i,e*16)}setVisibleAt(e,n){const r=this._visibility,i=this._active,s=this._geometryCount;return e>=s||i[e]===!1||r[e]===n?this:(r[e]=n,this._visibilityChanged=!0,this)}getVisibleAt(e){const n=this._visibility,r=this._active,i=this._geometryCount;return e>=i||r[e]===!1?!1:n[e]}raycast(e,n){const r=this._visibility,i=this._active,s=this._drawRanges,a=this._geometryCount,l=this.matrixWorld,c=this.geometry;Or.material=this.material,Or.geometry.index=c.index,Or.geometry.attributes=c.attributes,Or.geometry.boundingBox===null&&(Or.geometry.boundingBox=new Wr),Or.geometry.boundingSphere===null&&(Or.geometry.boundingSphere=new Tr);for(let u=0;u<a;u++){if(!r[u]||!i[u])continue;const d=s[u];Or.geometry.setDrawRange(d.start,d.count),this.getMatrixAt(u,Or.matrixWorld).premultiply(l),this.getBoundingBoxAt(u,Or.geometry.boundingBox),this.getBoundingSphereAt(u,Or.geometry.boundingSphere),Or.raycast(e,Ag);for(let f=0,m=Ag.length;f<m;f++){const g=Ag[f];g.object=this,g.batchId=u,n.push(g)}Ag.length=0}Or.material=null,Or.geometry.index=null,Or.geometry.attributes={},Or.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._drawRanges=e._drawRanges.map(n=>({...n})),this._reservedRanges=e._reservedRanges.map(n=>({...n})),this._visibility=e._visibility.slice(),this._active=e._active.slice(),this._bounds=e._bounds.map(n=>({boxInitialized:n.boxInitialized,box:n.box.clone(),sphereInitialized:n.sphereInitialized,sphere:n.sphere.clone()})),this._maxGeometryCount=e._maxGeometryCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.slice(),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this}onBeforeRender(e,n,r,i,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const a=i.getIndex(),l=a===null?1:a.array.BYTES_PER_ELEMENT,c=this._visibility,u=this._multiDrawStarts,d=this._multiDrawCounts,f=this._drawRanges,m=this.perObjectFrustumCulled;m&&(PC.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse).multiply(this.matrixWorld),G1.setFromProjectionMatrix(PC,e.isWebGPURenderer?Ad:Ds));let g=0;if(this.sortObjects){kC.copy(this.matrixWorld).invert(),Fh.setFromMatrixPosition(r.matrixWorld).applyMatrix4(kC);for(let b=0,x=c.length;b<x;b++)if(c[b]){this.getMatrixAt(b,Do),this.getBoundingSphereAt(b,Gl).applyMatrix4(Do);let y=!1;if(m&&(y=!G1.intersectsSphere(Gl)),!y){const S=Fh.distanceTo(Gl.center);W1.push(f[b],S)}}const v=W1.list,_=this.customSort;_===null?v.sort(s.transparent?kq:Cq):_.call(this,v,r);for(let b=0,x=v.length;b<x;b++){const y=v[b];u[g]=y.start*l,d[g]=y.count,g++}W1.reset()}else for(let v=0,_=c.length;v<_;v++)if(c[v]){let b=!1;if(m&&(this.getMatrixAt(v,Do),this.getBoundingSphereAt(v,Gl).applyMatrix4(Do),b=!G1.intersectsSphere(Gl)),!b){const x=f[v];u[g]=x.start*l,d[g]=x.count,g++}}this._multiDrawCount=g,this._visibilityChanged=!1}onBeforeShadow(e,n,r,i,s,a){this.onBeforeRender(e,null,i,s,a)}}class pi extends Cr{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new nt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const RC=new X,jC=new X,LC=new St,X1=new zc,Cg=new Tr;class pl extends Xt{constructor(e=new At,n=new pi){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,r=[0];for(let i=1,s=n.count;i<s;i++)RC.fromBufferAttribute(n,i-1),jC.fromBufferAttribute(n,i),r[i]=r[i-1],r[i]+=RC.distanceTo(jC);e.setAttribute("lineDistance",new ot(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,n){const r=this.geometry,i=this.matrixWorld,s=e.params.Line.threshold,a=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),Cg.copy(r.boundingSphere),Cg.applyMatrix4(i),Cg.radius+=s,e.ray.intersectsSphere(Cg)===!1)return;LC.copy(i).invert(),X1.copy(e.ray).applyMatrix4(LC);const l=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=l*l,u=new X,d=new X,f=new X,m=new X,g=this.isLineSegments?2:1,v=r.index,b=r.attributes.position;if(v!==null){const x=Math.max(0,a.start),y=Math.min(v.count,a.start+a.count);for(let S=x,E=y-1;S<E;S+=g){const A=v.getX(S),T=v.getX(S+1);if(u.fromBufferAttribute(b,A),d.fromBufferAttribute(b,T),X1.distanceSqToSegment(u,d,m,f)>c)continue;m.applyMatrix4(this.matrixWorld);const j=e.ray.origin.distanceTo(m);j<e.near||j>e.far||n.push({distance:j,point:f.clone().applyMatrix4(this.matrixWorld),index:S,face:null,faceIndex:null,object:this})}}else{const x=Math.max(0,a.start),y=Math.min(b.count,a.start+a.count);for(let S=x,E=y-1;S<E;S+=g){if(u.fromBufferAttribute(b,S),d.fromBufferAttribute(b,S+1),X1.distanceSqToSegment(u,d,m,f)>c)continue;m.applyMatrix4(this.matrixWorld);const T=e.ray.origin.distanceTo(m);T<e.near||T>e.far||n.push({distance:T,point:f.clone().applyMatrix4(this.matrixWorld),index:S,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=i.length;s<a;s++){const l=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}}const DC=new X,IC=new X;class Ma extends pl{constructor(e,n){super(e,n),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,r=[];for(let i=0,s=n.count;i<s;i+=2)DC.fromBufferAttribute(n,i),IC.fromBufferAttribute(n,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+DC.distanceTo(IC);e.setAttribute("lineDistance",new ot(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class oD extends pl{constructor(e,n){super(e,n),this.isLineLoop=!0,this.type="LineLoop"}}class iM extends Cr{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new nt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const UC=new St,P_=new zc,kg=new Tr,Pg=new X;class lD extends Xt{constructor(e=new At,n=new iM){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,n){const r=this.geometry,i=this.matrixWorld,s=e.params.Points.threshold,a=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),kg.copy(r.boundingSphere),kg.applyMatrix4(i),kg.radius+=s,e.ray.intersectsSphere(kg)===!1)return;UC.copy(i).invert(),P_.copy(e.ray).applyMatrix4(UC);const l=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=l*l,u=r.index,f=r.attributes.position;if(u!==null){const m=Math.max(0,a.start),g=Math.min(u.count,a.start+a.count);for(let v=m,_=g;v<_;v++){const b=u.getX(v);Pg.fromBufferAttribute(f,b),OC(Pg,b,c,i,e,n,this)}}else{const m=Math.max(0,a.start),g=Math.min(f.count,a.start+a.count);for(let v=m,_=g;v<_;v++)Pg.fromBufferAttribute(f,v),OC(Pg,v,c,i,e,n,this)}}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=i.length;s<a;s++){const l=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}}function OC(t,e,n,r,i,s,a){const l=P_.distanceSqToPoint(t);if(l<n){const c=new X;P_.closestPointToPoint(t,c),c.applyMatrix4(r);const u=i.ray.origin.distanceTo(c);if(u<i.near||u>i.far)return;s.push({distance:u,distanceToRay:Math.sqrt(l),point:c,index:e,face:null,object:a})}}class Lq extends Cn{constructor(e,n,r,i,s,a,l,c,u){super(e,n,r,i,s,a,l,c,u),this.isVideoTexture=!0,this.minFilter=a!==void 0?a:Mn,this.magFilter=s!==void 0?s:Mn,this.generateMipmaps=!1;const d=this;function f(){d.needsUpdate=!0,e.requestVideoFrameCallback(f)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(f)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class Dq extends Cn{constructor(e,n){super({width:e,height:n}),this.isFramebufferTexture=!0,this.magFilter=Wn,this.minFilter=Wn,this.generateMipmaps=!1,this.needsUpdate=!0}}class mv extends Cn{constructor(e,n,r,i,s,a,l,c,u,d,f,m){super(null,a,l,c,u,d,i,s,f,m),this.isCompressedTexture=!0,this.image={width:n,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class Iq extends mv{constructor(e,n,r,i,s,a){super(e,n,r,s,a),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=Br}}class Uq extends mv{constructor(e,n,r){super(void 0,e[0].width,e[0].height,n,r,oo),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class Oq extends Cn{constructor(e,n,r,i,s,a,l,c,u){super(e,n,r,i,s,a,l,c,u),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Xs{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,n){const r=this.getUtoTmapping(e);return this.getPoint(r,n)}getPoints(e=5){const n=[];for(let r=0;r<=e;r++)n.push(this.getPoint(r/e));return n}getSpacedPoints(e=5){const n=[];for(let r=0;r<=e;r++)n.push(this.getPointAt(r/e));return n}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const n=[];let r,i=this.getPoint(0),s=0;n.push(0);for(let a=1;a<=e;a++)r=this.getPoint(a/e),s+=r.distanceTo(i),n.push(s),i=r;return this.cacheArcLengths=n,n}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,n){const r=this.getLengths();let i=0;const s=r.length;let a;n?a=n:a=e*r[s-1];let l=0,c=s-1,u;for(;l<=c;)if(i=Math.floor(l+(c-l)/2),u=r[i]-a,u<0)l=i+1;else if(u>0)c=i-1;else{c=i;break}if(i=c,r[i]===a)return i/(s-1);const d=r[i],m=r[i+1]-d,g=(a-d)/m;return(i+g)/(s-1)}getTangent(e,n){let i=e-1e-4,s=e+1e-4;i<0&&(i=0),s>1&&(s=1);const a=this.getPoint(i),l=this.getPoint(s),c=n||(a.isVector2?new ke:new X);return c.copy(l).sub(a).normalize(),c}getTangentAt(e,n){const r=this.getUtoTmapping(e);return this.getTangent(r,n)}computeFrenetFrames(e,n){const r=new X,i=[],s=[],a=[],l=new X,c=new St;for(let g=0;g<=e;g++){const v=g/e;i[g]=this.getTangentAt(v,new X)}s[0]=new X,a[0]=new X;let u=Number.MAX_VALUE;const d=Math.abs(i[0].x),f=Math.abs(i[0].y),m=Math.abs(i[0].z);d<=u&&(u=d,r.set(1,0,0)),f<=u&&(u=f,r.set(0,1,0)),m<=u&&r.set(0,0,1),l.crossVectors(i[0],r).normalize(),s[0].crossVectors(i[0],l),a[0].crossVectors(i[0],s[0]);for(let g=1;g<=e;g++){if(s[g]=s[g-1].clone(),a[g]=a[g-1].clone(),l.crossVectors(i[g-1],i[g]),l.length()>Number.EPSILON){l.normalize();const v=Math.acos(On(i[g-1].dot(i[g]),-1,1));s[g].applyMatrix4(c.makeRotationAxis(l,v))}a[g].crossVectors(i[g],s[g])}if(n===!0){let g=Math.acos(On(s[0].dot(s[e]),-1,1));g/=e,i[0].dot(l.crossVectors(s[0],s[e]))>0&&(g=-g);for(let v=1;v<=e;v++)s[v].applyMatrix4(c.makeRotationAxis(i[v],g*v)),a[v].crossVectors(i[v],s[v])}return{tangents:i,normals:s,binormals:a}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class gv extends Xs{constructor(e=0,n=0,r=1,i=1,s=0,a=Math.PI*2,l=!1,c=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=n,this.xRadius=r,this.yRadius=i,this.aStartAngle=s,this.aEndAngle=a,this.aClockwise=l,this.aRotation=c}getPoint(e,n){const r=n||new ke,i=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const a=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=i;for(;s>i;)s-=i;s<Number.EPSILON&&(a?s=0:s=i),this.aClockwise===!0&&!a&&(s===i?s=-i:s=s-i);const l=this.aStartAngle+e*s;let c=this.aX+this.xRadius*Math.cos(l),u=this.aY+this.yRadius*Math.sin(l);if(this.aRotation!==0){const d=Math.cos(this.aRotation),f=Math.sin(this.aRotation),m=c-this.aX,g=u-this.aY;c=m*d-g*f+this.aX,u=m*f+g*d+this.aY}return r.set(c,u)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class cD extends gv{constructor(e,n,r,i,s,a){super(e,n,r,r,i,s,a),this.isArcCurve=!0,this.type="ArcCurve"}}function sM(){let t=0,e=0,n=0,r=0;function i(s,a,l,c){t=s,e=l,n=-3*s+3*a-2*l-c,r=2*s-2*a+l+c}return{initCatmullRom:function(s,a,l,c,u){i(a,l,u*(l-s),u*(c-a))},initNonuniformCatmullRom:function(s,a,l,c,u,d,f){let m=(a-s)/u-(l-s)/(u+d)+(l-a)/d,g=(l-a)/d-(c-a)/(d+f)+(c-l)/f;m*=d,g*=d,i(a,l,m,g)},calc:function(s){const a=s*s,l=a*s;return t+e*s+n*a+r*l}}}const Rg=new X,Y1=new sM,q1=new sM,$1=new sM;class xv extends Xs{constructor(e=[],n=!1,r="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=n,this.curveType=r,this.tension=i}getPoint(e,n=new X){const r=n,i=this.points,s=i.length,a=(s-(this.closed?0:1))*e;let l=Math.floor(a),c=a-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/s)+1)*s:c===0&&l===s-1&&(l=s-2,c=1);let u,d;this.closed||l>0?u=i[(l-1)%s]:(Rg.subVectors(i[0],i[1]).add(i[0]),u=Rg);const f=i[l%s],m=i[(l+1)%s];if(this.closed||l+2<s?d=i[(l+2)%s]:(Rg.subVectors(i[s-1],i[s-2]).add(i[s-1]),d=Rg),this.curveType==="centripetal"||this.curveType==="chordal"){const g=this.curveType==="chordal"?.5:.25;let v=Math.pow(u.distanceToSquared(f),g),_=Math.pow(f.distanceToSquared(m),g),b=Math.pow(m.distanceToSquared(d),g);_<1e-4&&(_=1),v<1e-4&&(v=_),b<1e-4&&(b=_),Y1.initNonuniformCatmullRom(u.x,f.x,m.x,d.x,v,_,b),q1.initNonuniformCatmullRom(u.y,f.y,m.y,d.y,v,_,b),$1.initNonuniformCatmullRom(u.z,f.z,m.z,d.z,v,_,b)}else this.curveType==="catmullrom"&&(Y1.initCatmullRom(u.x,f.x,m.x,d.x,this.tension),q1.initCatmullRom(u.y,f.y,m.y,d.y,this.tension),$1.initCatmullRom(u.z,f.z,m.z,d.z,this.tension));return r.set(Y1.calc(c),q1.calc(c),$1.calc(c)),r}copy(e){super.copy(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,r=this.points.length;n<r;n++){const i=this.points[n];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(new X().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function FC(t,e,n,r,i){const s=(r-e)*.5,a=(i-n)*.5,l=t*t,c=t*l;return(2*n-2*r+s+a)*c+(-3*n+3*r-2*s-a)*l+s*t+n}function Fq(t,e){const n=1-t;return n*n*e}function zq(t,e){return 2*(1-t)*t*e}function Bq(t,e){return t*t*e}function _f(t,e,n,r){return Fq(t,e)+zq(t,n)+Bq(t,r)}function Vq(t,e){const n=1-t;return n*n*n*e}function Hq(t,e){const n=1-t;return 3*n*n*t*e}function Gq(t,e){return 3*(1-t)*t*t*e}function Wq(t,e){return t*t*t*e}function wf(t,e,n,r,i){return Vq(t,e)+Hq(t,n)+Gq(t,r)+Wq(t,i)}class aM extends Xs{constructor(e=new ke,n=new ke,r=new ke,i=new ke){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=n,this.v2=r,this.v3=i}getPoint(e,n=new ke){const r=n,i=this.v0,s=this.v1,a=this.v2,l=this.v3;return r.set(wf(e,i.x,s.x,a.x,l.x),wf(e,i.y,s.y,a.y,l.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class uD extends Xs{constructor(e=new X,n=new X,r=new X,i=new X){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=n,this.v2=r,this.v3=i}getPoint(e,n=new X){const r=n,i=this.v0,s=this.v1,a=this.v2,l=this.v3;return r.set(wf(e,i.x,s.x,a.x,l.x),wf(e,i.y,s.y,a.y,l.y),wf(e,i.z,s.z,a.z,l.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class oM extends Xs{constructor(e=new ke,n=new ke){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=n}getPoint(e,n=new ke){const r=n;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new ke){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class dD extends Xs{constructor(e=new X,n=new X){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=n}getPoint(e,n=new X){const r=n;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new X){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class lM extends Xs{constructor(e=new ke,n=new ke,r=new ke){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=n,this.v2=r}getPoint(e,n=new ke){const r=n,i=this.v0,s=this.v1,a=this.v2;return r.set(_f(e,i.x,s.x,a.x),_f(e,i.y,s.y,a.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class cM extends Xs{constructor(e=new X,n=new X,r=new X){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=n,this.v2=r}getPoint(e,n=new X){const r=n,i=this.v0,s=this.v1,a=this.v2;return r.set(_f(e,i.x,s.x,a.x),_f(e,i.y,s.y,a.y),_f(e,i.z,s.z,a.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class uM extends Xs{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,n=new ke){const r=n,i=this.points,s=(i.length-1)*e,a=Math.floor(s),l=s-a,c=i[a===0?a:a-1],u=i[a],d=i[a>i.length-2?i.length-1:a+1],f=i[a>i.length-3?i.length-1:a+2];return r.set(FC(l,c.x,u.x,d.x,f.x),FC(l,c.y,u.y,d.y,f.y)),r}copy(e){super.copy(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,r=this.points.length;n<r;n++){const i=this.points[n];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(new ke().fromArray(i))}return this}}var bx=Object.freeze({__proto__:null,ArcCurve:cD,CatmullRomCurve3:xv,CubicBezierCurve:aM,CubicBezierCurve3:uD,EllipseCurve:gv,LineCurve:oM,LineCurve3:dD,QuadraticBezierCurve:lM,QuadraticBezierCurve3:cM,SplineCurve:uM});class hD extends Xs{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),n=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(n)){const r=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new bx[r](n,e))}return this}getPoint(e,n){const r=e*this.getLength(),i=this.getCurveLengths();let s=0;for(;s<i.length;){if(i[s]>=r){const a=i[s]-r,l=this.curves[s],c=l.getLength(),u=c===0?0:1-a/c;return l.getPointAt(u,n)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let n=0;for(let r=0,i=this.curves.length;r<i;r++)n+=this.curves[r].getLength(),e.push(n);return this.cacheLengths=e,e}getSpacedPoints(e=40){const n=[];for(let r=0;r<=e;r++)n.push(this.getPoint(r/e));return this.autoClose&&n.push(n[0]),n}getPoints(e=12){const n=[];let r;for(let i=0,s=this.curves;i<s.length;i++){const a=s[i],l=a.isEllipseCurve?e*2:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?e*a.points.length:e,c=a.getPoints(l);for(let u=0;u<c.length;u++){const d=c[u];r&&r.equals(d)||(n.push(d),r=d)}}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}copy(e){super.copy(e),this.curves=[];for(let n=0,r=e.curves.length;n<r;n++){const i=e.curves[n];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let n=0,r=this.curves.length;n<r;n++){const i=this.curves[n];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let n=0,r=e.curves.length;n<r;n++){const i=e.curves[n];this.curves.push(new bx[i.type]().fromJSON(i))}return this}}class lp extends hD{constructor(e){super(),this.type="Path",this.currentPoint=new ke,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let n=1,r=e.length;n<r;n++)this.lineTo(e[n].x,e[n].y);return this}moveTo(e,n){return this.currentPoint.set(e,n),this}lineTo(e,n){const r=new oM(this.currentPoint.clone(),new ke(e,n));return this.curves.push(r),this.currentPoint.set(e,n),this}quadraticCurveTo(e,n,r,i){const s=new lM(this.currentPoint.clone(),new ke(e,n),new ke(r,i));return this.curves.push(s),this.currentPoint.set(r,i),this}bezierCurveTo(e,n,r,i,s,a){const l=new aM(this.currentPoint.clone(),new ke(e,n),new ke(r,i),new ke(s,a));return this.curves.push(l),this.currentPoint.set(s,a),this}splineThru(e){const n=[this.currentPoint.clone()].concat(e),r=new uM(n);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,n,r,i,s,a){const l=this.currentPoint.x,c=this.currentPoint.y;return this.absarc(e+l,n+c,r,i,s,a),this}absarc(e,n,r,i,s,a){return this.absellipse(e,n,r,r,i,s,a),this}ellipse(e,n,r,i,s,a,l,c){const u=this.currentPoint.x,d=this.currentPoint.y;return this.absellipse(e+u,n+d,r,i,s,a,l,c),this}absellipse(e,n,r,i,s,a,l,c){const u=new gv(e,n,r,i,s,a,l,c);if(this.curves.length>0){const f=u.getPoint(0);f.equals(this.currentPoint)||this.lineTo(f.x,f.y)}this.curves.push(u);const d=u.getPoint(1);return this.currentPoint.copy(d),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Lp extends At{constructor(e=[new ke(0,-.5),new ke(.5,0),new ke(0,.5)],n=12,r=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:n,phiStart:r,phiLength:i},n=Math.floor(n),i=On(i,0,Math.PI*2);const s=[],a=[],l=[],c=[],u=[],d=1/n,f=new X,m=new ke,g=new X,v=new X,_=new X;let b=0,x=0;for(let y=0;y<=e.length-1;y++)switch(y){case 0:b=e[y+1].x-e[y].x,x=e[y+1].y-e[y].y,g.x=x*1,g.y=-b,g.z=x*0,_.copy(g),g.normalize(),c.push(g.x,g.y,g.z);break;case e.length-1:c.push(_.x,_.y,_.z);break;default:b=e[y+1].x-e[y].x,x=e[y+1].y-e[y].y,g.x=x*1,g.y=-b,g.z=x*0,v.copy(g),g.x+=_.x,g.y+=_.y,g.z+=_.z,g.normalize(),c.push(g.x,g.y,g.z),_.copy(v)}for(let y=0;y<=n;y++){const S=r+y*d*i,E=Math.sin(S),A=Math.cos(S);for(let T=0;T<=e.length-1;T++){f.x=e[T].x*E,f.y=e[T].y,f.z=e[T].x*A,a.push(f.x,f.y,f.z),m.x=y/n,m.y=T/(e.length-1),l.push(m.x,m.y);const C=c[3*T+0]*E,j=c[3*T+1],k=c[3*T+0]*A;u.push(C,j,k)}}for(let y=0;y<n;y++)for(let S=0;S<e.length-1;S++){const E=S+y*e.length,A=E,T=E+e.length,C=E+e.length+1,j=E+1;s.push(A,T,j),s.push(C,j,T)}this.setIndex(s),this.setAttribute("position",new ot(a,3)),this.setAttribute("uv",new ot(l,2)),this.setAttribute("normal",new ot(u,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Lp(e.points,e.segments,e.phiStart,e.phiLength)}}class vv extends Lp{constructor(e=1,n=1,r=4,i=8){const s=new lp;s.absarc(0,-n/2,e,Math.PI*1.5,0),s.absarc(0,n/2,e,0,Math.PI*.5),super(s.getPoints(r),i),this.type="CapsuleGeometry",this.parameters={radius:e,length:n,capSegments:r,radialSegments:i}}static fromJSON(e){return new vv(e.radius,e.length,e.capSegments,e.radialSegments)}}class yv extends At{constructor(e=1,n=32,r=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:n,thetaStart:r,thetaLength:i},n=Math.max(3,n);const s=[],a=[],l=[],c=[],u=new X,d=new ke;a.push(0,0,0),l.push(0,0,1),c.push(.5,.5);for(let f=0,m=3;f<=n;f++,m+=3){const g=r+f/n*i;u.x=e*Math.cos(g),u.y=e*Math.sin(g),a.push(u.x,u.y,u.z),l.push(0,0,1),d.x=(a[m]/e+1)/2,d.y=(a[m+1]/e+1)/2,c.push(d.x,d.y)}for(let f=1;f<=n;f++)s.push(f,f+1,0);this.setIndex(s),this.setAttribute("position",new ot(a,3)),this.setAttribute("normal",new ot(l,3)),this.setAttribute("uv",new ot(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new yv(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Wd extends At{constructor(e=1,n=1,r=1,i=32,s=1,a=!1,l=0,c=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:n,height:r,radialSegments:i,heightSegments:s,openEnded:a,thetaStart:l,thetaLength:c};const u=this;i=Math.floor(i),s=Math.floor(s);const d=[],f=[],m=[],g=[];let v=0;const _=[],b=r/2;let x=0;y(),a===!1&&(e>0&&S(!0),n>0&&S(!1)),this.setIndex(d),this.setAttribute("position",new ot(f,3)),this.setAttribute("normal",new ot(m,3)),this.setAttribute("uv",new ot(g,2));function y(){const E=new X,A=new X;let T=0;const C=(n-e)/r;for(let j=0;j<=s;j++){const k=[],P=j/s,H=P*(n-e)+e;for(let B=0;B<=i;B++){const Y=B/i,V=Y*c+l,Q=Math.sin(V),ee=Math.cos(V);A.x=H*Q,A.y=-P*r+b,A.z=H*ee,f.push(A.x,A.y,A.z),E.set(Q,C,ee).normalize(),m.push(E.x,E.y,E.z),g.push(Y,1-P),k.push(v++)}_.push(k)}for(let j=0;j<i;j++)for(let k=0;k<s;k++){const P=_[k][j],H=_[k+1][j],B=_[k+1][j+1],Y=_[k][j+1];d.push(P,H,Y),d.push(H,B,Y),T+=6}u.addGroup(x,T,0),x+=T}function S(E){const A=v,T=new ke,C=new X;let j=0;const k=E===!0?e:n,P=E===!0?1:-1;for(let B=1;B<=i;B++)f.push(0,b*P,0),m.push(0,P,0),g.push(.5,.5),v++;const H=v;for(let B=0;B<=i;B++){const V=B/i*c+l,Q=Math.cos(V),ee=Math.sin(V);C.x=k*ee,C.y=b*P,C.z=k*Q,f.push(C.x,C.y,C.z),m.push(0,P,0),T.x=Q*.5+.5,T.y=ee*.5*P+.5,g.push(T.x,T.y),v++}for(let B=0;B<i;B++){const Y=A+B,V=H+B;E===!0?d.push(V,V+1,Y):d.push(V+1,V,Y),j+=3}u.addGroup(x,j,E===!0?1:2),x+=j}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Wd(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class bv extends Wd{constructor(e=1,n=1,r=32,i=1,s=!1,a=0,l=Math.PI*2){super(0,e,n,r,i,s,a,l),this.type="ConeGeometry",this.parameters={radius:e,height:n,radialSegments:r,heightSegments:i,openEnded:s,thetaStart:a,thetaLength:l}}static fromJSON(e){return new bv(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class _l extends At{constructor(e=[],n=[],r=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:n,radius:r,detail:i};const s=[],a=[];l(i),u(r),d(),this.setAttribute("position",new ot(s,3)),this.setAttribute("normal",new ot(s.slice(),3)),this.setAttribute("uv",new ot(a,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function l(y){const S=new X,E=new X,A=new X;for(let T=0;T<n.length;T+=3)g(n[T+0],S),g(n[T+1],E),g(n[T+2],A),c(S,E,A,y)}function c(y,S,E,A){const T=A+1,C=[];for(let j=0;j<=T;j++){C[j]=[];const k=y.clone().lerp(E,j/T),P=S.clone().lerp(E,j/T),H=T-j;for(let B=0;B<=H;B++)B===0&&j===T?C[j][B]=k:C[j][B]=k.clone().lerp(P,B/H)}for(let j=0;j<T;j++)for(let k=0;k<2*(T-j)-1;k++){const P=Math.floor(k/2);k%2===0?(m(C[j][P+1]),m(C[j+1][P]),m(C[j][P])):(m(C[j][P+1]),m(C[j+1][P+1]),m(C[j+1][P]))}}function u(y){const S=new X;for(let E=0;E<s.length;E+=3)S.x=s[E+0],S.y=s[E+1],S.z=s[E+2],S.normalize().multiplyScalar(y),s[E+0]=S.x,s[E+1]=S.y,s[E+2]=S.z}function d(){const y=new X;for(let S=0;S<s.length;S+=3){y.x=s[S+0],y.y=s[S+1],y.z=s[S+2];const E=b(y)/2/Math.PI+.5,A=x(y)/Math.PI+.5;a.push(E,1-A)}v(),f()}function f(){for(let y=0;y<a.length;y+=6){const S=a[y+0],E=a[y+2],A=a[y+4],T=Math.max(S,E,A),C=Math.min(S,E,A);T>.9&&C<.1&&(S<.2&&(a[y+0]+=1),E<.2&&(a[y+2]+=1),A<.2&&(a[y+4]+=1))}}function m(y){s.push(y.x,y.y,y.z)}function g(y,S){const E=y*3;S.x=e[E+0],S.y=e[E+1],S.z=e[E+2]}function v(){const y=new X,S=new X,E=new X,A=new X,T=new ke,C=new ke,j=new ke;for(let k=0,P=0;k<s.length;k+=9,P+=6){y.set(s[k+0],s[k+1],s[k+2]),S.set(s[k+3],s[k+4],s[k+5]),E.set(s[k+6],s[k+7],s[k+8]),T.set(a[P+0],a[P+1]),C.set(a[P+2],a[P+3]),j.set(a[P+4],a[P+5]),A.copy(y).add(S).add(E).divideScalar(3);const H=b(A);_(T,P+0,y,H),_(C,P+2,S,H),_(j,P+4,E,H)}}function _(y,S,E,A){A<0&&y.x===1&&(a[S]=y.x-1),E.x===0&&E.z===0&&(a[S]=A/2/Math.PI+.5)}function b(y){return Math.atan2(y.z,-y.x)}function x(y){return Math.atan2(-y.y,Math.sqrt(y.x*y.x+y.z*y.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new _l(e.vertices,e.indices,e.radius,e.details)}}class _v extends _l{constructor(e=1,n=0){const r=(1+Math.sqrt(5))/2,i=1/r,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,a,e,n),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new _v(e.radius,e.detail)}}const jg=new X,Lg=new X,Z1=new X,Dg=new Si;class fD extends At{constructor(e=null,n=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:n},e!==null){const i=Math.pow(10,4),s=Math.cos(wc*n),a=e.getIndex(),l=e.getAttribute("position"),c=a?a.count:l.count,u=[0,0,0],d=["a","b","c"],f=new Array(3),m={},g=[];for(let v=0;v<c;v+=3){a?(u[0]=a.getX(v),u[1]=a.getX(v+1),u[2]=a.getX(v+2)):(u[0]=v,u[1]=v+1,u[2]=v+2);const{a:_,b,c:x}=Dg;if(_.fromBufferAttribute(l,u[0]),b.fromBufferAttribute(l,u[1]),x.fromBufferAttribute(l,u[2]),Dg.getNormal(Z1),f[0]=`${Math.round(_.x*i)},${Math.round(_.y*i)},${Math.round(_.z*i)}`,f[1]=`${Math.round(b.x*i)},${Math.round(b.y*i)},${Math.round(b.z*i)}`,f[2]=`${Math.round(x.x*i)},${Math.round(x.y*i)},${Math.round(x.z*i)}`,!(f[0]===f[1]||f[1]===f[2]||f[2]===f[0]))for(let y=0;y<3;y++){const S=(y+1)%3,E=f[y],A=f[S],T=Dg[d[y]],C=Dg[d[S]],j=`${E}_${A}`,k=`${A}_${E}`;k in m&&m[k]?(Z1.dot(m[k].normal)<=s&&(g.push(T.x,T.y,T.z),g.push(C.x,C.y,C.z)),m[k]=null):j in m||(m[j]={index0:u[y],index1:u[S],normal:Z1.clone()})}}for(const v in m)if(m[v]){const{index0:_,index1:b}=m[v];jg.fromBufferAttribute(l,_),Lg.fromBufferAttribute(l,b),g.push(jg.x,jg.y,jg.z),g.push(Lg.x,Lg.y,Lg.z)}this.setAttribute("position",new ot(g,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Ec extends lp{constructor(e){super(e),this.uuid=qi(),this.type="Shape",this.holes=[]}getPointsHoles(e){const n=[];for(let r=0,i=this.holes.length;r<i;r++)n[r]=this.holes[r].getPoints(e);return n}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let n=0,r=e.holes.length;n<r;n++){const i=e.holes[n];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let n=0,r=this.holes.length;n<r;n++){const i=this.holes[n];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let n=0,r=e.holes.length;n<r;n++){const i=e.holes[n];this.holes.push(new lp().fromJSON(i))}return this}}const Xq={triangulate:function(t,e,n=2){const r=e&&e.length,i=r?e[0]*n:t.length;let s=pD(t,0,i,n,!0);const a=[];if(!s||s.next===s.prev)return a;let l,c,u,d,f,m,g;if(r&&(s=Kq(t,e,s,n)),t.length>80*n){l=u=t[0],c=d=t[1];for(let v=n;v<i;v+=n)f=t[v],m=t[v+1],f<l&&(l=f),m<c&&(c=m),f>u&&(u=f),m>d&&(d=m);g=Math.max(u-l,d-c),g=g!==0?32767/g:0}return cp(s,a,n,l,c,g,0),a}};function pD(t,e,n,r,i){let s,a;if(i===l$(t,e,n,r)>0)for(s=e;s<n;s+=r)a=zC(s,t[s],t[s+1],a);else for(s=n-r;s>=e;s-=r)a=zC(s,t[s],t[s+1],a);return a&&wv(a,a.next)&&(dp(a),a=a.next),a}function Dc(t,e){if(!t)return t;e||(e=t);let n=t,r;do if(r=!1,!n.steiner&&(wv(n,n.next)||Nn(n.prev,n,n.next)===0)){if(dp(n),n=e=n.prev,n===n.next)break;r=!0}else n=n.next;while(r||n!==e);return e}function cp(t,e,n,r,i,s,a){if(!t)return;!a&&s&&n$(t,r,i,s);let l=t,c,u;for(;t.prev!==t.next;){if(c=t.prev,u=t.next,s?qq(t,r,i,s):Yq(t)){e.push(c.i/n|0),e.push(t.i/n|0),e.push(u.i/n|0),dp(t),t=u.next,l=u.next;continue}if(t=u,t===l){a?a===1?(t=$q(Dc(t),e,n),cp(t,e,n,r,i,s,2)):a===2&&Zq(t,e,n,r,i,s):cp(Dc(t),e,n,r,i,s,1);break}}}function Yq(t){const e=t.prev,n=t,r=t.next;if(Nn(e,n,r)>=0)return!1;const i=e.x,s=n.x,a=r.x,l=e.y,c=n.y,u=r.y,d=i<s?i<a?i:a:s<a?s:a,f=l<c?l<u?l:u:c<u?c:u,m=i>s?i>a?i:a:s>a?s:a,g=l>c?l>u?l:u:c>u?c:u;let v=r.next;for(;v!==e;){if(v.x>=d&&v.x<=m&&v.y>=f&&v.y<=g&&id(i,l,s,c,a,u,v.x,v.y)&&Nn(v.prev,v,v.next)>=0)return!1;v=v.next}return!0}function qq(t,e,n,r){const i=t.prev,s=t,a=t.next;if(Nn(i,s,a)>=0)return!1;const l=i.x,c=s.x,u=a.x,d=i.y,f=s.y,m=a.y,g=l<c?l<u?l:u:c<u?c:u,v=d<f?d<m?d:m:f<m?f:m,_=l>c?l>u?l:u:c>u?c:u,b=d>f?d>m?d:m:f>m?f:m,x=R_(g,v,e,n,r),y=R_(_,b,e,n,r);let S=t.prevZ,E=t.nextZ;for(;S&&S.z>=x&&E&&E.z<=y;){if(S.x>=g&&S.x<=_&&S.y>=v&&S.y<=b&&S!==i&&S!==a&&id(l,d,c,f,u,m,S.x,S.y)&&Nn(S.prev,S,S.next)>=0||(S=S.prevZ,E.x>=g&&E.x<=_&&E.y>=v&&E.y<=b&&E!==i&&E!==a&&id(l,d,c,f,u,m,E.x,E.y)&&Nn(E.prev,E,E.next)>=0))return!1;E=E.nextZ}for(;S&&S.z>=x;){if(S.x>=g&&S.x<=_&&S.y>=v&&S.y<=b&&S!==i&&S!==a&&id(l,d,c,f,u,m,S.x,S.y)&&Nn(S.prev,S,S.next)>=0)return!1;S=S.prevZ}for(;E&&E.z<=y;){if(E.x>=g&&E.x<=_&&E.y>=v&&E.y<=b&&E!==i&&E!==a&&id(l,d,c,f,u,m,E.x,E.y)&&Nn(E.prev,E,E.next)>=0)return!1;E=E.nextZ}return!0}function $q(t,e,n){let r=t;do{const i=r.prev,s=r.next.next;!wv(i,s)&&mD(i,r,r.next,s)&&up(i,s)&&up(s,i)&&(e.push(i.i/n|0),e.push(r.i/n|0),e.push(s.i/n|0),dp(r),dp(r.next),r=t=s),r=r.next}while(r!==t);return Dc(r)}function Zq(t,e,n,r,i,s){let a=t;do{let l=a.next.next;for(;l!==a.prev;){if(a.i!==l.i&&s$(a,l)){let c=gD(a,l);a=Dc(a,a.next),c=Dc(c,c.next),cp(a,e,n,r,i,s,0),cp(c,e,n,r,i,s,0);return}l=l.next}a=a.next}while(a!==t)}function Kq(t,e,n,r){const i=[];let s,a,l,c,u;for(s=0,a=e.length;s<a;s++)l=e[s]*r,c=s<a-1?e[s+1]*r:t.length,u=pD(t,l,c,r,!1),u===u.next&&(u.steiner=!0),i.push(i$(u));for(i.sort(Jq),s=0;s<i.length;s++)n=Qq(i[s],n);return n}function Jq(t,e){return t.x-e.x}function Qq(t,e){const n=e$(t,e);if(!n)return e;const r=gD(n,t);return Dc(r,r.next),Dc(n,n.next)}function e$(t,e){let n=e,r=-1/0,i;const s=t.x,a=t.y;do{if(a<=n.y&&a>=n.next.y&&n.next.y!==n.y){const m=n.x+(a-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(m<=s&&m>r&&(r=m,i=n.x<n.next.x?n:n.next,m===s))return i}n=n.next}while(n!==e);if(!i)return null;const l=i,c=i.x,u=i.y;let d=1/0,f;n=i;do s>=n.x&&n.x>=c&&s!==n.x&&id(a<u?s:r,a,c,u,a<u?r:s,a,n.x,n.y)&&(f=Math.abs(a-n.y)/(s-n.x),up(n,t)&&(f<d||f===d&&(n.x>i.x||n.x===i.x&&t$(i,n)))&&(i=n,d=f)),n=n.next;while(n!==l);return i}function t$(t,e){return Nn(t.prev,t,e.prev)<0&&Nn(e.next,t,t.next)<0}function n$(t,e,n,r){let i=t;do i.z===0&&(i.z=R_(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,r$(i)}function r$(t){let e,n,r,i,s,a,l,c,u=1;do{for(n=t,t=null,s=null,a=0;n;){for(a++,r=n,l=0,e=0;e<u&&(l++,r=r.nextZ,!!r);e++);for(c=u;l>0||c>0&&r;)l!==0&&(c===0||!r||n.z<=r.z)?(i=n,n=n.nextZ,l--):(i=r,r=r.nextZ,c--),s?s.nextZ=i:t=i,i.prevZ=s,s=i;n=r}s.nextZ=null,u*=2}while(a>1);return t}function R_(t,e,n,r,i){return t=(t-n)*i|0,e=(e-r)*i|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function i$(t){let e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n}function id(t,e,n,r,i,s,a,l){return(i-a)*(e-l)>=(t-a)*(s-l)&&(t-a)*(r-l)>=(n-a)*(e-l)&&(n-a)*(s-l)>=(i-a)*(r-l)}function s$(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!a$(t,e)&&(up(t,e)&&up(e,t)&&o$(t,e)&&(Nn(t.prev,t,e.prev)||Nn(t,e.prev,e))||wv(t,e)&&Nn(t.prev,t,t.next)>0&&Nn(e.prev,e,e.next)>0)}function Nn(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function wv(t,e){return t.x===e.x&&t.y===e.y}function mD(t,e,n,r){const i=Ug(Nn(t,e,n)),s=Ug(Nn(t,e,r)),a=Ug(Nn(n,r,t)),l=Ug(Nn(n,r,e));return!!(i!==s&&a!==l||i===0&&Ig(t,n,e)||s===0&&Ig(t,r,e)||a===0&&Ig(n,t,r)||l===0&&Ig(n,e,r))}function Ig(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function Ug(t){return t>0?1:t<0?-1:0}function a$(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&mD(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function up(t,e){return Nn(t.prev,t,t.next)<0?Nn(t,e,t.next)>=0&&Nn(t,t.prev,e)>=0:Nn(t,e,t.prev)<0||Nn(t,t.next,e)<0}function o$(t,e){let n=t,r=!1;const i=(t.x+e.x)/2,s=(t.y+e.y)/2;do n.y>s!=n.next.y>s&&n.next.y!==n.y&&i<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==t);return r}function gD(t,e){const n=new j_(t.i,t.x,t.y),r=new j_(e.i,e.x,e.y),i=t.next,s=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,s.next=r,r.prev=s,r}function zC(t,e,n,r){const i=new j_(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function dp(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function j_(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function l$(t,e,n,r){let i=0;for(let s=e,a=n-r;s<n;s+=r)i+=(t[a]-t[s])*(t[s+1]+t[a+1]),a=s;return i}class pa{static area(e){const n=e.length;let r=0;for(let i=n-1,s=0;s<n;i=s++)r+=e[i].x*e[s].y-e[s].x*e[i].y;return r*.5}static isClockWise(e){return pa.area(e)<0}static triangulateShape(e,n){const r=[],i=[],s=[];BC(e),VC(r,e);let a=e.length;n.forEach(BC);for(let c=0;c<n.length;c++)i.push(a),a+=n[c].length,VC(r,n[c]);const l=Xq.triangulate(r,i);for(let c=0;c<l.length;c+=3)s.push(l.slice(c,c+3));return s}}function BC(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function VC(t,e){for(let n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}class Sv extends At{constructor(e=new Ec([new ke(.5,.5),new ke(-.5,.5),new ke(-.5,-.5),new ke(.5,-.5)]),n={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:n},e=Array.isArray(e)?e:[e];const r=this,i=[],s=[];for(let l=0,c=e.length;l<c;l++){const u=e[l];a(u)}this.setAttribute("position",new ot(i,3)),this.setAttribute("uv",new ot(s,2)),this.computeVertexNormals();function a(l){const c=[],u=n.curveSegments!==void 0?n.curveSegments:12,d=n.steps!==void 0?n.steps:1,f=n.depth!==void 0?n.depth:1;let m=n.bevelEnabled!==void 0?n.bevelEnabled:!0,g=n.bevelThickness!==void 0?n.bevelThickness:.2,v=n.bevelSize!==void 0?n.bevelSize:g-.1,_=n.bevelOffset!==void 0?n.bevelOffset:0,b=n.bevelSegments!==void 0?n.bevelSegments:3;const x=n.extrudePath,y=n.UVGenerator!==void 0?n.UVGenerator:c$;let S,E=!1,A,T,C,j;x&&(S=x.getSpacedPoints(d),E=!0,m=!1,A=x.computeFrenetFrames(d,!1),T=new X,C=new X,j=new X),m||(b=0,g=0,v=0,_=0);const k=l.extractPoints(u);let P=k.shape;const H=k.holes;if(!pa.isClockWise(P)){P=P.reverse();for(let G=0,Ee=H.length;G<Ee;G++){const me=H[G];pa.isClockWise(me)&&(H[G]=me.reverse())}}const Y=pa.triangulateShape(P,H),V=P;for(let G=0,Ee=H.length;G<Ee;G++){const me=H[G];P=P.concat(me)}function Q(G,Ee,me){return Ee||console.error("THREE.ExtrudeGeometry: vec does not exist"),G.clone().addScaledVector(Ee,me)}const ee=P.length,re=Y.length;function I(G,Ee,me){let ve,he,We;const ge=G.x-Ee.x,O=G.y-Ee.y,L=me.x-G.x,q=me.y-G.y,fe=ge*ge+O*O,le=ge*q-O*L;if(Math.abs(le)>Number.EPSILON){const ce=Math.sqrt(fe),Pe=Math.sqrt(L*L+q*q),Ue=Ee.x-O/ce,Fe=Ee.y+ge/ce,ze=me.x-q/Pe,$e=me.y+L/Pe,Ae=((ze-Ue)*q-($e-Fe)*L)/(ge*q-O*L);ve=Ue+ge*Ae-G.x,he=Fe+O*Ae-G.y;const at=ve*ve+he*he;if(at<=2)return new ke(ve,he);We=Math.sqrt(at/2)}else{let ce=!1;ge>Number.EPSILON?L>Number.EPSILON&&(ce=!0):ge<-Number.EPSILON?L<-Number.EPSILON&&(ce=!0):Math.sign(O)===Math.sign(q)&&(ce=!0),ce?(ve=-O,he=ge,We=Math.sqrt(fe)):(ve=ge,he=O,We=Math.sqrt(fe/2))}return new ke(ve/We,he/We)}const F=[];for(let G=0,Ee=V.length,me=Ee-1,ve=G+1;G<Ee;G++,me++,ve++)me===Ee&&(me=0),ve===Ee&&(ve=0),F[G]=I(V[G],V[me],V[ve]);const z=[];let U,Z=F.concat();for(let G=0,Ee=H.length;G<Ee;G++){const me=H[G];U=[];for(let ve=0,he=me.length,We=he-1,ge=ve+1;ve<he;ve++,We++,ge++)We===he&&(We=0),ge===he&&(ge=0),U[ve]=I(me[ve],me[We],me[ge]);z.push(U),Z=Z.concat(U)}for(let G=0;G<b;G++){const Ee=G/b,me=g*Math.cos(Ee*Math.PI/2),ve=v*Math.sin(Ee*Math.PI/2)+_;for(let he=0,We=V.length;he<We;he++){const ge=Q(V[he],F[he],ve);ae(ge.x,ge.y,-me)}for(let he=0,We=H.length;he<We;he++){const ge=H[he];U=z[he];for(let O=0,L=ge.length;O<L;O++){const q=Q(ge[O],U[O],ve);ae(q.x,q.y,-me)}}}const K=v+_;for(let G=0;G<ee;G++){const Ee=m?Q(P[G],Z[G],K):P[G];E?(C.copy(A.normals[0]).multiplyScalar(Ee.x),T.copy(A.binormals[0]).multiplyScalar(Ee.y),j.copy(S[0]).add(C).add(T),ae(j.x,j.y,j.z)):ae(Ee.x,Ee.y,0)}for(let G=1;G<=d;G++)for(let Ee=0;Ee<ee;Ee++){const me=m?Q(P[Ee],Z[Ee],K):P[Ee];E?(C.copy(A.normals[G]).multiplyScalar(me.x),T.copy(A.binormals[G]).multiplyScalar(me.y),j.copy(S[G]).add(C).add(T),ae(j.x,j.y,j.z)):ae(me.x,me.y,f/d*G)}for(let G=b-1;G>=0;G--){const Ee=G/b,me=g*Math.cos(Ee*Math.PI/2),ve=v*Math.sin(Ee*Math.PI/2)+_;for(let he=0,We=V.length;he<We;he++){const ge=Q(V[he],F[he],ve);ae(ge.x,ge.y,f+me)}for(let he=0,We=H.length;he<We;he++){const ge=H[he];U=z[he];for(let O=0,L=ge.length;O<L;O++){const q=Q(ge[O],U[O],ve);E?ae(q.x,q.y+S[d-1].y,S[d-1].x+me):ae(q.x,q.y,f+me)}}}ne(),ie();function ne(){const G=i.length/3;if(m){let Ee=0,me=ee*Ee;for(let ve=0;ve<re;ve++){const he=Y[ve];_e(he[2]+me,he[1]+me,he[0]+me)}Ee=d+b*2,me=ee*Ee;for(let ve=0;ve<re;ve++){const he=Y[ve];_e(he[0]+me,he[1]+me,he[2]+me)}}else{for(let Ee=0;Ee<re;Ee++){const me=Y[Ee];_e(me[2],me[1],me[0])}for(let Ee=0;Ee<re;Ee++){const me=Y[Ee];_e(me[0]+ee*d,me[1]+ee*d,me[2]+ee*d)}}r.addGroup(G,i.length/3-G,0)}function ie(){const G=i.length/3;let Ee=0;de(V,Ee),Ee+=V.length;for(let me=0,ve=H.length;me<ve;me++){const he=H[me];de(he,Ee),Ee+=he.length}r.addGroup(G,i.length/3-G,1)}function de(G,Ee){let me=G.length;for(;--me>=0;){const ve=me;let he=me-1;he<0&&(he=G.length-1);for(let We=0,ge=d+b*2;We<ge;We++){const O=ee*We,L=ee*(We+1),q=Ee+ve+O,fe=Ee+he+O,le=Ee+he+L,ce=Ee+ve+L;je(q,fe,le,ce)}}}function ae(G,Ee,me){c.push(G),c.push(Ee),c.push(me)}function _e(G,Ee,me){Le(G),Le(Ee),Le(me);const ve=i.length/3,he=y.generateTopUV(r,i,ve-3,ve-2,ve-1);Te(he[0]),Te(he[1]),Te(he[2])}function je(G,Ee,me,ve){Le(G),Le(Ee),Le(ve),Le(Ee),Le(me),Le(ve);const he=i.length/3,We=y.generateSideWallUV(r,i,he-6,he-3,he-2,he-1);Te(We[0]),Te(We[1]),Te(We[3]),Te(We[1]),Te(We[2]),Te(We[3])}function Le(G){i.push(c[G*3+0]),i.push(c[G*3+1]),i.push(c[G*3+2])}function Te(G){s.push(G.x),s.push(G.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes,r=this.parameters.options;return u$(n,r,e)}static fromJSON(e,n){const r=[];for(let s=0,a=e.shapes.length;s<a;s++){const l=n[e.shapes[s]];r.push(l)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new bx[i.type]().fromJSON(i)),new Sv(r,e.options)}}const c$={generateTopUV:function(t,e,n,r,i){const s=e[n*3],a=e[n*3+1],l=e[r*3],c=e[r*3+1],u=e[i*3],d=e[i*3+1];return[new ke(s,a),new ke(l,c),new ke(u,d)]},generateSideWallUV:function(t,e,n,r,i,s){const a=e[n*3],l=e[n*3+1],c=e[n*3+2],u=e[r*3],d=e[r*3+1],f=e[r*3+2],m=e[i*3],g=e[i*3+1],v=e[i*3+2],_=e[s*3],b=e[s*3+1],x=e[s*3+2];return Math.abs(l-d)<Math.abs(a-u)?[new ke(a,1-c),new ke(u,1-f),new ke(m,1-v),new ke(_,1-x)]:[new ke(l,1-c),new ke(d,1-f),new ke(g,1-v),new ke(b,1-x)]}};function u$(t,e,n){if(n.shapes=[],Array.isArray(t))for(let r=0,i=t.length;r<i;r++){const s=t[r];n.shapes.push(s.uuid)}else n.shapes.push(t.uuid);return n.options=Object.assign({},e),e.extrudePath!==void 0&&(n.options.extrudePath=e.extrudePath.toJSON()),n}class Mv extends _l{constructor(e=1,n=0){const r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,s,e,n),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new Mv(e.radius,e.detail)}}class Dp extends _l{constructor(e=1,n=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,i,e,n),this.type="OctahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new Dp(e.radius,e.detail)}}class Ev extends At{constructor(e=.5,n=1,r=32,i=1,s=0,a=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:n,thetaSegments:r,phiSegments:i,thetaStart:s,thetaLength:a},r=Math.max(3,r),i=Math.max(1,i);const l=[],c=[],u=[],d=[];let f=e;const m=(n-e)/i,g=new X,v=new ke;for(let _=0;_<=i;_++){for(let b=0;b<=r;b++){const x=s+b/r*a;g.x=f*Math.cos(x),g.y=f*Math.sin(x),c.push(g.x,g.y,g.z),u.push(0,0,1),v.x=(g.x/n+1)/2,v.y=(g.y/n+1)/2,d.push(v.x,v.y)}f+=m}for(let _=0;_<i;_++){const b=_*(r+1);for(let x=0;x<r;x++){const y=x+b,S=y,E=y+r+1,A=y+r+2,T=y+1;l.push(S,E,T),l.push(E,A,T)}}this.setIndex(l),this.setAttribute("position",new ot(c,3)),this.setAttribute("normal",new ot(u,3)),this.setAttribute("uv",new ot(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ev(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Nv extends At{constructor(e=new Ec([new ke(0,.5),new ke(-.5,-.5),new ke(.5,-.5)]),n=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:n};const r=[],i=[],s=[],a=[];let l=0,c=0;if(Array.isArray(e)===!1)u(e);else for(let d=0;d<e.length;d++)u(e[d]),this.addGroup(l,c,d),l+=c,c=0;this.setIndex(r),this.setAttribute("position",new ot(i,3)),this.setAttribute("normal",new ot(s,3)),this.setAttribute("uv",new ot(a,2));function u(d){const f=i.length/3,m=d.extractPoints(n);let g=m.shape;const v=m.holes;pa.isClockWise(g)===!1&&(g=g.reverse());for(let b=0,x=v.length;b<x;b++){const y=v[b];pa.isClockWise(y)===!0&&(v[b]=y.reverse())}const _=pa.triangulateShape(g,v);for(let b=0,x=v.length;b<x;b++){const y=v[b];g=g.concat(y)}for(let b=0,x=g.length;b<x;b++){const y=g[b];i.push(y.x,y.y,0),s.push(0,0,1),a.push(y.x,y.y)}for(let b=0,x=_.length;b<x;b++){const y=_[b],S=y[0]+f,E=y[1]+f,A=y[2]+f;r.push(S,E,A),c+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes;return d$(n,e)}static fromJSON(e,n){const r=[];for(let i=0,s=e.shapes.length;i<s;i++){const a=n[e.shapes[i]];r.push(a)}return new Nv(r,e.curveSegments)}}function d$(t,e){if(e.shapes=[],Array.isArray(t))for(let n=0,r=t.length;n<r;n++){const i=t[n];e.shapes.push(i.uuid)}else e.shapes.push(t.uuid);return e}class Ip extends At{constructor(e=1,n=32,r=16,i=0,s=Math.PI*2,a=0,l=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:n,heightSegments:r,phiStart:i,phiLength:s,thetaStart:a,thetaLength:l},n=Math.max(3,Math.floor(n)),r=Math.max(2,Math.floor(r));const c=Math.min(a+l,Math.PI);let u=0;const d=[],f=new X,m=new X,g=[],v=[],_=[],b=[];for(let x=0;x<=r;x++){const y=[],S=x/r;let E=0;x===0&&a===0?E=.5/n:x===r&&c===Math.PI&&(E=-.5/n);for(let A=0;A<=n;A++){const T=A/n;f.x=-e*Math.cos(i+T*s)*Math.sin(a+S*l),f.y=e*Math.cos(a+S*l),f.z=e*Math.sin(i+T*s)*Math.sin(a+S*l),v.push(f.x,f.y,f.z),m.copy(f).normalize(),_.push(m.x,m.y,m.z),b.push(T+E,1-S),y.push(u++)}d.push(y)}for(let x=0;x<r;x++)for(let y=0;y<n;y++){const S=d[x][y+1],E=d[x][y],A=d[x+1][y],T=d[x+1][y+1];(x!==0||a>0)&&g.push(S,E,T),(x!==r-1||c<Math.PI)&&g.push(E,A,T)}this.setIndex(g),this.setAttribute("position",new ot(v,3)),this.setAttribute("normal",new ot(_,3)),this.setAttribute("uv",new ot(b,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ip(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Tv extends _l{constructor(e=1,n=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,i,e,n),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new Tv(e.radius,e.detail)}}class Av extends At{constructor(e=1,n=.4,r=12,i=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:n,radialSegments:r,tubularSegments:i,arc:s},r=Math.floor(r),i=Math.floor(i);const a=[],l=[],c=[],u=[],d=new X,f=new X,m=new X;for(let g=0;g<=r;g++)for(let v=0;v<=i;v++){const _=v/i*s,b=g/r*Math.PI*2;f.x=(e+n*Math.cos(b))*Math.cos(_),f.y=(e+n*Math.cos(b))*Math.sin(_),f.z=n*Math.sin(b),l.push(f.x,f.y,f.z),d.x=e*Math.cos(_),d.y=e*Math.sin(_),m.subVectors(f,d).normalize(),c.push(m.x,m.y,m.z),u.push(v/i),u.push(g/r)}for(let g=1;g<=r;g++)for(let v=1;v<=i;v++){const _=(i+1)*g+v-1,b=(i+1)*(g-1)+v-1,x=(i+1)*(g-1)+v,y=(i+1)*g+v;a.push(_,b,y),a.push(b,x,y)}this.setIndex(a),this.setAttribute("position",new ot(l,3)),this.setAttribute("normal",new ot(c,3)),this.setAttribute("uv",new ot(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Av(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class Cv extends At{constructor(e=1,n=.4,r=64,i=8,s=2,a=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:n,tubularSegments:r,radialSegments:i,p:s,q:a},r=Math.floor(r),i=Math.floor(i);const l=[],c=[],u=[],d=[],f=new X,m=new X,g=new X,v=new X,_=new X,b=new X,x=new X;for(let S=0;S<=r;++S){const E=S/r*s*Math.PI*2;y(E,s,a,e,g),y(E+.01,s,a,e,v),b.subVectors(v,g),x.addVectors(v,g),_.crossVectors(b,x),x.crossVectors(_,b),_.normalize(),x.normalize();for(let A=0;A<=i;++A){const T=A/i*Math.PI*2,C=-n*Math.cos(T),j=n*Math.sin(T);f.x=g.x+(C*x.x+j*_.x),f.y=g.y+(C*x.y+j*_.y),f.z=g.z+(C*x.z+j*_.z),c.push(f.x,f.y,f.z),m.subVectors(f,g).normalize(),u.push(m.x,m.y,m.z),d.push(S/r),d.push(A/i)}}for(let S=1;S<=r;S++)for(let E=1;E<=i;E++){const A=(i+1)*(S-1)+(E-1),T=(i+1)*S+(E-1),C=(i+1)*S+E,j=(i+1)*(S-1)+E;l.push(A,T,j),l.push(T,C,j)}this.setIndex(l),this.setAttribute("position",new ot(c,3)),this.setAttribute("normal",new ot(u,3)),this.setAttribute("uv",new ot(d,2));function y(S,E,A,T,C){const j=Math.cos(S),k=Math.sin(S),P=A/E*S,H=Math.cos(P);C.x=T*(2+H)*.5*j,C.y=T*(2+H)*k*.5,C.z=T*Math.sin(P)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Cv(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Xd extends At{constructor(e=new cM(new X(-1,-1,0),new X(-1,1,0),new X(1,1,0)),n=64,r=1,i=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:n,radius:r,radialSegments:i,closed:s};const a=e.computeFrenetFrames(n,s);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;const l=new X,c=new X,u=new ke;let d=new X;const f=[],m=[],g=[],v=[];_(),this.setIndex(v),this.setAttribute("position",new ot(f,3)),this.setAttribute("normal",new ot(m,3)),this.setAttribute("uv",new ot(g,2));function _(){for(let S=0;S<n;S++)b(S);b(s===!1?n:0),y(),x()}function b(S){d=e.getPointAt(S/n,d);const E=a.normals[S],A=a.binormals[S];for(let T=0;T<=i;T++){const C=T/i*Math.PI*2,j=Math.sin(C),k=-Math.cos(C);c.x=k*E.x+j*A.x,c.y=k*E.y+j*A.y,c.z=k*E.z+j*A.z,c.normalize(),m.push(c.x,c.y,c.z),l.x=d.x+r*c.x,l.y=d.y+r*c.y,l.z=d.z+r*c.z,f.push(l.x,l.y,l.z)}}function x(){for(let S=1;S<=n;S++)for(let E=1;E<=i;E++){const A=(i+1)*(S-1)+(E-1),T=(i+1)*S+(E-1),C=(i+1)*S+E,j=(i+1)*(S-1)+E;v.push(A,T,j),v.push(T,C,j)}}function y(){for(let S=0;S<=n;S++)for(let E=0;E<=i;E++)u.x=S/n,u.y=E/i,g.push(u.x,u.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Xd(new bx[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class xD extends At{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const n=[],r=new Set,i=new X,s=new X;if(e.index!==null){const a=e.attributes.position,l=e.index;let c=e.groups;c.length===0&&(c=[{start:0,count:l.count,materialIndex:0}]);for(let u=0,d=c.length;u<d;++u){const f=c[u],m=f.start,g=f.count;for(let v=m,_=m+g;v<_;v+=3)for(let b=0;b<3;b++){const x=l.getX(v+b),y=l.getX(v+(b+1)%3);i.fromBufferAttribute(a,x),s.fromBufferAttribute(a,y),HC(i,s,r)===!0&&(n.push(i.x,i.y,i.z),n.push(s.x,s.y,s.z))}}}else{const a=e.attributes.position;for(let l=0,c=a.count/3;l<c;l++)for(let u=0;u<3;u++){const d=3*l+u,f=3*l+(u+1)%3;i.fromBufferAttribute(a,d),s.fromBufferAttribute(a,f),HC(i,s,r)===!0&&(n.push(i.x,i.y,i.z),n.push(s.x,s.y,s.z))}}this.setAttribute("position",new ot(n,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function HC(t,e,n){const r=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`;return n.has(r)===!0||n.has(i)===!0?!1:(n.add(r),n.add(i),!0)}var GC=Object.freeze({__proto__:null,BoxGeometry:Bc,CapsuleGeometry:vv,CircleGeometry:yv,ConeGeometry:bv,CylinderGeometry:Wd,DodecahedronGeometry:_v,EdgesGeometry:fD,ExtrudeGeometry:Sv,IcosahedronGeometry:Mv,LatheGeometry:Lp,OctahedronGeometry:Dp,PlaneGeometry:bl,PolyhedronGeometry:_l,RingGeometry:Ev,ShapeGeometry:Nv,SphereGeometry:Ip,TetrahedronGeometry:Tv,TorusGeometry:Av,TorusKnotGeometry:Cv,TubeGeometry:Xd,WireframeGeometry:xD});class vD extends Cr{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new nt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class yD extends _a{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class dM extends Cr{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new nt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new nt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=yl,this.normalScale=new ke(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class bD extends dM{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new ke(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return On(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(n){this.ior=(1+.4*n)/(1-.4*n)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new nt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new nt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new nt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class _D extends Cr{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new nt(16777215),this.specular=new nt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new nt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=yl,this.normalScale=new ke(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Ap,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class wD extends Cr{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new nt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new nt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=yl,this.normalScale=new ke(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class SD extends Cr{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=yl,this.normalScale=new ke(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class MD extends Cr{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new nt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new nt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=yl,this.normalScale=new ke(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Ap,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class ED extends Cr{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new nt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=yl,this.normalScale=new ke(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class ND extends pi{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function gc(t,e,n){return!t||!n&&t.constructor===e?t:typeof e.BYTES_PER_ELEMENT=="number"?new e(t):Array.prototype.slice.call(t)}function TD(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function AD(t){function e(i,s){return t[i]-t[s]}const n=t.length,r=new Array(n);for(let i=0;i!==n;++i)r[i]=i;return r.sort(e),r}function L_(t,e,n){const r=t.length,i=new t.constructor(r);for(let s=0,a=0;a!==r;++s){const l=n[s]*e;for(let c=0;c!==e;++c)i[a++]=t[l+c]}return i}function hM(t,e,n,r){let i=1,s=t[0];for(;s!==void 0&&s[r]===void 0;)s=t[i++];if(s===void 0)return;let a=s[r];if(a!==void 0)if(Array.isArray(a))do a=s[r],a!==void 0&&(e.push(s.time),n.push.apply(n,a)),s=t[i++];while(s!==void 0);else if(a.toArray!==void 0)do a=s[r],a!==void 0&&(e.push(s.time),a.toArray(n,n.length)),s=t[i++];while(s!==void 0);else do a=s[r],a!==void 0&&(e.push(s.time),n.push(a)),s=t[i++];while(s!==void 0)}function h$(t,e,n,r,i=30){const s=t.clone();s.name=e;const a=[];for(let c=0;c<s.tracks.length;++c){const u=s.tracks[c],d=u.getValueSize(),f=[],m=[];for(let g=0;g<u.times.length;++g){const v=u.times[g]*i;if(!(v<n||v>=r)){f.push(u.times[g]);for(let _=0;_<d;++_)m.push(u.values[g*d+_])}}f.length!==0&&(u.times=gc(f,u.times.constructor),u.values=gc(m,u.values.constructor),a.push(u))}s.tracks=a;let l=1/0;for(let c=0;c<s.tracks.length;++c)l>s.tracks[c].times[0]&&(l=s.tracks[c].times[0]);for(let c=0;c<s.tracks.length;++c)s.tracks[c].shift(-1*l);return s.resetDuration(),s}function f$(t,e=0,n=t,r=30){r<=0&&(r=30);const i=n.tracks.length,s=e/r;for(let a=0;a<i;++a){const l=n.tracks[a],c=l.ValueTypeName;if(c==="bool"||c==="string")continue;const u=t.tracks.find(function(x){return x.name===l.name&&x.ValueTypeName===c});if(u===void 0)continue;let d=0;const f=l.getValueSize();l.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=f/3);let m=0;const g=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(m=g/3);const v=l.times.length-1;let _;if(s<=l.times[0]){const x=d,y=f-d;_=l.values.slice(x,y)}else if(s>=l.times[v]){const x=v*f+d,y=x+f-d;_=l.values.slice(x,y)}else{const x=l.createInterpolant(),y=d,S=f-d;x.evaluate(s),_=x.resultBuffer.slice(y,S)}c==="quaternion"&&new Gr().fromArray(_).normalize().conjugate().toArray(_);const b=u.times.length;for(let x=0;x<b;++x){const y=x*g+m;if(c==="quaternion")Gr.multiplyQuaternionsFlat(u.values,y,_,0,u.values,y);else{const S=g-m*2;for(let E=0;E<S;++E)u.values[y+E]-=_[E]}}}return t.blendMode=HS,t}const p$={convertArray:gc,isTypedArray:TD,getKeyframeOrder:AD,sortedArray:L_,flattenJSON:hM,subclip:h$,makeClipAdditive:f$};class Up{constructor(e,n,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new n.constructor(r),this.sampleValues=n,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const n=this.parameterPositions;let r=this._cachedIndex,i=n[r],s=n[r-1];e:{t:{let a;n:{r:if(!(e<i)){for(let l=r+2;;){if(i===void 0){if(e<s)break r;return r=n.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===l)break;if(s=i,i=n[++r],e<i)break t}a=n.length;break n}if(!(e>=s)){const l=n[1];e<l&&(r=2,s=l);for(let c=r-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===c)break;if(i=s,s=n[--r-1],e>=s)break t}a=r,r=0;break n}break e}for(;r<a;){const l=r+a>>>1;e<n[l]?a=l:r=l+1}if(i=n[r],s=n[r-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return r=n.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,s,i)}return this.interpolate_(r,s,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const n=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i;for(let a=0;a!==i;++a)n[a]=r[s+a];return n}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class CD extends Up{constructor(e,n,r,i){super(e,n,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:fc,endingEnd:fc}}intervalChanged_(e,n,r){const i=this.parameterPositions;let s=e-2,a=e+1,l=i[s],c=i[a];if(l===void 0)switch(this.getSettings_().endingStart){case pc:s=e,l=2*n-r;break;case np:s=i.length-2,l=n+i[s]-i[s+1];break;default:s=e,l=r}if(c===void 0)switch(this.getSettings_().endingEnd){case pc:a=e,c=2*r-n;break;case np:a=1,c=r+i[1]-i[0];break;default:a=e-1,c=n}const u=(r-n)*.5,d=this.valueSize;this._weightPrev=u/(n-l),this._weightNext=u/(c-r),this._offsetPrev=s*d,this._offsetNext=a*d}interpolate_(e,n,r,i){const s=this.resultBuffer,a=this.sampleValues,l=this.valueSize,c=e*l,u=c-l,d=this._offsetPrev,f=this._offsetNext,m=this._weightPrev,g=this._weightNext,v=(r-n)/(i-n),_=v*v,b=_*v,x=-m*b+2*m*_-m*v,y=(1+m)*b+(-1.5-2*m)*_+(-.5+m)*v+1,S=(-1-g)*b+(1.5+g)*_+.5*v,E=g*b-g*_;for(let A=0;A!==l;++A)s[A]=x*a[d+A]+y*a[u+A]+S*a[c+A]+E*a[f+A];return s}}class fM extends Up{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e,n,r,i){const s=this.resultBuffer,a=this.sampleValues,l=this.valueSize,c=e*l,u=c-l,d=(r-n)/(i-n),f=1-d;for(let m=0;m!==l;++m)s[m]=a[u+m]*f+a[c+m]*d;return s}}class kD extends Up{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class Ys{constructor(e,n,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(n===void 0||n.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=gc(n,this.TimeBufferType),this.values=gc(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const n=e.constructor;let r;if(n.toJSON!==this.toJSON)r=n.toJSON(e);else{r={name:e.name,times:gc(e.times,Array),values:gc(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new kD(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new fM(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new CD(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let n;switch(e){case ep:n=this.InterpolantFactoryMethodDiscrete;break;case tp:n=this.InterpolantFactoryMethodLinear;break;case M0:n=this.InterpolantFactoryMethodSmooth;break}if(n===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=n,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return ep;case this.InterpolantFactoryMethodLinear:return tp;case this.InterpolantFactoryMethodSmooth:return M0}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const n=this.times;for(let r=0,i=n.length;r!==i;++r)n[r]+=e}return this}scale(e){if(e!==1){const n=this.times;for(let r=0,i=n.length;r!==i;++r)n[r]*=e}return this}trim(e,n){const r=this.times,i=r.length;let s=0,a=i-1;for(;s!==i&&r[s]<e;)++s;for(;a!==-1&&r[a]>n;)--a;if(++a,s!==0||a!==i){s>=a&&(a=Math.max(a,1),s=a-1);const l=this.getValueSize();this.times=r.slice(s,a),this.values=this.values.slice(s*l,a*l)}return this}validate(){let e=!0;const n=this.getValueSize();n-Math.floor(n)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,s=r.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let a=null;for(let l=0;l!==s;l++){const c=r[l];if(typeof c=="number"&&isNaN(c)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,l,c),e=!1;break}if(a!==null&&a>c){console.error("THREE.KeyframeTrack: Out of order keys.",this,l,c,a),e=!1;break}a=c}if(i!==void 0&&TD(i))for(let l=0,c=i.length;l!==c;++l){const u=i[l];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,l,u),e=!1;break}}return e}optimize(){const e=this.times.slice(),n=this.values.slice(),r=this.getValueSize(),i=this.getInterpolation()===M0,s=e.length-1;let a=1;for(let l=1;l<s;++l){let c=!1;const u=e[l],d=e[l+1];if(u!==d&&(l!==1||u!==e[0]))if(i)c=!0;else{const f=l*r,m=f-r,g=f+r;for(let v=0;v!==r;++v){const _=n[f+v];if(_!==n[m+v]||_!==n[g+v]){c=!0;break}}}if(c){if(l!==a){e[a]=e[l];const f=l*r,m=a*r;for(let g=0;g!==r;++g)n[m+g]=n[f+g]}++a}}if(s>0){e[a]=e[s];for(let l=s*r,c=a*r,u=0;u!==r;++u)n[c+u]=n[l+u];++a}return a!==e.length?(this.times=e.slice(0,a),this.values=n.slice(0,a*r)):(this.times=e,this.values=n),this}clone(){const e=this.times.slice(),n=this.values.slice(),r=this.constructor,i=new r(this.name,e,n);return i.createInterpolant=this.createInterpolant,i}}Ys.prototype.TimeBufferType=Float32Array;Ys.prototype.ValueBufferType=Float32Array;Ys.prototype.DefaultInterpolation=tp;class Vc extends Ys{}Vc.prototype.ValueTypeName="bool";Vc.prototype.ValueBufferType=Array;Vc.prototype.DefaultInterpolation=ep;Vc.prototype.InterpolantFactoryMethodLinear=void 0;Vc.prototype.InterpolantFactoryMethodSmooth=void 0;class pM extends Ys{}pM.prototype.ValueTypeName="color";class hp extends Ys{}hp.prototype.ValueTypeName="number";class PD extends Up{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e,n,r,i){const s=this.resultBuffer,a=this.sampleValues,l=this.valueSize,c=(r-n)/(i-n);let u=e*l;for(let d=u+l;u!==d;u+=4)Gr.slerpFlat(s,0,a,u-l,a,u,c);return s}}class Yd extends Ys{InterpolantFactoryMethodLinear(e){return new PD(this.times,this.values,this.getValueSize(),e)}}Yd.prototype.ValueTypeName="quaternion";Yd.prototype.DefaultInterpolation=tp;Yd.prototype.InterpolantFactoryMethodSmooth=void 0;class Hc extends Ys{}Hc.prototype.ValueTypeName="string";Hc.prototype.ValueBufferType=Array;Hc.prototype.DefaultInterpolation=ep;Hc.prototype.InterpolantFactoryMethodLinear=void 0;Hc.prototype.InterpolantFactoryMethodSmooth=void 0;class fp extends Ys{}fp.prototype.ValueTypeName="vector";class pp{constructor(e,n=-1,r,i=sv){this.name=e,this.tracks=r,this.duration=n,this.blendMode=i,this.uuid=qi(),this.duration<0&&this.resetDuration()}static parse(e){const n=[],r=e.tracks,i=1/(e.fps||1);for(let a=0,l=r.length;a!==l;++a)n.push(g$(r[a]).scale(i));const s=new this(e.name,e.duration,n,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const n=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:n,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,a=r.length;s!==a;++s)n.push(Ys.toJSON(r[s]));return i}static CreateFromMorphTargetSequence(e,n,r,i){const s=n.length,a=[];for(let l=0;l<s;l++){let c=[],u=[];c.push((l+s-1)%s,l,(l+1)%s),u.push(0,1,0);const d=AD(c);c=L_(c,1,d),u=L_(u,1,d),!i&&c[0]===0&&(c.push(s),u.push(u[0])),a.push(new hp(".morphTargetInfluences["+n[l].name+"]",c,u).scale(1/r))}return new this(e,-1,a)}static findByName(e,n){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===n)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,n,r){const i={},s=/^([\w-]*?)([\d]+)$/;for(let l=0,c=e.length;l<c;l++){const u=e[l],d=u.name.match(s);if(d&&d.length>1){const f=d[1];let m=i[f];m||(i[f]=m=[]),m.push(u)}}const a=[];for(const l in i)a.push(this.CreateFromMorphTargetSequence(l,i[l],n,r));return a}static parseAnimation(e,n){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(f,m,g,v,_){if(g.length!==0){const b=[],x=[];hM(g,b,x,v),b.length!==0&&_.push(new f(m,b,x))}},i=[],s=e.name||"default",a=e.fps||30,l=e.blendMode;let c=e.length||-1;const u=e.hierarchy||[];for(let f=0;f<u.length;f++){const m=u[f].keys;if(!(!m||m.length===0))if(m[0].morphTargets){const g={};let v;for(v=0;v<m.length;v++)if(m[v].morphTargets)for(let _=0;_<m[v].morphTargets.length;_++)g[m[v].morphTargets[_]]=-1;for(const _ in g){const b=[],x=[];for(let y=0;y!==m[v].morphTargets.length;++y){const S=m[v];b.push(S.time),x.push(S.morphTarget===_?1:0)}i.push(new hp(".morphTargetInfluence["+_+"]",b,x))}c=g.length*a}else{const g=".bones["+n[f].name+"]";r(fp,g+".position",m,"pos",i),r(Yd,g+".quaternion",m,"rot",i),r(fp,g+".scale",m,"scl",i)}}return i.length===0?null:new this(s,c,i,l)}resetDuration(){const e=this.tracks;let n=0;for(let r=0,i=e.length;r!==i;++r){const s=this.tracks[r];n=Math.max(n,s.times[s.times.length-1])}return this.duration=n,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let n=0;n<this.tracks.length;n++)e=e&&this.tracks[n].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let n=0;n<this.tracks.length;n++)e.push(this.tracks[n].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function m$(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return hp;case"vector":case"vector2":case"vector3":case"vector4":return fp;case"color":return pM;case"quaternion":return Yd;case"bool":case"boolean":return Vc;case"string":return Hc}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}function g$(t){if(t.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=m$(t.type);if(t.times===void 0){const n=[],r=[];hM(t.keys,n,r,"value"),t.times=n,t.values=r}return e.parse!==void 0?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}const Za={enabled:!1,files:{},add:function(t,e){this.enabled!==!1&&(this.files[t]=e)},get:function(t){if(this.enabled!==!1)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class mM{constructor(e,n,r){const i=this;let s=!1,a=0,l=0,c;const u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=n,this.onError=r,this.itemStart=function(d){l++,s===!1&&i.onStart!==void 0&&i.onStart(d,a,l),s=!0},this.itemEnd=function(d){a++,i.onProgress!==void 0&&i.onProgress(d,a,l),a===l&&(s=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(d){i.onError!==void 0&&i.onError(d)},this.resolveURL=function(d){return c?c(d):d},this.setURLModifier=function(d){return c=d,this},this.addHandler=function(d,f){return u.push(d,f),this},this.removeHandler=function(d){const f=u.indexOf(d);return f!==-1&&u.splice(f,2),this},this.getHandler=function(d){for(let f=0,m=u.length;f<m;f+=2){const g=u[f],v=u[f+1];if(g.global&&(g.lastIndex=0),g.test(d))return v}return null}}}const RD=new mM;class Pi{constructor(e){this.manager=e!==void 0?e:RD,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,n){const r=this;return new Promise(function(i,s){r.load(e,i,n,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}Pi.DEFAULT_MATERIAL_NAME="__DEFAULT";const Va={};class x$ extends Error{constructor(e,n){super(e),this.response=n}}class lo extends Pi{constructor(e){super(e)}load(e,n,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Za.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{n&&n(s),this.manager.itemEnd(e)},0),s;if(Va[e]!==void 0){Va[e].push({onLoad:n,onProgress:r,onError:i});return}Va[e]=[],Va[e].push({onLoad:n,onProgress:r,onError:i});const a=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),l=this.mimeType,c=this.responseType;fetch(a).then(u=>{if(u.status===200||u.status===0){if(u.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||u.body===void 0||u.body.getReader===void 0)return u;const d=Va[e],f=u.body.getReader(),m=u.headers.get("Content-Length")||u.headers.get("X-File-Size"),g=m?parseInt(m):0,v=g!==0;let _=0;const b=new ReadableStream({start(x){y();function y(){f.read().then(({done:S,value:E})=>{if(S)x.close();else{_+=E.byteLength;const A=new ProgressEvent("progress",{lengthComputable:v,loaded:_,total:g});for(let T=0,C=d.length;T<C;T++){const j=d[T];j.onProgress&&j.onProgress(A)}x.enqueue(E),y()}})}}});return new Response(b)}else throw new x$(`fetch for "${u.url}" responded with ${u.status}: ${u.statusText}`,u)}).then(u=>{switch(c){case"arraybuffer":return u.arrayBuffer();case"blob":return u.blob();case"document":return u.text().then(d=>new DOMParser().parseFromString(d,l));case"json":return u.json();default:if(l===void 0)return u.text();{const f=/charset="?([^;"\s]*)"?/i.exec(l),m=f&&f[1]?f[1].toLowerCase():void 0,g=new TextDecoder(m);return u.arrayBuffer().then(v=>g.decode(v))}}}).then(u=>{Za.add(e,u);const d=Va[e];delete Va[e];for(let f=0,m=d.length;f<m;f++){const g=d[f];g.onLoad&&g.onLoad(u)}}).catch(u=>{const d=Va[e];if(d===void 0)throw this.manager.itemError(e),u;delete Va[e];for(let f=0,m=d.length;f<m;f++){const g=d[f];g.onError&&g.onError(u)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class v$ extends Pi{constructor(e){super(e)}load(e,n,r,i){const s=this,a=new lo(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){try{n(s.parse(JSON.parse(l)))}catch(c){i?i(c):console.error(c),s.manager.itemError(e)}},r,i)}parse(e){const n=[];for(let r=0;r<e.length;r++){const i=pp.parse(e[r]);n.push(i)}return n}}class y$ extends Pi{constructor(e){super(e)}load(e,n,r,i){const s=this,a=[],l=new mv,c=new lo(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(s.withCredentials);let u=0;function d(f){c.load(e[f],function(m){const g=s.parse(m,!0);a[f]={width:g.width,height:g.height,format:g.format,mipmaps:g.mipmaps},u+=1,u===6&&(g.mipmapCount===1&&(l.minFilter=Mn),l.image=a,l.format=g.format,l.needsUpdate=!0,n&&n(l))},r,i)}if(Array.isArray(e))for(let f=0,m=e.length;f<m;++f)d(f);else c.load(e,function(f){const m=s.parse(f,!0);if(m.isCubemap){const g=m.mipmaps.length/m.mipmapCount;for(let v=0;v<g;v++){a[v]={mipmaps:[]};for(let _=0;_<m.mipmapCount;_++)a[v].mipmaps.push(m.mipmaps[v*m.mipmapCount+_]),a[v].format=m.format,a[v].width=m.width,a[v].height=m.height}l.image=a}else l.image.width=m.width,l.image.height=m.height,l.mipmaps=m.mipmaps;m.mipmapCount===1&&(l.minFilter=Mn),l.format=m.format,l.needsUpdate=!0,n&&n(l)},r,i);return l}}class mp extends Pi{constructor(e){super(e)}load(e,n,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,a=Za.get(e);if(a!==void 0)return s.manager.itemStart(e),setTimeout(function(){n&&n(a),s.manager.itemEnd(e)},0),a;const l=op("img");function c(){d(),Za.add(e,this),n&&n(this),s.manager.itemEnd(e)}function u(f){d(),i&&i(f),s.manager.itemError(e),s.manager.itemEnd(e)}function d(){l.removeEventListener("load",c,!1),l.removeEventListener("error",u,!1)}return l.addEventListener("load",c,!1),l.addEventListener("error",u,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(l.crossOrigin=this.crossOrigin),s.manager.itemStart(e),l.src=e,l}}class b$ extends Pi{constructor(e){super(e)}load(e,n,r,i){const s=new Rp;s.colorSpace=ar;const a=new mp(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);let l=0;function c(u){a.load(e[u],function(d){s.images[u]=d,l++,l===6&&(s.needsUpdate=!0,n&&n(s))},void 0,i)}for(let u=0;u<e.length;++u)c(u);return s}}class _$ extends Pi{constructor(e){super(e)}load(e,n,r,i){const s=this,a=new Mc,l=new lo(this.manager);return l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setPath(this.path),l.setWithCredentials(s.withCredentials),l.load(e,function(c){let u;try{u=s.parse(c)}catch(d){if(i!==void 0)i(d);else{console.error(d);return}}u.image!==void 0?a.image=u.image:u.data!==void 0&&(a.image.width=u.width,a.image.height=u.height,a.image.data=u.data),a.wrapS=u.wrapS!==void 0?u.wrapS:Br,a.wrapT=u.wrapT!==void 0?u.wrapT:Br,a.magFilter=u.magFilter!==void 0?u.magFilter:Mn,a.minFilter=u.minFilter!==void 0?u.minFilter:Mn,a.anisotropy=u.anisotropy!==void 0?u.anisotropy:1,u.colorSpace!==void 0?a.colorSpace=u.colorSpace:u.encoding!==void 0&&(a.encoding=u.encoding),u.flipY!==void 0&&(a.flipY=u.flipY),u.format!==void 0&&(a.format=u.format),u.type!==void 0&&(a.type=u.type),u.mipmaps!==void 0&&(a.mipmaps=u.mipmaps,a.minFilter=fl),u.mipmapCount===1&&(a.minFilter=Mn),u.generateMipmaps!==void 0&&(a.generateMipmaps=u.generateMipmaps),a.needsUpdate=!0,n&&n(a,u)},r,i),a}}class w$ extends Pi{constructor(e){super(e)}load(e,n,r,i){const s=new Cn,a=new mp(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(l){s.image=l,s.needsUpdate=!0,n!==void 0&&n(s)},r,i),s}}class wl extends Xt{constructor(e,n=1){super(),this.isLight=!0,this.type="Light",this.color=new nt(e),this.intensity=n}dispose(){}copy(e,n){return super.copy(e,n),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const n=super.toJSON(e);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,this.groundColor!==void 0&&(n.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(n.object.distance=this.distance),this.angle!==void 0&&(n.object.angle=this.angle),this.decay!==void 0&&(n.object.decay=this.decay),this.penumbra!==void 0&&(n.object.penumbra=this.penumbra),this.shadow!==void 0&&(n.object.shadow=this.shadow.toJSON()),n}}class jD extends wl{constructor(e,n,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Xt.DEFAULT_UP),this.updateMatrix(),this.groundColor=new nt(n)}copy(e,n){return super.copy(e,n),this.groundColor.copy(e.groundColor),this}}const K1=new St,WC=new X,XC=new X;class gM{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new ke(512,512),this.map=null,this.mapPass=null,this.matrix=new St,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new jp,this._frameExtents=new ke(1,1),this._viewportCount=1,this._viewports=[new Yt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const n=this.camera,r=this.matrix;WC.setFromMatrixPosition(e.matrixWorld),n.position.copy(WC),XC.setFromMatrixPosition(e.target.matrixWorld),n.lookAt(XC),n.updateMatrixWorld(),K1.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(K1),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(K1)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class S$ extends gM{constructor(){super(new Yn(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const n=this.camera,r=Cd*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,s=e.distance||n.far;(r!==n.fov||i!==n.aspect||s!==n.far)&&(n.fov=r,n.aspect=i,n.far=s,n.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class LD extends wl{constructor(e,n,r=0,i=Math.PI/3,s=0,a=2){super(e,n),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Xt.DEFAULT_UP),this.updateMatrix(),this.target=new Xt,this.distance=r,this.angle=i,this.penumbra=s,this.decay=a,this.map=null,this.shadow=new S$}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const YC=new St,zh=new X,J1=new X;class M$ extends gM{constructor(){super(new Yn(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new ke(4,2),this._viewportCount=6,this._viewports=[new Yt(2,1,1,1),new Yt(0,1,1,1),new Yt(3,1,1,1),new Yt(1,1,1,1),new Yt(3,0,1,1),new Yt(1,0,1,1)],this._cubeDirections=[new X(1,0,0),new X(-1,0,0),new X(0,0,1),new X(0,0,-1),new X(0,1,0),new X(0,-1,0)],this._cubeUps=[new X(0,1,0),new X(0,1,0),new X(0,1,0),new X(0,1,0),new X(0,0,1),new X(0,0,-1)]}updateMatrices(e,n=0){const r=this.camera,i=this.matrix,s=e.distance||r.far;s!==r.far&&(r.far=s,r.updateProjectionMatrix()),zh.setFromMatrixPosition(e.matrixWorld),r.position.copy(zh),J1.copy(r.position),J1.add(this._cubeDirections[n]),r.up.copy(this._cubeUps[n]),r.lookAt(J1),r.updateMatrixWorld(),i.makeTranslation(-zh.x,-zh.y,-zh.z),YC.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(YC)}}class DD extends wl{constructor(e,n,r=0,i=2){super(e,n),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new M$}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class E$ extends gM{constructor(){super(new al(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class ID extends wl{constructor(e,n){super(e,n),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Xt.DEFAULT_UP),this.updateMatrix(),this.target=new Xt,this.shadow=new E$}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class UD extends wl{constructor(e,n){super(e,n),this.isAmbientLight=!0,this.type="AmbientLight"}}class OD extends wl{constructor(e,n,r=10,i=10){super(e,n),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=r,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const n=super.toJSON(e);return n.object.width=this.width,n.object.height=this.height,n}}class FD{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new X)}set(e){for(let n=0;n<9;n++)this.coefficients[n].copy(e[n]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,n){const r=e.x,i=e.y,s=e.z,a=this.coefficients;return n.copy(a[0]).multiplyScalar(.282095),n.addScaledVector(a[1],.488603*i),n.addScaledVector(a[2],.488603*s),n.addScaledVector(a[3],.488603*r),n.addScaledVector(a[4],1.092548*(r*i)),n.addScaledVector(a[5],1.092548*(i*s)),n.addScaledVector(a[6],.315392*(3*s*s-1)),n.addScaledVector(a[7],1.092548*(r*s)),n.addScaledVector(a[8],.546274*(r*r-i*i)),n}getIrradianceAt(e,n){const r=e.x,i=e.y,s=e.z,a=this.coefficients;return n.copy(a[0]).multiplyScalar(.886227),n.addScaledVector(a[1],2*.511664*i),n.addScaledVector(a[2],2*.511664*s),n.addScaledVector(a[3],2*.511664*r),n.addScaledVector(a[4],2*.429043*r*i),n.addScaledVector(a[5],2*.429043*i*s),n.addScaledVector(a[6],.743125*s*s-.247708),n.addScaledVector(a[7],2*.429043*r*s),n.addScaledVector(a[8],.429043*(r*r-i*i)),n}add(e){for(let n=0;n<9;n++)this.coefficients[n].add(e.coefficients[n]);return this}addScaledSH(e,n){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],n);return this}scale(e){for(let n=0;n<9;n++)this.coefficients[n].multiplyScalar(e);return this}lerp(e,n){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],n);return this}equals(e){for(let n=0;n<9;n++)if(!this.coefficients[n].equals(e.coefficients[n]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,n=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].fromArray(e,n+i*3);return this}toArray(e=[],n=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].toArray(e,n+i*3);return e}static getBasisAt(e,n){const r=e.x,i=e.y,s=e.z;n[0]=.282095,n[1]=.488603*i,n[2]=.488603*s,n[3]=.488603*r,n[4]=1.092548*r*i,n[5]=1.092548*i*s,n[6]=.315392*(3*s*s-1),n[7]=1.092548*r*s,n[8]=.546274*(r*r-i*i)}}class zD extends wl{constructor(e=new FD,n=1){super(void 0,n),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const n=super.toJSON(e);return n.object.sh=this.sh.toArray(),n}}class kv extends Pi{constructor(e){super(e),this.textures={}}load(e,n,r,i){const s=this,a=new lo(s.manager);a.setPath(s.path),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(l){try{n(s.parse(JSON.parse(l)))}catch(c){i?i(c):console.error(c),s.manager.itemError(e)}},r,i)}parse(e){const n=this.textures;function r(s){return n[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),n[s]}const i=kv.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new nt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(i.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(i.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(i.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(i.depthFunc=e.depthFunc),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(i.blendSrc=e.blendSrc),e.blendDst!==void 0&&(i.blendDst=e.blendDst),e.blendEquation!==void 0&&(i.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(i.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(i.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(i.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&i.blendColor!==void 0&&i.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(i.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==void 0&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(i.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const a=e.uniforms[s];switch(i.uniforms[s]={},a.type){case"t":i.uniforms[s].value=r(a.value);break;case"c":i.uniforms[s].value=new nt().setHex(a.value);break;case"v2":i.uniforms[s].value=new ke().fromArray(a.value);break;case"v3":i.uniforms[s].value=new X().fromArray(a.value);break;case"v4":i.uniforms[s].value=new Yt().fromArray(a.value);break;case"m3":i.uniforms[s].value=new Rt().fromArray(a.value);break;case"m4":i.uniforms[s].value=new St().fromArray(a.value);break;default:i.uniforms[s].value=a.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)i.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(i.lights=e.lights),e.clipping!==void 0&&(i.clipping=e.clipping),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=r(e.map)),e.matcap!==void 0&&(i.matcap=r(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=r(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=r(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=r(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),i.normalScale=new ke().fromArray(s)}return e.displacementMap!==void 0&&(i.displacementMap=r(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=r(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=r(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=r(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=r(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=r(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=r(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=r(e.envMap)),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=r(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=r(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=r(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=r(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=r(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new ke().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=r(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=r(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=r(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=r(e.thicknessMap)),e.anisotropyMap!==void 0&&(i.anisotropyMap=r(e.anisotropyMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=r(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=r(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const n={ShadowMaterial:vD,SpriteMaterial:nM,RawShaderMaterial:yD,ShaderMaterial:_a,PointsMaterial:iM,MeshPhysicalMaterial:bD,MeshStandardMaterial:dM,MeshPhongMaterial:_D,MeshToonMaterial:wD,MeshNormalMaterial:SD,MeshLambertMaterial:MD,MeshDepthMaterial:cv,MeshDistanceMaterial:uv,MeshBasicMaterial:go,MeshMatcapMaterial:ED,LineDashedMaterial:ND,LineBasicMaterial:pi,Material:Cr};return new n[e]}}class D_{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let n="";for(let r=0,i=e.length;r<i;r++)n+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(n))}catch{return n}}static extractUrlBase(e){const n=e.lastIndexOf("/");return n===-1?"./":e.slice(0,n+1)}static resolveURL(e,n){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(n)&&/^\//.test(e)&&(n=n.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:n+e)}}class xM extends At{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class BD extends Pi{constructor(e){super(e)}load(e,n,r,i){const s=this,a=new lo(s.manager);a.setPath(s.path),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(l){try{n(s.parse(JSON.parse(l)))}catch(c){i?i(c):console.error(c),s.manager.itemError(e)}},r,i)}parse(e){const n={},r={};function i(g,v){if(n[v]!==void 0)return n[v];const b=g.interleavedBuffers[v],x=s(g,b.buffer),y=ed(b.type,x),S=new fv(y,b.stride);return S.uuid=b.uuid,n[v]=S,S}function s(g,v){if(r[v]!==void 0)return r[v];const b=g.arrayBuffers[v],x=new Uint32Array(b).buffer;return r[v]=x,x}const a=e.isInstancedBufferGeometry?new xM:new At,l=e.data.index;if(l!==void 0){const g=ed(l.type,l.array);a.setIndex(new qt(g,1))}const c=e.data.attributes;for(const g in c){const v=c[g];let _;if(v.isInterleavedBufferAttribute){const b=i(e.data,v.data);_=new jc(b,v.itemSize,v.offset,v.normalized)}else{const b=ed(v.type,v.array),x=v.isInstancedBufferAttribute?Lc:qt;_=new x(b,v.itemSize,v.normalized)}v.name!==void 0&&(_.name=v.name),v.usage!==void 0&&_.setUsage(v.usage),a.setAttribute(g,_)}const u=e.data.morphAttributes;if(u)for(const g in u){const v=u[g],_=[];for(let b=0,x=v.length;b<x;b++){const y=v[b];let S;if(y.isInterleavedBufferAttribute){const E=i(e.data,y.data);S=new jc(E,y.itemSize,y.offset,y.normalized)}else{const E=ed(y.type,y.array);S=new qt(E,y.itemSize,y.normalized)}y.name!==void 0&&(S.name=y.name),_.push(S)}a.morphAttributes[g]=_}e.data.morphTargetsRelative&&(a.morphTargetsRelative=!0);const f=e.data.groups||e.data.drawcalls||e.data.offsets;if(f!==void 0)for(let g=0,v=f.length;g!==v;++g){const _=f[g];a.addGroup(_.start,_.count,_.materialIndex)}const m=e.data.boundingSphere;if(m!==void 0){const g=new X;m.center!==void 0&&g.fromArray(m.center),a.boundingSphere=new Tr(g,m.radius)}return e.name&&(a.name=e.name),e.userData&&(a.userData=e.userData),a}}class N$ extends Pi{constructor(e){super(e)}load(e,n,r,i){const s=this,a=this.path===""?D_.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;const l=new lo(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){let u=null;try{u=JSON.parse(c)}catch(f){i!==void 0&&i(f),console.error("THREE:ObjectLoader: Can't parse "+e+".",f.message);return}const d=u.metadata;if(d===void 0||d.type===void 0||d.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(u,n)},r,i)}async loadAsync(e,n){const r=this,i=this.path===""?D_.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const s=new lo(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const a=await s.loadAsync(e,n),l=JSON.parse(a),c=l.metadata;if(c===void 0||c.type===void 0||c.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await r.parseAsync(l)}parse(e,n){const r=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,i),a=this.parseImages(e.images,function(){n!==void 0&&n(u)}),l=this.parseTextures(e.textures,a),c=this.parseMaterials(e.materials,l),u=this.parseObject(e.object,s,c,l,r),d=this.parseSkeletons(e.skeletons,u);if(this.bindSkeletons(u,d),n!==void 0){let f=!1;for(const m in a)if(a[m].data instanceof HTMLImageElement){f=!0;break}f===!1&&n(u)}return u}async parseAsync(e){const n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),s=await this.parseImagesAsync(e.images),a=this.parseTextures(e.textures,s),l=this.parseMaterials(e.materials,a),c=this.parseObject(e.object,i,l,a,n),u=this.parseSkeletons(e.skeletons,c);return this.bindSkeletons(c,u),c}parseShapes(e){const n={};if(e!==void 0)for(let r=0,i=e.length;r<i;r++){const s=new Ec().fromJSON(e[r]);n[s.uuid]=s}return n}parseSkeletons(e,n){const r={},i={};if(n.traverse(function(s){s.isBone&&(i[s.uuid]=s)}),e!==void 0)for(let s=0,a=e.length;s<a;s++){const l=new pv().fromJSON(e[s],i);r[l.uuid]=l}return r}parseGeometries(e,n){const r={};if(e!==void 0){const i=new BD;for(let s=0,a=e.length;s<a;s++){let l;const c=e[s];switch(c.type){case"BufferGeometry":case"InstancedBufferGeometry":l=i.parse(c);break;default:c.type in GC?l=GC[c.type].fromJSON(c,n):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${c.type}"`)}l.uuid=c.uuid,c.name!==void 0&&(l.name=c.name),c.userData!==void 0&&(l.userData=c.userData),r[c.uuid]=l}}return r}parseMaterials(e,n){const r={},i={};if(e!==void 0){const s=new kv;s.setTextures(n);for(let a=0,l=e.length;a<l;a++){const c=e[a];r[c.uuid]===void 0&&(r[c.uuid]=s.parse(c)),i[c.uuid]=r[c.uuid]}}return i}parseAnimations(e){const n={};if(e!==void 0)for(let r=0;r<e.length;r++){const i=e[r],s=pp.parse(i);n[s.uuid]=s}return n}parseImages(e,n){const r=this,i={};let s;function a(c){return r.manager.itemStart(c),s.load(c,function(){r.manager.itemEnd(c)},void 0,function(){r.manager.itemError(c),r.manager.itemEnd(c)})}function l(c){if(typeof c=="string"){const u=c,d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:r.resourcePath+u;return a(d)}else return c.data?{data:ed(c.type,c.data),width:c.width,height:c.height}:null}if(e!==void 0&&e.length>0){const c=new mM(n);s=new mp(c),s.setCrossOrigin(this.crossOrigin);for(let u=0,d=e.length;u<d;u++){const f=e[u],m=f.url;if(Array.isArray(m)){const g=[];for(let v=0,_=m.length;v<_;v++){const b=m[v],x=l(b);x!==null&&(x instanceof HTMLImageElement?g.push(x):g.push(new Mc(x.data,x.width,x.height)))}i[f.uuid]=new mc(g)}else{const g=l(f.url);i[f.uuid]=new mc(g)}}}return i}async parseImagesAsync(e){const n=this,r={};let i;async function s(a){if(typeof a=="string"){const l=a,c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l)?l:n.resourcePath+l;return await i.loadAsync(c)}else return a.data?{data:ed(a.type,a.data),width:a.width,height:a.height}:null}if(e!==void 0&&e.length>0){i=new mp(this.manager),i.setCrossOrigin(this.crossOrigin);for(let a=0,l=e.length;a<l;a++){const c=e[a],u=c.url;if(Array.isArray(u)){const d=[];for(let f=0,m=u.length;f<m;f++){const g=u[f],v=await s(g);v!==null&&(v instanceof HTMLImageElement?d.push(v):d.push(new Mc(v.data,v.width,v.height)))}r[c.uuid]=new mc(d)}else{const d=await s(c.url);r[c.uuid]=new mc(d)}}}return r}parseTextures(e,n){function r(s,a){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),a[s])}const i={};if(e!==void 0)for(let s=0,a=e.length;s<a;s++){const l=e[s];l.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',l.uuid),n[l.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",l.image);const c=n[l.image],u=c.data;let d;Array.isArray(u)?(d=new Rp,u.length===6&&(d.needsUpdate=!0)):(u&&u.data?d=new Mc:d=new Cn,u&&(d.needsUpdate=!0)),d.source=c,d.uuid=l.uuid,l.name!==void 0&&(d.name=l.name),l.mapping!==void 0&&(d.mapping=r(l.mapping,T$)),l.channel!==void 0&&(d.channel=l.channel),l.offset!==void 0&&d.offset.fromArray(l.offset),l.repeat!==void 0&&d.repeat.fromArray(l.repeat),l.center!==void 0&&d.center.fromArray(l.center),l.rotation!==void 0&&(d.rotation=l.rotation),l.wrap!==void 0&&(d.wrapS=r(l.wrap[0],qC),d.wrapT=r(l.wrap[1],qC)),l.format!==void 0&&(d.format=l.format),l.internalFormat!==void 0&&(d.internalFormat=l.internalFormat),l.type!==void 0&&(d.type=l.type),l.colorSpace!==void 0&&(d.colorSpace=l.colorSpace),l.encoding!==void 0&&(d.encoding=l.encoding),l.minFilter!==void 0&&(d.minFilter=r(l.minFilter,$C)),l.magFilter!==void 0&&(d.magFilter=r(l.magFilter,$C)),l.anisotropy!==void 0&&(d.anisotropy=l.anisotropy),l.flipY!==void 0&&(d.flipY=l.flipY),l.generateMipmaps!==void 0&&(d.generateMipmaps=l.generateMipmaps),l.premultiplyAlpha!==void 0&&(d.premultiplyAlpha=l.premultiplyAlpha),l.unpackAlignment!==void 0&&(d.unpackAlignment=l.unpackAlignment),l.compareFunction!==void 0&&(d.compareFunction=l.compareFunction),l.userData!==void 0&&(d.userData=l.userData),i[l.uuid]=d}return i}parseObject(e,n,r,i,s){let a;function l(m){return n[m]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",m),n[m]}function c(m){if(m!==void 0){if(Array.isArray(m)){const g=[];for(let v=0,_=m.length;v<_;v++){const b=m[v];r[b]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",b),g.push(r[b])}return g}return r[m]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",m),r[m]}}function u(m){return i[m]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",m),i[m]}let d,f;switch(e.type){case"Scene":a=new yx,e.background!==void 0&&(Number.isInteger(e.background)?a.background=new nt(e.background):a.background=u(e.background)),e.environment!==void 0&&(a.environment=u(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?a.fog=new hv(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(a.fog=new dv(e.fog.color,e.fog.density)),e.fog.name!==""&&(a.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(a.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(a.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":a=new Yn(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(a.focus=e.focus),e.zoom!==void 0&&(a.zoom=e.zoom),e.filmGauge!==void 0&&(a.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(a.filmOffset=e.filmOffset),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"OrthographicCamera":a=new al(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(a.zoom=e.zoom),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"AmbientLight":a=new UD(e.color,e.intensity);break;case"DirectionalLight":a=new ID(e.color,e.intensity);break;case"PointLight":a=new DD(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":a=new OD(e.color,e.intensity,e.width,e.height);break;case"SpotLight":a=new LD(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":a=new jD(e.color,e.groundColor,e.intensity);break;case"LightProbe":a=new zD().fromJSON(e);break;case"SkinnedMesh":d=l(e.geometry),f=c(e.material),a=new iD(d,f),e.bindMode!==void 0&&(a.bindMode=e.bindMode),e.bindMatrix!==void 0&&a.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(a.skeleton=e.skeleton);break;case"Mesh":d=l(e.geometry),f=c(e.material),a=new Fn(d,f);break;case"InstancedMesh":d=l(e.geometry),f=c(e.material);const m=e.count,g=e.instanceMatrix,v=e.instanceColor;a=new sD(d,f,m),a.instanceMatrix=new Lc(new Float32Array(g.array),16),v!==void 0&&(a.instanceColor=new Lc(new Float32Array(v.array),v.itemSize));break;case"BatchedMesh":d=l(e.geometry),f=c(e.material),a=new aD(e.maxGeometryCount,e.maxVertexCount,e.maxIndexCount,f),a.geometry=d,a.perObjectFrustumCulled=e.perObjectFrustumCulled,a.sortObjects=e.sortObjects,a._drawRanges=e.drawRanges,a._reservedRanges=e.reservedRanges,a._visibility=e.visibility,a._active=e.active,a._bounds=e.bounds.map(_=>{const b=new Wr;b.min.fromArray(_.boxMin),b.max.fromArray(_.boxMax);const x=new Tr;return x.radius=_.sphereRadius,x.center.fromArray(_.sphereCenter),{boxInitialized:_.boxInitialized,box:b,sphereInitialized:_.sphereInitialized,sphere:x}}),a._maxGeometryCount=e.maxGeometryCount,a._maxVertexCount=e.maxVertexCount,a._maxIndexCount=e.maxIndexCount,a._geometryInitialized=e.geometryInitialized,a._geometryCount=e.geometryCount,a._matricesTexture=u(e.matricesTexture.uuid);break;case"LOD":a=new rD;break;case"Line":a=new pl(l(e.geometry),c(e.material));break;case"LineLoop":a=new oD(l(e.geometry),c(e.material));break;case"LineSegments":a=new Ma(l(e.geometry),c(e.material));break;case"PointCloud":case"Points":a=new lD(l(e.geometry),c(e.material));break;case"Sprite":a=new nD(c(e.material));break;case"Group":a=new rd;break;case"Bone":a=new rM;break;default:a=new Xt}if(a.uuid=e.uuid,e.name!==void 0&&(a.name=e.name),e.matrix!==void 0?(a.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(a.matrixAutoUpdate=e.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(e.position!==void 0&&a.position.fromArray(e.position),e.rotation!==void 0&&a.rotation.fromArray(e.rotation),e.quaternion!==void 0&&a.quaternion.fromArray(e.quaternion),e.scale!==void 0&&a.scale.fromArray(e.scale)),e.up!==void 0&&a.up.fromArray(e.up),e.castShadow!==void 0&&(a.castShadow=e.castShadow),e.receiveShadow!==void 0&&(a.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(a.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(a.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(a.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&a.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(a.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(a.visible=e.visible),e.frustumCulled!==void 0&&(a.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(a.renderOrder=e.renderOrder),e.userData!==void 0&&(a.userData=e.userData),e.layers!==void 0&&(a.layers.mask=e.layers),e.children!==void 0){const m=e.children;for(let g=0;g<m.length;g++)a.add(this.parseObject(m[g],n,r,i,s))}if(e.animations!==void 0){const m=e.animations;for(let g=0;g<m.length;g++){const v=m[g];a.animations.push(s[v])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(a.autoUpdate=e.autoUpdate);const m=e.levels;for(let g=0;g<m.length;g++){const v=m[g],_=a.getObjectByProperty("uuid",v.object);_!==void 0&&a.addLevel(_,v.distance,v.hysteresis)}}return a}bindSkeletons(e,n){Object.keys(n).length!==0&&e.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const i=n[r.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(i,r.bindMatrix)}})}}const T$={UVMapping:rv,CubeReflectionMapping:oo,CubeRefractionMapping:hl,EquirectangularReflectionMapping:Zf,EquirectangularRefractionMapping:Kf,CubeUVReflectionMapping:Hd},qC={RepeatWrapping:Jf,ClampToEdgeWrapping:Br,MirroredRepeatWrapping:Qf},$C={NearestFilter:Wn,NearestMipmapNearestFilter:gx,NearestMipmapLinearFilter:vf,LinearFilter:Mn,LinearMipmapNearestFilter:DS,LinearMipmapLinearFilter:fl};class A$ extends Pi{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,n,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,a=Za.get(e);if(a!==void 0){if(s.manager.itemStart(e),a.then){a.then(u=>{n&&n(u),s.manager.itemEnd(e)}).catch(u=>{i&&i(u)});return}return setTimeout(function(){n&&n(a),s.manager.itemEnd(e)},0),a}const l={};l.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",l.headers=this.requestHeader;const c=fetch(e,l).then(function(u){return u.blob()}).then(function(u){return createImageBitmap(u,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(u){return Za.add(e,u),n&&n(u),s.manager.itemEnd(e),u}).catch(function(u){i&&i(u),Za.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});Za.add(e,c),s.manager.itemStart(e)}}let Og;class vM{static getContext(){return Og===void 0&&(Og=new(window.AudioContext||window.webkitAudioContext)),Og}static setContext(e){Og=e}}class C$ extends Pi{constructor(e){super(e)}load(e,n,r,i){const s=this,a=new lo(this.manager);a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(c){try{const u=c.slice(0);vM.getContext().decodeAudioData(u,function(f){n(f)}).catch(l)}catch(u){l(u)}},r,i);function l(c){i?i(c):console.error(c),s.manager.itemError(e)}}}const ZC=new St,KC=new St,Wl=new St;class k${constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Yn,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Yn,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const n=this._cache;if(n.focus!==e.focus||n.fov!==e.fov||n.aspect!==e.aspect*this.aspect||n.near!==e.near||n.far!==e.far||n.zoom!==e.zoom||n.eyeSep!==this.eyeSep){n.focus=e.focus,n.fov=e.fov,n.aspect=e.aspect*this.aspect,n.near=e.near,n.far=e.far,n.zoom=e.zoom,n.eyeSep=this.eyeSep,Wl.copy(e.projectionMatrix);const i=n.eyeSep/2,s=i*n.near/n.focus,a=n.near*Math.tan(wc*n.fov*.5)/n.zoom;let l,c;KC.elements[12]=-i,ZC.elements[12]=i,l=-a*n.aspect+s,c=a*n.aspect+s,Wl.elements[0]=2*n.near/(c-l),Wl.elements[8]=(c+l)/(c-l),this.cameraL.projectionMatrix.copy(Wl),l=-a*n.aspect-s,c=a*n.aspect-s,Wl.elements[0]=2*n.near/(c-l),Wl.elements[8]=(c+l)/(c-l),this.cameraR.projectionMatrix.copy(Wl)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(KC),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(ZC)}}class yM{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=JC(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const n=JC();e=(n-this.oldTime)/1e3,this.oldTime=n,this.elapsedTime+=e}return e}}function JC(){return(typeof performance>"u"?Date:performance).now()}const Xl=new X,QC=new Gr,P$=new X,Yl=new X;class R$ extends Xt{constructor(){super(),this.type="AudioListener",this.context=vM.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new yM}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const n=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Xl,QC,P$),Yl.set(0,0,-1).applyQuaternion(QC),n.positionX){const i=this.context.currentTime+this.timeDelta;n.positionX.linearRampToValueAtTime(Xl.x,i),n.positionY.linearRampToValueAtTime(Xl.y,i),n.positionZ.linearRampToValueAtTime(Xl.z,i),n.forwardX.linearRampToValueAtTime(Yl.x,i),n.forwardY.linearRampToValueAtTime(Yl.y,i),n.forwardZ.linearRampToValueAtTime(Yl.z,i),n.upX.linearRampToValueAtTime(r.x,i),n.upY.linearRampToValueAtTime(r.y,i),n.upZ.linearRampToValueAtTime(r.z,i)}else n.setPosition(Xl.x,Xl.y,Xl.z),n.setOrientation(Yl.x,Yl.y,Yl.z,r.x,r.y,r.z)}}class VD extends Xt{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const n=this.context.createBufferSource();return n.buffer=this.buffer,n.loop=this.loop,n.loopStart=this.loopStart,n.loopEnd=this.loopEnd,n.onended=this.onEnded.bind(this),n.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=n,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const ql=new X,e3=new Gr,j$=new X,$l=new X;class L$ extends VD{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,n,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=n,this.panner.coneOuterGain=r,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(ql,e3,j$),$l.set(0,0,1).applyQuaternion(e3);const n=this.panner;if(n.positionX){const r=this.context.currentTime+this.listener.timeDelta;n.positionX.linearRampToValueAtTime(ql.x,r),n.positionY.linearRampToValueAtTime(ql.y,r),n.positionZ.linearRampToValueAtTime(ql.z,r),n.orientationX.linearRampToValueAtTime($l.x,r),n.orientationY.linearRampToValueAtTime($l.y,r),n.orientationZ.linearRampToValueAtTime($l.z,r)}else n.setPosition(ql.x,ql.y,ql.z),n.setOrientation($l.x,$l.y,$l.z)}}class D${constructor(e,n=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=n,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const n=this.getFrequencyData();for(let r=0;r<n.length;r++)e+=n[r];return e/n.length}}class HD{constructor(e,n,r){this.binding=e,this.valueSize=r;let i,s,a;switch(n){case"quaternion":i=this._slerp,s=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,s=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,s=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=s,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,n){const r=this.buffer,i=this.valueSize,s=e*i+i;let a=this.cumulativeWeight;if(a===0){for(let l=0;l!==i;++l)r[s+l]=r[l];a=n}else{a+=n;const l=n/a;this._mixBufferRegion(r,s,0,l,i)}this.cumulativeWeight=a}accumulateAdditive(e){const n=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(n,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const n=this.valueSize,r=this.buffer,i=e*n+n,s=this.cumulativeWeight,a=this.cumulativeWeightAdditive,l=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const c=n*this._origIndex;this._mixBufferRegion(r,i,c,1-s,n)}a>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*n,1,n);for(let c=n,u=n+n;c!==u;++c)if(r[c]!==r[c+n]){l.setValue(r,i);break}}saveOriginalState(){const e=this.binding,n=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(n,i);for(let s=r,a=i;s!==a;++s)n[s]=n[i+s%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,n=e+this.valueSize;for(let r=e;r<n;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,n=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[n+r]=this.buffer[e+r]}_select(e,n,r,i,s){if(i>=.5)for(let a=0;a!==s;++a)e[n+a]=e[r+a]}_slerp(e,n,r,i){Gr.slerpFlat(e,n,e,n,e,r,i)}_slerpAdditive(e,n,r,i,s){const a=this._workIndex*s;Gr.multiplyQuaternionsFlat(e,a,e,n,e,r),Gr.slerpFlat(e,n,e,n,e,a,i)}_lerp(e,n,r,i,s){const a=1-i;for(let l=0;l!==s;++l){const c=n+l;e[c]=e[c]*a+e[r+l]*i}}_lerpAdditive(e,n,r,i,s){for(let a=0;a!==s;++a){const l=n+a;e[l]=e[l]+e[r+a]*i}}}const bM="\\[\\]\\.:\\/",I$=new RegExp("["+bM+"]","g"),_M="[^"+bM+"]",U$="[^"+bM.replace("\\.","")+"]",O$=/((?:WC+[\/:])*)/.source.replace("WC",_M),F$=/(WCOD+)?/.source.replace("WCOD",U$),z$=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",_M),B$=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",_M),V$=new RegExp("^"+O$+F$+z$+B$+"$"),H$=["material","materials","bones","map"];class G${constructor(e,n,r){const i=r||Vt.parseTrackName(n);this._targetGroup=e,this._bindings=e.subscribe_(n,i)}getValue(e,n){this.bind();const r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,n)}setValue(e,n){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=r.length;i!==s;++i)r[i].setValue(e,n)}bind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=e.length;n!==r;++n)e[n].bind()}unbind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=e.length;n!==r;++n)e[n].unbind()}}class Vt{constructor(e,n,r){this.path=n,this.parsedPath=r||Vt.parseTrackName(n),this.node=Vt.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,n,r){return e&&e.isAnimationObjectGroup?new Vt.Composite(e,n,r):new Vt(e,n,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(I$,"")}static parseTrackName(e){const n=V$.exec(e);if(n===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const s=r.nodeName.substring(i+1);H$.indexOf(s)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=s)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,n){if(n===void 0||n===""||n==="."||n===-1||n===e.name||n===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(n);if(r!==void 0)return r}if(e.children){const r=function(s){for(let a=0;a<s.length;a++){const l=s[a];if(l.name===n||l.uuid===n)return l;const c=r(l.children);if(c)return c}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,n){e[n]=this.targetObject[this.propertyName]}_getValue_array(e,n){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)e[n++]=r[i]}_getValue_arrayElement(e,n){e[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,n){this.resolvedProperty.toArray(e,n)}_setValue_direct(e,n){this.targetObject[this.propertyName]=e[n]}_setValue_direct_setNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,n){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[n++]}_setValue_array_setNeedsUpdate(e,n){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,n){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,n){this.resolvedProperty[this.propertyIndex]=e[n]}_setValue_arrayElement_setNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,n){this.resolvedProperty.fromArray(e,n)}_setValue_fromArray_setNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,n){this.bind(),this.getValue(e,n)}_setValue_unbound(e,n){this.bind(),this.setValue(e,n)}bind(){let e=this.node;const n=this.parsedPath,r=n.objectName,i=n.propertyName;let s=n.propertyIndex;if(e||(e=Vt.findNode(this.rootNode,n.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let u=n.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let d=0;d<e.length;d++)if(e[d].name===u){u=d;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(u!==void 0){if(e[u]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[u]}}const a=e[i];if(a===void 0){const u=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+i+" but it wasn't found.",e);return}let l=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?l=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(l=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(s!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}c=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=s}else a.fromArray!==void 0&&a.toArray!==void 0?(c=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(c=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=i;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Vt.Composite=G$;Vt.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Vt.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Vt.prototype.GetterByBindingType=[Vt.prototype._getValue_direct,Vt.prototype._getValue_array,Vt.prototype._getValue_arrayElement,Vt.prototype._getValue_toArray];Vt.prototype.SetterByBindingTypeAndVersioning=[[Vt.prototype._setValue_direct,Vt.prototype._setValue_direct_setNeedsUpdate,Vt.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Vt.prototype._setValue_array,Vt.prototype._setValue_array_setNeedsUpdate,Vt.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Vt.prototype._setValue_arrayElement,Vt.prototype._setValue_arrayElement_setNeedsUpdate,Vt.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Vt.prototype._setValue_fromArray,Vt.prototype._setValue_fromArray_setNeedsUpdate,Vt.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class W${constructor(){this.isAnimationObjectGroup=!0,this.uuid=qi(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let r=0,i=arguments.length;r!==i;++r)e[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}add(){const e=this._objects,n=this._indicesByUUID,r=this._paths,i=this._parsedPaths,s=this._bindings,a=s.length;let l,c=e.length,u=this.nCachedObjects_;for(let d=0,f=arguments.length;d!==f;++d){const m=arguments[d],g=m.uuid;let v=n[g];if(v===void 0){v=c++,n[g]=v,e.push(m);for(let _=0,b=a;_!==b;++_)s[_].push(new Vt(m,r[_],i[_]))}else if(v<u){l=e[v];const _=--u,b=e[_];n[b.uuid]=v,e[v]=b,n[g]=_,e[_]=m;for(let x=0,y=a;x!==y;++x){const S=s[x],E=S[_];let A=S[v];S[v]=E,A===void 0&&(A=new Vt(m,r[x],i[x])),S[_]=A}}else e[v]!==l&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=u}remove(){const e=this._objects,n=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_;for(let a=0,l=arguments.length;a!==l;++a){const c=arguments[a],u=c.uuid,d=n[u];if(d!==void 0&&d>=s){const f=s++,m=e[f];n[m.uuid]=d,e[d]=m,n[u]=f,e[f]=c;for(let g=0,v=i;g!==v;++g){const _=r[g],b=_[f],x=_[d];_[d]=b,_[f]=x}}}this.nCachedObjects_=s}uncache(){const e=this._objects,n=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_,a=e.length;for(let l=0,c=arguments.length;l!==c;++l){const u=arguments[l],d=u.uuid,f=n[d];if(f!==void 0)if(delete n[d],f<s){const m=--s,g=e[m],v=--a,_=e[v];n[g.uuid]=f,e[f]=g,n[_.uuid]=m,e[m]=_,e.pop();for(let b=0,x=i;b!==x;++b){const y=r[b],S=y[m],E=y[v];y[f]=S,y[m]=E,y.pop()}}else{const m=--a,g=e[m];m>0&&(n[g.uuid]=f),e[f]=g,e.pop();for(let v=0,_=i;v!==_;++v){const b=r[v];b[f]=b[m],b.pop()}}}this.nCachedObjects_=s}subscribe_(e,n){const r=this._bindingsIndicesByPath;let i=r[e];const s=this._bindings;if(i!==void 0)return s[i];const a=this._paths,l=this._parsedPaths,c=this._objects,u=c.length,d=this.nCachedObjects_,f=new Array(u);i=s.length,r[e]=i,a.push(e),l.push(n),s.push(f);for(let m=d,g=c.length;m!==g;++m){const v=c[m];f[m]=new Vt(v,e,n)}return f}unsubscribe_(e){const n=this._bindingsIndicesByPath,r=n[e];if(r!==void 0){const i=this._paths,s=this._parsedPaths,a=this._bindings,l=a.length-1,c=a[l],u=e[l];n[u]=r,a[r]=c,a.pop(),s[r]=s[l],s.pop(),i[r]=i[l],i.pop()}}}class GD{constructor(e,n,r=null,i=n.blendMode){this._mixer=e,this._clip=n,this._localRoot=r,this.blendMode=i;const s=n.tracks,a=s.length,l=new Array(a),c={endingStart:fc,endingEnd:fc};for(let u=0;u!==a;++u){const d=s[u].createInterpolant(null);l[u]=d,d.settings=c}this._interpolantSettings=c,this._interpolants=l,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=T4,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,n){return this.loop=e,this.repetitions=n,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,n,r){if(e.fadeOut(n),this.fadeIn(n),r){const i=this._clip.duration,s=e._clip.duration,a=s/i,l=i/s;e.warp(1,a,n),this.warp(l,1,n)}return this}crossFadeTo(e,n,r){return e.crossFadeFrom(this,n,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,n,r){const i=this._mixer,s=i.time,a=this.timeScale;let l=this._timeScaleInterpolant;l===null&&(l=i._lendControlInterpolant(),this._timeScaleInterpolant=l);const c=l.parameterPositions,u=l.sampleValues;return c[0]=s,c[1]=s+r,u[0]=e/a,u[1]=n/a,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,n,r,i){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const c=(e-s)*r;c<0||r===0?n=0:(this._startTime=null,n=r*c)}n*=this._updateTimeScale(e);const a=this._updateTime(n),l=this._updateWeight(e);if(l>0){const c=this._interpolants,u=this._propertyBindings;switch(this.blendMode){case HS:for(let d=0,f=c.length;d!==f;++d)c[d].evaluate(a),u[d].accumulateAdditive(l);break;case sv:default:for(let d=0,f=c.length;d!==f;++d)c[d].evaluate(a),u[d].accumulate(i,l)}}}_updateWeight(e){let n=0;if(this.enabled){n=this.weight;const r=this._weightInterpolant;if(r!==null){const i=r.evaluate(e)[0];n*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=n,n}_updateTimeScale(e){let n=0;if(!this.paused){n=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const i=r.evaluate(e)[0];n*=i,e>r.parameterPositions[1]&&(this.stopWarping(),n===0?this.paused=!0:this.timeScale=n)}}return this._effectiveTimeScale=n,n}_updateTime(e){const n=this._clip.duration,r=this.loop;let i=this.time+e,s=this._loopCount;const a=r===A4;if(e===0)return s===-1?i:a&&(s&1)===1?n-i:i;if(r===N4){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=n)i=n;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,a)):this._setEndings(this.repetitions===0,!0,a)),i>=n||i<0){const l=Math.floor(i/n);i-=n*l,s+=Math.abs(l);const c=this.repetitions-s;if(c<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?n:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(c===1){const u=e<0;this._setEndings(u,!u,a)}else this._setEndings(!1,!1,a);this._loopCount=s,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:l})}}else this.time=i;if(a&&(s&1)===1)return n-i}return i}_setEndings(e,n,r){const i=this._interpolantSettings;r?(i.endingStart=pc,i.endingEnd=pc):(e?i.endingStart=this.zeroSlopeAtStart?pc:fc:i.endingStart=np,n?i.endingEnd=this.zeroSlopeAtEnd?pc:fc:i.endingEnd=np)}_scheduleFading(e,n,r){const i=this._mixer,s=i.time;let a=this._weightInterpolant;a===null&&(a=i._lendControlInterpolant(),this._weightInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=s,c[0]=n,l[1]=s+e,c[1]=r,this}}const X$=new Float32Array(1);class Y$ extends mo{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,n){const r=e._localRoot||this._root,i=e._clip.tracks,s=i.length,a=e._propertyBindings,l=e._interpolants,c=r.uuid,u=this._bindingsByRootAndName;let d=u[c];d===void 0&&(d={},u[c]=d);for(let f=0;f!==s;++f){const m=i[f],g=m.name;let v=d[g];if(v!==void 0)++v.referenceCount,a[f]=v;else{if(v=a[f],v!==void 0){v._cacheIndex===null&&(++v.referenceCount,this._addInactiveBinding(v,c,g));continue}const _=n&&n._propertyBindings[f].binding.parsedPath;v=new HD(Vt.create(r,g,_),m.ValueTypeName,m.getValueSize()),++v.referenceCount,this._addInactiveBinding(v,c,g),a[f]=v}l[f].resultBuffer=v.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,i=e._clip.uuid,s=this._actionsByClip[i];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,i,r)}const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const s=n[r];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const s=n[r];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const n=e._cacheIndex;return n!==null&&n<this._nActiveActions}_addInactiveAction(e,n,r){const i=this._actions,s=this._actionsByClip;let a=s[n];if(a===void 0)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[n]=a;else{const l=a.knownActions;e._byClipCacheIndex=l.length,l.push(e)}e._cacheIndex=i.length,i.push(e),a.actionByRoot[r]=e}_removeInactiveAction(e){const n=this._actions,r=n[n.length-1],i=e._cacheIndex;r._cacheIndex=i,n[i]=r,n.pop(),e._cacheIndex=null;const s=e._clip.uuid,a=this._actionsByClip,l=a[s],c=l.knownActions,u=c[c.length-1],d=e._byClipCacheIndex;u._byClipCacheIndex=d,c[d]=u,c.pop(),e._byClipCacheIndex=null;const f=l.actionByRoot,m=(e._localRoot||this._root).uuid;delete f[m],c.length===0&&delete a[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const s=n[r];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const n=this._actions,r=e._cacheIndex,i=this._nActiveActions++,s=n[i];e._cacheIndex=i,n[i]=e,s._cacheIndex=r,n[r]=s}_takeBackAction(e){const n=this._actions,r=e._cacheIndex,i=--this._nActiveActions,s=n[i];e._cacheIndex=i,n[i]=e,s._cacheIndex=r,n[r]=s}_addInactiveBinding(e,n,r){const i=this._bindingsByRootAndName,s=this._bindings;let a=i[n];a===void 0&&(a={},i[n]=a),a[r]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const n=this._bindings,r=e.binding,i=r.rootNode.uuid,s=r.path,a=this._bindingsByRootAndName,l=a[i],c=n[n.length-1],u=e._cacheIndex;c._cacheIndex=u,n[u]=c,n.pop(),delete l[s],Object.keys(l).length===0&&delete a[i]}_lendBinding(e){const n=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,s=n[i];e._cacheIndex=i,n[i]=e,s._cacheIndex=r,n[r]=s}_takeBackBinding(e){const n=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,s=n[i];e._cacheIndex=i,n[i]=e,s._cacheIndex=r,n[r]=s}_lendControlInterpolant(){const e=this._controlInterpolants,n=this._nActiveControlInterpolants++;let r=e[n];return r===void 0&&(r=new fM(new Float32Array(2),new Float32Array(2),1,X$),r.__cacheIndex=n,e[n]=r),r}_takeBackControlInterpolant(e){const n=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,s=n[i];e.__cacheIndex=i,n[i]=e,s.__cacheIndex=r,n[r]=s}clipAction(e,n,r){const i=n||this._root,s=i.uuid;let a=typeof e=="string"?pp.findByName(i,e):e;const l=a!==null?a.uuid:e,c=this._actionsByClip[l];let u=null;if(r===void 0&&(a!==null?r=a.blendMode:r=sv),c!==void 0){const f=c.actionByRoot[s];if(f!==void 0&&f.blendMode===r)return f;u=c.knownActions[0],a===null&&(a=u._clip)}if(a===null)return null;const d=new GD(this,a,n,r);return this._bindAction(d,u),this._addInactiveAction(d,l,s),d}existingAction(e,n){const r=n||this._root,i=r.uuid,s=typeof e=="string"?pp.findByName(r,e):e,a=s?s.uuid:e,l=this._actionsByClip[a];return l!==void 0&&l.actionByRoot[i]||null}stopAllAction(){const e=this._actions,n=this._nActiveActions;for(let r=n-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const n=this._actions,r=this._nActiveActions,i=this.time+=e,s=Math.sign(e),a=this._accuIndex^=1;for(let u=0;u!==r;++u)n[u]._update(i,e,s,a);const l=this._bindings,c=this._nActiveBindings;for(let u=0;u!==c;++u)l[u].apply(a);return this}setTime(e){this.time=0;for(let n=0;n<this._actions.length;n++)this._actions[n].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const n=this._actions,r=e.uuid,i=this._actionsByClip,s=i[r];if(s!==void 0){const a=s.knownActions;for(let l=0,c=a.length;l!==c;++l){const u=a[l];this._deactivateAction(u);const d=u._cacheIndex,f=n[n.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,f._cacheIndex=d,n[d]=f,n.pop(),this._removeInactiveBindingsForAction(u)}delete i[r]}}uncacheRoot(e){const n=e.uuid,r=this._actionsByClip;for(const a in r){const l=r[a].actionByRoot,c=l[n];c!==void 0&&(this._deactivateAction(c),this._removeInactiveAction(c))}const i=this._bindingsByRootAndName,s=i[n];if(s!==void 0)for(const a in s){const l=s[a];l.restoreOriginalState(),this._removeInactiveBinding(l)}}uncacheAction(e,n){const r=this.existingAction(e,n);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class wM{constructor(e){this.value=e}clone(){return new wM(this.value.clone===void 0?this.value:this.value.clone())}}let q$=0;class $$ extends mo{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:q$++}),this.name="",this.usage=ap,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const n=this.uniforms.indexOf(e);return n!==-1&&this.uniforms.splice(n,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const n=e.uniforms;this.uniforms.length=0;for(let r=0,i=n.length;r<i;r++){const s=Array.isArray(n[r])?n[r]:[n[r]];for(let a=0;a<s.length;a++)this.uniforms.push(s[a].clone())}return this}clone(){return new this.constructor().copy(this)}}class Z$ extends fv{constructor(e,n,r=1){super(e,n),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const n=super.clone(e);return n.meshPerAttribute=this.meshPerAttribute,n}toJSON(e){const n=super.toJSON(e);return n.isInstancedInterleavedBuffer=!0,n.meshPerAttribute=this.meshPerAttribute,n}}class K${constructor(e,n,r,i,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=n,this.itemSize=r,this.elementSize=i,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,n){return this.type=e,this.elementSize=n,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class WD{constructor(e,n,r=0,i=1/0){this.ray=new zc(e,n),this.near=r,this.far=i,this.camera=null,this.layers=new Sc,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,n){this.ray.set(e,n)}setFromCamera(e,n){n.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(n).sub(this.ray.origin).normalize(),this.camera=n):n.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(n.near+n.far)/(n.near-n.far)).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld),this.camera=n):console.error("THREE.Raycaster: Unsupported camera type: "+n.type)}intersectObject(e,n=!0,r=[]){return I_(e,this,r,n),r.sort(t3),r}intersectObjects(e,n=!0,r=[]){for(let i=0,s=e.length;i<s;i++)I_(e[i],this,r,n);return r.sort(t3),r}}function t3(t,e){return t.distance-e.distance}function I_(t,e,n,r){if(t.layers.test(e.layers)&&t.raycast(e,n),r===!0){const i=t.children;for(let s=0,a=i.length;s<a;s++)I_(i[s],e,n,!0)}}class U_{constructor(e=1,n=0,r=0){return this.radius=e,this.phi=n,this.theta=r,this}set(e,n,r){return this.radius=e,this.phi=n,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,r){return this.radius=Math.sqrt(e*e+n*n+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(On(n/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class J${constructor(e=1,n=0,r=0){return this.radius=e,this.theta=n,this.y=r,this}set(e,n,r){return this.radius=e,this.theta=n,this.y=r,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=n,this}clone(){return new this.constructor().copy(this)}}const n3=new ke;class Q${constructor(e=new ke(1/0,1/0),n=new ke(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromPoints(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const r=n3.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,n3).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const r3=new X,Fg=new X;class eZ{constructor(e=new X,n=new X){this.start=e,this.end=n}set(e,n){return this.start.copy(e),this.end.copy(n),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,n){return this.delta(n).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,n){r3.subVectors(e,this.start),Fg.subVectors(this.end,this.start);const r=Fg.dot(Fg);let s=Fg.dot(r3)/r;return n&&(s=On(s,0,1)),s}closestPointToPoint(e,n,r){const i=this.closestPointToPointParameter(e,n);return this.delta(r).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const i3=new X;class tZ extends Xt{constructor(e,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="SpotLightHelper";const r=new At,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let a=0,l=1,c=32;a<c;a++,l++){const u=a/c*Math.PI*2,d=l/c*Math.PI*2;i.push(Math.cos(u),Math.sin(u),1,Math.cos(d),Math.sin(d),1)}r.setAttribute("position",new ot(i,3));const s=new pi({fog:!1,toneMapped:!1});this.cone=new Ma(r,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,n=e*Math.tan(this.light.angle);this.cone.scale.set(n,n,e),i3.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(i3),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Io=new X,zg=new St,Q1=new St;class nZ extends Ma{constructor(e){const n=XD(e),r=new At,i=[],s=[],a=new nt(0,0,1),l=new nt(0,1,0);for(let u=0;u<n.length;u++){const d=n[u];d.parent&&d.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),s.push(a.r,a.g,a.b),s.push(l.r,l.g,l.b))}r.setAttribute("position",new ot(i,3)),r.setAttribute("color",new ot(s,3));const c=new pi({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,c),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=n,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const n=this.bones,r=this.geometry,i=r.getAttribute("position");Q1.copy(this.root.matrixWorld).invert();for(let s=0,a=0;s<n.length;s++){const l=n[s];l.parent&&l.parent.isBone&&(zg.multiplyMatrices(Q1,l.matrixWorld),Io.setFromMatrixPosition(zg),i.setXYZ(a,Io.x,Io.y,Io.z),zg.multiplyMatrices(Q1,l.parent.matrixWorld),Io.setFromMatrixPosition(zg),i.setXYZ(a+1,Io.x,Io.y,Io.z),a+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function XD(t){const e=[];t.isBone===!0&&e.push(t);for(let n=0;n<t.children.length;n++)e.push.apply(e,XD(t.children[n]));return e}class rZ extends Fn{constructor(e,n,r){const i=new Ip(n,4,2),s=new go({wireframe:!0,fog:!1,toneMapped:!1});super(i,s),this.light=e,this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const iZ=new X,s3=new nt,a3=new nt;class sZ extends Xt{constructor(e,n,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="HemisphereLightHelper";const i=new Dp(n);i.rotateY(Math.PI*.5),this.material=new go({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=i.getAttribute("position"),a=new Float32Array(s.count*3);i.setAttribute("color",new qt(a,3)),this.add(new Fn(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const n=e.geometry.getAttribute("color");s3.copy(this.light.color),a3.copy(this.light.groundColor);for(let r=0,i=n.count;r<i;r++){const s=r<i/2?s3:a3;n.setXYZ(r,s.r,s.g,s.b)}n.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(iZ.setFromMatrixPosition(this.light.matrixWorld).negate())}}class aZ extends Ma{constructor(e=10,n=10,r=4473924,i=8947848){r=new nt(r),i=new nt(i);const s=n/2,a=e/n,l=e/2,c=[],u=[];for(let m=0,g=0,v=-l;m<=n;m++,v+=a){c.push(-l,0,v,l,0,v),c.push(v,0,-l,v,0,l);const _=m===s?r:i;_.toArray(u,g),g+=3,_.toArray(u,g),g+=3,_.toArray(u,g),g+=3,_.toArray(u,g),g+=3}const d=new At;d.setAttribute("position",new ot(c,3)),d.setAttribute("color",new ot(u,3));const f=new pi({vertexColors:!0,toneMapped:!1});super(d,f),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class oZ extends Ma{constructor(e=10,n=16,r=8,i=64,s=4473924,a=8947848){s=new nt(s),a=new nt(a);const l=[],c=[];if(n>1)for(let f=0;f<n;f++){const m=f/n*(Math.PI*2),g=Math.sin(m)*e,v=Math.cos(m)*e;l.push(0,0,0),l.push(g,0,v);const _=f&1?s:a;c.push(_.r,_.g,_.b),c.push(_.r,_.g,_.b)}for(let f=0;f<r;f++){const m=f&1?s:a,g=e-e/r*f;for(let v=0;v<i;v++){let _=v/i*(Math.PI*2),b=Math.sin(_)*g,x=Math.cos(_)*g;l.push(b,0,x),c.push(m.r,m.g,m.b),_=(v+1)/i*(Math.PI*2),b=Math.sin(_)*g,x=Math.cos(_)*g,l.push(b,0,x),c.push(m.r,m.g,m.b)}}const u=new At;u.setAttribute("position",new ot(l,3)),u.setAttribute("color",new ot(c,3));const d=new pi({vertexColors:!0,toneMapped:!1});super(u,d),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const o3=new X,Bg=new X,l3=new X;class lZ extends Xt{constructor(e,n,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="DirectionalLightHelper",n===void 0&&(n=1);let i=new At;i.setAttribute("position",new ot([-n,n,0,n,n,0,n,-n,0,-n,-n,0,-n,n,0],3));const s=new pi({fog:!1,toneMapped:!1});this.lightPlane=new pl(i,s),this.add(this.lightPlane),i=new At,i.setAttribute("position",new ot([0,0,0,0,0,1],3)),this.targetLine=new pl(i,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),o3.setFromMatrixPosition(this.light.matrixWorld),Bg.setFromMatrixPosition(this.light.target.matrixWorld),l3.subVectors(Bg,o3),this.lightPlane.lookAt(Bg),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Bg),this.targetLine.scale.z=l3.length()}}const Vg=new X,Ln=new Pp;class cZ extends Ma{constructor(e){const n=new At,r=new pi({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],s=[],a={};l("n1","n2"),l("n2","n4"),l("n4","n3"),l("n3","n1"),l("f1","f2"),l("f2","f4"),l("f4","f3"),l("f3","f1"),l("n1","f1"),l("n2","f2"),l("n3","f3"),l("n4","f4"),l("p","n1"),l("p","n2"),l("p","n3"),l("p","n4"),l("u1","u2"),l("u2","u3"),l("u3","u1"),l("c","t"),l("p","c"),l("cn1","cn2"),l("cn3","cn4"),l("cf1","cf2"),l("cf3","cf4");function l(v,_){c(v),c(_)}function c(v){i.push(0,0,0),s.push(0,0,0),a[v]===void 0&&(a[v]=[]),a[v].push(i.length/3-1)}n.setAttribute("position",new ot(i,3)),n.setAttribute("color",new ot(s,3)),super(n,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update();const u=new nt(16755200),d=new nt(16711680),f=new nt(43775),m=new nt(16777215),g=new nt(3355443);this.setColors(u,d,f,m,g)}setColors(e,n,r,i,s){const l=this.geometry.getAttribute("color");l.setXYZ(0,e.r,e.g,e.b),l.setXYZ(1,e.r,e.g,e.b),l.setXYZ(2,e.r,e.g,e.b),l.setXYZ(3,e.r,e.g,e.b),l.setXYZ(4,e.r,e.g,e.b),l.setXYZ(5,e.r,e.g,e.b),l.setXYZ(6,e.r,e.g,e.b),l.setXYZ(7,e.r,e.g,e.b),l.setXYZ(8,e.r,e.g,e.b),l.setXYZ(9,e.r,e.g,e.b),l.setXYZ(10,e.r,e.g,e.b),l.setXYZ(11,e.r,e.g,e.b),l.setXYZ(12,e.r,e.g,e.b),l.setXYZ(13,e.r,e.g,e.b),l.setXYZ(14,e.r,e.g,e.b),l.setXYZ(15,e.r,e.g,e.b),l.setXYZ(16,e.r,e.g,e.b),l.setXYZ(17,e.r,e.g,e.b),l.setXYZ(18,e.r,e.g,e.b),l.setXYZ(19,e.r,e.g,e.b),l.setXYZ(20,e.r,e.g,e.b),l.setXYZ(21,e.r,e.g,e.b),l.setXYZ(22,e.r,e.g,e.b),l.setXYZ(23,e.r,e.g,e.b),l.setXYZ(24,n.r,n.g,n.b),l.setXYZ(25,n.r,n.g,n.b),l.setXYZ(26,n.r,n.g,n.b),l.setXYZ(27,n.r,n.g,n.b),l.setXYZ(28,n.r,n.g,n.b),l.setXYZ(29,n.r,n.g,n.b),l.setXYZ(30,n.r,n.g,n.b),l.setXYZ(31,n.r,n.g,n.b),l.setXYZ(32,r.r,r.g,r.b),l.setXYZ(33,r.r,r.g,r.b),l.setXYZ(34,r.r,r.g,r.b),l.setXYZ(35,r.r,r.g,r.b),l.setXYZ(36,r.r,r.g,r.b),l.setXYZ(37,r.r,r.g,r.b),l.setXYZ(38,i.r,i.g,i.b),l.setXYZ(39,i.r,i.g,i.b),l.setXYZ(40,s.r,s.g,s.b),l.setXYZ(41,s.r,s.g,s.b),l.setXYZ(42,s.r,s.g,s.b),l.setXYZ(43,s.r,s.g,s.b),l.setXYZ(44,s.r,s.g,s.b),l.setXYZ(45,s.r,s.g,s.b),l.setXYZ(46,s.r,s.g,s.b),l.setXYZ(47,s.r,s.g,s.b),l.setXYZ(48,s.r,s.g,s.b),l.setXYZ(49,s.r,s.g,s.b),l.needsUpdate=!0}update(){const e=this.geometry,n=this.pointMap,r=1,i=1;Ln.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Gn("c",n,e,Ln,0,0,-1),Gn("t",n,e,Ln,0,0,1),Gn("n1",n,e,Ln,-r,-i,-1),Gn("n2",n,e,Ln,r,-i,-1),Gn("n3",n,e,Ln,-r,i,-1),Gn("n4",n,e,Ln,r,i,-1),Gn("f1",n,e,Ln,-r,-i,1),Gn("f2",n,e,Ln,r,-i,1),Gn("f3",n,e,Ln,-r,i,1),Gn("f4",n,e,Ln,r,i,1),Gn("u1",n,e,Ln,r*.7,i*1.1,-1),Gn("u2",n,e,Ln,-r*.7,i*1.1,-1),Gn("u3",n,e,Ln,0,i*2,-1),Gn("cf1",n,e,Ln,-r,0,1),Gn("cf2",n,e,Ln,r,0,1),Gn("cf3",n,e,Ln,0,-i,1),Gn("cf4",n,e,Ln,0,i,1),Gn("cn1",n,e,Ln,-r,0,-1),Gn("cn2",n,e,Ln,r,0,-1),Gn("cn3",n,e,Ln,0,-i,-1),Gn("cn4",n,e,Ln,0,i,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Gn(t,e,n,r,i,s,a){Vg.set(i,s,a).unproject(r);const l=e[t];if(l!==void 0){const c=n.getAttribute("position");for(let u=0,d=l.length;u<d;u++)c.setXYZ(l[u],Vg.x,Vg.y,Vg.z)}}const Hg=new Wr;class uZ extends Ma{constructor(e,n=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(8*3),s=new At;s.setIndex(new qt(r,1)),s.setAttribute("position",new qt(i,3)),super(s,new pi({color:n,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&Hg.setFromObject(this.object),Hg.isEmpty())return;const n=Hg.min,r=Hg.max,i=this.geometry.attributes.position,s=i.array;s[0]=r.x,s[1]=r.y,s[2]=r.z,s[3]=n.x,s[4]=r.y,s[5]=r.z,s[6]=n.x,s[7]=n.y,s[8]=r.z,s[9]=r.x,s[10]=n.y,s[11]=r.z,s[12]=r.x,s[13]=r.y,s[14]=n.z,s[15]=n.x,s[16]=r.y,s[17]=n.z,s[18]=n.x,s[19]=n.y,s[20]=n.z,s[21]=r.x,s[22]=n.y,s[23]=n.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,n){return super.copy(e,n),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class dZ extends Ma{constructor(e,n=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new At;s.setIndex(new qt(r,1)),s.setAttribute("position",new ot(i,3)),super(s,new pi({color:n,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const n=this.box;n.isEmpty()||(n.getCenter(this.position),n.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class hZ extends pl{constructor(e,n=1,r=16776960){const i=r,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],a=new At;a.setAttribute("position",new ot(s,3)),a.computeBoundingSphere(),super(a,new pi({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=n;const l=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],c=new At;c.setAttribute("position",new ot(l,3)),c.computeBoundingSphere(),this.add(new Fn(c,new go({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const c3=new X;let Gg,eb;class fZ extends Xt{constructor(e=new X(0,0,1),n=new X(0,0,0),r=1,i=16776960,s=r*.2,a=s*.2){super(),this.type="ArrowHelper",Gg===void 0&&(Gg=new At,Gg.setAttribute("position",new ot([0,0,0,0,1,0],3)),eb=new Wd(0,.5,1,5,1),eb.translate(0,-.5,0)),this.position.copy(n),this.line=new pl(Gg,new pi({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Fn(eb,new go({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,s,a)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{c3.set(e.z,0,-e.x).normalize();const n=Math.acos(e.y);this.quaternion.setFromAxisAngle(c3,n)}}setLength(e,n=e*.2,r=n*.2){this.line.scale.set(1,Math.max(1e-4,e-n),1),this.line.updateMatrix(),this.cone.scale.set(r,n,r),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class pZ extends Ma{constructor(e=1){const n=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new At;i.setAttribute("position",new ot(n,3)),i.setAttribute("color",new ot(r,3));const s=new pi({vertexColors:!0,toneMapped:!1});super(i,s),this.type="AxesHelper"}setColors(e,n,r){const i=new nt,s=this.geometry.attributes.color.array;return i.set(e),i.toArray(s,0),i.toArray(s,3),i.set(n),i.toArray(s,6),i.toArray(s,9),i.set(r),i.toArray(s,12),i.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class mZ{constructor(){this.type="ShapePath",this.color=new nt,this.subPaths=[],this.currentPath=null}moveTo(e,n){return this.currentPath=new lp,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,n),this}lineTo(e,n){return this.currentPath.lineTo(e,n),this}quadraticCurveTo(e,n,r,i){return this.currentPath.quadraticCurveTo(e,n,r,i),this}bezierCurveTo(e,n,r,i,s,a){return this.currentPath.bezierCurveTo(e,n,r,i,s,a),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function n(x){const y=[];for(let S=0,E=x.length;S<E;S++){const A=x[S],T=new Ec;T.curves=A.curves,y.push(T)}return y}function r(x,y){const S=y.length;let E=!1;for(let A=S-1,T=0;T<S;A=T++){let C=y[A],j=y[T],k=j.x-C.x,P=j.y-C.y;if(Math.abs(P)>Number.EPSILON){if(P<0&&(C=y[T],k=-k,j=y[A],P=-P),x.y<C.y||x.y>j.y)continue;if(x.y===C.y){if(x.x===C.x)return!0}else{const H=P*(x.x-C.x)-k*(x.y-C.y);if(H===0)return!0;if(H<0)continue;E=!E}}else{if(x.y!==C.y)continue;if(j.x<=x.x&&x.x<=C.x||C.x<=x.x&&x.x<=j.x)return!0}}return E}const i=pa.isClockWise,s=this.subPaths;if(s.length===0)return[];let a,l,c;const u=[];if(s.length===1)return l=s[0],c=new Ec,c.curves=l.curves,u.push(c),u;let d=!i(s[0].getPoints());d=e?!d:d;const f=[],m=[];let g=[],v=0,_;m[v]=void 0,g[v]=[];for(let x=0,y=s.length;x<y;x++)l=s[x],_=l.getPoints(),a=i(_),a=e?!a:a,a?(!d&&m[v]&&v++,m[v]={s:new Ec,p:_},m[v].s.curves=l.curves,d&&v++,g[v]=[]):g[v].push({h:l,p:_[0]});if(!m[0])return n(s);if(m.length>1){let x=!1,y=0;for(let S=0,E=m.length;S<E;S++)f[S]=[];for(let S=0,E=m.length;S<E;S++){const A=g[S];for(let T=0;T<A.length;T++){const C=A[T];let j=!0;for(let k=0;k<m.length;k++)r(C.p,m[k].p)&&(S!==k&&y++,j?(j=!1,f[k].push(C)):x=!0);j&&f[S].push(C)}}y>0&&x===!1&&(g=f)}let b;for(let x=0,y=m.length;x<y;x++){c=m[x].s,u.push(c),b=g[x];for(let S=0,E=b.length;S<E;S++)c.holes.push(b[S].h)}return u}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:tv}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=tv);const gZ=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:LS,AddEquation:Go,AddOperation:d4,AdditiveAnimationBlendMode:HS,AdditiveBlending:$2,AgXToneMapping:g4,AlphaFormat:b4,AlwaysCompare:U4,AlwaysDepth:i4,AlwaysStencilFunc:N_,AmbientLight:UD,AnimationAction:GD,AnimationClip:pp,AnimationLoader:v$,AnimationMixer:Y$,AnimationObjectGroup:W$,AnimationUtils:p$,ArcCurve:cD,ArrayCamera:Q4,ArrowHelper:fZ,AttachedBindMode:e_,Audio:VD,AudioAnalyser:D$,AudioContext:vM,AudioListener:R$,AudioLoader:C$,AxesHelper:pZ,BackSide:Hr,BasicDepthPacking:C4,BasicShadowMap:zL,BatchedMesh:aD,Bone:rM,BooleanKeyframeTrack:Vc,Box2:Q$,Box3:Wr,Box3Helper:dZ,BoxGeometry:Bc,BoxHelper:uZ,BufferAttribute:qt,BufferGeometry:At,BufferGeometryLoader:BD,ByteType:v4,Cache:Za,Camera:Pp,CameraHelper:cZ,CanvasTexture:Oq,CapsuleGeometry:vv,CatmullRomCurve3:xv,CineonToneMapping:p4,CircleGeometry:yv,ClampToEdgeWrapping:Br,Clock:yM,Color:nt,ColorKeyframeTrack:pM,ColorManagement:Jt,CompressedArrayTexture:Iq,CompressedCubeTexture:Uq,CompressedTexture:mv,CompressedTextureLoader:y$,ConeGeometry:bv,ConstantAlphaFactor:t4,ConstantColorFactor:QL,CubeCamera:G4,CubeReflectionMapping:oo,CubeRefractionMapping:hl,CubeTexture:Rp,CubeTextureLoader:b$,CubeUVReflectionMapping:Hd,CubicBezierCurve:aM,CubicBezierCurve3:uD,CubicInterpolant:CD,CullFaceBack:q2,CullFaceFront:FL,CullFaceFrontBack:NG,CullFaceNone:OL,Curve:Xs,CurvePath:hD,CustomBlending:BL,CustomToneMapping:m4,CylinderGeometry:Wd,Cylindrical:J$,Data3DTexture:$S,DataArrayTexture:ov,DataTexture:Mc,DataTextureLoader:_$,DataUtils:D9,DecrementStencilOp:OG,DecrementWrapStencilOp:zG,DefaultLoadingManager:RD,DepthFormat:il,DepthStencilFormat:Rc,DepthTexture:eM,DetachedBindMode:x4,DirectionalLight:ID,DirectionalLightHelper:lZ,DiscreteInterpolant:kD,DisplayP3ColorSpace:av,DodecahedronGeometry:_v,DoubleSide:Gi,DstAlphaFactor:qL,DstColorFactor:ZL,DynamicCopyUsage:t9,DynamicDrawUsage:$G,DynamicReadUsage:JG,EdgesGeometry:fD,EllipseCurve:gv,EqualCompare:j4,EqualDepth:a4,EqualStencilFunc:GG,EquirectangularReflectionMapping:Zf,EquirectangularRefractionMapping:Kf,Euler:kp,EventDispatcher:mo,ExtrudeGeometry:Sv,FileLoader:lo,Float16BufferAttribute:B9,Float32BufferAttribute:ot,Float64BufferAttribute:V9,FloatType:Ls,Fog:hv,FogExp2:dv,FramebufferTexture:Dq,FrontSide:ya,Frustum:jp,GLBufferAttribute:K$,GLSL1:r9,GLSL3:T_,GreaterCompare:L4,GreaterDepth:l4,GreaterEqualCompare:I4,GreaterEqualDepth:o4,GreaterEqualStencilFunc:qG,GreaterStencilFunc:XG,GridHelper:aZ,Group:rd,HalfFloatType:Td,HemisphereLight:jD,HemisphereLightHelper:sZ,IcosahedronGeometry:Mv,ImageBitmapLoader:A$,ImageLoader:mp,ImageUtils:qS,IncrementStencilOp:UG,IncrementWrapStencilOp:FG,InstancedBufferAttribute:Lc,InstancedBufferGeometry:xM,InstancedInterleavedBuffer:Z$,InstancedMesh:sD,Int16BufferAttribute:F9,Int32BufferAttribute:z9,Int8BufferAttribute:I9,IntType:IS,InterleavedBuffer:fv,InterleavedBufferAttribute:jc,Interpolant:Up,InterpolateDiscrete:ep,InterpolateLinear:tp,InterpolateSmooth:M0,InvertStencilOp:BG,KeepStencilOp:nc,KeyframeTrack:Ys,LOD:rD,LatheGeometry:Lp,Layers:Sc,LessCompare:R4,LessDepth:s4,LessEqualCompare:XS,LessEqualDepth:$f,LessEqualStencilFunc:WG,LessStencilFunc:HG,Light:wl,LightProbe:zD,Line:pl,Line3:eZ,LineBasicMaterial:pi,LineCurve:oM,LineCurve3:dD,LineDashedMaterial:ND,LineLoop:oD,LineSegments:Ma,LinearDisplayP3ColorSpace:Cp,LinearEncoding:GS,LinearFilter:Mn,LinearInterpolant:fM,LinearMipMapLinearFilter:PG,LinearMipMapNearestFilter:kG,LinearMipmapLinearFilter:fl,LinearMipmapNearestFilter:DS,LinearSRGBColorSpace:ba,LinearToneMapping:h4,LinearTransfer:rp,Loader:Pi,LoaderUtils:D_,LoadingManager:mM,LoopOnce:N4,LoopPingPong:A4,LoopRepeat:T4,LuminanceAlphaFormat:w4,LuminanceFormat:_4,MOUSE:ec,Material:Cr,MaterialLoader:kv,MathUtils:O4,Matrix3:Rt,Matrix4:St,MaxEquation:Q2,Mesh:Fn,MeshBasicMaterial:go,MeshDepthMaterial:cv,MeshDistanceMaterial:uv,MeshLambertMaterial:MD,MeshMatcapMaterial:ED,MeshNormalMaterial:SD,MeshPhongMaterial:_D,MeshPhysicalMaterial:bD,MeshStandardMaterial:dM,MeshToonMaterial:wD,MinEquation:J2,MirroredRepeatWrapping:Qf,MixOperation:u4,MultiplyBlending:K2,MultiplyOperation:Ap,NearestFilter:Wn,NearestMipMapLinearFilter:CG,NearestMipMapNearestFilter:AG,NearestMipmapLinearFilter:vf,NearestMipmapNearestFilter:gx,NeverCompare:P4,NeverDepth:r4,NeverStencilFunc:VG,NoBlending:Ja,NoColorSpace:Wi,NoToneMapping:ha,NormalAnimationBlendMode:sv,NormalBlending:_c,NotEqualCompare:D4,NotEqualDepth:c4,NotEqualStencilFunc:YG,NumberKeyframeTrack:hp,Object3D:Xt,ObjectLoader:N$,ObjectSpaceNormalMap:k4,OctahedronGeometry:Dp,OneFactor:WL,OneMinusConstantAlphaFactor:n4,OneMinusConstantColorFactor:e4,OneMinusDstAlphaFactor:$L,OneMinusDstColorFactor:KL,OneMinusSrcAlphaFactor:mx,OneMinusSrcColorFactor:YL,OrthographicCamera:al,P3Primaries:sp,PCFShadowMap:nv,PCFSoftShadowMap:xf,PMREMGenerator:C_,Path:lp,PerspectiveCamera:Yn,Plane:Wa,PlaneGeometry:bl,PlaneHelper:hZ,PointLight:DD,PointLightHelper:rZ,Points:lD,PointsMaterial:iM,PolarGridHelper:oZ,PolyhedronGeometry:_l,PositionalAudio:L$,PropertyBinding:Vt,PropertyMixer:HD,QuadraticBezierCurve:lM,QuadraticBezierCurve3:cM,Quaternion:Gr,QuaternionKeyframeTrack:Yd,QuaternionLinearInterpolant:PD,RED_GREEN_RGTC2_Format:M_,RED_RGTC1_Format:E4,REVISION:tv,RGBADepthPacking:WS,RGBAFormat:oi,RGBAIntegerFormat:BS,RGBA_ASTC_10x10_Format:v_,RGBA_ASTC_10x5_Format:m_,RGBA_ASTC_10x6_Format:g_,RGBA_ASTC_10x8_Format:x_,RGBA_ASTC_12x10_Format:y_,RGBA_ASTC_12x12_Format:b_,RGBA_ASTC_4x4_Format:o_,RGBA_ASTC_5x4_Format:l_,RGBA_ASTC_5x5_Format:c_,RGBA_ASTC_6x5_Format:u_,RGBA_ASTC_6x6_Format:d_,RGBA_ASTC_8x5_Format:h_,RGBA_ASTC_8x6_Format:f_,RGBA_ASTC_8x8_Format:p_,RGBA_BPTC_Format:S0,RGBA_ETC2_EAC_Format:a_,RGBA_PVRTC_2BPPV1_Format:i_,RGBA_PVRTC_4BPPV1_Format:r_,RGBA_S3TC_DXT1_Format:b0,RGBA_S3TC_DXT3_Format:_0,RGBA_S3TC_DXT5_Format:w0,RGB_BPTC_SIGNED_Format:__,RGB_BPTC_UNSIGNED_Format:w_,RGB_ETC1_Format:VS,RGB_ETC2_Format:s_,RGB_PVRTC_2BPPV1_Format:n_,RGB_PVRTC_4BPPV1_Format:t_,RGB_S3TC_DXT1_Format:y0,RGFormat:M4,RGIntegerFormat:zS,RawShaderMaterial:yD,Ray:zc,Raycaster:WD,Rec709Primaries:ip,RectAreaLight:OD,RedFormat:S4,RedIntegerFormat:FS,ReinhardToneMapping:f4,RenderTarget:B4,RepeatWrapping:Jf,ReplaceStencilOp:IG,ReverseSubtractEquation:HL,RingGeometry:Ev,SIGNED_RED_GREEN_RGTC2_Format:E_,SIGNED_RED_RGTC1_Format:S_,SRGBColorSpace:ar,SRGBTransfer:on,Scene:yx,ShaderChunk:kt,ShaderLib:js,ShaderMaterial:_a,ShadowMaterial:vD,Shape:Ec,ShapeGeometry:Nv,ShapePath:mZ,ShapeUtils:pa,ShortType:y4,Skeleton:pv,SkeletonHelper:nZ,SkinnedMesh:iD,Source:mc,Sphere:Tr,SphereGeometry:Ip,Spherical:U_,SphericalHarmonics3:FD,SplineCurve:uM,SpotLight:LD,SpotLightHelper:tZ,Sprite:nD,SpriteMaterial:nM,SrcAlphaFactor:px,SrcAlphaSaturateFactor:JL,SrcColorFactor:XL,StaticCopyUsage:e9,StaticDrawUsage:ap,StaticReadUsage:KG,StereoCamera:k$,StreamCopyUsage:n9,StreamDrawUsage:ZG,StreamReadUsage:QG,StringKeyframeTrack:Hc,SubtractEquation:VL,SubtractiveBlending:Z2,TOUCH:tc,TangentSpaceNormalMap:yl,TetrahedronGeometry:Tv,Texture:Cn,TextureLoader:w$,TorusGeometry:Av,TorusKnotGeometry:Cv,Triangle:Si,TriangleFanDrawMode:LG,TriangleStripDrawMode:jG,TrianglesDrawMode:RG,TubeGeometry:Xd,TwoPassDoubleSide:TG,UVMapping:rv,Uint16BufferAttribute:ZS,Uint32BufferAttribute:KS,Uint8BufferAttribute:U9,Uint8ClampedBufferAttribute:O9,Uniform:wM,UniformsGroup:$$,UniformsLib:Ze,UniformsUtils:JS,UnsignedByteType:fa,UnsignedInt248Type:rl,UnsignedIntType:$a,UnsignedShort4444Type:US,UnsignedShort5551Type:OS,UnsignedShortType:iv,VSMShadowMap:ks,Vector2:ke,Vector3:X,Vector4:Yt,VectorKeyframeTrack:fp,VideoTexture:Lq,WebGL1Renderer:eD,WebGL3DRenderTarget:S9,WebGLArrayRenderTarget:w9,WebGLCoordinateSystem:Ds,WebGLCubeRenderTarget:W4,WebGLMultipleRenderTargets:M9,WebGLRenderTarget:Hs,WebGLRenderer:tM,WebGLUtils:J4,WebGPUCoordinateSystem:Ad,WireframeGeometry:xD,WrapAroundEnding:np,ZeroCurvatureEnding:fc,ZeroFactor:GL,ZeroSlopeEnding:pc,ZeroStencilOp:DG,_SRGBAFormat:xx,createCanvasElement:z4,sRGBEncoding:sl},Symbol.toStringTag,{value:"Module"}));var YD={exports:{}},Gc={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Gc.ConcurrentRoot=1;Gc.ContinuousEventPriority=4;Gc.DefaultEventPriority=16;Gc.DiscreteEventPriority=1;Gc.IdleEventPriority=536870912;Gc.LegacyRoot=0;YD.exports=Gc;var sd=YD.exports;function xZ(t){let e;const n=new Set,r=(u,d)=>{const f=typeof u=="function"?u(e):u;if(f!==e){const m=e;e=d?f:Object.assign({},e,f),n.forEach(g=>g(e,m))}},i=()=>e,s=(u,d=i,f=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let m=d(e);function g(){const v=d(e);if(!f(m,v)){const _=m;u(m=v,_)}}return n.add(g),()=>n.delete(g)},c={setState:r,getState:i,subscribe:(u,d,f)=>d||f?s(u,d,f):(n.add(u),()=>n.delete(u)),destroy:()=>n.clear()};return e=t(r,i,c),c}const vZ=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),u3=vZ?D.useEffect:D.useLayoutEffect;function yZ(t){const e=typeof t=="function"?xZ(t):t,n=(r=e.getState,i=Object.is)=>{const[,s]=D.useReducer(b=>b+1,0),a=e.getState(),l=D.useRef(a),c=D.useRef(r),u=D.useRef(i),d=D.useRef(!1),f=D.useRef();f.current===void 0&&(f.current=r(a));let m,g=!1;(l.current!==a||c.current!==r||u.current!==i||d.current)&&(m=r(a),g=!i(f.current,m)),u3(()=>{g&&(f.current=m),l.current=a,c.current=r,u.current=i,d.current=!1});const v=D.useRef(a);u3(()=>{const b=()=>{try{const y=e.getState(),S=c.current(y);u.current(f.current,S)||(l.current=y,f.current=S,s())}catch{d.current=!0,s()}},x=e.subscribe(b);return e.getState()!==v.current&&b(),x},[]);const _=g?m:f.current;return D.useDebugValue(_),_};return Object.assign(n,e),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[n,e];return{next(){const i=r.length<=0;return{value:r.shift(),done:i}}}},n}var qD={exports:{}},tb={exports:{}},nb={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d3;function bZ(){return d3||(d3=1,function(t){function e(I,F){var z=I.length;I.push(F);e:for(;0<z;){var U=z-1>>>1,Z=I[U];if(0<i(Z,F))I[U]=F,I[z]=Z,z=U;else break e}}function n(I){return I.length===0?null:I[0]}function r(I){if(I.length===0)return null;var F=I[0],z=I.pop();if(z!==F){I[0]=z;e:for(var U=0,Z=I.length,K=Z>>>1;U<K;){var ne=2*(U+1)-1,ie=I[ne],de=ne+1,ae=I[de];if(0>i(ie,z))de<Z&&0>i(ae,ie)?(I[U]=ae,I[de]=z,U=de):(I[U]=ie,I[ne]=z,U=ne);else if(de<Z&&0>i(ae,z))I[U]=ae,I[de]=z,U=de;else break e}}return F}function i(I,F){var z=I.sortIndex-F.sortIndex;return z!==0?z:I.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,f=null,m=3,g=!1,v=!1,_=!1,b=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(I){for(var F=n(u);F!==null;){if(F.callback===null)r(u);else if(F.startTime<=I)r(u),F.sortIndex=F.expirationTime,e(c,F);else break;F=n(u)}}function E(I){if(_=!1,S(I),!v)if(n(c)!==null)v=!0,ee(A);else{var F=n(u);F!==null&&re(E,F.startTime-I)}}function A(I,F){v=!1,_&&(_=!1,x(j),j=-1),g=!0;var z=m;try{for(S(F),f=n(c);f!==null&&(!(f.expirationTime>F)||I&&!H());){var U=f.callback;if(typeof U=="function"){f.callback=null,m=f.priorityLevel;var Z=U(f.expirationTime<=F);F=t.unstable_now(),typeof Z=="function"?f.callback=Z:f===n(c)&&r(c),S(F)}else r(c);f=n(c)}if(f!==null)var K=!0;else{var ne=n(u);ne!==null&&re(E,ne.startTime-F),K=!1}return K}finally{f=null,m=z,g=!1}}var T=!1,C=null,j=-1,k=5,P=-1;function H(){return!(t.unstable_now()-P<k)}function B(){if(C!==null){var I=t.unstable_now();P=I;var F=!0;try{F=C(!0,I)}finally{F?Y():(T=!1,C=null)}}else T=!1}var Y;if(typeof y=="function")Y=function(){y(B)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,Q=V.port2;V.port1.onmessage=B,Y=function(){Q.postMessage(null)}}else Y=function(){b(B,0)};function ee(I){C=I,T||(T=!0,Y())}function re(I,F){j=b(function(){I(t.unstable_now())},F)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(I){I.callback=null},t.unstable_continueExecution=function(){v||g||(v=!0,ee(A))},t.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<I?Math.floor(1e3/I):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(I){switch(m){case 1:case 2:case 3:var F=3;break;default:F=m}var z=m;m=F;try{return I()}finally{m=z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(I,F){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var z=m;m=I;try{return F()}finally{m=z}},t.unstable_scheduleCallback=function(I,F,z){var U=t.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?U+z:U):z=U,I){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=z+Z,I={id:d++,callback:F,priorityLevel:I,startTime:z,expirationTime:Z,sortIndex:-1},z>U?(I.sortIndex=z,e(u,I),n(c)===null&&I===n(u)&&(_?(x(j),j=-1):_=!0,re(E,z-U))):(I.sortIndex=Z,e(c,I),v||g||(v=!0,ee(A))),I},t.unstable_shouldYield=H,t.unstable_wrapCallback=function(I){var F=m;return function(){var z=m;m=F;try{return I.apply(this,arguments)}finally{m=z}}}}(nb)),nb}var h3;function _Z(){return h3||(h3=1,tb.exports=bZ()),tb.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wZ=function(e){var n={},r=D,i=_Z(),s=Object.assign;function a(h){for(var p="https://reactjs.org/docs/error-decoder.html?invariant="+h,w=1;w<arguments.length;w++)p+="&args[]="+encodeURIComponent(arguments[w]);return"Minified React error #"+h+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var l=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,c=Symbol.for("react.element"),u=Symbol.for("react.portal"),d=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),m=Symbol.for("react.profiler"),g=Symbol.for("react.provider"),v=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),b=Symbol.for("react.suspense"),x=Symbol.for("react.suspense_list"),y=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),E=Symbol.for("react.offscreen"),A=Symbol.iterator;function T(h){return h===null||typeof h!="object"?null:(h=A&&h[A]||h["@@iterator"],typeof h=="function"?h:null)}function C(h){if(h==null)return null;if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h;switch(h){case d:return"Fragment";case u:return"Portal";case m:return"Profiler";case f:return"StrictMode";case b:return"Suspense";case x:return"SuspenseList"}if(typeof h=="object")switch(h.$$typeof){case v:return(h.displayName||"Context")+".Consumer";case g:return(h._context.displayName||"Context")+".Provider";case _:var p=h.render;return h=h.displayName,h||(h=p.displayName||p.name||"",h=h!==""?"ForwardRef("+h+")":"ForwardRef"),h;case y:return p=h.displayName||null,p!==null?p:C(h.type)||"Memo";case S:p=h._payload,h=h._init;try{return C(h(p))}catch{}}return null}function j(h){var p=h.type;switch(h.tag){case 24:return"Cache";case 9:return(p.displayName||"Context")+".Consumer";case 10:return(p._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return h=p.render,h=h.displayName||h.name||"",p.displayName||(h!==""?"ForwardRef("+h+")":"ForwardRef");case 7:return"Fragment";case 5:return p;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return C(p);case 8:return p===f?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof p=="function")return p.displayName||p.name||null;if(typeof p=="string")return p}return null}function k(h){var p=h,w=h;if(h.alternate)for(;p.return;)p=p.return;else{h=p;do p=h,p.flags&4098&&(w=p.return),h=p.return;while(h)}return p.tag===3?w:null}function P(h){if(k(h)!==h)throw Error(a(188))}function H(h){var p=h.alternate;if(!p){if(p=k(h),p===null)throw Error(a(188));return p!==h?null:h}for(var w=h,M=p;;){var N=w.return;if(N===null)break;var R=N.alternate;if(R===null){if(M=N.return,M!==null){w=M;continue}break}if(N.child===R.child){for(R=N.child;R;){if(R===w)return P(N),h;if(R===M)return P(N),p;R=R.sibling}throw Error(a(188))}if(w.return!==M.return)w=N,M=R;else{for(var $=!1,se=N.child;se;){if(se===w){$=!0,w=N,M=R;break}if(se===M){$=!0,M=N,w=R;break}se=se.sibling}if(!$){for(se=R.child;se;){if(se===w){$=!0,w=R,M=N;break}if(se===M){$=!0,M=R,w=N;break}se=se.sibling}if(!$)throw Error(a(189))}}if(w.alternate!==M)throw Error(a(190))}if(w.tag!==3)throw Error(a(188));return w.stateNode.current===w?h:p}function B(h){return h=H(h),h!==null?Y(h):null}function Y(h){if(h.tag===5||h.tag===6)return h;for(h=h.child;h!==null;){var p=Y(h);if(p!==null)return p;h=h.sibling}return null}function V(h){if(h.tag===5||h.tag===6)return h;for(h=h.child;h!==null;){if(h.tag!==4){var p=V(h);if(p!==null)return p}h=h.sibling}return null}var Q=Array.isArray,ee=e.getPublicInstance,re=e.getRootHostContext,I=e.getChildHostContext,F=e.prepareForCommit,z=e.resetAfterCommit,U=e.createInstance,Z=e.appendInitialChild,K=e.finalizeInitialChildren,ne=e.prepareUpdate,ie=e.shouldSetTextContent,de=e.createTextInstance,ae=e.scheduleTimeout,_e=e.cancelTimeout,je=e.noTimeout,Le=e.isPrimaryRenderer,Te=e.supportsMutation,G=e.supportsPersistence,Ee=e.supportsHydration,me=e.getInstanceFromNode,ve=e.preparePortalMount,he=e.getCurrentEventPriority,We=e.detachDeletedInstance,ge=e.supportsMicrotasks,O=e.scheduleMicrotask,L=e.supportsTestSelectors,q=e.findFiberRoot,fe=e.getBoundingRect,le=e.getTextContent,ce=e.isHiddenSubtree,Pe=e.matchAccessibilityRole,Ue=e.setFocusIfFocusable,Fe=e.setupIntersectionObserver,ze=e.appendChild,$e=e.appendChildToContainer,Ae=e.commitTextUpdate,at=e.commitMount,Xe=e.commitUpdate,Ke=e.insertBefore,Be=e.insertInContainerBefore,Re=e.removeChild,J=e.removeChildFromContainer,we=e.resetTextContent,Ge=e.hideInstance,De=e.hideTextInstance,Ce=e.unhideInstance,te=e.unhideTextInstance,Ve=e.clearContainer,qe=e.cloneInstance,lt=e.createContainerChildSet,Je=e.appendChildToContainerChildSet,gt=e.finalizeContainerChildren,ut=e.replaceContainerChildren,zt=e.cloneHiddenInstance,Mt=e.cloneHiddenTextInstance,ft=e.canHydrateInstance,$t=e.canHydrateTextInstance,sn=e.canHydrateSuspenseInstance,Bt=e.isSuspenseInstancePending,yn=e.isSuspenseInstanceFallback,nr=e.registerSuspenseInstanceRetry,un=e.getNextHydratableSibling,dn=e.getFirstHydratableChild,qn=e.getFirstHydratableChildWithinContainer,Ri=e.getFirstHydratableChildWithinSuspenseInstance,$r=e.hydrateInstance,bs=e.hydrateTextInstance,qd=e.hydrateSuspenseInstance,W=e.getNextHydratableInstanceAfterSuspenseInstance,ue=e.commitHydratedContainer,be=e.commitHydratedSuspenseInstance,Se=e.clearSuspenseBoundary,ye=e.clearSuspenseBoundaryFromContainer,Qe=e.shouldDeleteUnhydratedTailInstances,ct=e.didNotMatchHydratedContainerTextInstance,pt=e.didNotMatchHydratedTextInstance,Oe;function bt(h){if(Oe===void 0)try{throw Error()}catch(w){var p=w.stack.trim().match(/\n( *(at )?)/);Oe=p&&p[1]||""}return`
`+Oe+h}var _t=!1;function xt(h,p){if(!h||_t)return"";_t=!0;var w=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(p)if(p=function(){throw Error()},Object.defineProperty(p.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(p,[])}catch(Ye){var M=Ye}Reflect.construct(h,[],p)}else{try{p.call()}catch(Ye){M=Ye}h.call(p.prototype)}else{try{throw Error()}catch(Ye){M=Ye}h()}}catch(Ye){if(Ye&&M&&typeof Ye.stack=="string"){for(var N=Ye.stack.split(`
`),R=M.stack.split(`
`),$=N.length-1,se=R.length-1;1<=$&&0<=se&&N[$]!==R[se];)se--;for(;1<=$&&0<=se;$--,se--)if(N[$]!==R[se]){if($!==1||se!==1)do if($--,se--,0>se||N[$]!==R[se]){var Ne=`
`+N[$].replace(" at new "," at ");return h.displayName&&Ne.includes("<anonymous>")&&(Ne=Ne.replace("<anonymous>",h.displayName)),Ne}while(1<=$&&0<=se);break}}}finally{_t=!1,Error.prepareStackTrace=w}return(h=h?h.displayName||h.name:"")?bt(h):""}var en=Object.prototype.hasOwnProperty,$n=[],Zt=-1;function bn(h){return{current:h}}function mt(h){0>Zt||(h.current=$n[Zt],$n[Zt]=null,Zt--)}function rt(h,p){Zt++,$n[Zt]=h.current,h.current=p}var yr={},Ct=bn(yr),an=bn(!1),ji=yr;function ur(h,p){var w=h.type.contextTypes;if(!w)return yr;var M=h.stateNode;if(M&&M.__reactInternalMemoizedUnmaskedChildContext===p)return M.__reactInternalMemoizedMaskedChildContext;var N={},R;for(R in w)N[R]=p[R];return M&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=p,h.__reactInternalMemoizedMaskedChildContext=N),N}function Rn(h){return h=h.childContextTypes,h!=null}function tn(){mt(an),mt(Ct)}function mi(h,p,w){if(Ct.current!==yr)throw Error(a(168));rt(Ct,p),rt(an,w)}function qs(h,p,w){var M=h.stateNode;if(p=p.childContextTypes,typeof M.getChildContext!="function")return w;M=M.getChildContext();for(var N in M)if(!(N in p))throw Error(a(108,j(h)||"Unknown",N));return s({},w,M)}function zn(h){return h=(h=h.stateNode)&&h.__reactInternalMemoizedMergedChildContext||yr,ji=Ct.current,rt(Ct,h),rt(an,an.current),!0}function br(h,p,w){var M=h.stateNode;if(!M)throw Error(a(169));w?(h=qs(h,p,ji),M.__reactInternalMemoizedMergedChildContext=h,mt(an),mt(Ct),rt(Ct,h)):mt(an),rt(an,w)}var Zr=Math.clz32?Math.clz32:Bp,Ea=Math.log,Sl=Math.LN2;function Bp(h){return h>>>=0,h===0?32:31-(Ea(h)/Sl|0)|0}var Na=64,Ta=4194304;function Aa(h){switch(h&-h){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return h&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return h}}function Ml(h,p){var w=h.pendingLanes;if(w===0)return 0;var M=0,N=h.suspendedLanes,R=h.pingedLanes,$=w&268435455;if($!==0){var se=$&~N;se!==0?M=Aa(se):(R&=$,R!==0&&(M=Aa(R)))}else $=w&~N,$!==0?M=Aa($):R!==0&&(M=Aa(R));if(M===0)return 0;if(p!==0&&p!==M&&!(p&N)&&(N=M&-M,R=p&-p,N>=R||N===16&&(R&4194240)!==0))return p;if(M&4&&(M|=w&16),p=h.entangledLanes,p!==0)for(h=h.entanglements,p&=M;0<p;)w=31-Zr(p),N=1<<w,M|=h[w],p&=~N;return M}function Vp(h,p){switch(h){case 1:case 2:case 4:return p+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $d(h,p){for(var w=h.suspendedLanes,M=h.pingedLanes,N=h.expirationTimes,R=h.pendingLanes;0<R;){var $=31-Zr(R),se=1<<$,Ne=N[$];Ne===-1?(!(se&w)||se&M)&&(N[$]=Vp(se,p)):Ne<=p&&(h.expiredLanes|=se),R&=~se}}function Ca(h){return h=h.pendingLanes&-1073741825,h!==0?h:h&1073741824?1073741824:0}function Wc(h){for(var p=[],w=0;31>w;w++)p.push(h);return p}function $s(h,p,w){h.pendingLanes|=p,p!==536870912&&(h.suspendedLanes=0,h.pingedLanes=0),h=h.eventTimes,p=31-Zr(p),h[p]=w}function xo(h,p){var w=h.pendingLanes&~p;h.pendingLanes=p,h.suspendedLanes=0,h.pingedLanes=0,h.expiredLanes&=p,h.mutableReadLanes&=p,h.entangledLanes&=p,p=h.entanglements;var M=h.eventTimes;for(h=h.expirationTimes;0<w;){var N=31-Zr(w),R=1<<N;p[N]=0,M[N]=-1,h[N]=-1,w&=~R}}function Zs(h,p){var w=h.entangledLanes|=p;for(h=h.entanglements;w;){var M=31-Zr(w),N=1<<M;N&p|h[M]&p&&(h[M]|=p),w&=~N}}var It=0;function Zd(h){return h&=-h,1<h?4<h?h&268435455?16:536870912:4:1}var ka=i.unstable_scheduleCallback,Xc=i.unstable_cancelCallback,Kd=i.unstable_shouldYield,Hp=i.unstable_requestPaint,_n=i.unstable_now,El=i.unstable_ImmediatePriority,Gp=i.unstable_UserBlockingPriority,Kr=i.unstable_NormalPriority,Jd=i.unstable_IdlePriority,Nl=null,Li=null;function Qd(h){if(Li&&typeof Li.onCommitFiberRoot=="function")try{Li.onCommitFiberRoot(Nl,h,void 0,(h.current.flags&128)===128)}catch{}}function Wp(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var Di=typeof Object.is=="function"?Object.is:Wp,Jr=null,Ks=!1,Ji=!1;function eh(h){Jr===null?Jr=[h]:Jr.push(h)}function th(h){Ks=!0,eh(h)}function gi(){if(!Ji&&Jr!==null){Ji=!0;var h=0,p=It;try{var w=Jr;for(It=1;h<w.length;h++){var M=w[h];do M=M(!0);while(M!==null)}Jr=null,Ks=!1}catch(N){throw Jr!==null&&(Jr=Jr.slice(h+1)),ka(El,gi),N}finally{It=p,Ji=!1}}return null}var Tl=l.ReactCurrentBatchConfig;function Al(h,p){if(Di(h,p))return!0;if(typeof h!="object"||h===null||typeof p!="object"||p===null)return!1;var w=Object.keys(h),M=Object.keys(p);if(w.length!==M.length)return!1;for(M=0;M<w.length;M++){var N=w[M];if(!en.call(p,N)||!Di(h[N],p[N]))return!1}return!0}function Cl(h){switch(h.tag){case 5:return bt(h.type);case 16:return bt("Lazy");case 13:return bt("Suspense");case 19:return bt("SuspenseList");case 0:case 2:case 15:return h=xt(h.type,!1),h;case 11:return h=xt(h.type.render,!1),h;case 1:return h=xt(h.type,!0),h;default:return""}}function Qr(h,p){if(h&&h.defaultProps){p=s({},p),h=h.defaultProps;for(var w in h)p[w]===void 0&&(p[w]=h[w]);return p}return p}var dr=bn(null),Yc=null,_s=null,vo=null;function qc(){vo=_s=Yc=null}function Xp(h,p,w){Le?(rt(dr,p._currentValue),p._currentValue=w):(rt(dr,p._currentValue2),p._currentValue2=w)}function hr(h){var p=dr.current;mt(dr),Le?h._currentValue=p:h._currentValue2=p}function ei(h,p,w){for(;h!==null;){var M=h.alternate;if((h.childLanes&p)!==p?(h.childLanes|=p,M!==null&&(M.childLanes|=p)):M!==null&&(M.childLanes&p)!==p&&(M.childLanes|=p),h===w)break;h=h.return}}function Bn(h,p){Yc=h,vo=_s=null,h=h.dependencies,h!==null&&h.firstContext!==null&&(h.lanes&p&&(Fi=!0),h.firstContext=null)}function Vn(h){var p=Le?h._currentValue:h._currentValue2;if(vo!==h)if(h={context:h,memoizedValue:p,next:null},_s===null){if(Yc===null)throw Error(a(308));_s=h,Yc.dependencies={lanes:0,firstContext:h}}else _s=_s.next=h;return p}var Ii=null,yo=!1;function Dv(h){h.updateQueue={baseState:h.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function TM(h,p){h=h.updateQueue,p.updateQueue===h&&(p.updateQueue={baseState:h.baseState,firstBaseUpdate:h.firstBaseUpdate,lastBaseUpdate:h.lastBaseUpdate,shared:h.shared,effects:h.effects})}function Pa(h,p){return{eventTime:h,lane:p,tag:0,payload:null,callback:null,next:null}}function bo(h,p){var w=h.updateQueue;w!==null&&(w=w.shared,Zn!==null&&h.mode&1&&!(Dt&2)?(h=w.interleaved,h===null?(p.next=p,Ii===null?Ii=[w]:Ii.push(w)):(p.next=h.next,h.next=p),w.interleaved=p):(h=w.pending,h===null?p.next=p:(p.next=h.next,h.next=p),w.pending=p))}function Yp(h,p,w){if(p=p.updateQueue,p!==null&&(p=p.shared,(w&4194240)!==0)){var M=p.lanes;M&=h.pendingLanes,w|=M,p.lanes=w,Zs(h,w)}}function AM(h,p){var w=h.updateQueue,M=h.alternate;if(M!==null&&(M=M.updateQueue,w===M)){var N=null,R=null;if(w=w.firstBaseUpdate,w!==null){do{var $={eventTime:w.eventTime,lane:w.lane,tag:w.tag,payload:w.payload,callback:w.callback,next:null};R===null?N=R=$:R=R.next=$,w=w.next}while(w!==null);R===null?N=R=p:R=R.next=p}else N=R=p;w={baseState:M.baseState,firstBaseUpdate:N,lastBaseUpdate:R,shared:M.shared,effects:M.effects},h.updateQueue=w;return}h=w.lastBaseUpdate,h===null?w.firstBaseUpdate=p:h.next=p,w.lastBaseUpdate=p}function qp(h,p,w,M){var N=h.updateQueue;yo=!1;var R=N.firstBaseUpdate,$=N.lastBaseUpdate,se=N.shared.pending;if(se!==null){N.shared.pending=null;var Ne=se,Ye=Ne.next;Ne.next=null,$===null?R=Ye:$.next=Ye,$=Ne;var st=h.alternate;st!==null&&(st=st.updateQueue,se=st.lastBaseUpdate,se!==$&&(se===null?st.firstBaseUpdate=Ye:se.next=Ye,st.lastBaseUpdate=Ne))}if(R!==null){var Nt=N.baseState;$=0,st=Ye=Ne=null,se=R;do{var vt=se.lane,nn=se.eventTime;if((M&vt)===vt){st!==null&&(st=st.next={eventTime:nn,lane:0,tag:se.tag,payload:se.payload,callback:se.callback,next:null});e:{var ht=h,jr=se;switch(vt=p,nn=w,jr.tag){case 1:if(ht=jr.payload,typeof ht=="function"){Nt=ht.call(nn,Nt,vt);break e}Nt=ht;break e;case 3:ht.flags=ht.flags&-65537|128;case 0:if(ht=jr.payload,vt=typeof ht=="function"?ht.call(nn,Nt,vt):ht,vt==null)break e;Nt=s({},Nt,vt);break e;case 2:yo=!0}}se.callback!==null&&se.lane!==0&&(h.flags|=64,vt=N.effects,vt===null?N.effects=[se]:vt.push(se))}else nn={eventTime:nn,lane:vt,tag:se.tag,payload:se.payload,callback:se.callback,next:null},st===null?(Ye=st=nn,Ne=Nt):st=st.next=nn,$|=vt;if(se=se.next,se===null){if(se=N.shared.pending,se===null)break;vt=se,se=vt.next,vt.next=null,N.lastBaseUpdate=vt,N.shared.pending=null}}while(!0);if(st===null&&(Ne=Nt),N.baseState=Ne,N.firstBaseUpdate=Ye,N.lastBaseUpdate=st,p=N.shared.interleaved,p!==null){N=p;do $|=N.lane,N=N.next;while(N!==p)}else R===null&&(N.shared.lanes=0);ru|=$,h.lanes=$,h.memoizedState=Nt}}function CM(h,p,w){if(h=p.effects,p.effects=null,h!==null)for(p=0;p<h.length;p++){var M=h[p],N=M.callback;if(N!==null){if(M.callback=null,M=w,typeof N!="function")throw Error(a(191,N));N.call(M)}}}var kM=new r.Component().refs;function Iv(h,p,w,M){p=h.memoizedState,w=w(M,p),w=w==null?p:s({},p,w),h.memoizedState=w,h.lanes===0&&(h.updateQueue.baseState=w)}var $p={isMounted:function(h){return(h=h._reactInternals)?k(h)===h:!1},enqueueSetState:function(h,p,w){h=h._reactInternals;var M=ni(),N=So(h),R=Pa(M,N);R.payload=p,w!=null&&(R.callback=w),bo(h,R),p=rs(h,N,M),p!==null&&Yp(p,h,N)},enqueueReplaceState:function(h,p,w){h=h._reactInternals;var M=ni(),N=So(h),R=Pa(M,N);R.tag=1,R.payload=p,w!=null&&(R.callback=w),bo(h,R),p=rs(h,N,M),p!==null&&Yp(p,h,N)},enqueueForceUpdate:function(h,p){h=h._reactInternals;var w=ni(),M=So(h),N=Pa(w,M);N.tag=2,p!=null&&(N.callback=p),bo(h,N),p=rs(h,M,w),p!==null&&Yp(p,h,M)}};function PM(h,p,w,M,N,R,$){return h=h.stateNode,typeof h.shouldComponentUpdate=="function"?h.shouldComponentUpdate(M,R,$):p.prototype&&p.prototype.isPureReactComponent?!Al(w,M)||!Al(N,R):!0}function RM(h,p,w){var M=!1,N=yr,R=p.contextType;return typeof R=="object"&&R!==null?R=Vn(R):(N=Rn(p)?ji:Ct.current,M=p.contextTypes,R=(M=M!=null)?ur(h,N):yr),p=new p(w,R),h.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=$p,h.stateNode=p,p._reactInternals=h,M&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=N,h.__reactInternalMemoizedMaskedChildContext=R),p}function jM(h,p,w,M){h=p.state,typeof p.componentWillReceiveProps=="function"&&p.componentWillReceiveProps(w,M),typeof p.UNSAFE_componentWillReceiveProps=="function"&&p.UNSAFE_componentWillReceiveProps(w,M),p.state!==h&&$p.enqueueReplaceState(p,p.state,null)}function Uv(h,p,w,M){var N=h.stateNode;N.props=w,N.state=h.memoizedState,N.refs=kM,Dv(h);var R=p.contextType;typeof R=="object"&&R!==null?N.context=Vn(R):(R=Rn(p)?ji:Ct.current,N.context=ur(h,R)),N.state=h.memoizedState,R=p.getDerivedStateFromProps,typeof R=="function"&&(Iv(h,p,R,w),N.state=h.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof N.getSnapshotBeforeUpdate=="function"||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(p=N.state,typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount(),p!==N.state&&$p.enqueueReplaceState(N,N.state,null),qp(h,w,N,M),N.state=h.memoizedState),typeof N.componentDidMount=="function"&&(h.flags|=4194308)}var $c=[],Zc=0,Zp=null,Kp=0,Qi=[],es=0,kl=null,Ra=1,ja="";function Pl(h,p){$c[Zc++]=Kp,$c[Zc++]=Zp,Zp=h,Kp=p}function LM(h,p,w){Qi[es++]=Ra,Qi[es++]=ja,Qi[es++]=kl,kl=h;var M=Ra;h=ja;var N=32-Zr(M)-1;M&=~(1<<N),w+=1;var R=32-Zr(p)+N;if(30<R){var $=N-N%5;R=(M&(1<<$)-1).toString(32),M>>=$,N-=$,Ra=1<<32-Zr(p)+N|w<<N|M,ja=R+h}else Ra=1<<R|w<<N|M,ja=h}function Ov(h){h.return!==null&&(Pl(h,1),LM(h,1,0))}function Fv(h){for(;h===Zp;)Zp=$c[--Zc],$c[Zc]=null,Kp=$c[--Zc],$c[Zc]=null;for(;h===kl;)kl=Qi[--es],Qi[es]=null,ja=Qi[--es],Qi[es]=null,Ra=Qi[--es],Qi[es]=null}var Ui=null,Oi=null,mn=!1,nh=!1,ws=null;function DM(h,p){var w=is(5,null,null,0);w.elementType="DELETED",w.stateNode=p,w.return=h,p=h.deletions,p===null?(h.deletions=[w],h.flags|=16):p.push(w)}function IM(h,p){switch(h.tag){case 5:return p=ft(p,h.type,h.pendingProps),p!==null?(h.stateNode=p,Ui=h,Oi=dn(p),!0):!1;case 6:return p=$t(p,h.pendingProps),p!==null?(h.stateNode=p,Ui=h,Oi=null,!0):!1;case 13:if(p=sn(p),p!==null){var w=kl!==null?{id:Ra,overflow:ja}:null;return h.memoizedState={dehydrated:p,treeContext:w,retryLane:1073741824},w=is(18,null,null,0),w.stateNode=p,w.return=h,h.child=w,Ui=h,Oi=null,!0}return!1;default:return!1}}function zv(h){return(h.mode&1)!==0&&(h.flags&128)===0}function Bv(h){if(mn){var p=Oi;if(p){var w=p;if(!IM(h,p)){if(zv(h))throw Error(a(418));p=un(w);var M=Ui;p&&IM(h,p)?DM(M,w):(h.flags=h.flags&-4097|2,mn=!1,Ui=h)}}else{if(zv(h))throw Error(a(418));h.flags=h.flags&-4097|2,mn=!1,Ui=h}}}function UM(h){for(h=h.return;h!==null&&h.tag!==5&&h.tag!==3&&h.tag!==13;)h=h.return;Ui=h}function rh(h){if(!Ee||h!==Ui)return!1;if(!mn)return UM(h),mn=!0,!1;if(h.tag!==3&&(h.tag!==5||Qe(h.type)&&!ie(h.type,h.memoizedProps))){var p=Oi;if(p){if(zv(h)){for(h=Oi;h;)h=un(h);throw Error(a(418))}for(;p;)DM(h,p),p=un(p)}}if(UM(h),h.tag===13){if(!Ee)throw Error(a(316));if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(a(317));Oi=W(h)}else Oi=Ui?un(h.stateNode):null;return!0}function Kc(){Ee&&(Oi=Ui=null,nh=mn=!1)}function Vv(h){ws===null?ws=[h]:ws.push(h)}function ih(h,p,w){if(h=w.ref,h!==null&&typeof h!="function"&&typeof h!="object"){if(w._owner){if(w=w._owner,w){if(w.tag!==1)throw Error(a(309));var M=w.stateNode}if(!M)throw Error(a(147,h));var N=M,R=""+h;return p!==null&&p.ref!==null&&typeof p.ref=="function"&&p.ref._stringRef===R?p.ref:(p=function($){var se=N.refs;se===kM&&(se=N.refs={}),$===null?delete se[R]:se[R]=$},p._stringRef=R,p)}if(typeof h!="string")throw Error(a(284));if(!w._owner)throw Error(a(290,h))}return h}function Jp(h,p){throw h=Object.prototype.toString.call(p),Error(a(31,h==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":h))}function OM(h){var p=h._init;return p(h._payload)}function FM(h){function p(xe,oe){if(h){var Me=xe.deletions;Me===null?(xe.deletions=[oe],xe.flags|=16):Me.push(oe)}}function w(xe,oe){if(!h)return null;for(;oe!==null;)p(xe,oe),oe=oe.sibling;return null}function M(xe,oe){for(xe=new Map;oe!==null;)oe.key!==null?xe.set(oe.key,oe):xe.set(oe.index,oe),oe=oe.sibling;return xe}function N(xe,oe){return xe=Eo(xe,oe),xe.index=0,xe.sibling=null,xe}function R(xe,oe,Me){return xe.index=Me,h?(Me=xe.alternate,Me!==null?(Me=Me.index,Me<oe?(xe.flags|=2,oe):Me):(xe.flags|=2,oe)):(xe.flags|=1048576,oe)}function $(xe){return h&&xe.alternate===null&&(xe.flags|=2),xe}function se(xe,oe,Me,tt){return oe===null||oe.tag!==6?(oe=Ey(Me,xe.mode,tt),oe.return=xe,oe):(oe=N(oe,Me),oe.return=xe,oe)}function Ne(xe,oe,Me,tt){var dt=Me.type;return dt===d?st(xe,oe,Me.props.children,tt,Me.key):oe!==null&&(oe.elementType===dt||typeof dt=="object"&&dt!==null&&dt.$$typeof===S&&OM(dt)===oe.type)?(tt=N(oe,Me.props),tt.ref=ih(xe,oe,Me),tt.return=xe,tt):(tt=Cm(Me.type,Me.key,Me.props,null,xe.mode,tt),tt.ref=ih(xe,oe,Me),tt.return=xe,tt)}function Ye(xe,oe,Me,tt){return oe===null||oe.tag!==4||oe.stateNode.containerInfo!==Me.containerInfo||oe.stateNode.implementation!==Me.implementation?(oe=Ny(Me,xe.mode,tt),oe.return=xe,oe):(oe=N(oe,Me.children||[]),oe.return=xe,oe)}function st(xe,oe,Me,tt,dt){return oe===null||oe.tag!==7?(oe=Ol(Me,xe.mode,tt,dt),oe.return=xe,oe):(oe=N(oe,Me),oe.return=xe,oe)}function Nt(xe,oe,Me){if(typeof oe=="string"&&oe!==""||typeof oe=="number")return oe=Ey(""+oe,xe.mode,Me),oe.return=xe,oe;if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case c:return Me=Cm(oe.type,oe.key,oe.props,null,xe.mode,Me),Me.ref=ih(xe,null,oe),Me.return=xe,Me;case u:return oe=Ny(oe,xe.mode,Me),oe.return=xe,oe;case S:var tt=oe._init;return Nt(xe,tt(oe._payload),Me)}if(Q(oe)||T(oe))return oe=Ol(oe,xe.mode,Me,null),oe.return=xe,oe;Jp(xe,oe)}return null}function vt(xe,oe,Me,tt){var dt=oe!==null?oe.key:null;if(typeof Me=="string"&&Me!==""||typeof Me=="number")return dt!==null?null:se(xe,oe,""+Me,tt);if(typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case c:return Me.key===dt?Ne(xe,oe,Me,tt):null;case u:return Me.key===dt?Ye(xe,oe,Me,tt):null;case S:return dt=Me._init,vt(xe,oe,dt(Me._payload),tt)}if(Q(Me)||T(Me))return dt!==null?null:st(xe,oe,Me,tt,null);Jp(xe,Me)}return null}function nn(xe,oe,Me,tt,dt){if(typeof tt=="string"&&tt!==""||typeof tt=="number")return xe=xe.get(Me)||null,se(oe,xe,""+tt,dt);if(typeof tt=="object"&&tt!==null){switch(tt.$$typeof){case c:return xe=xe.get(tt.key===null?Me:tt.key)||null,Ne(oe,xe,tt,dt);case u:return xe=xe.get(tt.key===null?Me:tt.key)||null,Ye(oe,xe,tt,dt);case S:var Lt=tt._init;return nn(xe,oe,Me,Lt(tt._payload),dt)}if(Q(tt)||T(tt))return xe=xe.get(Me)||null,st(oe,xe,tt,dt,null);Jp(oe,tt)}return null}function ht(xe,oe,Me,tt){for(var dt=null,Lt=null,Tt=oe,Gt=oe=0,pr=null;Tt!==null&&Gt<Me.length;Gt++){Tt.index>Gt?(pr=Tt,Tt=null):pr=Tt.sibling;var Wt=vt(xe,Tt,Me[Gt],tt);if(Wt===null){Tt===null&&(Tt=pr);break}h&&Tt&&Wt.alternate===null&&p(xe,Tt),oe=R(Wt,oe,Gt),Lt===null?dt=Wt:Lt.sibling=Wt,Lt=Wt,Tt=pr}if(Gt===Me.length)return w(xe,Tt),mn&&Pl(xe,Gt),dt;if(Tt===null){for(;Gt<Me.length;Gt++)Tt=Nt(xe,Me[Gt],tt),Tt!==null&&(oe=R(Tt,oe,Gt),Lt===null?dt=Tt:Lt.sibling=Tt,Lt=Tt);return mn&&Pl(xe,Gt),dt}for(Tt=M(xe,Tt);Gt<Me.length;Gt++)pr=nn(Tt,xe,Gt,Me[Gt],tt),pr!==null&&(h&&pr.alternate!==null&&Tt.delete(pr.key===null?Gt:pr.key),oe=R(pr,oe,Gt),Lt===null?dt=pr:Lt.sibling=pr,Lt=pr);return h&&Tt.forEach(function(No){return p(xe,No)}),mn&&Pl(xe,Gt),dt}function jr(xe,oe,Me,tt){var dt=T(Me);if(typeof dt!="function")throw Error(a(150));if(Me=dt.call(Me),Me==null)throw Error(a(151));for(var Lt=dt=null,Tt=oe,Gt=oe=0,pr=null,Wt=Me.next();Tt!==null&&!Wt.done;Gt++,Wt=Me.next()){Tt.index>Gt?(pr=Tt,Tt=null):pr=Tt.sibling;var No=vt(xe,Tt,Wt.value,tt);if(No===null){Tt===null&&(Tt=pr);break}h&&Tt&&No.alternate===null&&p(xe,Tt),oe=R(No,oe,Gt),Lt===null?dt=No:Lt.sibling=No,Lt=No,Tt=pr}if(Wt.done)return w(xe,Tt),mn&&Pl(xe,Gt),dt;if(Tt===null){for(;!Wt.done;Gt++,Wt=Me.next())Wt=Nt(xe,Wt.value,tt),Wt!==null&&(oe=R(Wt,oe,Gt),Lt===null?dt=Wt:Lt.sibling=Wt,Lt=Wt);return mn&&Pl(xe,Gt),dt}for(Tt=M(xe,Tt);!Wt.done;Gt++,Wt=Me.next())Wt=nn(Tt,xe,Gt,Wt.value,tt),Wt!==null&&(h&&Wt.alternate!==null&&Tt.delete(Wt.key===null?Gt:Wt.key),oe=R(Wt,oe,Gt),Lt===null?dt=Wt:Lt.sibling=Wt,Lt=Wt);return h&&Tt.forEach(function(v5){return p(xe,v5)}),mn&&Pl(xe,Gt),dt}function ss(xe,oe,Me,tt){if(typeof Me=="object"&&Me!==null&&Me.type===d&&Me.key===null&&(Me=Me.props.children),typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case c:e:{for(var dt=Me.key,Lt=oe;Lt!==null;){if(Lt.key===dt){if(dt=Me.type,dt===d){if(Lt.tag===7){w(xe,Lt.sibling),oe=N(Lt,Me.props.children),oe.return=xe,xe=oe;break e}}else if(Lt.elementType===dt||typeof dt=="object"&&dt!==null&&dt.$$typeof===S&&OM(dt)===Lt.type){w(xe,Lt.sibling),oe=N(Lt,Me.props),oe.ref=ih(xe,Lt,Me),oe.return=xe,xe=oe;break e}w(xe,Lt);break}else p(xe,Lt);Lt=Lt.sibling}Me.type===d?(oe=Ol(Me.props.children,xe.mode,tt,Me.key),oe.return=xe,xe=oe):(tt=Cm(Me.type,Me.key,Me.props,null,xe.mode,tt),tt.ref=ih(xe,oe,Me),tt.return=xe,xe=tt)}return $(xe);case u:e:{for(Lt=Me.key;oe!==null;){if(oe.key===Lt)if(oe.tag===4&&oe.stateNode.containerInfo===Me.containerInfo&&oe.stateNode.implementation===Me.implementation){w(xe,oe.sibling),oe=N(oe,Me.children||[]),oe.return=xe,xe=oe;break e}else{w(xe,oe);break}else p(xe,oe);oe=oe.sibling}oe=Ny(Me,xe.mode,tt),oe.return=xe,xe=oe}return $(xe);case S:return Lt=Me._init,ss(xe,oe,Lt(Me._payload),tt)}if(Q(Me))return ht(xe,oe,Me,tt);if(T(Me))return jr(xe,oe,Me,tt);Jp(xe,Me)}return typeof Me=="string"&&Me!==""||typeof Me=="number"?(Me=""+Me,oe!==null&&oe.tag===6?(w(xe,oe.sibling),oe=N(oe,Me),oe.return=xe,xe=oe):(w(xe,oe),oe=Ey(Me,xe.mode,tt),oe.return=xe,xe=oe),$(xe)):w(xe,oe)}return ss}var Jc=FM(!0),zM=FM(!1),sh={},ts=bn(sh),ah=bn(sh),Qc=bn(sh);function Js(h){if(h===sh)throw Error(a(174));return h}function Hv(h,p){rt(Qc,p),rt(ah,h),rt(ts,sh),h=re(p),mt(ts),rt(ts,h)}function eu(){mt(ts),mt(ah),mt(Qc)}function BM(h){var p=Js(Qc.current),w=Js(ts.current);p=I(w,h.type,p),w!==p&&(rt(ah,h),rt(ts,p))}function Gv(h){ah.current===h&&(mt(ts),mt(ah))}var wn=bn(0);function Qp(h){for(var p=h;p!==null;){if(p.tag===13){var w=p.memoizedState;if(w!==null&&(w=w.dehydrated,w===null||Bt(w)||yn(w)))return p}else if(p.tag===19&&p.memoizedProps.revealOrder!==void 0){if(p.flags&128)return p}else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===h)break;for(;p.sibling===null;){if(p.return===null||p.return===h)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}var Wv=[];function Xv(){for(var h=0;h<Wv.length;h++){var p=Wv[h];Le?p._workInProgressVersionPrimary=null:p._workInProgressVersionSecondary=null}Wv.length=0}var em=l.ReactCurrentDispatcher,ns=l.ReactCurrentBatchConfig,tu=0,jn=null,kr=null,fr=null,tm=!1,oh=!1,lh=0,HI=0;function Pr(){throw Error(a(321))}function Yv(h,p){if(p===null)return!1;for(var w=0;w<p.length&&w<h.length;w++)if(!Di(h[w],p[w]))return!1;return!0}function qv(h,p,w,M,N,R){if(tu=R,jn=p,p.memoizedState=null,p.updateQueue=null,p.lanes=0,em.current=h===null||h.memoizedState===null?YI:qI,h=w(M,N),oh){R=0;do{if(oh=!1,lh=0,25<=R)throw Error(a(301));R+=1,fr=kr=null,p.updateQueue=null,em.current=$I,h=w(M,N)}while(oh)}if(em.current=am,p=kr!==null&&kr.next!==null,tu=0,fr=kr=jn=null,tm=!1,p)throw Error(a(300));return h}function $v(){var h=lh!==0;return lh=0,h}function La(){var h={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fr===null?jn.memoizedState=fr=h:fr=fr.next=h,fr}function Qs(){if(kr===null){var h=jn.alternate;h=h!==null?h.memoizedState:null}else h=kr.next;var p=fr===null?jn.memoizedState:fr.next;if(p!==null)fr=p,kr=h;else{if(h===null)throw Error(a(310));kr=h,h={memoizedState:kr.memoizedState,baseState:kr.baseState,baseQueue:kr.baseQueue,queue:kr.queue,next:null},fr===null?jn.memoizedState=fr=h:fr=fr.next=h}return fr}function Rl(h,p){return typeof p=="function"?p(h):p}function nm(h){var p=Qs(),w=p.queue;if(w===null)throw Error(a(311));w.lastRenderedReducer=h;var M=kr,N=M.baseQueue,R=w.pending;if(R!==null){if(N!==null){var $=N.next;N.next=R.next,R.next=$}M.baseQueue=N=R,w.pending=null}if(N!==null){R=N.next,M=M.baseState;var se=$=null,Ne=null,Ye=R;do{var st=Ye.lane;if((tu&st)===st)Ne!==null&&(Ne=Ne.next={lane:0,action:Ye.action,hasEagerState:Ye.hasEagerState,eagerState:Ye.eagerState,next:null}),M=Ye.hasEagerState?Ye.eagerState:h(M,Ye.action);else{var Nt={lane:st,action:Ye.action,hasEagerState:Ye.hasEagerState,eagerState:Ye.eagerState,next:null};Ne===null?(se=Ne=Nt,$=M):Ne=Ne.next=Nt,jn.lanes|=st,ru|=st}Ye=Ye.next}while(Ye!==null&&Ye!==R);Ne===null?$=M:Ne.next=se,Di(M,p.memoizedState)||(Fi=!0),p.memoizedState=M,p.baseState=$,p.baseQueue=Ne,w.lastRenderedState=M}if(h=w.interleaved,h!==null){N=h;do R=N.lane,jn.lanes|=R,ru|=R,N=N.next;while(N!==h)}else N===null&&(w.lanes=0);return[p.memoizedState,w.dispatch]}function rm(h){var p=Qs(),w=p.queue;if(w===null)throw Error(a(311));w.lastRenderedReducer=h;var M=w.dispatch,N=w.pending,R=p.memoizedState;if(N!==null){w.pending=null;var $=N=N.next;do R=h(R,$.action),$=$.next;while($!==N);Di(R,p.memoizedState)||(Fi=!0),p.memoizedState=R,p.baseQueue===null&&(p.baseState=R),w.lastRenderedState=R}return[R,M]}function VM(){}function HM(h,p){var w=jn,M=Qs(),N=p(),R=!Di(M.memoizedState,N);if(R&&(M.memoizedState=N,Fi=!0),M=M.queue,uh(XM.bind(null,w,M,h),[h]),M.getSnapshot!==p||R||fr!==null&&fr.memoizedState.tag&1){if(w.flags|=2048,ch(9,WM.bind(null,w,M,N,p),void 0,null),Zn===null)throw Error(a(349));tu&30||GM(w,p,N)}return N}function GM(h,p,w){h.flags|=16384,h={getSnapshot:p,value:w},p=jn.updateQueue,p===null?(p={lastEffect:null,stores:null},jn.updateQueue=p,p.stores=[h]):(w=p.stores,w===null?p.stores=[h]:w.push(h))}function WM(h,p,w,M){p.value=w,p.getSnapshot=M,YM(p)&&rs(h,1,-1)}function XM(h,p,w){return w(function(){YM(p)&&rs(h,1,-1)})}function YM(h){var p=h.getSnapshot;h=h.value;try{var w=p();return!Di(h,w)}catch{return!0}}function Zv(h){var p=La();return typeof h=="function"&&(h=h()),p.memoizedState=p.baseState=h,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Rl,lastRenderedState:h},p.queue=h,h=h.dispatch=XI.bind(null,jn,h),[p.memoizedState,h]}function ch(h,p,w,M){return h={tag:h,create:p,destroy:w,deps:M,next:null},p=jn.updateQueue,p===null?(p={lastEffect:null,stores:null},jn.updateQueue=p,p.lastEffect=h.next=h):(w=p.lastEffect,w===null?p.lastEffect=h.next=h:(M=w.next,w.next=h,h.next=M,p.lastEffect=h)),h}function qM(){return Qs().memoizedState}function im(h,p,w,M){var N=La();jn.flags|=h,N.memoizedState=ch(1|p,w,void 0,M===void 0?null:M)}function sm(h,p,w,M){var N=Qs();M=M===void 0?null:M;var R=void 0;if(kr!==null){var $=kr.memoizedState;if(R=$.destroy,M!==null&&Yv(M,$.deps)){N.memoizedState=ch(p,w,R,M);return}}jn.flags|=h,N.memoizedState=ch(1|p,w,R,M)}function Kv(h,p){return im(8390656,8,h,p)}function uh(h,p){return sm(2048,8,h,p)}function $M(h,p){return sm(4,2,h,p)}function ZM(h,p){return sm(4,4,h,p)}function KM(h,p){if(typeof p=="function")return h=h(),p(h),function(){p(null)};if(p!=null)return h=h(),p.current=h,function(){p.current=null}}function JM(h,p,w){return w=w!=null?w.concat([h]):null,sm(4,4,KM.bind(null,p,h),w)}function Jv(){}function QM(h,p){var w=Qs();p=p===void 0?null:p;var M=w.memoizedState;return M!==null&&p!==null&&Yv(p,M[1])?M[0]:(w.memoizedState=[h,p],h)}function eE(h,p){var w=Qs();p=p===void 0?null:p;var M=w.memoizedState;return M!==null&&p!==null&&Yv(p,M[1])?M[0]:(h=h(),w.memoizedState=[h,p],h)}function GI(h,p){var w=It;It=w!==0&&4>w?w:4,h(!0);var M=ns.transition;ns.transition={};try{h(!1),p()}finally{It=w,ns.transition=M}}function tE(){return Qs().memoizedState}function WI(h,p,w){var M=So(h);w={lane:M,action:w,hasEagerState:!1,eagerState:null,next:null},nE(h)?rE(p,w):(iE(h,p,w),w=ni(),h=rs(h,M,w),h!==null&&sE(h,p,M))}function XI(h,p,w){var M=So(h),N={lane:M,action:w,hasEagerState:!1,eagerState:null,next:null};if(nE(h))rE(p,N);else{iE(h,p,N);var R=h.alternate;if(h.lanes===0&&(R===null||R.lanes===0)&&(R=p.lastRenderedReducer,R!==null))try{var $=p.lastRenderedState,se=R($,w);if(N.hasEagerState=!0,N.eagerState=se,Di(se,$))return}catch{}finally{}w=ni(),h=rs(h,M,w),h!==null&&sE(h,p,M)}}function nE(h){var p=h.alternate;return h===jn||p!==null&&p===jn}function rE(h,p){oh=tm=!0;var w=h.pending;w===null?p.next=p:(p.next=w.next,w.next=p),h.pending=p}function iE(h,p,w){Zn!==null&&h.mode&1&&!(Dt&2)?(h=p.interleaved,h===null?(w.next=w,Ii===null?Ii=[p]:Ii.push(p)):(w.next=h.next,h.next=w),p.interleaved=w):(h=p.pending,h===null?w.next=w:(w.next=h.next,h.next=w),p.pending=w)}function sE(h,p,w){if(w&4194240){var M=p.lanes;M&=h.pendingLanes,w|=M,p.lanes=w,Zs(h,w)}}var am={readContext:Vn,useCallback:Pr,useContext:Pr,useEffect:Pr,useImperativeHandle:Pr,useInsertionEffect:Pr,useLayoutEffect:Pr,useMemo:Pr,useReducer:Pr,useRef:Pr,useState:Pr,useDebugValue:Pr,useDeferredValue:Pr,useTransition:Pr,useMutableSource:Pr,useSyncExternalStore:Pr,useId:Pr,unstable_isNewReconciler:!1},YI={readContext:Vn,useCallback:function(h,p){return La().memoizedState=[h,p===void 0?null:p],h},useContext:Vn,useEffect:Kv,useImperativeHandle:function(h,p,w){return w=w!=null?w.concat([h]):null,im(4194308,4,KM.bind(null,p,h),w)},useLayoutEffect:function(h,p){return im(4194308,4,h,p)},useInsertionEffect:function(h,p){return im(4,2,h,p)},useMemo:function(h,p){var w=La();return p=p===void 0?null:p,h=h(),w.memoizedState=[h,p],h},useReducer:function(h,p,w){var M=La();return p=w!==void 0?w(p):p,M.memoizedState=M.baseState=p,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:h,lastRenderedState:p},M.queue=h,h=h.dispatch=WI.bind(null,jn,h),[M.memoizedState,h]},useRef:function(h){var p=La();return h={current:h},p.memoizedState=h},useState:Zv,useDebugValue:Jv,useDeferredValue:function(h){var p=Zv(h),w=p[0],M=p[1];return Kv(function(){var N=ns.transition;ns.transition={};try{M(h)}finally{ns.transition=N}},[h]),w},useTransition:function(){var h=Zv(!1),p=h[0];return h=GI.bind(null,h[1]),La().memoizedState=h,[p,h]},useMutableSource:function(){},useSyncExternalStore:function(h,p,w){var M=jn,N=La();if(mn){if(w===void 0)throw Error(a(407));w=w()}else{if(w=p(),Zn===null)throw Error(a(349));tu&30||GM(M,p,w)}N.memoizedState=w;var R={value:w,getSnapshot:p};return N.queue=R,Kv(XM.bind(null,M,R,h),[h]),M.flags|=2048,ch(9,WM.bind(null,M,R,w,p),void 0,null),w},useId:function(){var h=La(),p=Zn.identifierPrefix;if(mn){var w=ja,M=Ra;w=(M&~(1<<32-Zr(M)-1)).toString(32)+w,p=":"+p+"R"+w,w=lh++,0<w&&(p+="H"+w.toString(32)),p+=":"}else w=HI++,p=":"+p+"r"+w.toString(32)+":";return h.memoizedState=p},unstable_isNewReconciler:!1},qI={readContext:Vn,useCallback:QM,useContext:Vn,useEffect:uh,useImperativeHandle:JM,useInsertionEffect:$M,useLayoutEffect:ZM,useMemo:eE,useReducer:nm,useRef:qM,useState:function(){return nm(Rl)},useDebugValue:Jv,useDeferredValue:function(h){var p=nm(Rl),w=p[0],M=p[1];return uh(function(){var N=ns.transition;ns.transition={};try{M(h)}finally{ns.transition=N}},[h]),w},useTransition:function(){var h=nm(Rl)[0],p=Qs().memoizedState;return[h,p]},useMutableSource:VM,useSyncExternalStore:HM,useId:tE,unstable_isNewReconciler:!1},$I={readContext:Vn,useCallback:QM,useContext:Vn,useEffect:uh,useImperativeHandle:JM,useInsertionEffect:$M,useLayoutEffect:ZM,useMemo:eE,useReducer:rm,useRef:qM,useState:function(){return rm(Rl)},useDebugValue:Jv,useDeferredValue:function(h){var p=rm(Rl),w=p[0],M=p[1];return uh(function(){var N=ns.transition;ns.transition={};try{M(h)}finally{ns.transition=N}},[h]),w},useTransition:function(){var h=rm(Rl)[0],p=Qs().memoizedState;return[h,p]},useMutableSource:VM,useSyncExternalStore:HM,useId:tE,unstable_isNewReconciler:!1};function Qv(h,p){try{var w="",M=p;do w+=Cl(M),M=M.return;while(M);var N=w}catch(R){N=`
Error generating stack: `+R.message+`
`+R.stack}return{value:h,source:p,stack:N}}function ey(h,p){try{console.error(p.value)}catch(w){setTimeout(function(){throw w})}}var ZI=typeof WeakMap=="function"?WeakMap:Map;function aE(h,p,w){w=Pa(-1,w),w.tag=3,w.payload={element:null};var M=p.value;return w.callback=function(){wm||(wm=!0,vy=M),ey(h,p)},w}function oE(h,p,w){w=Pa(-1,w),w.tag=3;var M=h.type.getDerivedStateFromError;if(typeof M=="function"){var N=p.value;w.payload=function(){return M(N)},w.callback=function(){ey(h,p)}}var R=h.stateNode;return R!==null&&typeof R.componentDidCatch=="function"&&(w.callback=function(){ey(h,p),typeof M!="function"&&(_o===null?_o=new Set([this]):_o.add(this));var $=p.stack;this.componentDidCatch(p.value,{componentStack:$!==null?$:""})}),w}function lE(h,p,w){var M=h.pingCache;if(M===null){M=h.pingCache=new ZI;var N=new Set;M.set(p,N)}else N=M.get(p),N===void 0&&(N=new Set,M.set(p,N));N.has(w)||(N.add(w),h=u5.bind(null,h,p,w),p.then(h,h))}function cE(h){do{var p;if((p=h.tag===13)&&(p=h.memoizedState,p=p!==null?p.dehydrated!==null:!0),p)return h;h=h.return}while(h!==null);return null}function uE(h,p,w,M,N){return h.mode&1?(h.flags|=65536,h.lanes=N,h):(h===p?h.flags|=65536:(h.flags|=128,w.flags|=131072,w.flags&=-52805,w.tag===1&&(w.alternate===null?w.tag=17:(p=Pa(-1,1),p.tag=2,bo(w,p))),w.lanes|=1),h)}function ea(h){h.flags|=4}function dE(h,p){if(h!==null&&h.child===p.child)return!0;if(p.flags&16)return!1;for(h=p.child;h!==null;){if(h.flags&12854||h.subtreeFlags&12854)return!1;h=h.sibling}return!0}var dh,hh,om,lm;if(Te)dh=function(h,p){for(var w=p.child;w!==null;){if(w.tag===5||w.tag===6)Z(h,w.stateNode);else if(w.tag!==4&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===p)break;for(;w.sibling===null;){if(w.return===null||w.return===p)return;w=w.return}w.sibling.return=w.return,w=w.sibling}},hh=function(){},om=function(h,p,w,M,N){if(h=h.memoizedProps,h!==M){var R=p.stateNode,$=Js(ts.current);w=ne(R,w,h,M,N,$),(p.updateQueue=w)&&ea(p)}},lm=function(h,p,w,M){w!==M&&ea(p)};else if(G){dh=function(h,p,w,M){for(var N=p.child;N!==null;){if(N.tag===5){var R=N.stateNode;w&&M&&(R=zt(R,N.type,N.memoizedProps,N)),Z(h,R)}else if(N.tag===6)R=N.stateNode,w&&M&&(R=Mt(R,N.memoizedProps,N)),Z(h,R);else if(N.tag!==4){if(N.tag===22&&N.memoizedState!==null)R=N.child,R!==null&&(R.return=N),dh(h,N,!0,!0);else if(N.child!==null){N.child.return=N,N=N.child;continue}}if(N===p)break;for(;N.sibling===null;){if(N.return===null||N.return===p)return;N=N.return}N.sibling.return=N.return,N=N.sibling}};var hE=function(h,p,w,M){for(var N=p.child;N!==null;){if(N.tag===5){var R=N.stateNode;w&&M&&(R=zt(R,N.type,N.memoizedProps,N)),Je(h,R)}else if(N.tag===6)R=N.stateNode,w&&M&&(R=Mt(R,N.memoizedProps,N)),Je(h,R);else if(N.tag!==4){if(N.tag===22&&N.memoizedState!==null)R=N.child,R!==null&&(R.return=N),hE(h,N,!0,!0);else if(N.child!==null){N.child.return=N,N=N.child;continue}}if(N===p)break;for(;N.sibling===null;){if(N.return===null||N.return===p)return;N=N.return}N.sibling.return=N.return,N=N.sibling}};hh=function(h,p){var w=p.stateNode;if(!dE(h,p)){h=w.containerInfo;var M=lt(h);hE(M,p,!1,!1),w.pendingChildren=M,ea(p),gt(h,M)}},om=function(h,p,w,M,N){var R=h.stateNode,$=h.memoizedProps;if((h=dE(h,p))&&$===M)p.stateNode=R;else{var se=p.stateNode,Ne=Js(ts.current),Ye=null;$!==M&&(Ye=ne(se,w,$,M,N,Ne)),h&&Ye===null?p.stateNode=R:(R=qe(R,Ye,w,$,M,p,h,se),K(R,w,M,N,Ne)&&ea(p),p.stateNode=R,h?ea(p):dh(R,p,!1,!1))}},lm=function(h,p,w,M){w!==M?(h=Js(Qc.current),w=Js(ts.current),p.stateNode=de(M,h,w,p),ea(p)):p.stateNode=h.stateNode}}else hh=function(){},om=function(){},lm=function(){};function fh(h,p){if(!mn)switch(h.tailMode){case"hidden":p=h.tail;for(var w=null;p!==null;)p.alternate!==null&&(w=p),p=p.sibling;w===null?h.tail=null:w.sibling=null;break;case"collapsed":w=h.tail;for(var M=null;w!==null;)w.alternate!==null&&(M=w),w=w.sibling;M===null?p||h.tail===null?h.tail=null:h.tail.sibling=null:M.sibling=null}}function Rr(h){var p=h.alternate!==null&&h.alternate.child===h.child,w=0,M=0;if(p)for(var N=h.child;N!==null;)w|=N.lanes|N.childLanes,M|=N.subtreeFlags&14680064,M|=N.flags&14680064,N.return=h,N=N.sibling;else for(N=h.child;N!==null;)w|=N.lanes|N.childLanes,M|=N.subtreeFlags,M|=N.flags,N.return=h,N=N.sibling;return h.subtreeFlags|=M,h.childLanes=w,p}function KI(h,p,w){var M=p.pendingProps;switch(Fv(p),p.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Rr(p),null;case 1:return Rn(p.type)&&tn(),Rr(p),null;case 3:return M=p.stateNode,eu(),mt(an),mt(Ct),Xv(),M.pendingContext&&(M.context=M.pendingContext,M.pendingContext=null),(h===null||h.child===null)&&(rh(p)?ea(p):h===null||h.memoizedState.isDehydrated&&!(p.flags&256)||(p.flags|=1024,ws!==null&&(_y(ws),ws=null))),hh(h,p),Rr(p),null;case 5:Gv(p),w=Js(Qc.current);var N=p.type;if(h!==null&&p.stateNode!=null)om(h,p,N,M,w),h.ref!==p.ref&&(p.flags|=512,p.flags|=2097152);else{if(!M){if(p.stateNode===null)throw Error(a(166));return Rr(p),null}if(h=Js(ts.current),rh(p)){if(!Ee)throw Error(a(175));h=$r(p.stateNode,p.type,p.memoizedProps,w,h,p,!nh),p.updateQueue=h,h!==null&&ea(p)}else{var R=U(N,M,w,h,p);dh(R,p,!1,!1),p.stateNode=R,K(R,N,M,w,h)&&ea(p)}p.ref!==null&&(p.flags|=512,p.flags|=2097152)}return Rr(p),null;case 6:if(h&&p.stateNode!=null)lm(h,p,h.memoizedProps,M);else{if(typeof M!="string"&&p.stateNode===null)throw Error(a(166));if(h=Js(Qc.current),w=Js(ts.current),rh(p)){if(!Ee)throw Error(a(176));if(h=p.stateNode,M=p.memoizedProps,(w=bs(h,M,p,!nh))&&(N=Ui,N!==null))switch(R=(N.mode&1)!==0,N.tag){case 3:ct(N.stateNode.containerInfo,h,M,R);break;case 5:pt(N.type,N.memoizedProps,N.stateNode,h,M,R)}w&&ea(p)}else p.stateNode=de(M,h,w,p)}return Rr(p),null;case 13:if(mt(wn),M=p.memoizedState,mn&&Oi!==null&&p.mode&1&&!(p.flags&128)){for(h=Oi;h;)h=un(h);return Kc(),p.flags|=98560,p}if(M!==null&&M.dehydrated!==null){if(M=rh(p),h===null){if(!M)throw Error(a(318));if(!Ee)throw Error(a(344));if(h=p.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(a(317));qd(h,p)}else Kc(),!(p.flags&128)&&(p.memoizedState=null),p.flags|=4;return Rr(p),null}return ws!==null&&(_y(ws),ws=null),p.flags&128?(p.lanes=w,p):(M=M!==null,w=!1,h===null?rh(p):w=h.memoizedState!==null,M&&!w&&(p.child.flags|=8192,p.mode&1&&(h===null||wn.current&1?rr===0&&(rr=3):Sy())),p.updateQueue!==null&&(p.flags|=4),Rr(p),null);case 4:return eu(),hh(h,p),h===null&&ve(p.stateNode.containerInfo),Rr(p),null;case 10:return hr(p.type._context),Rr(p),null;case 17:return Rn(p.type)&&tn(),Rr(p),null;case 19:if(mt(wn),N=p.memoizedState,N===null)return Rr(p),null;if(M=(p.flags&128)!==0,R=N.rendering,R===null)if(M)fh(N,!1);else{if(rr!==0||h!==null&&h.flags&128)for(h=p.child;h!==null;){if(R=Qp(h),R!==null){for(p.flags|=128,fh(N,!1),h=R.updateQueue,h!==null&&(p.updateQueue=h,p.flags|=4),p.subtreeFlags=0,h=w,M=p.child;M!==null;)w=M,N=h,w.flags&=14680066,R=w.alternate,R===null?(w.childLanes=0,w.lanes=N,w.child=null,w.subtreeFlags=0,w.memoizedProps=null,w.memoizedState=null,w.updateQueue=null,w.dependencies=null,w.stateNode=null):(w.childLanes=R.childLanes,w.lanes=R.lanes,w.child=R.child,w.subtreeFlags=0,w.deletions=null,w.memoizedProps=R.memoizedProps,w.memoizedState=R.memoizedState,w.updateQueue=R.updateQueue,w.type=R.type,N=R.dependencies,w.dependencies=N===null?null:{lanes:N.lanes,firstContext:N.firstContext}),M=M.sibling;return rt(wn,wn.current&1|2),p.child}h=h.sibling}N.tail!==null&&_n()>xy&&(p.flags|=128,M=!0,fh(N,!1),p.lanes=4194304)}else{if(!M)if(h=Qp(R),h!==null){if(p.flags|=128,M=!0,h=h.updateQueue,h!==null&&(p.updateQueue=h,p.flags|=4),fh(N,!0),N.tail===null&&N.tailMode==="hidden"&&!R.alternate&&!mn)return Rr(p),null}else 2*_n()-N.renderingStartTime>xy&&w!==1073741824&&(p.flags|=128,M=!0,fh(N,!1),p.lanes=4194304);N.isBackwards?(R.sibling=p.child,p.child=R):(h=N.last,h!==null?h.sibling=R:p.child=R,N.last=R)}return N.tail!==null?(p=N.tail,N.rendering=p,N.tail=p.sibling,N.renderingStartTime=_n(),p.sibling=null,h=wn.current,rt(wn,M?h&1|2:h&1),p):(Rr(p),null);case 22:case 23:return wy(),M=p.memoizedState!==null,h!==null&&h.memoizedState!==null!==M&&(p.flags|=8192),M&&p.mode&1?zi&1073741824&&(Rr(p),Te&&p.subtreeFlags&6&&(p.flags|=8192)):Rr(p),null;case 24:return null;case 25:return null}throw Error(a(156,p.tag))}var JI=l.ReactCurrentOwner,Fi=!1;function ti(h,p,w,M){p.child=h===null?zM(p,null,w,M):Jc(p,h.child,w,M)}function fE(h,p,w,M,N){w=w.render;var R=p.ref;return Bn(p,N),M=qv(h,p,w,M,R,N),w=$v(),h!==null&&!Fi?(p.updateQueue=h.updateQueue,p.flags&=-2053,h.lanes&=~N,Da(h,p,N)):(mn&&w&&Ov(p),p.flags|=1,ti(h,p,M,N),p.child)}function pE(h,p,w,M,N){if(h===null){var R=w.type;return typeof R=="function"&&!My(R)&&R.defaultProps===void 0&&w.compare===null&&w.defaultProps===void 0?(p.tag=15,p.type=R,mE(h,p,R,M,N)):(h=Cm(w.type,null,M,p,p.mode,N),h.ref=p.ref,h.return=p,p.child=h)}if(R=h.child,!(h.lanes&N)){var $=R.memoizedProps;if(w=w.compare,w=w!==null?w:Al,w($,M)&&h.ref===p.ref)return Da(h,p,N)}return p.flags|=1,h=Eo(R,M),h.ref=p.ref,h.return=p,p.child=h}function mE(h,p,w,M,N){if(h!==null&&Al(h.memoizedProps,M)&&h.ref===p.ref)if(Fi=!1,(h.lanes&N)!==0)h.flags&131072&&(Fi=!0);else return p.lanes=h.lanes,Da(h,p,N);return ty(h,p,w,M,N)}function gE(h,p,w){var M=p.pendingProps,N=M.children,R=h!==null?h.memoizedState:null;if(M.mode==="hidden")if(!(p.mode&1))p.memoizedState={baseLanes:0,cachePool:null},rt(nu,zi),zi|=w;else if(w&1073741824)p.memoizedState={baseLanes:0,cachePool:null},M=R!==null?R.baseLanes:w,rt(nu,zi),zi|=M;else return h=R!==null?R.baseLanes|w:w,p.lanes=p.childLanes=1073741824,p.memoizedState={baseLanes:h,cachePool:null},p.updateQueue=null,rt(nu,zi),zi|=h,null;else R!==null?(M=R.baseLanes|w,p.memoizedState=null):M=w,rt(nu,zi),zi|=M;return ti(h,p,N,w),p.child}function xE(h,p){var w=p.ref;(h===null&&w!==null||h!==null&&h.ref!==w)&&(p.flags|=512,p.flags|=2097152)}function ty(h,p,w,M,N){var R=Rn(w)?ji:Ct.current;return R=ur(p,R),Bn(p,N),w=qv(h,p,w,M,R,N),M=$v(),h!==null&&!Fi?(p.updateQueue=h.updateQueue,p.flags&=-2053,h.lanes&=~N,Da(h,p,N)):(mn&&M&&Ov(p),p.flags|=1,ti(h,p,w,N),p.child)}function vE(h,p,w,M,N){if(Rn(w)){var R=!0;zn(p)}else R=!1;if(Bn(p,N),p.stateNode===null)h!==null&&(h.alternate=null,p.alternate=null,p.flags|=2),RM(p,w,M),Uv(p,w,M,N),M=!0;else if(h===null){var $=p.stateNode,se=p.memoizedProps;$.props=se;var Ne=$.context,Ye=w.contextType;typeof Ye=="object"&&Ye!==null?Ye=Vn(Ye):(Ye=Rn(w)?ji:Ct.current,Ye=ur(p,Ye));var st=w.getDerivedStateFromProps,Nt=typeof st=="function"||typeof $.getSnapshotBeforeUpdate=="function";Nt||typeof $.UNSAFE_componentWillReceiveProps!="function"&&typeof $.componentWillReceiveProps!="function"||(se!==M||Ne!==Ye)&&jM(p,$,M,Ye),yo=!1;var vt=p.memoizedState;$.state=vt,qp(p,M,$,N),Ne=p.memoizedState,se!==M||vt!==Ne||an.current||yo?(typeof st=="function"&&(Iv(p,w,st,M),Ne=p.memoizedState),(se=yo||PM(p,w,se,M,vt,Ne,Ye))?(Nt||typeof $.UNSAFE_componentWillMount!="function"&&typeof $.componentWillMount!="function"||(typeof $.componentWillMount=="function"&&$.componentWillMount(),typeof $.UNSAFE_componentWillMount=="function"&&$.UNSAFE_componentWillMount()),typeof $.componentDidMount=="function"&&(p.flags|=4194308)):(typeof $.componentDidMount=="function"&&(p.flags|=4194308),p.memoizedProps=M,p.memoizedState=Ne),$.props=M,$.state=Ne,$.context=Ye,M=se):(typeof $.componentDidMount=="function"&&(p.flags|=4194308),M=!1)}else{$=p.stateNode,TM(h,p),se=p.memoizedProps,Ye=p.type===p.elementType?se:Qr(p.type,se),$.props=Ye,Nt=p.pendingProps,vt=$.context,Ne=w.contextType,typeof Ne=="object"&&Ne!==null?Ne=Vn(Ne):(Ne=Rn(w)?ji:Ct.current,Ne=ur(p,Ne));var nn=w.getDerivedStateFromProps;(st=typeof nn=="function"||typeof $.getSnapshotBeforeUpdate=="function")||typeof $.UNSAFE_componentWillReceiveProps!="function"&&typeof $.componentWillReceiveProps!="function"||(se!==Nt||vt!==Ne)&&jM(p,$,M,Ne),yo=!1,vt=p.memoizedState,$.state=vt,qp(p,M,$,N);var ht=p.memoizedState;se!==Nt||vt!==ht||an.current||yo?(typeof nn=="function"&&(Iv(p,w,nn,M),ht=p.memoizedState),(Ye=yo||PM(p,w,Ye,M,vt,ht,Ne)||!1)?(st||typeof $.UNSAFE_componentWillUpdate!="function"&&typeof $.componentWillUpdate!="function"||(typeof $.componentWillUpdate=="function"&&$.componentWillUpdate(M,ht,Ne),typeof $.UNSAFE_componentWillUpdate=="function"&&$.UNSAFE_componentWillUpdate(M,ht,Ne)),typeof $.componentDidUpdate=="function"&&(p.flags|=4),typeof $.getSnapshotBeforeUpdate=="function"&&(p.flags|=1024)):(typeof $.componentDidUpdate!="function"||se===h.memoizedProps&&vt===h.memoizedState||(p.flags|=4),typeof $.getSnapshotBeforeUpdate!="function"||se===h.memoizedProps&&vt===h.memoizedState||(p.flags|=1024),p.memoizedProps=M,p.memoizedState=ht),$.props=M,$.state=ht,$.context=Ne,M=Ye):(typeof $.componentDidUpdate!="function"||se===h.memoizedProps&&vt===h.memoizedState||(p.flags|=4),typeof $.getSnapshotBeforeUpdate!="function"||se===h.memoizedProps&&vt===h.memoizedState||(p.flags|=1024),M=!1)}return ny(h,p,w,M,R,N)}function ny(h,p,w,M,N,R){xE(h,p);var $=(p.flags&128)!==0;if(!M&&!$)return N&&br(p,w,!1),Da(h,p,R);M=p.stateNode,JI.current=p;var se=$&&typeof w.getDerivedStateFromError!="function"?null:M.render();return p.flags|=1,h!==null&&$?(p.child=Jc(p,h.child,null,R),p.child=Jc(p,null,se,R)):ti(h,p,se,R),p.memoizedState=M.state,N&&br(p,w,!0),p.child}function yE(h){var p=h.stateNode;p.pendingContext?mi(h,p.pendingContext,p.pendingContext!==p.context):p.context&&mi(h,p.context,!1),Hv(h,p.containerInfo)}function bE(h,p,w,M,N){return Kc(),Vv(N),p.flags|=256,ti(h,p,w,M),p.child}var cm={dehydrated:null,treeContext:null,retryLane:0};function um(h){return{baseLanes:h,cachePool:null}}function _E(h,p,w){var M=p.pendingProps,N=wn.current,R=!1,$=(p.flags&128)!==0,se;if((se=$)||(se=h!==null&&h.memoizedState===null?!1:(N&2)!==0),se?(R=!0,p.flags&=-129):(h===null||h.memoizedState!==null)&&(N|=1),rt(wn,N&1),h===null)return Bv(p),h=p.memoizedState,h!==null&&(h=h.dehydrated,h!==null)?(p.mode&1?yn(h)?p.lanes=8:p.lanes=1073741824:p.lanes=1,null):(N=M.children,h=M.fallback,R?(M=p.mode,R=p.child,N={mode:"hidden",children:N},!(M&1)&&R!==null?(R.childLanes=0,R.pendingProps=N):R=km(N,M,0,null),h=Ol(h,M,w,null),R.return=p,h.return=p,R.sibling=h,p.child=R,p.child.memoizedState=um(w),p.memoizedState=cm,h):ry(p,N));if(N=h.memoizedState,N!==null){if(se=N.dehydrated,se!==null){if($)return p.flags&256?(p.flags&=-257,dm(h,p,w,Error(a(422)))):p.memoizedState!==null?(p.child=h.child,p.flags|=128,null):(R=M.fallback,N=p.mode,M=km({mode:"visible",children:M.children},N,0,null),R=Ol(R,N,w,null),R.flags|=2,M.return=p,R.return=p,M.sibling=R,p.child=M,p.mode&1&&Jc(p,h.child,null,w),p.child.memoizedState=um(w),p.memoizedState=cm,R);if(!(p.mode&1))p=dm(h,p,w,null);else if(yn(se))p=dm(h,p,w,Error(a(419)));else if(M=(w&h.childLanes)!==0,Fi||M){if(M=Zn,M!==null){switch(w&-w){case 4:R=2;break;case 16:R=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:R=32;break;case 536870912:R=268435456;break;default:R=0}M=R&(M.suspendedLanes|w)?0:R,M!==0&&M!==N.retryLane&&(N.retryLane=M,rs(h,M,-1))}Sy(),p=dm(h,p,w,Error(a(421)))}else Bt(se)?(p.flags|=128,p.child=h.child,p=d5.bind(null,h),nr(se,p),p=null):(w=N.treeContext,Ee&&(Oi=Ri(se),Ui=p,mn=!0,ws=null,nh=!1,w!==null&&(Qi[es++]=Ra,Qi[es++]=ja,Qi[es++]=kl,Ra=w.id,ja=w.overflow,kl=p)),p=ry(p,p.pendingProps.children),p.flags|=4096);return p}return R?(M=SE(h,p,M.children,M.fallback,w),R=p.child,N=h.child.memoizedState,R.memoizedState=N===null?um(w):{baseLanes:N.baseLanes|w,cachePool:null},R.childLanes=h.childLanes&~w,p.memoizedState=cm,M):(w=wE(h,p,M.children,w),p.memoizedState=null,w)}return R?(M=SE(h,p,M.children,M.fallback,w),R=p.child,N=h.child.memoizedState,R.memoizedState=N===null?um(w):{baseLanes:N.baseLanes|w,cachePool:null},R.childLanes=h.childLanes&~w,p.memoizedState=cm,M):(w=wE(h,p,M.children,w),p.memoizedState=null,w)}function ry(h,p){return p=km({mode:"visible",children:p},h.mode,0,null),p.return=h,h.child=p}function wE(h,p,w,M){var N=h.child;return h=N.sibling,w=Eo(N,{mode:"visible",children:w}),!(p.mode&1)&&(w.lanes=M),w.return=p,w.sibling=null,h!==null&&(M=p.deletions,M===null?(p.deletions=[h],p.flags|=16):M.push(h)),p.child=w}function SE(h,p,w,M,N){var R=p.mode;h=h.child;var $=h.sibling,se={mode:"hidden",children:w};return!(R&1)&&p.child!==h?(w=p.child,w.childLanes=0,w.pendingProps=se,p.deletions=null):(w=Eo(h,se),w.subtreeFlags=h.subtreeFlags&14680064),$!==null?M=Eo($,M):(M=Ol(M,R,N,null),M.flags|=2),M.return=p,w.return=p,w.sibling=M,p.child=w,M}function dm(h,p,w,M){return M!==null&&Vv(M),Jc(p,h.child,null,w),h=ry(p,p.pendingProps.children),h.flags|=2,p.memoizedState=null,h}function ME(h,p,w){h.lanes|=p;var M=h.alternate;M!==null&&(M.lanes|=p),ei(h.return,p,w)}function iy(h,p,w,M,N){var R=h.memoizedState;R===null?h.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:M,tail:w,tailMode:N}:(R.isBackwards=p,R.rendering=null,R.renderingStartTime=0,R.last=M,R.tail=w,R.tailMode=N)}function EE(h,p,w){var M=p.pendingProps,N=M.revealOrder,R=M.tail;if(ti(h,p,M.children,w),M=wn.current,M&2)M=M&1|2,p.flags|=128;else{if(h!==null&&h.flags&128)e:for(h=p.child;h!==null;){if(h.tag===13)h.memoizedState!==null&&ME(h,w,p);else if(h.tag===19)ME(h,w,p);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===p)break e;for(;h.sibling===null;){if(h.return===null||h.return===p)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}M&=1}if(rt(wn,M),!(p.mode&1))p.memoizedState=null;else switch(N){case"forwards":for(w=p.child,N=null;w!==null;)h=w.alternate,h!==null&&Qp(h)===null&&(N=w),w=w.sibling;w=N,w===null?(N=p.child,p.child=null):(N=w.sibling,w.sibling=null),iy(p,!1,N,w,R);break;case"backwards":for(w=null,N=p.child,p.child=null;N!==null;){if(h=N.alternate,h!==null&&Qp(h)===null){p.child=N;break}h=N.sibling,N.sibling=w,w=N,N=h}iy(p,!0,w,null,R);break;case"together":iy(p,!1,null,null,void 0);break;default:p.memoizedState=null}return p.child}function Da(h,p,w){if(h!==null&&(p.dependencies=h.dependencies),ru|=p.lanes,!(w&p.childLanes))return null;if(h!==null&&p.child!==h.child)throw Error(a(153));if(p.child!==null){for(h=p.child,w=Eo(h,h.pendingProps),p.child=w,w.return=p;h.sibling!==null;)h=h.sibling,w=w.sibling=Eo(h,h.pendingProps),w.return=p;w.sibling=null}return p.child}function QI(h,p,w){switch(p.tag){case 3:yE(p),Kc();break;case 5:BM(p);break;case 1:Rn(p.type)&&zn(p);break;case 4:Hv(p,p.stateNode.containerInfo);break;case 10:Xp(p,p.type._context,p.memoizedProps.value);break;case 13:var M=p.memoizedState;if(M!==null)return M.dehydrated!==null?(rt(wn,wn.current&1),p.flags|=128,null):w&p.child.childLanes?_E(h,p,w):(rt(wn,wn.current&1),h=Da(h,p,w),h!==null?h.sibling:null);rt(wn,wn.current&1);break;case 19:if(M=(w&p.childLanes)!==0,h.flags&128){if(M)return EE(h,p,w);p.flags|=128}var N=p.memoizedState;if(N!==null&&(N.rendering=null,N.tail=null,N.lastEffect=null),rt(wn,wn.current),M)break;return null;case 22:case 23:return p.lanes=0,gE(h,p,w)}return Da(h,p,w)}function e5(h,p){switch(Fv(p),p.tag){case 1:return Rn(p.type)&&tn(),h=p.flags,h&65536?(p.flags=h&-65537|128,p):null;case 3:return eu(),mt(an),mt(Ct),Xv(),h=p.flags,h&65536&&!(h&128)?(p.flags=h&-65537|128,p):null;case 5:return Gv(p),null;case 13:if(mt(wn),h=p.memoizedState,h!==null&&h.dehydrated!==null){if(p.alternate===null)throw Error(a(340));Kc()}return h=p.flags,h&65536?(p.flags=h&-65537|128,p):null;case 19:return mt(wn),null;case 4:return eu(),null;case 10:return hr(p.type._context),null;case 22:case 23:return wy(),null;case 24:return null;default:return null}}var hm=!1,jl=!1,t5=typeof WeakSet=="function"?WeakSet:Set,et=null;function fm(h,p){var w=h.ref;if(w!==null)if(typeof w=="function")try{w(null)}catch(M){yi(h,p,M)}else w.current=null}function sy(h,p,w){try{w()}catch(M){yi(h,p,M)}}var NE=!1;function n5(h,p){for(F(h.containerInfo),et=p;et!==null;)if(h=et,p=h.child,(h.subtreeFlags&1028)!==0&&p!==null)p.return=h,et=p;else for(;et!==null;){h=et;try{var w=h.alternate;if(h.flags&1024)switch(h.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var M=w.memoizedProps,N=w.memoizedState,R=h.stateNode,$=R.getSnapshotBeforeUpdate(h.elementType===h.type?M:Qr(h.type,M),N);R.__reactInternalSnapshotBeforeUpdate=$}break;case 3:Te&&Ve(h.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(a(163))}}catch(se){yi(h,h.return,se)}if(p=h.sibling,p!==null){p.return=h.return,et=p;break}et=h.return}return w=NE,NE=!1,w}function Ll(h,p,w){var M=p.updateQueue;if(M=M!==null?M.lastEffect:null,M!==null){var N=M=M.next;do{if((N.tag&h)===h){var R=N.destroy;N.destroy=void 0,R!==void 0&&sy(p,w,R)}N=N.next}while(N!==M)}}function ph(h,p){if(p=p.updateQueue,p=p!==null?p.lastEffect:null,p!==null){var w=p=p.next;do{if((w.tag&h)===h){var M=w.create;w.destroy=M()}w=w.next}while(w!==p)}}function ay(h){var p=h.ref;if(p!==null){var w=h.stateNode;switch(h.tag){case 5:h=ee(w);break;default:h=w}typeof p=="function"?p(h):p.current=h}}function TE(h,p,w){if(Li&&typeof Li.onCommitFiberUnmount=="function")try{Li.onCommitFiberUnmount(Nl,p)}catch{}switch(p.tag){case 0:case 11:case 14:case 15:if(h=p.updateQueue,h!==null&&(h=h.lastEffect,h!==null)){var M=h=h.next;do{var N=M,R=N.destroy;N=N.tag,R!==void 0&&(N&2||N&4)&&sy(p,w,R),M=M.next}while(M!==h)}break;case 1:if(fm(p,w),h=p.stateNode,typeof h.componentWillUnmount=="function")try{h.props=p.memoizedProps,h.state=p.memoizedState,h.componentWillUnmount()}catch($){yi(p,w,$)}break;case 5:fm(p,w);break;case 4:Te?jE(h,p,w):G&&G&&(p=p.stateNode.containerInfo,w=lt(p),ut(p,w))}}function AE(h,p,w){for(var M=p;;)if(TE(h,M,w),M.child===null||Te&&M.tag===4){if(M===p)break;for(;M.sibling===null;){if(M.return===null||M.return===p)return;M=M.return}M.sibling.return=M.return,M=M.sibling}else M.child.return=M,M=M.child}function CE(h){var p=h.alternate;p!==null&&(h.alternate=null,CE(p)),h.child=null,h.deletions=null,h.sibling=null,h.tag===5&&(p=h.stateNode,p!==null&&We(p)),h.stateNode=null,h.return=null,h.dependencies=null,h.memoizedProps=null,h.memoizedState=null,h.pendingProps=null,h.stateNode=null,h.updateQueue=null}function kE(h){return h.tag===5||h.tag===3||h.tag===4}function PE(h){e:for(;;){for(;h.sibling===null;){if(h.return===null||kE(h.return))return null;h=h.return}for(h.sibling.return=h.return,h=h.sibling;h.tag!==5&&h.tag!==6&&h.tag!==18;){if(h.flags&2||h.child===null||h.tag===4)continue e;h.child.return=h,h=h.child}if(!(h.flags&2))return h.stateNode}}function RE(h){if(Te){e:{for(var p=h.return;p!==null;){if(kE(p))break e;p=p.return}throw Error(a(160))}var w=p;switch(w.tag){case 5:p=w.stateNode,w.flags&32&&(we(p),w.flags&=-33),w=PE(h),ly(h,w,p);break;case 3:case 4:p=w.stateNode.containerInfo,w=PE(h),oy(h,w,p);break;default:throw Error(a(161))}}}function oy(h,p,w){var M=h.tag;if(M===5||M===6)h=h.stateNode,p?Be(w,h,p):$e(w,h);else if(M!==4&&(h=h.child,h!==null))for(oy(h,p,w),h=h.sibling;h!==null;)oy(h,p,w),h=h.sibling}function ly(h,p,w){var M=h.tag;if(M===5||M===6)h=h.stateNode,p?Ke(w,h,p):ze(w,h);else if(M!==4&&(h=h.child,h!==null))for(ly(h,p,w),h=h.sibling;h!==null;)ly(h,p,w),h=h.sibling}function jE(h,p,w){for(var M=p,N=!1,R,$;;){if(!N){N=M.return;e:for(;;){if(N===null)throw Error(a(160));switch(R=N.stateNode,N.tag){case 5:$=!1;break e;case 3:R=R.containerInfo,$=!0;break e;case 4:R=R.containerInfo,$=!0;break e}N=N.return}N=!0}if(M.tag===5||M.tag===6)AE(h,M,w),$?J(R,M.stateNode):Re(R,M.stateNode);else if(M.tag===18)$?ye(R,M.stateNode):Se(R,M.stateNode);else if(M.tag===4){if(M.child!==null){R=M.stateNode.containerInfo,$=!0,M.child.return=M,M=M.child;continue}}else if(TE(h,M,w),M.child!==null){M.child.return=M,M=M.child;continue}if(M===p)break;for(;M.sibling===null;){if(M.return===null||M.return===p)return;M=M.return,M.tag===4&&(N=!1)}M.sibling.return=M.return,M=M.sibling}}function cy(h,p){if(Te){switch(p.tag){case 0:case 11:case 14:case 15:Ll(3,p,p.return),ph(3,p),Ll(5,p,p.return);return;case 1:return;case 5:var w=p.stateNode;if(w!=null){var M=p.memoizedProps;h=h!==null?h.memoizedProps:M;var N=p.type,R=p.updateQueue;p.updateQueue=null,R!==null&&Xe(w,R,N,h,M,p)}return;case 6:if(p.stateNode===null)throw Error(a(162));w=p.memoizedProps,Ae(p.stateNode,h!==null?h.memoizedProps:w,w);return;case 3:Ee&&h!==null&&h.memoizedState.isDehydrated&&ue(p.stateNode.containerInfo);return;case 12:return;case 13:pm(p);return;case 19:pm(p);return;case 17:return}throw Error(a(163))}switch(p.tag){case 0:case 11:case 14:case 15:Ll(3,p,p.return),ph(3,p),Ll(5,p,p.return);return;case 12:return;case 13:pm(p);return;case 19:pm(p);return;case 3:Ee&&h!==null&&h.memoizedState.isDehydrated&&ue(p.stateNode.containerInfo);break;case 22:case 23:return}e:if(G){switch(p.tag){case 1:case 5:case 6:break e;case 3:case 4:p=p.stateNode,ut(p.containerInfo,p.pendingChildren);break e}throw Error(a(163))}}function pm(h){var p=h.updateQueue;if(p!==null){h.updateQueue=null;var w=h.stateNode;w===null&&(w=h.stateNode=new t5),p.forEach(function(M){var N=h5.bind(null,h,M);w.has(M)||(w.add(M),M.then(N,N))})}}function r5(h,p){for(et=p;et!==null;){p=et;var w=p.deletions;if(w!==null)for(var M=0;M<w.length;M++){var N=w[M];try{var R=h;Te?jE(R,N,p):AE(R,N,p);var $=N.alternate;$!==null&&($.return=null),N.return=null}catch(dt){yi(N,p,dt)}}if(w=p.child,p.subtreeFlags&12854&&w!==null)w.return=p,et=w;else for(;et!==null;){p=et;try{var se=p.flags;if(se&32&&Te&&we(p.stateNode),se&512){var Ne=p.alternate;if(Ne!==null){var Ye=Ne.ref;Ye!==null&&(typeof Ye=="function"?Ye(null):Ye.current=null)}}if(se&8192)switch(p.tag){case 13:if(p.memoizedState!==null){var st=p.alternate;(st===null||st.memoizedState===null)&&(gy=_n())}break;case 22:var Nt=p.memoizedState!==null,vt=p.alternate,nn=vt!==null&&vt.memoizedState!==null;if(w=p,Te){e:if(M=w,N=Nt,R=null,Te)for(var ht=M;;){if(ht.tag===5){if(R===null){R=ht;var jr=ht.stateNode;N?Ge(jr):Ce(ht.stateNode,ht.memoizedProps)}}else if(ht.tag===6){if(R===null){var ss=ht.stateNode;N?De(ss):te(ss,ht.memoizedProps)}}else if((ht.tag!==22&&ht.tag!==23||ht.memoizedState===null||ht===M)&&ht.child!==null){ht.child.return=ht,ht=ht.child;continue}if(ht===M)break;for(;ht.sibling===null;){if(ht.return===null||ht.return===M)break e;R===ht&&(R=null),ht=ht.return}R===ht&&(R=null),ht.sibling.return=ht.return,ht=ht.sibling}}if(Nt&&!nn&&w.mode&1){et=w;for(var xe=w.child;xe!==null;){for(w=et=xe;et!==null;){M=et;var oe=M.child;switch(M.tag){case 0:case 11:case 14:case 15:Ll(4,M,M.return);break;case 1:fm(M,M.return);var Me=M.stateNode;if(typeof Me.componentWillUnmount=="function"){var tt=M.return;try{Me.props=M.memoizedProps,Me.state=M.memoizedState,Me.componentWillUnmount()}catch(dt){yi(M,tt,dt)}}break;case 5:fm(M,M.return);break;case 22:if(M.memoizedState!==null){IE(w);continue}}oe!==null?(oe.return=M,et=oe):IE(w)}xe=xe.sibling}}}switch(se&4102){case 2:RE(p),p.flags&=-3;break;case 6:RE(p),p.flags&=-3,cy(p.alternate,p);break;case 4096:p.flags&=-4097;break;case 4100:p.flags&=-4097,cy(p.alternate,p);break;case 4:cy(p.alternate,p)}}catch(dt){yi(p,p.return,dt)}if(w=p.sibling,w!==null){w.return=p.return,et=w;break}et=p.return}}}function i5(h,p,w){et=h,LE(h)}function LE(h,p,w){for(var M=(h.mode&1)!==0;et!==null;){var N=et,R=N.child;if(N.tag===22&&M){var $=N.memoizedState!==null||hm;if(!$){var se=N.alternate,Ne=se!==null&&se.memoizedState!==null||jl;se=hm;var Ye=jl;if(hm=$,(jl=Ne)&&!Ye)for(et=N;et!==null;)$=et,Ne=$.child,$.tag===22&&$.memoizedState!==null?UE(N):Ne!==null?(Ne.return=$,et=Ne):UE(N);for(;R!==null;)et=R,LE(R),R=R.sibling;et=N,hm=se,jl=Ye}DE(h)}else N.subtreeFlags&8772&&R!==null?(R.return=N,et=R):DE(h)}}function DE(h){for(;et!==null;){var p=et;if(p.flags&8772){var w=p.alternate;try{if(p.flags&8772)switch(p.tag){case 0:case 11:case 15:jl||ph(5,p);break;case 1:var M=p.stateNode;if(p.flags&4&&!jl)if(w===null)M.componentDidMount();else{var N=p.elementType===p.type?w.memoizedProps:Qr(p.type,w.memoizedProps);M.componentDidUpdate(N,w.memoizedState,M.__reactInternalSnapshotBeforeUpdate)}var R=p.updateQueue;R!==null&&CM(p,R,M);break;case 3:var $=p.updateQueue;if($!==null){if(w=null,p.child!==null)switch(p.child.tag){case 5:w=ee(p.child.stateNode);break;case 1:w=p.child.stateNode}CM(p,$,w)}break;case 5:var se=p.stateNode;w===null&&p.flags&4&&at(se,p.type,p.memoizedProps,p);break;case 6:break;case 4:break;case 12:break;case 13:if(Ee&&p.memoizedState===null){var Ne=p.alternate;if(Ne!==null){var Ye=Ne.memoizedState;if(Ye!==null){var st=Ye.dehydrated;st!==null&&be(st)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(a(163))}jl||p.flags&512&&ay(p)}catch(Nt){yi(p,p.return,Nt)}}if(p===h){et=null;break}if(w=p.sibling,w!==null){w.return=p.return,et=w;break}et=p.return}}function IE(h){for(;et!==null;){var p=et;if(p===h){et=null;break}var w=p.sibling;if(w!==null){w.return=p.return,et=w;break}et=p.return}}function UE(h){for(;et!==null;){var p=et;try{switch(p.tag){case 0:case 11:case 15:var w=p.return;try{ph(4,p)}catch(Ne){yi(p,w,Ne)}break;case 1:var M=p.stateNode;if(typeof M.componentDidMount=="function"){var N=p.return;try{M.componentDidMount()}catch(Ne){yi(p,N,Ne)}}var R=p.return;try{ay(p)}catch(Ne){yi(p,R,Ne)}break;case 5:var $=p.return;try{ay(p)}catch(Ne){yi(p,$,Ne)}}}catch(Ne){yi(p,p.return,Ne)}if(p===h){et=null;break}var se=p.sibling;if(se!==null){se.return=p.return,et=se;break}et=p.return}}var mm=0,gm=1,xm=2,vm=3,ym=4;if(typeof Symbol=="function"&&Symbol.for){var mh=Symbol.for;mm=mh("selector.component"),gm=mh("selector.has_pseudo_class"),xm=mh("selector.role"),vm=mh("selector.test_id"),ym=mh("selector.text")}function uy(h){var p=me(h);if(p!=null){if(typeof p.memoizedProps["data-testname"]!="string")throw Error(a(364));return p}if(h=q(h),h===null)throw Error(a(362));return h.stateNode.current}function dy(h,p){switch(p.$$typeof){case mm:if(h.type===p.value)return!0;break;case gm:e:{p=p.value,h=[h,0];for(var w=0;w<h.length;){var M=h[w++],N=h[w++],R=p[N];if(M.tag!==5||!ce(M)){for(;R!=null&&dy(M,R);)N++,R=p[N];if(N===p.length){p=!0;break e}else for(M=M.child;M!==null;)h.push(M,N),M=M.sibling}}p=!1}return p;case xm:if(h.tag===5&&Pe(h.stateNode,p.value))return!0;break;case ym:if((h.tag===5||h.tag===6)&&(h=le(h),h!==null&&0<=h.indexOf(p.value)))return!0;break;case vm:if(h.tag===5&&(h=h.memoizedProps["data-testname"],typeof h=="string"&&h.toLowerCase()===p.value.toLowerCase()))return!0;break;default:throw Error(a(365))}return!1}function hy(h){switch(h.$$typeof){case mm:return"<"+(C(h.value)||"Unknown")+">";case gm:return":has("+(hy(h)||"")+")";case xm:return'[role="'+h.value+'"]';case ym:return'"'+h.value+'"';case vm:return'[data-testname="'+h.value+'"]';default:throw Error(a(365))}}function OE(h,p){var w=[];h=[h,0];for(var M=0;M<h.length;){var N=h[M++],R=h[M++],$=p[R];if(N.tag!==5||!ce(N)){for(;$!=null&&dy(N,$);)R++,$=p[R];if(R===p.length)w.push(N);else for(N=N.child;N!==null;)h.push(N,R),N=N.sibling}}return w}function fy(h,p){if(!L)throw Error(a(363));h=uy(h),h=OE(h,p),p=[],h=Array.from(h);for(var w=0;w<h.length;){var M=h[w++];if(M.tag===5)ce(M)||p.push(M.stateNode);else for(M=M.child;M!==null;)h.push(M),M=M.sibling}return p}var s5=Math.ceil,bm=l.ReactCurrentDispatcher,py=l.ReactCurrentOwner,Hn=l.ReactCurrentBatchConfig,Dt=0,Zn=null,Kn=null,_r=0,zi=0,nu=bn(0),rr=0,gh=null,ru=0,_m=0,my=0,xh=null,xi=null,gy=0,xy=1/0;function iu(){xy=_n()+500}var wm=!1,vy=null,_o=null,Sm=!1,wo=null,Mm=0,vh=0,yy=null,Em=-1,Nm=0;function ni(){return Dt&6?_n():Em!==-1?Em:Em=_n()}function So(h){return h.mode&1?Dt&2&&_r!==0?_r&-_r:Tl.transition!==null?(Nm===0&&(h=Na,Na<<=1,!(Na&4194240)&&(Na=64),Nm=h),Nm):(h=It,h!==0?h:he()):1}function rs(h,p,w){if(50<vh)throw vh=0,yy=null,Error(a(185));var M=Tm(h,p);return M===null?null:($s(M,p,w),(!(Dt&2)||M!==Zn)&&(M===Zn&&(!(Dt&2)&&(_m|=p),rr===4&&Mo(M,_r)),vi(M,w),p===1&&Dt===0&&!(h.mode&1)&&(iu(),Ks&&gi())),M)}function Tm(h,p){h.lanes|=p;var w=h.alternate;for(w!==null&&(w.lanes|=p),w=h,h=h.return;h!==null;)h.childLanes|=p,w=h.alternate,w!==null&&(w.childLanes|=p),w=h,h=h.return;return w.tag===3?w.stateNode:null}function vi(h,p){var w=h.callbackNode;$d(h,p);var M=Ml(h,h===Zn?_r:0);if(M===0)w!==null&&Xc(w),h.callbackNode=null,h.callbackPriority=0;else if(p=M&-M,h.callbackPriority!==p){if(w!=null&&Xc(w),p===1)h.tag===0?th(zE.bind(null,h)):eh(zE.bind(null,h)),ge?O(function(){Dt===0&&gi()}):ka(El,gi),w=null;else{switch(Zd(M)){case 1:w=El;break;case 4:w=Gp;break;case 16:w=Kr;break;case 536870912:w=Jd;break;default:w=Kr}w=$E(w,FE.bind(null,h))}h.callbackPriority=p,h.callbackNode=w}}function FE(h,p){if(Em=-1,Nm=0,Dt&6)throw Error(a(327));var w=h.callbackNode;if(Ul()&&h.callbackNode!==w)return null;var M=Ml(h,h===Zn?_r:0);if(M===0)return null;if(M&30||M&h.expiredLanes||p)p=Am(h,M);else{p=M;var N=Dt;Dt|=2;var R=HE();(Zn!==h||_r!==p)&&(iu(),Dl(h,p));do try{l5();break}catch(se){VE(h,se)}while(!0);qc(),bm.current=R,Dt=N,Kn!==null?p=0:(Zn=null,_r=0,p=rr)}if(p!==0){if(p===2&&(N=Ca(h),N!==0&&(M=N,p=by(h,N))),p===1)throw w=gh,Dl(h,0),Mo(h,M),vi(h,_n()),w;if(p===6)Mo(h,M);else{if(N=h.current.alternate,!(M&30)&&!a5(N)&&(p=Am(h,M),p===2&&(R=Ca(h),R!==0&&(M=R,p=by(h,R))),p===1))throw w=gh,Dl(h,0),Mo(h,M),vi(h,_n()),w;switch(h.finishedWork=N,h.finishedLanes=M,p){case 0:case 1:throw Error(a(345));case 2:Il(h,xi);break;case 3:if(Mo(h,M),(M&130023424)===M&&(p=gy+500-_n(),10<p)){if(Ml(h,0)!==0)break;if(N=h.suspendedLanes,(N&M)!==M){ni(),h.pingedLanes|=h.suspendedLanes&N;break}h.timeoutHandle=ae(Il.bind(null,h,xi),p);break}Il(h,xi);break;case 4:if(Mo(h,M),(M&4194240)===M)break;for(p=h.eventTimes,N=-1;0<M;){var $=31-Zr(M);R=1<<$,$=p[$],$>N&&(N=$),M&=~R}if(M=N,M=_n()-M,M=(120>M?120:480>M?480:1080>M?1080:1920>M?1920:3e3>M?3e3:4320>M?4320:1960*s5(M/1960))-M,10<M){h.timeoutHandle=ae(Il.bind(null,h,xi),M);break}Il(h,xi);break;case 5:Il(h,xi);break;default:throw Error(a(329))}}}return vi(h,_n()),h.callbackNode===w?FE.bind(null,h):null}function by(h,p){var w=xh;return h.current.memoizedState.isDehydrated&&(Dl(h,p).flags|=256),h=Am(h,p),h!==2&&(p=xi,xi=w,p!==null&&_y(p)),h}function _y(h){xi===null?xi=h:xi.push.apply(xi,h)}function a5(h){for(var p=h;;){if(p.flags&16384){var w=p.updateQueue;if(w!==null&&(w=w.stores,w!==null))for(var M=0;M<w.length;M++){var N=w[M],R=N.getSnapshot;N=N.value;try{if(!Di(R(),N))return!1}catch{return!1}}}if(w=p.child,p.subtreeFlags&16384&&w!==null)w.return=p,p=w;else{if(p===h)break;for(;p.sibling===null;){if(p.return===null||p.return===h)return!0;p=p.return}p.sibling.return=p.return,p=p.sibling}}return!0}function Mo(h,p){for(p&=~my,p&=~_m,h.suspendedLanes|=p,h.pingedLanes&=~p,h=h.expirationTimes;0<p;){var w=31-Zr(p),M=1<<w;h[w]=-1,p&=~M}}function zE(h){if(Dt&6)throw Error(a(327));Ul();var p=Ml(h,0);if(!(p&1))return vi(h,_n()),null;var w=Am(h,p);if(h.tag!==0&&w===2){var M=Ca(h);M!==0&&(p=M,w=by(h,M))}if(w===1)throw w=gh,Dl(h,0),Mo(h,p),vi(h,_n()),w;if(w===6)throw Error(a(345));return h.finishedWork=h.current.alternate,h.finishedLanes=p,Il(h,xi),vi(h,_n()),null}function BE(h){wo!==null&&wo.tag===0&&!(Dt&6)&&Ul();var p=Dt;Dt|=1;var w=Hn.transition,M=It;try{if(Hn.transition=null,It=1,h)return h()}finally{It=M,Hn.transition=w,Dt=p,!(Dt&6)&&gi()}}function wy(){zi=nu.current,mt(nu)}function Dl(h,p){h.finishedWork=null,h.finishedLanes=0;var w=h.timeoutHandle;if(w!==je&&(h.timeoutHandle=je,_e(w)),Kn!==null)for(w=Kn.return;w!==null;){var M=w;switch(Fv(M),M.tag){case 1:M=M.type.childContextTypes,M!=null&&tn();break;case 3:eu(),mt(an),mt(Ct),Xv();break;case 5:Gv(M);break;case 4:eu();break;case 13:mt(wn);break;case 19:mt(wn);break;case 10:hr(M.type._context);break;case 22:case 23:wy()}w=w.return}if(Zn=h,Kn=h=Eo(h.current,null),_r=zi=p,rr=0,gh=null,my=_m=ru=0,xi=xh=null,Ii!==null){for(p=0;p<Ii.length;p++)if(w=Ii[p],M=w.interleaved,M!==null){w.interleaved=null;var N=M.next,R=w.pending;if(R!==null){var $=R.next;R.next=N,M.next=$}w.pending=M}Ii=null}return h}function VE(h,p){do{var w=Kn;try{if(qc(),em.current=am,tm){for(var M=jn.memoizedState;M!==null;){var N=M.queue;N!==null&&(N.pending=null),M=M.next}tm=!1}if(tu=0,fr=kr=jn=null,oh=!1,lh=0,py.current=null,w===null||w.return===null){rr=1,gh=p,Kn=null;break}e:{var R=h,$=w.return,se=w,Ne=p;if(p=_r,se.flags|=32768,Ne!==null&&typeof Ne=="object"&&typeof Ne.then=="function"){var Ye=Ne,st=se,Nt=st.tag;if(!(st.mode&1)&&(Nt===0||Nt===11||Nt===15)){var vt=st.alternate;vt?(st.updateQueue=vt.updateQueue,st.memoizedState=vt.memoizedState,st.lanes=vt.lanes):(st.updateQueue=null,st.memoizedState=null)}var nn=cE($);if(nn!==null){nn.flags&=-257,uE(nn,$,se,R,p),nn.mode&1&&lE(R,Ye,p),p=nn,Ne=Ye;var ht=p.updateQueue;if(ht===null){var jr=new Set;jr.add(Ne),p.updateQueue=jr}else ht.add(Ne);break e}else{if(!(p&1)){lE(R,Ye,p),Sy();break e}Ne=Error(a(426))}}else if(mn&&se.mode&1){var ss=cE($);if(ss!==null){!(ss.flags&65536)&&(ss.flags|=256),uE(ss,$,se,R,p),Vv(Ne);break e}}R=Ne,rr!==4&&(rr=2),xh===null?xh=[R]:xh.push(R),Ne=Qv(Ne,se),se=$;do{switch(se.tag){case 3:se.flags|=65536,p&=-p,se.lanes|=p;var xe=aE(se,Ne,p);AM(se,xe);break e;case 1:R=Ne;var oe=se.type,Me=se.stateNode;if(!(se.flags&128)&&(typeof oe.getDerivedStateFromError=="function"||Me!==null&&typeof Me.componentDidCatch=="function"&&(_o===null||!_o.has(Me)))){se.flags|=65536,p&=-p,se.lanes|=p;var tt=oE(se,R,p);AM(se,tt);break e}}se=se.return}while(se!==null)}WE(w)}catch(dt){p=dt,Kn===w&&w!==null&&(Kn=w=w.return);continue}break}while(!0)}function HE(){var h=bm.current;return bm.current=am,h===null?am:h}function Sy(){(rr===0||rr===3||rr===2)&&(rr=4),Zn===null||!(ru&268435455)&&!(_m&268435455)||Mo(Zn,_r)}function Am(h,p){var w=Dt;Dt|=2;var M=HE();Zn===h&&_r===p||Dl(h,p);do try{o5();break}catch(N){VE(h,N)}while(!0);if(qc(),Dt=w,bm.current=M,Kn!==null)throw Error(a(261));return Zn=null,_r=0,rr}function o5(){for(;Kn!==null;)GE(Kn)}function l5(){for(;Kn!==null&&!Kd();)GE(Kn)}function GE(h){var p=qE(h.alternate,h,zi);h.memoizedProps=h.pendingProps,p===null?WE(h):Kn=p,py.current=null}function WE(h){var p=h;do{var w=p.alternate;if(h=p.return,p.flags&32768){if(w=e5(w,p),w!==null){w.flags&=32767,Kn=w;return}if(h!==null)h.flags|=32768,h.subtreeFlags=0,h.deletions=null;else{rr=6,Kn=null;return}}else if(w=KI(w,p,zi),w!==null){Kn=w;return}if(p=p.sibling,p!==null){Kn=p;return}Kn=p=h}while(p!==null);rr===0&&(rr=5)}function Il(h,p){var w=It,M=Hn.transition;try{Hn.transition=null,It=1,c5(h,p,w)}finally{Hn.transition=M,It=w}return null}function c5(h,p,w){do Ul();while(wo!==null);if(Dt&6)throw Error(a(327));var M=h.finishedWork,N=h.finishedLanes;if(M===null)return null;if(h.finishedWork=null,h.finishedLanes=0,M===h.current)throw Error(a(177));h.callbackNode=null,h.callbackPriority=0;var R=M.lanes|M.childLanes;if(xo(h,R),h===Zn&&(Kn=Zn=null,_r=0),!(M.subtreeFlags&2064)&&!(M.flags&2064)||Sm||(Sm=!0,$E(Kr,function(){return Ul(),null})),R=(M.flags&15990)!==0,M.subtreeFlags&15990||R){R=Hn.transition,Hn.transition=null;var $=It;It=1;var se=Dt;Dt|=4,py.current=null,n5(h,M),r5(h,M),z(h.containerInfo),h.current=M,i5(M),Hp(),Dt=se,It=$,Hn.transition=R}else h.current=M;if(Sm&&(Sm=!1,wo=h,Mm=N),R=h.pendingLanes,R===0&&(_o=null),Qd(M.stateNode),vi(h,_n()),p!==null)for(w=h.onRecoverableError,M=0;M<p.length;M++)w(p[M]);if(wm)throw wm=!1,h=vy,vy=null,h;return Mm&1&&h.tag!==0&&Ul(),R=h.pendingLanes,R&1?h===yy?vh++:(vh=0,yy=h):vh=0,gi(),null}function Ul(){if(wo!==null){var h=Zd(Mm),p=Hn.transition,w=It;try{if(Hn.transition=null,It=16>h?16:h,wo===null)var M=!1;else{if(h=wo,wo=null,Mm=0,Dt&6)throw Error(a(331));var N=Dt;for(Dt|=4,et=h.current;et!==null;){var R=et,$=R.child;if(et.flags&16){var se=R.deletions;if(se!==null){for(var Ne=0;Ne<se.length;Ne++){var Ye=se[Ne];for(et=Ye;et!==null;){var st=et;switch(st.tag){case 0:case 11:case 15:Ll(8,st,R)}var Nt=st.child;if(Nt!==null)Nt.return=st,et=Nt;else for(;et!==null;){st=et;var vt=st.sibling,nn=st.return;if(CE(st),st===Ye){et=null;break}if(vt!==null){vt.return=nn,et=vt;break}et=nn}}}var ht=R.alternate;if(ht!==null){var jr=ht.child;if(jr!==null){ht.child=null;do{var ss=jr.sibling;jr.sibling=null,jr=ss}while(jr!==null)}}et=R}}if(R.subtreeFlags&2064&&$!==null)$.return=R,et=$;else e:for(;et!==null;){if(R=et,R.flags&2048)switch(R.tag){case 0:case 11:case 15:Ll(9,R,R.return)}var xe=R.sibling;if(xe!==null){xe.return=R.return,et=xe;break e}et=R.return}}var oe=h.current;for(et=oe;et!==null;){$=et;var Me=$.child;if($.subtreeFlags&2064&&Me!==null)Me.return=$,et=Me;else e:for($=oe;et!==null;){if(se=et,se.flags&2048)try{switch(se.tag){case 0:case 11:case 15:ph(9,se)}}catch(dt){yi(se,se.return,dt)}if(se===$){et=null;break e}var tt=se.sibling;if(tt!==null){tt.return=se.return,et=tt;break e}et=se.return}}if(Dt=N,gi(),Li&&typeof Li.onPostCommitFiberRoot=="function")try{Li.onPostCommitFiberRoot(Nl,h)}catch{}M=!0}return M}finally{It=w,Hn.transition=p}}return!1}function XE(h,p,w){p=Qv(w,p),p=aE(h,p,1),bo(h,p),p=ni(),h=Tm(h,1),h!==null&&($s(h,1,p),vi(h,p))}function yi(h,p,w){if(h.tag===3)XE(h,h,w);else for(;p!==null;){if(p.tag===3){XE(p,h,w);break}else if(p.tag===1){var M=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof M.componentDidCatch=="function"&&(_o===null||!_o.has(M))){h=Qv(w,h),h=oE(p,h,1),bo(p,h),h=ni(),p=Tm(p,1),p!==null&&($s(p,1,h),vi(p,h));break}}p=p.return}}function u5(h,p,w){var M=h.pingCache;M!==null&&M.delete(p),p=ni(),h.pingedLanes|=h.suspendedLanes&w,Zn===h&&(_r&w)===w&&(rr===4||rr===3&&(_r&130023424)===_r&&500>_n()-gy?Dl(h,0):my|=w),vi(h,p)}function YE(h,p){p===0&&(h.mode&1?(p=Ta,Ta<<=1,!(Ta&130023424)&&(Ta=4194304)):p=1);var w=ni();h=Tm(h,p),h!==null&&($s(h,p,w),vi(h,w))}function d5(h){var p=h.memoizedState,w=0;p!==null&&(w=p.retryLane),YE(h,w)}function h5(h,p){var w=0;switch(h.tag){case 13:var M=h.stateNode,N=h.memoizedState;N!==null&&(w=N.retryLane);break;case 19:M=h.stateNode;break;default:throw Error(a(314))}M!==null&&M.delete(p),YE(h,w)}var qE;qE=function(h,p,w){if(h!==null)if(h.memoizedProps!==p.pendingProps||an.current)Fi=!0;else{if(!(h.lanes&w)&&!(p.flags&128))return Fi=!1,QI(h,p,w);Fi=!!(h.flags&131072)}else Fi=!1,mn&&p.flags&1048576&&LM(p,Kp,p.index);switch(p.lanes=0,p.tag){case 2:var M=p.type;h!==null&&(h.alternate=null,p.alternate=null,p.flags|=2),h=p.pendingProps;var N=ur(p,Ct.current);Bn(p,w),N=qv(null,p,M,h,N,w);var R=$v();return p.flags|=1,typeof N=="object"&&N!==null&&typeof N.render=="function"&&N.$$typeof===void 0?(p.tag=1,p.memoizedState=null,p.updateQueue=null,Rn(M)?(R=!0,zn(p)):R=!1,p.memoizedState=N.state!==null&&N.state!==void 0?N.state:null,Dv(p),N.updater=$p,p.stateNode=N,N._reactInternals=p,Uv(p,M,h,w),p=ny(null,p,M,!0,R,w)):(p.tag=0,mn&&R&&Ov(p),ti(null,p,N,w),p=p.child),p;case 16:M=p.elementType;e:{switch(h!==null&&(h.alternate=null,p.alternate=null,p.flags|=2),h=p.pendingProps,N=M._init,M=N(M._payload),p.type=M,N=p.tag=p5(M),h=Qr(M,h),N){case 0:p=ty(null,p,M,h,w);break e;case 1:p=vE(null,p,M,h,w);break e;case 11:p=fE(null,p,M,h,w);break e;case 14:p=pE(null,p,M,Qr(M.type,h),w);break e}throw Error(a(306,M,""))}return p;case 0:return M=p.type,N=p.pendingProps,N=p.elementType===M?N:Qr(M,N),ty(h,p,M,N,w);case 1:return M=p.type,N=p.pendingProps,N=p.elementType===M?N:Qr(M,N),vE(h,p,M,N,w);case 3:e:{if(yE(p),h===null)throw Error(a(387));M=p.pendingProps,R=p.memoizedState,N=R.element,TM(h,p),qp(p,M,null,w);var $=p.memoizedState;if(M=$.element,Ee&&R.isDehydrated)if(R={element:M,isDehydrated:!1,cache:$.cache,transitions:$.transitions},p.updateQueue.baseState=R,p.memoizedState=R,p.flags&256){N=Error(a(423)),p=bE(h,p,M,w,N);break e}else if(M!==N){N=Error(a(424)),p=bE(h,p,M,w,N);break e}else for(Ee&&(Oi=qn(p.stateNode.containerInfo),Ui=p,mn=!0,ws=null,nh=!1),w=zM(p,null,M,w),p.child=w;w;)w.flags=w.flags&-3|4096,w=w.sibling;else{if(Kc(),M===N){p=Da(h,p,w);break e}ti(h,p,M,w)}p=p.child}return p;case 5:return BM(p),h===null&&Bv(p),M=p.type,N=p.pendingProps,R=h!==null?h.memoizedProps:null,$=N.children,ie(M,N)?$=null:R!==null&&ie(M,R)&&(p.flags|=32),xE(h,p),ti(h,p,$,w),p.child;case 6:return h===null&&Bv(p),null;case 13:return _E(h,p,w);case 4:return Hv(p,p.stateNode.containerInfo),M=p.pendingProps,h===null?p.child=Jc(p,null,M,w):ti(h,p,M,w),p.child;case 11:return M=p.type,N=p.pendingProps,N=p.elementType===M?N:Qr(M,N),fE(h,p,M,N,w);case 7:return ti(h,p,p.pendingProps,w),p.child;case 8:return ti(h,p,p.pendingProps.children,w),p.child;case 12:return ti(h,p,p.pendingProps.children,w),p.child;case 10:e:{if(M=p.type._context,N=p.pendingProps,R=p.memoizedProps,$=N.value,Xp(p,M,$),R!==null)if(Di(R.value,$)){if(R.children===N.children&&!an.current){p=Da(h,p,w);break e}}else for(R=p.child,R!==null&&(R.return=p);R!==null;){var se=R.dependencies;if(se!==null){$=R.child;for(var Ne=se.firstContext;Ne!==null;){if(Ne.context===M){if(R.tag===1){Ne=Pa(-1,w&-w),Ne.tag=2;var Ye=R.updateQueue;if(Ye!==null){Ye=Ye.shared;var st=Ye.pending;st===null?Ne.next=Ne:(Ne.next=st.next,st.next=Ne),Ye.pending=Ne}}R.lanes|=w,Ne=R.alternate,Ne!==null&&(Ne.lanes|=w),ei(R.return,w,p),se.lanes|=w;break}Ne=Ne.next}}else if(R.tag===10)$=R.type===p.type?null:R.child;else if(R.tag===18){if($=R.return,$===null)throw Error(a(341));$.lanes|=w,se=$.alternate,se!==null&&(se.lanes|=w),ei($,w,p),$=R.sibling}else $=R.child;if($!==null)$.return=R;else for($=R;$!==null;){if($===p){$=null;break}if(R=$.sibling,R!==null){R.return=$.return,$=R;break}$=$.return}R=$}ti(h,p,N.children,w),p=p.child}return p;case 9:return N=p.type,M=p.pendingProps.children,Bn(p,w),N=Vn(N),M=M(N),p.flags|=1,ti(h,p,M,w),p.child;case 14:return M=p.type,N=Qr(M,p.pendingProps),N=Qr(M.type,N),pE(h,p,M,N,w);case 15:return mE(h,p,p.type,p.pendingProps,w);case 17:return M=p.type,N=p.pendingProps,N=p.elementType===M?N:Qr(M,N),h!==null&&(h.alternate=null,p.alternate=null,p.flags|=2),p.tag=1,Rn(M)?(h=!0,zn(p)):h=!1,Bn(p,w),RM(p,M,N),Uv(p,M,N,w),ny(null,p,M,!0,h,w);case 19:return EE(h,p,w);case 22:return gE(h,p,w)}throw Error(a(156,p.tag))};function $E(h,p){return ka(h,p)}function f5(h,p,w,M){this.tag=h,this.key=w,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=M,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function is(h,p,w,M){return new f5(h,p,w,M)}function My(h){return h=h.prototype,!(!h||!h.isReactComponent)}function p5(h){if(typeof h=="function")return My(h)?1:0;if(h!=null){if(h=h.$$typeof,h===_)return 11;if(h===y)return 14}return 2}function Eo(h,p){var w=h.alternate;return w===null?(w=is(h.tag,p,h.key,h.mode),w.elementType=h.elementType,w.type=h.type,w.stateNode=h.stateNode,w.alternate=h,h.alternate=w):(w.pendingProps=p,w.type=h.type,w.flags=0,w.subtreeFlags=0,w.deletions=null),w.flags=h.flags&14680064,w.childLanes=h.childLanes,w.lanes=h.lanes,w.child=h.child,w.memoizedProps=h.memoizedProps,w.memoizedState=h.memoizedState,w.updateQueue=h.updateQueue,p=h.dependencies,w.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},w.sibling=h.sibling,w.index=h.index,w.ref=h.ref,w}function Cm(h,p,w,M,N,R){var $=2;if(M=h,typeof h=="function")My(h)&&($=1);else if(typeof h=="string")$=5;else e:switch(h){case d:return Ol(w.children,N,R,p);case f:$=8,N|=8;break;case m:return h=is(12,w,p,N|2),h.elementType=m,h.lanes=R,h;case b:return h=is(13,w,p,N),h.elementType=b,h.lanes=R,h;case x:return h=is(19,w,p,N),h.elementType=x,h.lanes=R,h;case E:return km(w,N,R,p);default:if(typeof h=="object"&&h!==null)switch(h.$$typeof){case g:$=10;break e;case v:$=9;break e;case _:$=11;break e;case y:$=14;break e;case S:$=16,M=null;break e}throw Error(a(130,h==null?h:typeof h,""))}return p=is($,w,p,N),p.elementType=h,p.type=M,p.lanes=R,p}function Ol(h,p,w,M){return h=is(7,h,M,p),h.lanes=w,h}function km(h,p,w,M){return h=is(22,h,M,p),h.elementType=E,h.lanes=w,h.stateNode={},h}function Ey(h,p,w){return h=is(6,h,null,p),h.lanes=w,h}function Ny(h,p,w){return p=is(4,h.children!==null?h.children:[],h.key,p),p.lanes=w,p.stateNode={containerInfo:h.containerInfo,pendingChildren:null,implementation:h.implementation},p}function m5(h,p,w,M,N){this.tag=p,this.containerInfo=h,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=je,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Wc(0),this.expirationTimes=Wc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wc(0),this.identifierPrefix=M,this.onRecoverableError=N,Ee&&(this.mutableSourceEagerHydrationData=null)}function ZE(h,p,w,M,N,R,$,se,Ne){return h=new m5(h,p,w,se,Ne),p===1?(p=1,R===!0&&(p|=8)):p=0,R=is(3,null,null,p),h.current=R,R.stateNode=h,R.memoizedState={element:M,isDehydrated:w,cache:null,transitions:null},Dv(R),h}function KE(h){if(!h)return yr;h=h._reactInternals;e:{if(k(h)!==h||h.tag!==1)throw Error(a(170));var p=h;do{switch(p.tag){case 3:p=p.stateNode.context;break e;case 1:if(Rn(p.type)){p=p.stateNode.__reactInternalMemoizedMergedChildContext;break e}}p=p.return}while(p!==null);throw Error(a(171))}if(h.tag===1){var w=h.type;if(Rn(w))return qs(h,w,p)}return p}function JE(h){var p=h._reactInternals;if(p===void 0)throw typeof h.render=="function"?Error(a(188)):(h=Object.keys(h).join(","),Error(a(268,h)));return h=B(p),h===null?null:h.stateNode}function QE(h,p){if(h=h.memoizedState,h!==null&&h.dehydrated!==null){var w=h.retryLane;h.retryLane=w!==0&&w<p?w:p}}function Ty(h,p){QE(h,p),(h=h.alternate)&&QE(h,p)}function g5(h){return h=B(h),h===null?null:h.stateNode}function x5(){return null}return n.attemptContinuousHydration=function(h){if(h.tag===13){var p=ni();rs(h,134217728,p),Ty(h,134217728)}},n.attemptHydrationAtCurrentPriority=function(h){if(h.tag===13){var p=ni(),w=So(h);rs(h,w,p),Ty(h,w)}},n.attemptSynchronousHydration=function(h){switch(h.tag){case 3:var p=h.stateNode;if(p.current.memoizedState.isDehydrated){var w=Aa(p.pendingLanes);w!==0&&(Zs(p,w|1),vi(p,_n()),!(Dt&6)&&(iu(),gi()))}break;case 13:var M=ni();BE(function(){return rs(h,1,M)}),Ty(h,1)}},n.batchedUpdates=function(h,p){var w=Dt;Dt|=1;try{return h(p)}finally{Dt=w,Dt===0&&(iu(),Ks&&gi())}},n.createComponentSelector=function(h){return{$$typeof:mm,value:h}},n.createContainer=function(h,p,w,M,N,R,$){return ZE(h,p,!1,null,w,M,N,R,$)},n.createHasPseudoClassSelector=function(h){return{$$typeof:gm,value:h}},n.createHydrationContainer=function(h,p,w,M,N,R,$,se,Ne){return h=ZE(w,M,!0,h,N,R,$,se,Ne),h.context=KE(null),w=h.current,M=ni(),N=So(w),R=Pa(M,N),R.callback=p??null,bo(w,R),h.current.lanes=N,$s(h,N,M),vi(h,M),h},n.createPortal=function(h,p,w){var M=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:M==null?null:""+M,children:h,containerInfo:p,implementation:w}},n.createRoleSelector=function(h){return{$$typeof:xm,value:h}},n.createTestNameSelector=function(h){return{$$typeof:vm,value:h}},n.createTextSelector=function(h){return{$$typeof:ym,value:h}},n.deferredUpdates=function(h){var p=It,w=Hn.transition;try{return Hn.transition=null,It=16,h()}finally{It=p,Hn.transition=w}},n.discreteUpdates=function(h,p,w,M,N){var R=It,$=Hn.transition;try{return Hn.transition=null,It=1,h(p,w,M,N)}finally{It=R,Hn.transition=$,Dt===0&&iu()}},n.findAllNodes=fy,n.findBoundingRects=function(h,p){if(!L)throw Error(a(363));p=fy(h,p),h=[];for(var w=0;w<p.length;w++)h.push(fe(p[w]));for(p=h.length-1;0<p;p--){w=h[p];for(var M=w.x,N=M+w.width,R=w.y,$=R+w.height,se=p-1;0<=se;se--)if(p!==se){var Ne=h[se],Ye=Ne.x,st=Ye+Ne.width,Nt=Ne.y,vt=Nt+Ne.height;if(M>=Ye&&R>=Nt&&N<=st&&$<=vt){h.splice(p,1);break}else if(M!==Ye||w.width!==Ne.width||vt<R||Nt>$){if(!(R!==Nt||w.height!==Ne.height||st<M||Ye>N)){Ye>M&&(Ne.width+=Ye-M,Ne.x=M),st<N&&(Ne.width=N-Ye),h.splice(p,1);break}}else{Nt>R&&(Ne.height+=Nt-R,Ne.y=R),vt<$&&(Ne.height=$-Nt),h.splice(p,1);break}}}return h},n.findHostInstance=JE,n.findHostInstanceWithNoPortals=function(h){return h=H(h),h=h!==null?V(h):null,h===null?null:h.stateNode},n.findHostInstanceWithWarning=function(h){return JE(h)},n.flushControlled=function(h){var p=Dt;Dt|=1;var w=Hn.transition,M=It;try{Hn.transition=null,It=1,h()}finally{It=M,Hn.transition=w,Dt=p,Dt===0&&(iu(),gi())}},n.flushPassiveEffects=Ul,n.flushSync=BE,n.focusWithin=function(h,p){if(!L)throw Error(a(363));for(h=uy(h),p=OE(h,p),p=Array.from(p),h=0;h<p.length;){var w=p[h++];if(!ce(w)){if(w.tag===5&&Ue(w.stateNode))return!0;for(w=w.child;w!==null;)p.push(w),w=w.sibling}}return!1},n.getCurrentUpdatePriority=function(){return It},n.getFindAllNodesFailureDescription=function(h,p){if(!L)throw Error(a(363));var w=0,M=[];h=[uy(h),0];for(var N=0;N<h.length;){var R=h[N++],$=h[N++],se=p[$];if((R.tag!==5||!ce(R))&&(dy(R,se)&&(M.push(hy(se)),$++,$>w&&(w=$)),$<p.length))for(R=R.child;R!==null;)h.push(R,$),R=R.sibling}if(w<p.length){for(h=[];w<p.length;w++)h.push(hy(p[w]));return`findAllNodes was able to match part of the selector:
  `+(M.join(" > ")+`

No matching component was found for:
  `)+h.join(" > ")}return null},n.getPublicRootInstance=function(h){if(h=h.current,!h.child)return null;switch(h.child.tag){case 5:return ee(h.child.stateNode);default:return h.child.stateNode}},n.injectIntoDevTools=function(h){if(h={bundleType:h.bundleType,version:h.version,rendererPackageName:h.rendererPackageName,rendererConfig:h.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:l.ReactCurrentDispatcher,findHostInstanceByFiber:g5,findFiberByHostInstance:h.findFiberByHostInstance||x5,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")h=!1;else{var p=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(p.isDisabled||!p.supportsFiber)h=!0;else{try{Nl=p.inject(h),Li=p}catch{}h=!!p.checkDCE}}return h},n.isAlreadyRendering=function(){return!1},n.observeVisibleRects=function(h,p,w,M){if(!L)throw Error(a(363));h=fy(h,p);var N=Fe(h,w,M).disconnect;return{disconnect:function(){N()}}},n.registerMutableSourceForHydration=function(h,p){var w=p._getVersion;w=w(p._source),h.mutableSourceEagerHydrationData==null?h.mutableSourceEagerHydrationData=[p,w]:h.mutableSourceEagerHydrationData.push(p,w)},n.runWithPriority=function(h,p){var w=It;try{return It=h,p()}finally{It=w}},n.shouldError=function(){return null},n.shouldSuspend=function(){return!1},n.updateContainer=function(h,p,w,M){var N=p.current,R=ni(),$=So(N);return w=KE(w),p.context===null?p.context=w:p.pendingContext=w,p=Pa(R,$),p.payload={element:h},M=M===void 0?null:M,M!==null&&(p.callback=M),bo(N,p),h=rs(N,$,R),h!==null&&Yp(h,N,$),$},n};qD.exports=wZ;var SZ=qD.exports;const MZ=lk(SZ);var $D={exports:{}},ZD={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(I,F){var z=I.length;I.push(F);e:for(;0<z;){var U=z-1>>>1,Z=I[U];if(0<i(Z,F))I[U]=F,I[z]=Z,z=U;else break e}}function n(I){return I.length===0?null:I[0]}function r(I){if(I.length===0)return null;var F=I[0],z=I.pop();if(z!==F){I[0]=z;e:for(var U=0,Z=I.length,K=Z>>>1;U<K;){var ne=2*(U+1)-1,ie=I[ne],de=ne+1,ae=I[de];if(0>i(ie,z))de<Z&&0>i(ae,ie)?(I[U]=ae,I[de]=z,U=de):(I[U]=ie,I[ne]=z,U=ne);else if(de<Z&&0>i(ae,z))I[U]=ae,I[de]=z,U=de;else break e}}return F}function i(I,F){var z=I.sortIndex-F.sortIndex;return z!==0?z:I.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,f=null,m=3,g=!1,v=!1,_=!1,b=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(I){for(var F=n(u);F!==null;){if(F.callback===null)r(u);else if(F.startTime<=I)r(u),F.sortIndex=F.expirationTime,e(c,F);else break;F=n(u)}}function E(I){if(_=!1,S(I),!v)if(n(c)!==null)v=!0,ee(A);else{var F=n(u);F!==null&&re(E,F.startTime-I)}}function A(I,F){v=!1,_&&(_=!1,x(j),j=-1),g=!0;var z=m;try{for(S(F),f=n(c);f!==null&&(!(f.expirationTime>F)||I&&!H());){var U=f.callback;if(typeof U=="function"){f.callback=null,m=f.priorityLevel;var Z=U(f.expirationTime<=F);F=t.unstable_now(),typeof Z=="function"?f.callback=Z:f===n(c)&&r(c),S(F)}else r(c);f=n(c)}if(f!==null)var K=!0;else{var ne=n(u);ne!==null&&re(E,ne.startTime-F),K=!1}return K}finally{f=null,m=z,g=!1}}var T=!1,C=null,j=-1,k=5,P=-1;function H(){return!(t.unstable_now()-P<k)}function B(){if(C!==null){var I=t.unstable_now();P=I;var F=!0;try{F=C(!0,I)}finally{F?Y():(T=!1,C=null)}}else T=!1}var Y;if(typeof y=="function")Y=function(){y(B)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,Q=V.port2;V.port1.onmessage=B,Y=function(){Q.postMessage(null)}}else Y=function(){b(B,0)};function ee(I){C=I,T||(T=!0,Y())}function re(I,F){j=b(function(){I(t.unstable_now())},F)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(I){I.callback=null},t.unstable_continueExecution=function(){v||g||(v=!0,ee(A))},t.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<I?Math.floor(1e3/I):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(I){switch(m){case 1:case 2:case 3:var F=3;break;default:F=m}var z=m;m=F;try{return I()}finally{m=z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(I,F){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var z=m;m=I;try{return F()}finally{m=z}},t.unstable_scheduleCallback=function(I,F,z){var U=t.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?U+z:U):z=U,I){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=z+Z,I={id:d++,callback:F,priorityLevel:I,startTime:z,expirationTime:Z,sortIndex:-1},z>U?(I.sortIndex=z,e(u,I),n(c)===null&&I===n(u)&&(_?(x(j),j=-1):_=!0,re(E,z-U))):(I.sortIndex=Z,e(c,I),v||g||(v=!0,ee(A))),I},t.unstable_shouldYield=H,t.unstable_wrapCallback=function(I){var F=m;return function(){var z=m;m=F;try{return I.apply(this,arguments)}finally{m=z}}}})(ZD);$D.exports=ZD;var f3=$D.exports;const EZ=t=>typeof t=="object"&&typeof t.then=="function",Wg=[];function NZ(t,e,n=(r,i)=>r===i){if(t===e)return!0;if(!t||!e)return!1;const r=t.length;if(e.length!==r)return!1;for(let i=0;i<r;i++)if(!n(t[i],e[i]))return!1;return!0}function TZ(t,e=null,n=!1,r={}){e===null&&(e=[t]);for(const s of Wg)if(NZ(e,s.keys,s.equal)){if(n)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return r.lifespan&&r.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,r.lifespan)),s.response;if(!n)throw s.promise}const i={keys:e,equal:r.equal,remove:()=>{const s=Wg.indexOf(i);s!==-1&&Wg.splice(s,1)},promise:(EZ(t)?t:t(...e)).then(s=>{i.response=s,r.lifespan&&r.lifespan>0&&(i.timeout=setTimeout(i.remove,r.lifespan))}).catch(s=>i.error=s)};if(Wg.push(i),!n)throw i.promise}const AZ=(t,e,n)=>TZ(t,e,!1,n),SM={},CZ=t=>void Object.assign(SM,t);function kZ(t,e){function n(d,{args:f=[],attach:m,...g},v){let _=`${d[0].toUpperCase()}${d.slice(1)}`,b;if(d==="primitive"){if(g.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const x=g.object;b=Du(x,{type:d,root:v,attach:m,primitive:!0})}else{const x=SM[_];if(!x)throw new Error(`R3F: ${_} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(f))throw new Error("R3F: The args prop must be an array!");b=Du(new x(...f),{type:d,root:v,attach:m,memoizedProps:{args:f}})}return b.__r3f.attach===void 0&&(b instanceof At?b.__r3f.attach="geometry":b instanceof Cr&&(b.__r3f.attach="material")),_!=="inject"&&sb(b,g),b}function r(d,f){let m=!1;if(f){var g,v;(g=f.__r3f)!=null&&g.attach?ib(d,f,f.__r3f.attach):f.isObject3D&&d.isObject3D&&(d.add(f),m=!0),m||(v=d.__r3f)==null||v.objects.push(f),f.__r3f||Du(f,{}),f.__r3f.parent=d,F_(f),Iu(f)}}function i(d,f,m){let g=!1;if(f){var v,_;if((v=f.__r3f)!=null&&v.attach)ib(d,f,f.__r3f.attach);else if(f.isObject3D&&d.isObject3D){f.parent=d,f.dispatchEvent({type:"added"});const b=d.children.filter(y=>y!==f),x=b.indexOf(m);d.children=[...b.slice(0,x),f,...b.slice(x)],g=!0}g||(_=d.__r3f)==null||_.objects.push(f),f.__r3f||Du(f,{}),f.__r3f.parent=d,F_(f),Iu(f)}}function s(d,f,m=!1){d&&[...d].forEach(g=>a(f,g,m))}function a(d,f,m){if(f){var g,v,_;if(f.__r3f&&(f.__r3f.parent=null),(g=d.__r3f)!=null&&g.objects&&(d.__r3f.objects=d.__r3f.objects.filter(E=>E!==f)),(v=f.__r3f)!=null&&v.attach)v3(d,f,f.__r3f.attach);else if(f.isObject3D&&d.isObject3D){var b;d.remove(f),(b=f.__r3f)!=null&&b.root&&OZ(N0(f),f)}const y=(_=f.__r3f)==null?void 0:_.primitive,S=!y&&(m===void 0?f.dispose!==null:m);if(!y){var x;s((x=f.__r3f)==null?void 0:x.objects,f,S),s(f.children,f,S)}if(delete f.__r3f,S&&f.dispose&&f.type!=="Scene"){const E=()=>{try{f.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?f3.unstable_scheduleCallback(f3.unstable_IdlePriority,E):E()}Iu(d)}}function l(d,f,m,g){var v;const _=(v=d.__r3f)==null?void 0:v.parent;if(!_)return;const b=n(f,m,d.__r3f.root);if(d.children){for(const x of d.children)x.__r3f&&r(b,x);d.children=d.children.filter(x=>!x.__r3f)}d.__r3f.objects.forEach(x=>r(b,x)),d.__r3f.objects=[],d.__r3f.autoRemovedBeforeAppend||a(_,d),b.parent&&(b.__r3f.autoRemovedBeforeAppend=!0),r(_,b),b.raycast&&b.__r3f.eventCount&&N0(b).getState().internal.interaction.push(b),[g,g.alternate].forEach(x=>{x!==null&&(x.stateNode=b,x.ref&&(typeof x.ref=="function"?x.ref(b):x.ref.current=b))})}const c=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:MZ({createInstance:n,removeChild:a,appendChild:r,appendInitialChild:r,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(d,f)=>{if(!f)return;const m=d.getState().scene;m.__r3f&&(m.__r3f.root=d,r(m,f))},removeChildFromContainer:(d,f)=>{f&&a(d.getState().scene,f)},insertInContainerBefore:(d,f,m)=>{if(!f||!m)return;const g=d.getState().scene;g.__r3f&&i(g,f,m)},getRootHostContext:()=>null,getChildHostContext:d=>d,finalizeInitialChildren(d){var f;return!!((f=d==null?void 0:d.__r3f)!=null?f:{}).handlers},prepareUpdate(d,f,m,g){var v;if(((v=d==null?void 0:d.__r3f)!=null?v:{}).primitive&&g.object&&g.object!==d)return[!0];{const{args:b=[],children:x,...y}=g,{args:S=[],children:E,...A}=m;if(!Array.isArray(b))throw new Error("R3F: the args prop must be an array!");if(b.some((C,j)=>C!==S[j]))return[!0];const T=rI(d,y,A,!0);return T.changes.length?[!1,T]:null}},commitUpdate(d,[f,m],g,v,_,b){f?l(d,g,_,b):sb(d,m)},commitMount(d,f,m,g){var v;const _=(v=d.__r3f)!=null?v:{};d.raycast&&_.handlers&&_.eventCount&&N0(d).getState().internal.interaction.push(d)},getPublicInstance:d=>d,prepareForCommit:()=>null,preparePortalMount:d=>Du(d.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(d){var f;const{attach:m,parent:g}=(f=d.__r3f)!=null?f:{};m&&g&&v3(g,d,m),d.isObject3D&&(d.visible=!1),Iu(d)},unhideInstance(d,f){var m;const{attach:g,parent:v}=(m=d.__r3f)!=null?m:{};g&&v&&ib(v,d,g),(d.isObject3D&&f.visible==null||f.visible)&&(d.visible=!0),Iu(d)},createTextInstance:c,hideTextInstance:c,unhideTextInstance:c,getCurrentEventPriority:()=>e?e():sd.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&gn.fun(performance.now)?performance.now:gn.fun(Date.now)?Date.now:()=>0,scheduleTimeout:gn.fun(setTimeout)?setTimeout:void 0,cancelTimeout:gn.fun(clearTimeout)?clearTimeout:void 0}),applyProps:sb}}var p3,m3;const rb=t=>"colorSpace"in t||"outputColorSpace"in t,KD=()=>{var t;return(t=SM.ColorManagement)!=null?t:null},JD=t=>t&&t.isOrthographicCamera,PZ=t=>t&&t.hasOwnProperty("current"),Op=typeof window<"u"&&((p3=window.document)!=null&&p3.createElement||((m3=window.navigator)==null?void 0:m3.product)==="ReactNative")?D.useLayoutEffect:D.useEffect;function QD(t){const e=D.useRef(t);return Op(()=>void(e.current=t),[t]),e}function RZ({set:t}){return Op(()=>(t(new Promise(()=>null)),()=>t(!1)),[t]),null}class eI extends D.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}eI.getDerivedStateFromError=()=>({error:!0});const tI="__default",g3=new Map,jZ=t=>t&&!!t.memoized&&!!t.changes;function nI(t){var e;const n=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(t)?Math.min(Math.max(t[0],n),t[1]):t}const Bh=t=>{var e;return(e=t.__r3f)==null?void 0:e.root.getState()};function N0(t){let e=t.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const gn={obj:t=>t===Object(t)&&!gn.arr(t)&&typeof t!="function",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",boo:t=>typeof t=="boolean",und:t=>t===void 0,arr:t=>Array.isArray(t),equ(t,e,{arrays:n="shallow",objects:r="reference",strict:i=!0}={}){if(typeof t!=typeof e||!!t!=!!e)return!1;if(gn.str(t)||gn.num(t))return t===e;const s=gn.obj(t);if(s&&r==="reference")return t===e;const a=gn.arr(t);if(a&&n==="reference")return t===e;if((a||s)&&t===e)return!0;let l;for(l in t)if(!(l in e))return!1;if(s&&n==="shallow"&&r==="shallow"){for(l in i?e:t)if(!gn.equ(t[l],e[l],{strict:i,objects:"reference"}))return!1}else for(l in i?e:t)if(t[l]!==e[l])return!1;if(gn.und(l)){if(a&&t.length===0&&e.length===0||s&&Object.keys(t).length===0&&Object.keys(e).length===0)return!0;if(t!==e)return!1}return!0}};function LZ(t){t.dispose&&t.type!=="Scene"&&t.dispose();for(const e in t)e.dispose==null||e.dispose(),delete t[e]}function Du(t,e){const n=t;return n.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},t}function O_(t,e){let n=t;if(e.includes("-")){const r=e.split("-"),i=r.pop();return n=r.reduce((s,a)=>s[a],t),{target:n,key:i}}else return{target:n,key:e}}const x3=/-\d+$/;function ib(t,e,n){if(gn.str(n)){if(x3.test(n)){const s=n.replace(x3,""),{target:a,key:l}=O_(t,s);Array.isArray(a[l])||(a[l]=[])}const{target:r,key:i}=O_(t,n);e.__r3f.previousAttach=r[i],r[i]=e}else e.__r3f.previousAttach=n(t,e)}function v3(t,e,n){var r,i;if(gn.str(n)){const{target:s,key:a}=O_(t,n),l=e.__r3f.previousAttach;l===void 0?delete s[a]:s[a]=l}else(r=e.__r3f)==null||r.previousAttach==null||r.previousAttach(t,e);(i=e.__r3f)==null||delete i.previousAttach}function rI(t,{children:e,key:n,ref:r,...i},{children:s,key:a,ref:l,...c}={},u=!1){var d;const f=(d=t==null?void 0:t.__r3f)!=null?d:{},m=Object.entries(i),g=[];if(u){const _=Object.keys(c);for(let b=0;b<_.length;b++)i.hasOwnProperty(_[b])||m.unshift([_[b],tI+"remove"])}m.forEach(([_,b])=>{var x;if((x=t.__r3f)!=null&&x.primitive&&_==="object"||gn.equ(b,c[_]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(_))return g.push([_,b,!0,[]]);let y=[];_.includes("-")&&(y=_.split("-")),g.push([_,b,!1,y]);for(const S in i){const E=i[S];S.startsWith(`${_}-`)&&g.push([S,E,!1,S.split("-")])}});const v={...i};return f.memoizedProps&&f.memoizedProps.args&&(v.args=f.memoizedProps.args),f.memoizedProps&&f.memoizedProps.attach&&(v.attach=f.memoizedProps.attach),{memoized:v,changes:g}}const DZ=typeof process<"u"&&!1;function sb(t,e){var n,r,i;const s=(n=t.__r3f)!=null?n:{},a=s.root,l=(r=a==null||a.getState==null?void 0:a.getState())!=null?r:{},{memoized:c,changes:u}=jZ(e)?e:rI(t,e),d=s.eventCount;t.__r3f&&(t.__r3f.memoizedProps=c);for(let m=0;m<u.length;m++){let[g,v,_,b]=u[m];if(rb(t)){const E="srgb",A="srgb-linear";g==="encoding"?(g="colorSpace",v=v===3001?E:A):g==="outputEncoding"&&(g="outputColorSpace",v=v===3001?E:A)}let x=t,y=x[g];if(b.length&&(y=b.reduce((S,E)=>S[E],t),!(y&&y.set))){const[S,...E]=b.reverse();x=E.reverse().reduce((A,T)=>A[T],t),g=S}if(v===tI+"remove")if(x.constructor){let S=g3.get(x.constructor);S||(S=new x.constructor,g3.set(x.constructor,S)),v=S[g]}else v=0;if(_)v?s.handlers[g]=v:delete s.handlers[g],s.eventCount=Object.keys(s.handlers).length;else if(y&&y.set&&(y.copy||y instanceof Sc)){if(Array.isArray(v))y.fromArray?y.fromArray(v):y.set(...v);else if(y.copy&&v&&v.constructor&&(DZ?y.constructor.name===v.constructor.name:y.constructor===v.constructor))y.copy(v);else if(v!==void 0){const S=y instanceof nt;!S&&y.setScalar?y.setScalar(v):y instanceof Sc&&v instanceof Sc?y.mask=v.mask:y.set(v),!KD()&&!l.linear&&S&&y.convertSRGBToLinear()}}else if(x[g]=v,x[g]instanceof Cn&&x[g].format===oi&&x[g].type===fa){const S=x[g];rb(S)&&rb(l.gl)?S.colorSpace=l.gl.outputColorSpace:S.encoding=l.gl.outputEncoding}Iu(t)}if(s.parent&&t.raycast&&d!==s.eventCount){const m=N0(t).getState().internal,g=m.interaction.indexOf(t);g>-1&&m.interaction.splice(g,1),s.eventCount&&m.interaction.push(t)}return!(u.length===1&&u[0][0]==="onUpdate")&&u.length&&(i=t.__r3f)!=null&&i.parent&&F_(t),t}function Iu(t){var e,n;const r=(e=t.__r3f)==null||(n=e.root)==null||n.getState==null?void 0:n.getState();r&&r.internal.frames===0&&r.invalidate()}function F_(t){t.onUpdate==null||t.onUpdate(t)}function IZ(t,e){t.manual||(JD(t)?(t.left=e.width/-2,t.right=e.width/2,t.top=e.height/2,t.bottom=e.height/-2):t.aspect=e.width/e.height,t.updateProjectionMatrix(),t.updateMatrixWorld())}function Xg(t){return(t.eventObject||t.object).uuid+"/"+t.index+t.instanceId}function UZ(){var t;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return sd.DefaultEventPriority;switch((t=e.event)==null?void 0:t.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return sd.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return sd.ContinuousEventPriority;default:return sd.DefaultEventPriority}}function iI(t,e,n,r){const i=n.get(e);i&&(n.delete(e),n.size===0&&(t.delete(r),i.target.releasePointerCapture(r)))}function OZ(t,e){const{internal:n}=t.getState();n.interaction=n.interaction.filter(r=>r!==e),n.initialHits=n.initialHits.filter(r=>r!==e),n.hovered.forEach((r,i)=>{(r.eventObject===e||r.object===e)&&n.hovered.delete(i)}),n.capturedMap.forEach((r,i)=>{iI(n.capturedMap,e,r,i)})}function FZ(t){function e(c){const{internal:u}=t.getState(),d=c.offsetX-u.initialClick[0],f=c.offsetY-u.initialClick[1];return Math.round(Math.sqrt(d*d+f*f))}function n(c){return c.filter(u=>["Move","Over","Enter","Out","Leave"].some(d=>{var f;return(f=u.__r3f)==null?void 0:f.handlers["onPointer"+d]}))}function r(c,u){const d=t.getState(),f=new Set,m=[],g=u?u(d.internal.interaction):d.internal.interaction;for(let x=0;x<g.length;x++){const y=Bh(g[x]);y&&(y.raycaster.camera=void 0)}d.previousRoot||d.events.compute==null||d.events.compute(c,d);function v(x){const y=Bh(x);if(!y||!y.events.enabled||y.raycaster.camera===null)return[];if(y.raycaster.camera===void 0){var S;y.events.compute==null||y.events.compute(c,y,(S=y.previousRoot)==null?void 0:S.getState()),y.raycaster.camera===void 0&&(y.raycaster.camera=null)}return y.raycaster.camera?y.raycaster.intersectObject(x,!0):[]}let _=g.flatMap(v).sort((x,y)=>{const S=Bh(x.object),E=Bh(y.object);return!S||!E?x.distance-y.distance:E.events.priority-S.events.priority||x.distance-y.distance}).filter(x=>{const y=Xg(x);return f.has(y)?!1:(f.add(y),!0)});d.events.filter&&(_=d.events.filter(_,d));for(const x of _){let y=x.object;for(;y;){var b;(b=y.__r3f)!=null&&b.eventCount&&m.push({...x,eventObject:y}),y=y.parent}}if("pointerId"in c&&d.internal.capturedMap.has(c.pointerId))for(let x of d.internal.capturedMap.get(c.pointerId).values())f.has(Xg(x.intersection))||m.push(x.intersection);return m}function i(c,u,d,f){const m=t.getState();if(c.length){const g={stopped:!1};for(const v of c){const _=Bh(v.object)||m,{raycaster:b,pointer:x,camera:y,internal:S}=_,E=new X(x.x,x.y,0).unproject(y),A=P=>{var H,B;return(H=(B=S.capturedMap.get(P))==null?void 0:B.has(v.eventObject))!=null?H:!1},T=P=>{const H={intersection:v,target:u.target};S.capturedMap.has(P)?S.capturedMap.get(P).set(v.eventObject,H):S.capturedMap.set(P,new Map([[v.eventObject,H]])),u.target.setPointerCapture(P)},C=P=>{const H=S.capturedMap.get(P);H&&iI(S.capturedMap,v.eventObject,H,P)};let j={};for(let P in u){let H=u[P];typeof H!="function"&&(j[P]=H)}let k={...v,...j,pointer:x,intersections:c,stopped:g.stopped,delta:d,unprojectedPoint:E,ray:b.ray,camera:y,stopPropagation(){const P="pointerId"in u&&S.capturedMap.get(u.pointerId);if((!P||P.has(v.eventObject))&&(k.stopped=g.stopped=!0,S.hovered.size&&Array.from(S.hovered.values()).find(H=>H.eventObject===v.eventObject))){const H=c.slice(0,c.indexOf(v));s([...H,v])}},target:{hasPointerCapture:A,setPointerCapture:T,releasePointerCapture:C},currentTarget:{hasPointerCapture:A,setPointerCapture:T,releasePointerCapture:C},nativeEvent:u};if(f(k),g.stopped===!0)break}}return c}function s(c){const{internal:u}=t.getState();for(const d of u.hovered.values())if(!c.length||!c.find(f=>f.object===d.object&&f.index===d.index&&f.instanceId===d.instanceId)){const m=d.eventObject.__r3f,g=m==null?void 0:m.handlers;if(u.hovered.delete(Xg(d)),m!=null&&m.eventCount){const v={...d,intersections:c};g.onPointerOut==null||g.onPointerOut(v),g.onPointerLeave==null||g.onPointerLeave(v)}}}function a(c,u){for(let d=0;d<u.length;d++){const f=u[d].__r3f;f==null||f.handlers.onPointerMissed==null||f.handlers.onPointerMissed(c)}}function l(c){switch(c){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return u=>{const{internal:d}=t.getState();"pointerId"in u&&d.capturedMap.has(u.pointerId)&&requestAnimationFrame(()=>{d.capturedMap.has(u.pointerId)&&(d.capturedMap.delete(u.pointerId),s([]))})}}return function(d){const{onPointerMissed:f,internal:m}=t.getState();m.lastEvent.current=d;const g=c==="onPointerMove",v=c==="onClick"||c==="onContextMenu"||c==="onDoubleClick",b=r(d,g?n:void 0),x=v?e(d):0;c==="onPointerDown"&&(m.initialClick=[d.offsetX,d.offsetY],m.initialHits=b.map(S=>S.eventObject)),v&&!b.length&&x<=2&&(a(d,m.interaction),f&&f(d)),g&&s(b);function y(S){const E=S.eventObject,A=E.__r3f,T=A==null?void 0:A.handlers;if(A!=null&&A.eventCount)if(g){if(T.onPointerOver||T.onPointerEnter||T.onPointerOut||T.onPointerLeave){const C=Xg(S),j=m.hovered.get(C);j?j.stopped&&S.stopPropagation():(m.hovered.set(C,S),T.onPointerOver==null||T.onPointerOver(S),T.onPointerEnter==null||T.onPointerEnter(S))}T.onPointerMove==null||T.onPointerMove(S)}else{const C=T[c];C?(!v||m.initialHits.includes(E))&&(a(d,m.interaction.filter(j=>!m.initialHits.includes(j))),C(S)):v&&m.initialHits.includes(E)&&a(d,m.interaction.filter(j=>!m.initialHits.includes(j)))}}i(b,d,x,y)}}return{handlePointer:l}}const sI=t=>!!(t!=null&&t.render),aI=D.createContext(null),zZ=(t,e)=>{const n=yZ((l,c)=>{const u=new X,d=new X,f=new X;function m(x=c().camera,y=d,S=c().size){const{width:E,height:A,top:T,left:C}=S,j=E/A;y instanceof X?f.copy(y):f.set(...y);const k=x.getWorldPosition(u).distanceTo(f);if(JD(x))return{width:E/x.zoom,height:A/x.zoom,top:T,left:C,factor:1,distance:k,aspect:j};{const P=x.fov*Math.PI/180,H=2*Math.tan(P/2)*k,B=H*(E/A);return{width:B,height:H,top:T,left:C,factor:E/B,distance:k,aspect:j}}}let g;const v=x=>l(y=>({performance:{...y.performance,current:x}})),_=new ke;return{set:l,get:c,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(x=1)=>t(c(),x),advance:(x,y)=>e(x,y,c()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new yM,pointer:_,mouse:_,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const x=c();g&&clearTimeout(g),x.performance.current!==x.performance.min&&v(x.performance.min),g=setTimeout(()=>v(c().performance.max),x.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:m},setEvents:x=>l(y=>({...y,events:{...y.events,...x}})),setSize:(x,y,S,E,A)=>{const T=c().camera,C={width:x,height:y,top:E||0,left:A||0,updateStyle:S};l(j=>({size:C,viewport:{...j.viewport,...m(T,d,C)}}))},setDpr:x=>l(y=>{const S=nI(x);return{viewport:{...y.viewport,dpr:S,initialDpr:y.viewport.initialDpr||S}}}),setFrameloop:(x="always")=>{const y=c().clock;y.stop(),y.elapsedTime=0,x!=="never"&&(y.start(),y.elapsedTime=0),l(()=>({frameloop:x}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:D.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(x,y,S)=>{const E=c().internal;return E.priority=E.priority+(y>0?1:0),E.subscribers.push({ref:x,priority:y,store:S}),E.subscribers=E.subscribers.sort((A,T)=>A.priority-T.priority),()=>{const A=c().internal;A!=null&&A.subscribers&&(A.priority=A.priority-(y>0?1:0),A.subscribers=A.subscribers.filter(T=>T.ref!==x))}}}}}),r=n.getState();let i=r.size,s=r.viewport.dpr,a=r.camera;return n.subscribe(()=>{const{camera:l,size:c,viewport:u,gl:d,set:f}=n.getState();if(c.width!==i.width||c.height!==i.height||u.dpr!==s){var m;i=c,s=u.dpr,IZ(l,c),d.setPixelRatio(u.dpr);const g=(m=c.updateStyle)!=null?m:typeof HTMLCanvasElement<"u"&&d.domElement instanceof HTMLCanvasElement;d.setSize(c.width,c.height,g)}l!==a&&(a=l,f(g=>({viewport:{...g.viewport,...g.viewport.getCurrentViewport(l)}})))}),n.subscribe(l=>t(l)),n};let Yg,BZ=new Set,VZ=new Set,HZ=new Set;function ab(t,e){if(t.size)for(const{callback:n}of t.values())n(e)}function Vh(t,e){switch(t){case"before":return ab(BZ,e);case"after":return ab(VZ,e);case"tail":return ab(HZ,e)}}let ob,lb;function cb(t,e,n){let r=e.clock.getDelta();for(e.frameloop==="never"&&typeof t=="number"&&(r=t-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=t),ob=e.internal.subscribers,Yg=0;Yg<ob.length;Yg++)lb=ob[Yg],lb.ref.current(lb.store.getState(),r,n);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function GZ(t){let e=!1,n,r,i;function s(c){r=requestAnimationFrame(s),e=!0,n=0,Vh("before",c);for(const d of t.values()){var u;i=d.store.getState(),i.internal.active&&(i.frameloop==="always"||i.internal.frames>0)&&!((u=i.gl.xr)!=null&&u.isPresenting)&&(n+=cb(c,i))}if(Vh("after",c),n===0)return Vh("tail",c),e=!1,cancelAnimationFrame(r)}function a(c,u=1){var d;if(!c)return t.forEach(f=>a(f.store.getState(),u));(d=c.gl.xr)!=null&&d.isPresenting||!c.internal.active||c.frameloop==="never"||(c.internal.frames=Math.min(60,c.internal.frames+u),e||(e=!0,requestAnimationFrame(s)))}function l(c,u=!0,d,f){if(u&&Vh("before",c),d)cb(c,d,f);else for(const m of t.values())cb(c,m.store.getState());u&&Vh("after",c)}return{loop:s,invalidate:a,advance:l}}function oI(){const t=D.useContext(aI);if(!t)throw new Error("R3F: Hooks can only be used within the Canvas component!");return t}function ia(t=n=>n,e){return oI()(t,e)}function Pv(t,e=0){const n=oI(),r=n.getState().internal.subscribe,i=QD(t);return Op(()=>r(i,e,n),[e,r,n]),null}const Pd=new Map,{invalidate:y3,advance:b3}=GZ(Pd),{reconciler:_x,applyProps:Au}=kZ(Pd,UZ),Cu={objects:"shallow",strict:!1},WZ=(t,e)=>{const n=typeof t=="function"?t(e):t;return sI(n)?n:new tM({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...t})};function XZ(t,e){const n=typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement;if(e){const{width:r,height:i,top:s,left:a,updateStyle:l=n}=e;return{width:r,height:i,top:s,left:a,updateStyle:l}}else if(typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&t.parentElement){const{width:r,height:i,top:s,left:a}=t.parentElement.getBoundingClientRect();return{width:r,height:i,top:s,left:a,updateStyle:n}}else if(typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas)return{width:t.width,height:t.height,top:0,left:0,updateStyle:n};return{width:0,height:0,top:0,left:0}}function YZ(t){const e=Pd.get(t),n=e==null?void 0:e.fiber,r=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,s=r||zZ(y3,b3),a=n||_x.createContainer(s,sd.ConcurrentRoot,null,!1,null,"",i,null);e||Pd.set(t,{fiber:a,store:s});let l,c=!1,u;return{configure(d={}){let{gl:f,size:m,scene:g,events:v,onCreated:_,shadows:b=!1,linear:x=!1,flat:y=!1,legacy:S=!1,orthographic:E=!1,frameloop:A="always",dpr:T=[1,2],performance:C,raycaster:j,camera:k,onPointerMissed:P}=d,H=s.getState(),B=H.gl;H.gl||H.set({gl:B=WZ(f,t)});let Y=H.raycaster;Y||H.set({raycaster:Y=new WD});const{params:V,...Q}=j||{};if(gn.equ(Q,Y,Cu)||Au(Y,{...Q}),gn.equ(V,Y.params,Cu)||Au(Y,{params:{...Y.params,...V}}),!H.camera||H.camera===u&&!gn.equ(u,k,Cu)){u=k;const z=k instanceof Pp,U=z?k:E?new al(0,0,0,0,.1,1e3):new Yn(75,0,.1,1e3);z||(U.position.z=5,k&&Au(U,k),!H.camera&&!(k!=null&&k.rotation)&&U.lookAt(0,0,0)),H.set({camera:U}),Y.camera=U}if(!H.scene){let z;g instanceof yx?z=g:(z=new yx,g&&Au(z,g)),H.set({scene:Du(z)})}if(!H.xr){var ee;const z=(K,ne)=>{const ie=s.getState();ie.frameloop!=="never"&&b3(K,!0,ie,ne)},U=()=>{const K=s.getState();K.gl.xr.enabled=K.gl.xr.isPresenting,K.gl.xr.setAnimationLoop(K.gl.xr.isPresenting?z:null),K.gl.xr.isPresenting||y3(K)},Z={connect(){const K=s.getState().gl;K.xr.addEventListener("sessionstart",U),K.xr.addEventListener("sessionend",U)},disconnect(){const K=s.getState().gl;K.xr.removeEventListener("sessionstart",U),K.xr.removeEventListener("sessionend",U)}};typeof((ee=B.xr)==null?void 0:ee.addEventListener)=="function"&&Z.connect(),H.set({xr:Z})}if(B.shadowMap){const z=B.shadowMap.enabled,U=B.shadowMap.type;if(B.shadowMap.enabled=!!b,gn.boo(b))B.shadowMap.type=xf;else if(gn.str(b)){var re;const Z={basic:zL,percentage:nv,soft:xf,variance:ks};B.shadowMap.type=(re=Z[b])!=null?re:xf}else gn.obj(b)&&Object.assign(B.shadowMap,b);(z!==B.shadowMap.enabled||U!==B.shadowMap.type)&&(B.shadowMap.needsUpdate=!0)}const I=KD();I&&("enabled"in I?I.enabled=!S:"legacyMode"in I&&(I.legacyMode=S)),c||Au(B,{outputEncoding:x?3e3:3001,toneMapping:y?ha:LS}),H.legacy!==S&&H.set(()=>({legacy:S})),H.linear!==x&&H.set(()=>({linear:x})),H.flat!==y&&H.set(()=>({flat:y})),f&&!gn.fun(f)&&!sI(f)&&!gn.equ(f,B,Cu)&&Au(B,f),v&&!H.events.handlers&&H.set({events:v(s)});const F=XZ(t,m);return gn.equ(F,H.size,Cu)||H.setSize(F.width,F.height,F.updateStyle,F.top,F.left),T&&H.viewport.dpr!==nI(T)&&H.setDpr(T),H.frameloop!==A&&H.setFrameloop(A),H.onPointerMissed||H.set({onPointerMissed:P}),C&&!gn.equ(C,H.performance,Cu)&&H.set(z=>({performance:{...z.performance,...C}})),l=_,c=!0,this},render(d){return c||this.configure(),_x.updateContainer(D.createElement(qZ,{store:s,children:d,onCreated:l,rootElement:t}),a,null,()=>{}),s},unmount(){lI(t)}}}function qZ({store:t,children:e,onCreated:n,rootElement:r}){return Op(()=>{const i=t.getState();i.set(s=>({internal:{...s.internal,active:!0}})),n&&n(i),t.getState().events.connected||i.events.connect==null||i.events.connect(r)},[]),D.createElement(aI.Provider,{value:t},e)}function lI(t,e){const n=Pd.get(t),r=n==null?void 0:n.fiber;if(r){const i=n==null?void 0:n.store.getState();i&&(i.internal.active=!1),_x.updateContainer(null,r,null,()=>{i&&setTimeout(()=>{try{var s,a,l,c;i.events.disconnect==null||i.events.disconnect(),(s=i.gl)==null||(a=s.renderLists)==null||a.dispose==null||a.dispose(),(l=i.gl)==null||l.forceContextLoss==null||l.forceContextLoss(),(c=i.gl)!=null&&c.xr&&i.xr.disconnect(),LZ(i),Pd.delete(t),e&&e(t)}catch{}},500)})}}_x.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:D.version});function Rd(){return Rd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Rd.apply(null,arguments)}function _3(t,e){let n;return(...r)=>{window.clearTimeout(n),n=window.setTimeout(()=>t(...r),e)}}function $Z({debounce:t,scroll:e,polyfill:n,offsetSize:r}={debounce:0,scroll:!1,offsetSize:!1}){const i=n||(typeof window>"u"?class{}:window.ResizeObserver);if(!i)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,a]=D.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=D.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),c=t?typeof t=="number"?t:t.scroll:null,u=t?typeof t=="number"?t:t.resize:null,d=D.useRef(!1);D.useEffect(()=>(d.current=!0,()=>void(d.current=!1)));const[f,m,g]=D.useMemo(()=>{const x=()=>{if(!l.current.element)return;const{left:y,top:S,width:E,height:A,bottom:T,right:C,x:j,y:k}=l.current.element.getBoundingClientRect(),P={left:y,top:S,width:E,height:A,bottom:T,right:C,x:j,y:k};l.current.element instanceof HTMLElement&&r&&(P.height=l.current.element.offsetHeight,P.width=l.current.element.offsetWidth),Object.freeze(P),d.current&&!QZ(l.current.lastBounds,P)&&a(l.current.lastBounds=P)};return[x,u?_3(x,u):x,c?_3(x,c):x]},[a,r,c,u]);function v(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(x=>x.removeEventListener("scroll",g,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null),l.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",l.current.orientationHandler))}function _(){l.current.element&&(l.current.resizeObserver=new i(g),l.current.resizeObserver.observe(l.current.element),e&&l.current.scrollContainers&&l.current.scrollContainers.forEach(x=>x.addEventListener("scroll",g,{capture:!0,passive:!0})),l.current.orientationHandler=()=>{g()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",l.current.orientationHandler))}const b=x=>{!x||x===l.current.element||(v(),l.current.element=x,l.current.scrollContainers=cI(x),_())};return KZ(g,!!e),ZZ(m),D.useEffect(()=>{v(),_()},[e,g,m]),D.useEffect(()=>v,[]),[b,s,f]}function ZZ(t){D.useEffect(()=>{const e=t;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[t])}function KZ(t,e){D.useEffect(()=>{if(e){const n=t;return window.addEventListener("scroll",n,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",n,!0)}},[t,e])}function cI(t){const e=[];if(!t||t===document.body)return e;const{overflow:n,overflowX:r,overflowY:i}=window.getComputedStyle(t);return[n,r,i].some(s=>s==="auto"||s==="scroll")&&e.push(t),[...e,...cI(t.parentElement)]}const JZ=["x","y","top","bottom","left","right","width","height"],QZ=(t,e)=>JZ.every(n=>t[n]===e[n]);var eK=Object.defineProperty,tK=Object.defineProperties,nK=Object.getOwnPropertyDescriptors,w3=Object.getOwnPropertySymbols,rK=Object.prototype.hasOwnProperty,iK=Object.prototype.propertyIsEnumerable,S3=(t,e,n)=>e in t?eK(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,M3=(t,e)=>{for(var n in e||(e={}))rK.call(e,n)&&S3(t,n,e[n]);if(w3)for(var n of w3(e))iK.call(e,n)&&S3(t,n,e[n]);return t},sK=(t,e)=>tK(t,nK(e)),E3,N3;typeof window<"u"&&((E3=window.document)!=null&&E3.createElement||((N3=window.navigator)==null?void 0:N3.product)==="ReactNative")?D.useLayoutEffect:D.useEffect;function uI(t,e,n){if(!t)return;if(n(t)===!0)return t;let r=e?t.return:t.child;for(;r;){const i=uI(r,e,n);if(i)return i;r=e?null:r.sibling}}function dI(t){try{return Object.defineProperties(t,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return t}}const T3=console.error;console.error=function(){const t=[...arguments].join("");if(t!=null&&t.startsWith("Warning:")&&t.includes("useContext")){console.error=T3;return}return T3.apply(this,arguments)};const MM=dI(D.createContext(null));class hI extends D.Component{render(){return D.createElement(MM.Provider,{value:this._reactInternals},this.props.children)}}function aK(){const t=D.useContext(MM);if(t===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=D.useId();return D.useMemo(()=>{for(const r of[t,t==null?void 0:t.alternate]){if(!r)continue;const i=uI(r,!1,s=>{let a=s.memoizedState;for(;a;){if(a.memoizedState===e)return!0;a=a.next}});if(i)return i}},[t,e])}function oK(){const t=aK(),[e]=D.useState(()=>new Map);e.clear();let n=t;for(;n;){if(n.type&&typeof n.type=="object"){const i=n.type._context===void 0&&n.type.Provider===n.type?n.type:n.type._context;i&&i!==MM&&!e.has(i)&&e.set(i,D.useContext(dI(i)))}n=n.return}return e}function lK(){const t=oK();return D.useMemo(()=>Array.from(t.keys()).reduce((e,n)=>r=>D.createElement(e,null,D.createElement(n.Provider,sK(M3({},r),{value:t.get(n)}))),e=>D.createElement(hI,M3({},e))),[t])}const ub={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function cK(t){const{handlePointer:e}=FZ(t);return{priority:1,enabled:!0,compute(n,r,i){r.pointer.set(n.offsetX/r.size.width*2-1,-(n.offsetY/r.size.height)*2+1),r.raycaster.setFromCamera(r.pointer,r.camera)},connected:void 0,handlers:Object.keys(ub).reduce((n,r)=>({...n,[r]:e(r)}),{}),update:()=>{var n;const{events:r,internal:i}=t.getState();(n=i.lastEvent)!=null&&n.current&&r.handlers&&r.handlers.onPointerMove(i.lastEvent.current)},connect:n=>{var r;const{set:i,events:s}=t.getState();s.disconnect==null||s.disconnect(),i(a=>({events:{...a.events,connected:n}})),Object.entries((r=s.handlers)!=null?r:[]).forEach(([a,l])=>{const[c,u]=ub[a];n.addEventListener(c,l,{passive:u})})},disconnect:()=>{const{set:n,events:r}=t.getState();if(r.connected){var i;Object.entries((i=r.handlers)!=null?i:[]).forEach(([s,a])=>{if(r&&r.connected instanceof HTMLElement){const[l]=ub[s];r.connected.removeEventListener(l,a)}}),n(s=>({events:{...s.events,connected:void 0}}))}}}}const uK=D.forwardRef(function({children:e,fallback:n,resize:r,style:i,gl:s,events:a=cK,eventSource:l,eventPrefix:c,shadows:u,linear:d,flat:f,legacy:m,orthographic:g,frameloop:v,dpr:_,performance:b,raycaster:x,camera:y,scene:S,onPointerMissed:E,onCreated:A,...T},C){D.useMemo(()=>CZ(gZ),[]);const j=lK(),[k,P]=$Z({scroll:!0,debounce:{scroll:50,resize:0},...r}),H=D.useRef(null),B=D.useRef(null);D.useImperativeHandle(C,()=>H.current);const Y=QD(E),[V,Q]=D.useState(!1),[ee,re]=D.useState(!1);if(V)throw V;if(ee)throw ee;const I=D.useRef(null);Op(()=>{const z=H.current;P.width>0&&P.height>0&&z&&(I.current||(I.current=YZ(z)),I.current.configure({gl:s,events:a,shadows:u,linear:d,flat:f,legacy:m,orthographic:g,frameloop:v,dpr:_,performance:b,raycaster:x,camera:y,scene:S,size:P,onPointerMissed:(...U)=>Y.current==null?void 0:Y.current(...U),onCreated:U=>{U.events.connect==null||U.events.connect(l?PZ(l)?l.current:l:B.current),c&&U.setEvents({compute:(Z,K)=>{const ne=Z[c+"X"],ie=Z[c+"Y"];K.pointer.set(ne/K.size.width*2-1,-(ie/K.size.height)*2+1),K.raycaster.setFromCamera(K.pointer,K.camera)}}),A==null||A(U)}}),I.current.render(D.createElement(j,null,D.createElement(eI,{set:re},D.createElement(D.Suspense,{fallback:D.createElement(RZ,{set:Q})},e)))))}),D.useEffect(()=>{const z=H.current;if(z)return()=>lI(z)},[]);const F=l?"none":"auto";return D.createElement("div",Rd({ref:B,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:F,...i}},T),D.createElement("div",{ref:k,style:{width:"100%",height:"100%"}},D.createElement("canvas",{ref:H,style:{display:"block"}},n)))}),dK=D.forwardRef(function(e,n){return D.createElement(hI,null,D.createElement(uK,Rd({},e,{ref:n})))});function hK(t){return function(e){t.forEach(function(n){typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var fK=Object.defineProperty,pK=(t,e,n)=>e in t?fK(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,mK=(t,e,n)=>(pK(t,typeof e!="symbol"?e+"":e,n),n);class gK{constructor(){mK(this,"_listeners")}addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(n)===-1&&r[e].push(n)}hasEventListener(e,n){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(n)!==-1}removeEventListener(e,n){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(n);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,a=i.length;s<a;s++)i[s].call(this,e);e.target=null}}}var xK=Object.defineProperty,vK=(t,e,n)=>e in t?xK(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,yt=(t,e,n)=>(vK(t,typeof e!="symbol"?e+"":e,n),n);const qg=new zc,A3=new Wa,yK=Math.cos(70*(Math.PI/180)),C3=(t,e)=>(t%e+e)%e;let bK=class extends gK{constructor(e,n){super(),yt(this,"object"),yt(this,"domElement"),yt(this,"enabled",!0),yt(this,"target",new X),yt(this,"minDistance",0),yt(this,"maxDistance",1/0),yt(this,"minZoom",0),yt(this,"maxZoom",1/0),yt(this,"minPolarAngle",0),yt(this,"maxPolarAngle",Math.PI),yt(this,"minAzimuthAngle",-1/0),yt(this,"maxAzimuthAngle",1/0),yt(this,"enableDamping",!1),yt(this,"dampingFactor",.05),yt(this,"enableZoom",!0),yt(this,"zoomSpeed",1),yt(this,"enableRotate",!0),yt(this,"rotateSpeed",1),yt(this,"enablePan",!0),yt(this,"panSpeed",1),yt(this,"screenSpacePanning",!0),yt(this,"keyPanSpeed",7),yt(this,"zoomToCursor",!1),yt(this,"autoRotate",!1),yt(this,"autoRotateSpeed",2),yt(this,"reverseOrbit",!1),yt(this,"reverseHorizontalOrbit",!1),yt(this,"reverseVerticalOrbit",!1),yt(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),yt(this,"mouseButtons",{LEFT:ec.ROTATE,MIDDLE:ec.DOLLY,RIGHT:ec.PAN}),yt(this,"touches",{ONE:tc.ROTATE,TWO:tc.DOLLY_PAN}),yt(this,"target0"),yt(this,"position0"),yt(this,"zoom0"),yt(this,"_domElementKeyEvents",null),yt(this,"getPolarAngle"),yt(this,"getAzimuthalAngle"),yt(this,"setPolarAngle"),yt(this,"setAzimuthalAngle"),yt(this,"getDistance"),yt(this,"getZoomScale"),yt(this,"listenToKeyEvents"),yt(this,"stopListenToKeyEvents"),yt(this,"saveState"),yt(this,"reset"),yt(this,"update"),yt(this,"connect"),yt(this,"dispose"),yt(this,"dollyIn"),yt(this,"dollyOut"),yt(this,"getScale"),yt(this,"setScale"),this.object=e,this.domElement=n,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>d.phi,this.getAzimuthalAngle=()=>d.theta,this.setPolarAngle=J=>{let we=C3(J,2*Math.PI),Ge=d.phi;Ge<0&&(Ge+=2*Math.PI),we<0&&(we+=2*Math.PI);let De=Math.abs(we-Ge);2*Math.PI-De<De&&(we<Ge?we+=2*Math.PI:Ge+=2*Math.PI),f.phi=we-Ge,r.update()},this.setAzimuthalAngle=J=>{let we=C3(J,2*Math.PI),Ge=d.theta;Ge<0&&(Ge+=2*Math.PI),we<0&&(we+=2*Math.PI);let De=Math.abs(we-Ge);2*Math.PI-De<De&&(we<Ge?we+=2*Math.PI:Ge+=2*Math.PI),f.theta=we-Ge,r.update()},this.getDistance=()=>r.object.position.distanceTo(r.target),this.listenToKeyEvents=J=>{J.addEventListener("keydown",ze),this._domElementKeyEvents=J},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",ze),this._domElementKeyEvents=null},this.saveState=()=>{r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object.zoom},this.reset=()=>{r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.zoom=r.zoom0,r.object.updateProjectionMatrix(),r.dispatchEvent(i),r.update(),c=l.NONE},this.update=(()=>{const J=new X,we=new X(0,1,0),Ge=new Gr().setFromUnitVectors(e.up,we),De=Ge.clone().invert(),Ce=new X,te=new Gr,Ve=2*Math.PI;return function(){const lt=r.object.position;Ge.setFromUnitVectors(e.up,we),De.copy(Ge).invert(),J.copy(lt).sub(r.target),J.applyQuaternion(Ge),d.setFromVector3(J),r.autoRotate&&c===l.NONE&&V(B()),r.enableDamping?(d.theta+=f.theta*r.dampingFactor,d.phi+=f.phi*r.dampingFactor):(d.theta+=f.theta,d.phi+=f.phi);let Je=r.minAzimuthAngle,gt=r.maxAzimuthAngle;isFinite(Je)&&isFinite(gt)&&(Je<-Math.PI?Je+=Ve:Je>Math.PI&&(Je-=Ve),gt<-Math.PI?gt+=Ve:gt>Math.PI&&(gt-=Ve),Je<=gt?d.theta=Math.max(Je,Math.min(gt,d.theta)):d.theta=d.theta>(Je+gt)/2?Math.max(Je,d.theta):Math.min(gt,d.theta)),d.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,d.phi)),d.makeSafe(),r.enableDamping===!0?r.target.addScaledVector(g,r.dampingFactor):r.target.add(g),r.zoomToCursor&&k||r.object.isOrthographicCamera?d.radius=K(d.radius):d.radius=K(d.radius*m),J.setFromSpherical(d),J.applyQuaternion(De),lt.copy(r.target).add(J),r.object.matrixAutoUpdate||r.object.updateMatrix(),r.object.lookAt(r.target),r.enableDamping===!0?(f.theta*=1-r.dampingFactor,f.phi*=1-r.dampingFactor,g.multiplyScalar(1-r.dampingFactor)):(f.set(0,0,0),g.set(0,0,0));let ut=!1;if(r.zoomToCursor&&k){let zt=null;if(r.object instanceof Yn&&r.object.isPerspectiveCamera){const Mt=J.length();zt=K(Mt*m);const ft=Mt-zt;r.object.position.addScaledVector(C,ft),r.object.updateMatrixWorld()}else if(r.object.isOrthographicCamera){const Mt=new X(j.x,j.y,0);Mt.unproject(r.object),r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/m)),r.object.updateProjectionMatrix(),ut=!0;const ft=new X(j.x,j.y,0);ft.unproject(r.object),r.object.position.sub(ft).add(Mt),r.object.updateMatrixWorld(),zt=J.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),r.zoomToCursor=!1;zt!==null&&(r.screenSpacePanning?r.target.set(0,0,-1).transformDirection(r.object.matrix).multiplyScalar(zt).add(r.object.position):(qg.origin.copy(r.object.position),qg.direction.set(0,0,-1).transformDirection(r.object.matrix),Math.abs(r.object.up.dot(qg.direction))<yK?e.lookAt(r.target):(A3.setFromNormalAndCoplanarPoint(r.object.up,r.target),qg.intersectPlane(A3,r.target))))}else r.object instanceof al&&r.object.isOrthographicCamera&&(ut=m!==1,ut&&(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/m)),r.object.updateProjectionMatrix()));return m=1,k=!1,ut||Ce.distanceToSquared(r.object.position)>u||8*(1-te.dot(r.object.quaternion))>u?(r.dispatchEvent(i),Ce.copy(r.object.position),te.copy(r.object.quaternion),ut=!1,!0):!1}})(),this.connect=J=>{r.domElement=J,r.domElement.style.touchAction="none",r.domElement.addEventListener("contextmenu",at),r.domElement.addEventListener("pointerdown",fe),r.domElement.addEventListener("pointercancel",ce),r.domElement.addEventListener("wheel",Fe)},this.dispose=()=>{var J,we,Ge,De,Ce,te;r.domElement&&(r.domElement.style.touchAction="auto"),(J=r.domElement)==null||J.removeEventListener("contextmenu",at),(we=r.domElement)==null||we.removeEventListener("pointerdown",fe),(Ge=r.domElement)==null||Ge.removeEventListener("pointercancel",ce),(De=r.domElement)==null||De.removeEventListener("wheel",Fe),(Ce=r.domElement)==null||Ce.ownerDocument.removeEventListener("pointermove",le),(te=r.domElement)==null||te.ownerDocument.removeEventListener("pointerup",ce),r._domElementKeyEvents!==null&&r._domElementKeyEvents.removeEventListener("keydown",ze)};const r=this,i={type:"change"},s={type:"start"},a={type:"end"},l={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let c=l.NONE;const u=1e-6,d=new U_,f=new U_;let m=1;const g=new X,v=new ke,_=new ke,b=new ke,x=new ke,y=new ke,S=new ke,E=new ke,A=new ke,T=new ke,C=new X,j=new ke;let k=!1;const P=[],H={};function B(){return 2*Math.PI/60/60*r.autoRotateSpeed}function Y(){return Math.pow(.95,r.zoomSpeed)}function V(J){r.reverseOrbit||r.reverseHorizontalOrbit?f.theta+=J:f.theta-=J}function Q(J){r.reverseOrbit||r.reverseVerticalOrbit?f.phi+=J:f.phi-=J}const ee=(()=>{const J=new X;return function(Ge,De){J.setFromMatrixColumn(De,0),J.multiplyScalar(-Ge),g.add(J)}})(),re=(()=>{const J=new X;return function(Ge,De){r.screenSpacePanning===!0?J.setFromMatrixColumn(De,1):(J.setFromMatrixColumn(De,0),J.crossVectors(r.object.up,J)),J.multiplyScalar(Ge),g.add(J)}})(),I=(()=>{const J=new X;return function(Ge,De){const Ce=r.domElement;if(Ce&&r.object instanceof Yn&&r.object.isPerspectiveCamera){const te=r.object.position;J.copy(te).sub(r.target);let Ve=J.length();Ve*=Math.tan(r.object.fov/2*Math.PI/180),ee(2*Ge*Ve/Ce.clientHeight,r.object.matrix),re(2*De*Ve/Ce.clientHeight,r.object.matrix)}else Ce&&r.object instanceof al&&r.object.isOrthographicCamera?(ee(Ge*(r.object.right-r.object.left)/r.object.zoom/Ce.clientWidth,r.object.matrix),re(De*(r.object.top-r.object.bottom)/r.object.zoom/Ce.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}})();function F(J){r.object instanceof Yn&&r.object.isPerspectiveCamera||r.object instanceof al&&r.object.isOrthographicCamera?m=J:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function z(J){F(m/J)}function U(J){F(m*J)}function Z(J){if(!r.zoomToCursor||!r.domElement)return;k=!0;const we=r.domElement.getBoundingClientRect(),Ge=J.clientX-we.left,De=J.clientY-we.top,Ce=we.width,te=we.height;j.x=Ge/Ce*2-1,j.y=-(De/te)*2+1,C.set(j.x,j.y,1).unproject(r.object).sub(r.object.position).normalize()}function K(J){return Math.max(r.minDistance,Math.min(r.maxDistance,J))}function ne(J){v.set(J.clientX,J.clientY)}function ie(J){Z(J),E.set(J.clientX,J.clientY)}function de(J){x.set(J.clientX,J.clientY)}function ae(J){_.set(J.clientX,J.clientY),b.subVectors(_,v).multiplyScalar(r.rotateSpeed);const we=r.domElement;we&&(V(2*Math.PI*b.x/we.clientHeight),Q(2*Math.PI*b.y/we.clientHeight)),v.copy(_),r.update()}function _e(J){A.set(J.clientX,J.clientY),T.subVectors(A,E),T.y>0?z(Y()):T.y<0&&U(Y()),E.copy(A),r.update()}function je(J){y.set(J.clientX,J.clientY),S.subVectors(y,x).multiplyScalar(r.panSpeed),I(S.x,S.y),x.copy(y),r.update()}function Le(J){Z(J),J.deltaY<0?U(Y()):J.deltaY>0&&z(Y()),r.update()}function Te(J){let we=!1;switch(J.code){case r.keys.UP:I(0,r.keyPanSpeed),we=!0;break;case r.keys.BOTTOM:I(0,-r.keyPanSpeed),we=!0;break;case r.keys.LEFT:I(r.keyPanSpeed,0),we=!0;break;case r.keys.RIGHT:I(-r.keyPanSpeed,0),we=!0;break}we&&(J.preventDefault(),r.update())}function G(){if(P.length==1)v.set(P[0].pageX,P[0].pageY);else{const J=.5*(P[0].pageX+P[1].pageX),we=.5*(P[0].pageY+P[1].pageY);v.set(J,we)}}function Ee(){if(P.length==1)x.set(P[0].pageX,P[0].pageY);else{const J=.5*(P[0].pageX+P[1].pageX),we=.5*(P[0].pageY+P[1].pageY);x.set(J,we)}}function me(){const J=P[0].pageX-P[1].pageX,we=P[0].pageY-P[1].pageY,Ge=Math.sqrt(J*J+we*we);E.set(0,Ge)}function ve(){r.enableZoom&&me(),r.enablePan&&Ee()}function he(){r.enableZoom&&me(),r.enableRotate&&G()}function We(J){if(P.length==1)_.set(J.pageX,J.pageY);else{const Ge=Re(J),De=.5*(J.pageX+Ge.x),Ce=.5*(J.pageY+Ge.y);_.set(De,Ce)}b.subVectors(_,v).multiplyScalar(r.rotateSpeed);const we=r.domElement;we&&(V(2*Math.PI*b.x/we.clientHeight),Q(2*Math.PI*b.y/we.clientHeight)),v.copy(_)}function ge(J){if(P.length==1)y.set(J.pageX,J.pageY);else{const we=Re(J),Ge=.5*(J.pageX+we.x),De=.5*(J.pageY+we.y);y.set(Ge,De)}S.subVectors(y,x).multiplyScalar(r.panSpeed),I(S.x,S.y),x.copy(y)}function O(J){const we=Re(J),Ge=J.pageX-we.x,De=J.pageY-we.y,Ce=Math.sqrt(Ge*Ge+De*De);A.set(0,Ce),T.set(0,Math.pow(A.y/E.y,r.zoomSpeed)),z(T.y),E.copy(A)}function L(J){r.enableZoom&&O(J),r.enablePan&&ge(J)}function q(J){r.enableZoom&&O(J),r.enableRotate&&We(J)}function fe(J){var we,Ge;r.enabled!==!1&&(P.length===0&&((we=r.domElement)==null||we.ownerDocument.addEventListener("pointermove",le),(Ge=r.domElement)==null||Ge.ownerDocument.addEventListener("pointerup",ce)),Xe(J),J.pointerType==="touch"?$e(J):Pe(J))}function le(J){r.enabled!==!1&&(J.pointerType==="touch"?Ae(J):Ue(J))}function ce(J){var we,Ge,De;Ke(J),P.length===0&&((we=r.domElement)==null||we.releasePointerCapture(J.pointerId),(Ge=r.domElement)==null||Ge.ownerDocument.removeEventListener("pointermove",le),(De=r.domElement)==null||De.ownerDocument.removeEventListener("pointerup",ce)),r.dispatchEvent(a),c=l.NONE}function Pe(J){let we;switch(J.button){case 0:we=r.mouseButtons.LEFT;break;case 1:we=r.mouseButtons.MIDDLE;break;case 2:we=r.mouseButtons.RIGHT;break;default:we=-1}switch(we){case ec.DOLLY:if(r.enableZoom===!1)return;ie(J),c=l.DOLLY;break;case ec.ROTATE:if(J.ctrlKey||J.metaKey||J.shiftKey){if(r.enablePan===!1)return;de(J),c=l.PAN}else{if(r.enableRotate===!1)return;ne(J),c=l.ROTATE}break;case ec.PAN:if(J.ctrlKey||J.metaKey||J.shiftKey){if(r.enableRotate===!1)return;ne(J),c=l.ROTATE}else{if(r.enablePan===!1)return;de(J),c=l.PAN}break;default:c=l.NONE}c!==l.NONE&&r.dispatchEvent(s)}function Ue(J){if(r.enabled!==!1)switch(c){case l.ROTATE:if(r.enableRotate===!1)return;ae(J);break;case l.DOLLY:if(r.enableZoom===!1)return;_e(J);break;case l.PAN:if(r.enablePan===!1)return;je(J);break}}function Fe(J){r.enabled===!1||r.enableZoom===!1||c!==l.NONE&&c!==l.ROTATE||(J.preventDefault(),r.dispatchEvent(s),Le(J),r.dispatchEvent(a))}function ze(J){r.enabled===!1||r.enablePan===!1||Te(J)}function $e(J){switch(Be(J),P.length){case 1:switch(r.touches.ONE){case tc.ROTATE:if(r.enableRotate===!1)return;G(),c=l.TOUCH_ROTATE;break;case tc.PAN:if(r.enablePan===!1)return;Ee(),c=l.TOUCH_PAN;break;default:c=l.NONE}break;case 2:switch(r.touches.TWO){case tc.DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;ve(),c=l.TOUCH_DOLLY_PAN;break;case tc.DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;he(),c=l.TOUCH_DOLLY_ROTATE;break;default:c=l.NONE}break;default:c=l.NONE}c!==l.NONE&&r.dispatchEvent(s)}function Ae(J){switch(Be(J),c){case l.TOUCH_ROTATE:if(r.enableRotate===!1)return;We(J),r.update();break;case l.TOUCH_PAN:if(r.enablePan===!1)return;ge(J),r.update();break;case l.TOUCH_DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;L(J),r.update();break;case l.TOUCH_DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;q(J),r.update();break;default:c=l.NONE}}function at(J){r.enabled!==!1&&J.preventDefault()}function Xe(J){P.push(J)}function Ke(J){delete H[J.pointerId];for(let we=0;we<P.length;we++)if(P[we].pointerId==J.pointerId){P.splice(we,1);return}}function Be(J){let we=H[J.pointerId];we===void 0&&(we=new ke,H[J.pointerId]=we),we.set(J.pageX,J.pageY)}function Re(J){const we=J.pointerId===P[0].pointerId?P[1]:P[0];return H[we.pointerId]}this.dollyIn=(J=Y())=>{U(J),r.update()},this.dollyOut=(J=Y())=>{z(J),r.update()},this.getScale=()=>m,this.setScale=J=>{F(J),r.update()},this.getZoomScale=()=>Y(),n!==void 0&&this.connect(n),this.update()}};function _K(){var t=Object.create(null);function e(i,s){var a=i.id,l=i.name,c=i.dependencies;c===void 0&&(c=[]);var u=i.init;u===void 0&&(u=function(){});var d=i.getTransferables;if(d===void 0&&(d=null),!t[a])try{c=c.map(function(m){return m&&m.isWorkerModule&&(e(m,function(g){if(g instanceof Error)throw g}),m=t[m.id].value),m}),u=r("<"+l+">.init",u),d&&(d=r("<"+l+">.getTransferables",d));var f=null;typeof u=="function"?f=u.apply(void 0,c):console.error("worker module init function failed to rehydrate"),t[a]={id:a,value:f,getTransferables:d},s(f)}catch(m){m&&m.noLog||console.error(m),s(m)}}function n(i,s){var a,l=i.id,c=i.args;(!t[l]||typeof t[l].value!="function")&&s(new Error("Worker module "+l+": not found or its 'init' did not return a function"));try{var u=(a=t[l]).value.apply(a,c);u&&typeof u.then=="function"?u.then(d,function(f){return s(f instanceof Error?f:new Error(""+f))}):d(u)}catch(f){s(f)}function d(f){try{var m=t[l].getTransferables&&t[l].getTransferables(f);(!m||!Array.isArray(m)||!m.length)&&(m=void 0),s(f,m)}catch(g){console.error(g),s(g)}}}function r(i,s){var a=void 0;self.troikaDefine=function(c){return a=c};var l=URL.createObjectURL(new Blob(["/** "+i.replace(/\*/g,"")+` **/

troikaDefine(
`+s+`
)`],{type:"application/javascript"}));try{importScripts(l)}catch(c){console.error(c)}return URL.revokeObjectURL(l),delete self.troikaDefine,a}self.addEventListener("message",function(i){var s=i.data,a=s.messageId,l=s.action,c=s.data;try{l==="registerModule"&&e(c,function(u){u instanceof Error?postMessage({messageId:a,success:!1,error:u.message}):postMessage({messageId:a,success:!0,result:{isCallable:typeof u=="function"}})}),l==="callModule"&&n(c,function(u,d){u instanceof Error?postMessage({messageId:a,success:!1,error:u.message}):postMessage({messageId:a,success:!0,result:u},d||void 0)})}catch(u){postMessage({messageId:a,success:!1,error:u.stack})}})}function wK(t){var e=function(){for(var n=[],r=arguments.length;r--;)n[r]=arguments[r];return e._getInitResult().then(function(i){if(typeof i=="function")return i.apply(void 0,n);throw new Error("Worker module function was called but `init` did not return a callable function")})};return e._getInitResult=function(){var n=t.dependencies,r=t.init;n=Array.isArray(n)?n.map(function(s){return s&&s._getInitResult?s._getInitResult():s}):[];var i=Promise.all(n).then(function(s){return r.apply(null,s)});return e._getInitResult=function(){return i},i},e}var fI=function(){var t=!1;if(typeof window<"u"&&typeof window.document<"u")try{var e=new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"})));e.terminate(),t=!0}catch(n){typeof process<"u",console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+n.message+"]")}return fI=function(){return t},t},SK=0,MK=0,db=!1,Sf=Object.create(null),Mf=Object.create(null),z_=Object.create(null);function Fp(t){if((!t||typeof t.init!="function")&&!db)throw new Error("requires `options.init` function");var e=t.dependencies,n=t.init,r=t.getTransferables,i=t.workerId;if(!fI())return wK(t);i==null&&(i="#default");var s="workerModule"+ ++SK,a=t.name||s,l=null;e=e&&e.map(function(u){return typeof u=="function"&&!u.workerModuleData&&(db=!0,u=Fp({workerId:i,name:"<"+a+"> function dependency: "+u.name,init:`function(){return (
`+T0(u)+`
)}`}),db=!1),u&&u.workerModuleData&&(u=u.workerModuleData),u});function c(){for(var u=[],d=arguments.length;d--;)u[d]=arguments[d];if(!l){l=k3(i,"registerModule",c.workerModuleData);var f=function(){l=null,Mf[i].delete(f)};(Mf[i]||(Mf[i]=new Set)).add(f)}return l.then(function(m){var g=m.isCallable;if(g)return k3(i,"callModule",{id:s,args:u});throw new Error("Worker module function was called but `init` did not return a callable function")})}return c.workerModuleData={isWorkerModule:!0,id:s,name:a,dependencies:e,init:T0(n),getTransferables:r&&T0(r)},c}function EK(t){Mf[t]&&Mf[t].forEach(function(e){e()}),Sf[t]&&(Sf[t].terminate(),delete Sf[t])}function T0(t){var e=t.toString();return!/^function/.test(e)&&/^\w+\s*\(/.test(e)&&(e="function "+e),e}function NK(t){var e=Sf[t];if(!e){var n=T0(_K);e=Sf[t]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+t.replace(/\*/g,"")+` **/

;(`+n+")()"],{type:"application/javascript"}))),e.onmessage=function(r){var i=r.data,s=i.messageId,a=z_[s];if(!a)throw new Error("WorkerModule response with empty or unknown messageId");delete z_[s],a(i)}}return e}function k3(t,e,n){return new Promise(function(r,i){var s=++MK;z_[s]=function(a){a.success?r(a.result):i(new Error("Error in worker "+e+" call: "+a.error))},NK(t).postMessage({messageId:s,action:e,data:n})})}function pI(){var t=function(e){function n(F,z,U,Z,K,ne,ie,de){var ae=1-ie;de.x=ae*ae*F+2*ae*ie*U+ie*ie*K,de.y=ae*ae*z+2*ae*ie*Z+ie*ie*ne}function r(F,z,U,Z,K,ne,ie,de,ae,_e){var je=1-ae;_e.x=je*je*je*F+3*je*je*ae*U+3*je*ae*ae*K+ae*ae*ae*ie,_e.y=je*je*je*z+3*je*je*ae*Z+3*je*ae*ae*ne+ae*ae*ae*de}function i(F,z){for(var U=/([MLQCZ])([^MLQCZ]*)/g,Z,K,ne,ie,de;Z=U.exec(F);){var ae=Z[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(_e){return parseFloat(_e)});switch(Z[1]){case"M":ie=K=ae[0],de=ne=ae[1];break;case"L":(ae[0]!==ie||ae[1]!==de)&&z("L",ie,de,ie=ae[0],de=ae[1]);break;case"Q":{z("Q",ie,de,ie=ae[2],de=ae[3],ae[0],ae[1]);break}case"C":{z("C",ie,de,ie=ae[4],de=ae[5],ae[0],ae[1],ae[2],ae[3]);break}case"Z":(ie!==K||de!==ne)&&z("L",ie,de,K,ne);break}}}function s(F,z,U){U===void 0&&(U=16);var Z={x:0,y:0};i(F,function(K,ne,ie,de,ae,_e,je,Le,Te){switch(K){case"L":z(ne,ie,de,ae);break;case"Q":{for(var G=ne,Ee=ie,me=1;me<U;me++)n(ne,ie,_e,je,de,ae,me/(U-1),Z),z(G,Ee,Z.x,Z.y),G=Z.x,Ee=Z.y;break}case"C":{for(var ve=ne,he=ie,We=1;We<U;We++)r(ne,ie,_e,je,Le,Te,de,ae,We/(U-1),Z),z(ve,he,Z.x,Z.y),ve=Z.x,he=Z.y;break}}})}var a="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",l="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",c=new WeakMap,u={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function d(F,z){var U=F.getContext?F.getContext("webgl",u):F,Z=c.get(U);if(!Z){let ve=function(q){var fe=ne[q];if(!fe&&(fe=ne[q]=U.getExtension(q),!fe))throw new Error(q+" not supported");return fe},he=function(q,fe){var le=U.createShader(fe);return U.shaderSource(le,q),U.compileShader(le),le},We=function(q,fe,le,ce){if(!ie[q]){var Pe={},Ue={},Fe=U.createProgram();U.attachShader(Fe,he(fe,U.VERTEX_SHADER)),U.attachShader(Fe,he(le,U.FRAGMENT_SHADER)),U.linkProgram(Fe),ie[q]={program:Fe,transaction:function($e){U.useProgram(Fe),$e({setUniform:function(at,Xe){for(var Ke=[],Be=arguments.length-2;Be-- >0;)Ke[Be]=arguments[Be+2];var Re=Ue[Xe]||(Ue[Xe]=U.getUniformLocation(Fe,Xe));U["uniform"+at].apply(U,[Re].concat(Ke))},setAttribute:function(at,Xe,Ke,Be,Re){var J=Pe[at];J||(J=Pe[at]={buf:U.createBuffer(),loc:U.getAttribLocation(Fe,at),data:null}),U.bindBuffer(U.ARRAY_BUFFER,J.buf),U.vertexAttribPointer(J.loc,Xe,U.FLOAT,!1,0,0),U.enableVertexAttribArray(J.loc),K?U.vertexAttribDivisor(J.loc,Be):ve("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(J.loc,Be),Re!==J.data&&(U.bufferData(U.ARRAY_BUFFER,Re,Ke),J.data=Re)}})}}}ie[q].transaction(ce)},ge=function(q,fe){ae++;try{U.activeTexture(U.TEXTURE0+ae);var le=de[q];le||(le=de[q]=U.createTexture(),U.bindTexture(U.TEXTURE_2D,le),U.texParameteri(U.TEXTURE_2D,U.TEXTURE_MIN_FILTER,U.NEAREST),U.texParameteri(U.TEXTURE_2D,U.TEXTURE_MAG_FILTER,U.NEAREST)),U.bindTexture(U.TEXTURE_2D,le),fe(le,ae)}finally{ae--}},O=function(q,fe,le){var ce=U.createFramebuffer();_e.push(ce),U.bindFramebuffer(U.FRAMEBUFFER,ce),U.activeTexture(U.TEXTURE0+fe),U.bindTexture(U.TEXTURE_2D,q),U.framebufferTexture2D(U.FRAMEBUFFER,U.COLOR_ATTACHMENT0,U.TEXTURE_2D,q,0);try{le(ce)}finally{U.deleteFramebuffer(ce),U.bindFramebuffer(U.FRAMEBUFFER,_e[--_e.length-1]||null)}},L=function(){ne={},ie={},de={},ae=-1,_e.length=0};var je=ve,Le=he,Te=We,G=ge,Ee=O,me=L,K=typeof WebGL2RenderingContext<"u"&&U instanceof WebGL2RenderingContext,ne={},ie={},de={},ae=-1,_e=[];U.canvas.addEventListener("webglcontextlost",function(q){L(),q.preventDefault()},!1),c.set(U,Z={gl:U,isWebGL2:K,getExtension:ve,withProgram:We,withTexture:ge,withTextureFramebuffer:O,handleContextLoss:L})}z(Z)}function f(F,z,U,Z,K,ne,ie,de){ie===void 0&&(ie=15),de===void 0&&(de=null),d(F,function(ae){var _e=ae.gl,je=ae.withProgram,Le=ae.withTexture;Le("copy",function(Te,G){_e.texImage2D(_e.TEXTURE_2D,0,_e.RGBA,K,ne,0,_e.RGBA,_e.UNSIGNED_BYTE,z),je("copy",a,l,function(Ee){var me=Ee.setUniform,ve=Ee.setAttribute;ve("aUV",2,_e.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),me("1i","image",G),_e.bindFramebuffer(_e.FRAMEBUFFER,de||null),_e.disable(_e.BLEND),_e.colorMask(ie&8,ie&4,ie&2,ie&1),_e.viewport(U,Z,K,ne),_e.scissor(U,Z,K,ne),_e.drawArrays(_e.TRIANGLES,0,3)})})})}function m(F,z,U){var Z=F.width,K=F.height;d(F,function(ne){var ie=ne.gl,de=new Uint8Array(Z*K*4);ie.readPixels(0,0,Z,K,ie.RGBA,ie.UNSIGNED_BYTE,de),F.width=z,F.height=U,f(ie,de,0,0,Z,K)})}var g=Object.freeze({__proto__:null,withWebGLContext:d,renderImageData:f,resizeWebGLCanvasWithoutClearing:m});function v(F,z,U,Z,K,ne){ne===void 0&&(ne=1);var ie=new Uint8Array(F*z),de=Z[2]-Z[0],ae=Z[3]-Z[1],_e=[];s(U,function(ve,he,We,ge){_e.push({x1:ve,y1:he,x2:We,y2:ge,minX:Math.min(ve,We),minY:Math.min(he,ge),maxX:Math.max(ve,We),maxY:Math.max(he,ge)})}),_e.sort(function(ve,he){return ve.maxX-he.maxX});for(var je=0;je<F;je++)for(var Le=0;Le<z;Le++){var Te=Ee(Z[0]+de*(je+.5)/F,Z[1]+ae*(Le+.5)/z),G=Math.pow(1-Math.abs(Te)/K,ne)/2;Te<0&&(G=1-G),G=Math.max(0,Math.min(255,Math.round(G*255))),ie[Le*F+je]=G}return ie;function Ee(ve,he){for(var We=1/0,ge=1/0,O=_e.length;O--;){var L=_e[O];if(L.maxX+ge<=ve)break;if(ve+ge>L.minX&&he-ge<L.maxY&&he+ge>L.minY){var q=x(ve,he,L.x1,L.y1,L.x2,L.y2);q<We&&(We=q,ge=Math.sqrt(We))}}return me(ve,he)&&(ge=-ge),ge}function me(ve,he){for(var We=0,ge=_e.length;ge--;){var O=_e[ge];if(O.maxX<=ve)break;var L=O.y1>he!=O.y2>he&&ve<(O.x2-O.x1)*(he-O.y1)/(O.y2-O.y1)+O.x1;L&&(We+=O.y1<O.y2?1:-1)}return We!==0}}function _(F,z,U,Z,K,ne,ie,de,ae,_e){ne===void 0&&(ne=1),de===void 0&&(de=0),ae===void 0&&(ae=0),_e===void 0&&(_e=0),b(F,z,U,Z,K,ne,ie,null,de,ae,_e)}function b(F,z,U,Z,K,ne,ie,de,ae,_e,je){ne===void 0&&(ne=1),ae===void 0&&(ae=0),_e===void 0&&(_e=0),je===void 0&&(je=0);for(var Le=v(F,z,U,Z,K,ne),Te=new Uint8Array(Le.length*4),G=0;G<Le.length;G++)Te[G*4+je]=Le[G];f(ie,Te,ae,_e,F,z,1<<3-je,de)}function x(F,z,U,Z,K,ne){var ie=K-U,de=ne-Z,ae=ie*ie+de*de,_e=ae?Math.max(0,Math.min(1,((F-U)*ie+(z-Z)*de)/ae)):0,je=F-(U+_e*ie),Le=z-(Z+_e*de);return je*je+Le*Le}var y=Object.freeze({__proto__:null,generate:v,generateIntoCanvas:_,generateIntoFramebuffer:b}),S="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",E="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",A="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",T=new Float32Array([0,0,2,0,0,2]),C=null,j=!1,k={},P=new WeakMap;function H(F){if(!j&&!Q(F))throw new Error("WebGL generation not supported")}function B(F,z,U,Z,K,ne,ie){if(ne===void 0&&(ne=1),ie===void 0&&(ie=null),!ie&&(ie=C,!ie)){var de=typeof OffscreenCanvas=="function"?new OffscreenCanvas(1,1):typeof document<"u"?document.createElement("canvas"):null;if(!de)throw new Error("OffscreenCanvas or DOM canvas not supported");ie=C=de.getContext("webgl",{depth:!1})}H(ie);var ae=new Uint8Array(F*z*4);d(ie,function(Te){var G=Te.gl,Ee=Te.withTexture,me=Te.withTextureFramebuffer;Ee("readable",function(ve,he){G.texImage2D(G.TEXTURE_2D,0,G.RGBA,F,z,0,G.RGBA,G.UNSIGNED_BYTE,null),me(ve,he,function(We){V(F,z,U,Z,K,ne,G,We,0,0,0),G.readPixels(0,0,F,z,G.RGBA,G.UNSIGNED_BYTE,ae)})})});for(var _e=new Uint8Array(F*z),je=0,Le=0;je<ae.length;je+=4)_e[Le++]=ae[je];return _e}function Y(F,z,U,Z,K,ne,ie,de,ae,_e){ne===void 0&&(ne=1),de===void 0&&(de=0),ae===void 0&&(ae=0),_e===void 0&&(_e=0),V(F,z,U,Z,K,ne,ie,null,de,ae,_e)}function V(F,z,U,Z,K,ne,ie,de,ae,_e,je){ne===void 0&&(ne=1),ae===void 0&&(ae=0),_e===void 0&&(_e=0),je===void 0&&(je=0),H(ie);var Le=[];s(U,function(Te,G,Ee,me){Le.push(Te,G,Ee,me)}),Le=new Float32Array(Le),d(ie,function(Te){var G=Te.gl,Ee=Te.isWebGL2,me=Te.getExtension,ve=Te.withProgram,he=Te.withTexture,We=Te.withTextureFramebuffer,ge=Te.handleContextLoss;if(he("rawDistances",function(O,L){(F!==O._lastWidth||z!==O._lastHeight)&&G.texImage2D(G.TEXTURE_2D,0,G.RGBA,O._lastWidth=F,O._lastHeight=z,0,G.RGBA,G.UNSIGNED_BYTE,null),ve("main",S,E,function(q){var fe=q.setAttribute,le=q.setUniform,ce=!Ee&&me("ANGLE_instanced_arrays"),Pe=!Ee&&me("EXT_blend_minmax");fe("aUV",2,G.STATIC_DRAW,0,T),fe("aLineSegment",4,G.DYNAMIC_DRAW,1,Le),le.apply(void 0,["4f","uGlyphBounds"].concat(Z)),le("1f","uMaxDistance",K),le("1f","uExponent",ne),We(O,L,function(Ue){G.enable(G.BLEND),G.colorMask(!0,!0,!0,!0),G.viewport(0,0,F,z),G.scissor(0,0,F,z),G.blendFunc(G.ONE,G.ONE),G.blendEquationSeparate(G.FUNC_ADD,Ee?G.MAX:Pe.MAX_EXT),G.clear(G.COLOR_BUFFER_BIT),Ee?G.drawArraysInstanced(G.TRIANGLES,0,3,Le.length/4):ce.drawArraysInstancedANGLE(G.TRIANGLES,0,3,Le.length/4)})}),ve("post",a,A,function(q){q.setAttribute("aUV",2,G.STATIC_DRAW,0,T),q.setUniform("1i","tex",L),G.bindFramebuffer(G.FRAMEBUFFER,de),G.disable(G.BLEND),G.colorMask(je===0,je===1,je===2,je===3),G.viewport(ae,_e,F,z),G.scissor(ae,_e,F,z),G.drawArrays(G.TRIANGLES,0,3)})}),G.isContextLost())throw ge(),new Error("webgl context lost")})}function Q(F){var z=!F||F===C?k:F.canvas||F,U=P.get(z);if(U===void 0){j=!0;var Z=null;try{var K=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],ne=B(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,F);U=ne&&K.length===ne.length&&ne.every(function(ie,de){return ie===K[de]}),U||(Z="bad trial run results",console.info(K,ne))}catch(ie){U=!1,Z=ie.message}Z&&console.warn("WebGL SDF generation not supported:",Z),j=!1,P.set(z,U)}return U}var ee=Object.freeze({__proto__:null,generate:B,generateIntoCanvas:Y,generateIntoFramebuffer:V,isSupported:Q});function re(F,z,U,Z,K,ne){K===void 0&&(K=Math.max(Z[2]-Z[0],Z[3]-Z[1])/2),ne===void 0&&(ne=1);try{return B.apply(ee,arguments)}catch(ie){return console.info("WebGL SDF generation failed, falling back to JS",ie),v.apply(y,arguments)}}function I(F,z,U,Z,K,ne,ie,de,ae,_e){K===void 0&&(K=Math.max(Z[2]-Z[0],Z[3]-Z[1])/2),ne===void 0&&(ne=1),de===void 0&&(de=0),ae===void 0&&(ae=0),_e===void 0&&(_e=0);try{return Y.apply(ee,arguments)}catch(je){return console.info("WebGL SDF generation failed, falling back to JS",je),_.apply(y,arguments)}}return e.forEachPathCommand=i,e.generate=re,e.generateIntoCanvas=I,e.javascript=y,e.pathToLineSegments=s,e.webgl=ee,e.webglUtils=g,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return t}function TK(){var t=function(e){var n={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},r={},i={};r.L=1,i[1]="L",Object.keys(n).forEach(function(ge,O){r[ge]=1<<O+1,i[r[ge]]=ge}),Object.freeze(r);var s=r.LRI|r.RLI|r.FSI,a=r.L|r.R|r.AL,l=r.B|r.S|r.WS|r.ON|r.FSI|r.LRI|r.RLI|r.PDI,c=r.BN|r.RLE|r.LRE|r.RLO|r.LRO|r.PDF,u=r.S|r.WS|r.B|s|r.PDI|c,d=null;function f(){if(!d){d=new Map;var ge=function(L){if(n.hasOwnProperty(L)){var q=0;n[L].split(",").forEach(function(fe){var le=fe.split("+"),ce=le[0],Pe=le[1];ce=parseInt(ce,36),Pe=Pe?parseInt(Pe,36):0,d.set(q+=ce,r[L]);for(var Ue=0;Ue<Pe;Ue++)d.set(++q,r[L])})}};for(var O in n)ge(O)}}function m(ge){return f(),d.get(ge.codePointAt(0))||r.L}function g(ge){return i[m(ge)]}var v={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function _(ge,O){var L=36,q=0,fe=new Map,le=O&&new Map,ce;return ge.split(",").forEach(function Pe(Ue){if(Ue.indexOf("+")!==-1)for(var Fe=+Ue;Fe--;)Pe(ce);else{ce=Ue;var ze=Ue.split(">"),$e=ze[0],Ae=ze[1];$e=String.fromCodePoint(q+=parseInt($e,L)),Ae=String.fromCodePoint(q+=parseInt(Ae,L)),fe.set($e,Ae),O&&le.set(Ae,$e)}}),{map:fe,reverseMap:le}}var b,x,y;function S(){if(!b){var ge=_(v.pairs,!0),O=ge.map,L=ge.reverseMap;b=O,x=L,y=_(v.canonical,!1).map}}function E(ge){return S(),b.get(ge)||null}function A(ge){return S(),x.get(ge)||null}function T(ge){return S(),y.get(ge)||null}var C=r.L,j=r.R,k=r.EN,P=r.ES,H=r.ET,B=r.AN,Y=r.CS,V=r.B,Q=r.S,ee=r.ON,re=r.BN,I=r.NSM,F=r.AL,z=r.LRO,U=r.RLO,Z=r.LRE,K=r.RLE,ne=r.PDF,ie=r.LRI,de=r.RLI,ae=r.FSI,_e=r.PDI;function je(ge,O){for(var L=125,q=new Uint32Array(ge.length),fe=0;fe<ge.length;fe++)q[fe]=m(ge[fe]);var le=new Map;function ce(hr,ei){var Bn=q[hr];q[hr]=ei,le.set(Bn,le.get(Bn)-1),Bn&l&&le.set(l,le.get(l)-1),le.set(ei,(le.get(ei)||0)+1),ei&l&&le.set(l,(le.get(l)||0)+1)}for(var Pe=new Uint8Array(ge.length),Ue=new Map,Fe=[],ze=null,$e=0;$e<ge.length;$e++)ze||Fe.push(ze={start:$e,end:ge.length-1,level:O==="rtl"?1:O==="ltr"?0:qc($e,!1)}),q[$e]&V&&(ze.end=$e,ze=null);for(var Ae=K|Z|U|z|s|_e|ne|V,at=function(hr){return hr+(hr&1?1:2)},Xe=function(hr){return hr+(hr&1?2:1)},Ke=0;Ke<Fe.length;Ke++){ze=Fe[Ke];var Be=[{_level:ze.level,_override:0,_isolate:0}],Re=void 0,J=0,we=0,Ge=0;le.clear();for(var De=ze.start;De<=ze.end;De++){var Ce=q[De];if(Re=Be[Be.length-1],le.set(Ce,(le.get(Ce)||0)+1),Ce&l&&le.set(l,(le.get(l)||0)+1),Ce&Ae)if(Ce&(K|Z)){Pe[De]=Re._level;var te=(Ce===K?Xe:at)(Re._level);te<=L&&!J&&!we?Be.push({_level:te,_override:0,_isolate:0}):J||we++}else if(Ce&(U|z)){Pe[De]=Re._level;var Ve=(Ce===U?Xe:at)(Re._level);Ve<=L&&!J&&!we?Be.push({_level:Ve,_override:Ce&U?j:C,_isolate:0}):J||we++}else if(Ce&s){Ce&ae&&(Ce=qc(De+1,!0)===1?de:ie),Pe[De]=Re._level,Re._override&&ce(De,Re._override);var qe=(Ce===de?Xe:at)(Re._level);qe<=L&&J===0&&we===0?(Ge++,Be.push({_level:qe,_override:0,_isolate:1,_isolInitIndex:De})):J++}else if(Ce&_e){if(J>0)J--;else if(Ge>0){for(we=0;!Be[Be.length-1]._isolate;)Be.pop();var lt=Be[Be.length-1]._isolInitIndex;lt!=null&&(Ue.set(lt,De),Ue.set(De,lt)),Be.pop(),Ge--}Re=Be[Be.length-1],Pe[De]=Re._level,Re._override&&ce(De,Re._override)}else Ce&ne?(J===0&&(we>0?we--:!Re._isolate&&Be.length>1&&(Be.pop(),Re=Be[Be.length-1])),Pe[De]=Re._level):Ce&V&&(Pe[De]=ze.level);else Pe[De]=Re._level,Re._override&&Ce!==re&&ce(De,Re._override)}for(var Je=[],gt=null,ut=ze.start;ut<=ze.end;ut++){var zt=q[ut];if(!(zt&c)){var Mt=Pe[ut],ft=zt&s,$t=zt===_e;gt&&Mt===gt._level?(gt._end=ut,gt._endsWithIsolInit=ft):Je.push(gt={_start:ut,_end:ut,_level:Mt,_startsWithPDI:$t,_endsWithIsolInit:ft})}}for(var sn=[],Bt=0;Bt<Je.length;Bt++){var yn=Je[Bt];if(!yn._startsWithPDI||yn._startsWithPDI&&!Ue.has(yn._start)){for(var nr=[gt=yn],un=void 0;gt&&gt._endsWithIsolInit&&(un=Ue.get(gt._end))!=null;)for(var dn=Bt+1;dn<Je.length;dn++)if(Je[dn]._start===un){nr.push(gt=Je[dn]);break}for(var qn=[],Ri=0;Ri<nr.length;Ri++)for(var $r=nr[Ri],bs=$r._start;bs<=$r._end;bs++)qn.push(bs);for(var qd=Pe[qn[0]],W=ze.level,ue=qn[0]-1;ue>=0;ue--)if(!(q[ue]&c)){W=Pe[ue];break}var be=qn[qn.length-1],Se=Pe[be],ye=ze.level;if(!(q[be]&s)){for(var Qe=be+1;Qe<=ze.end;Qe++)if(!(q[Qe]&c)){ye=Pe[Qe];break}}sn.push({_seqIndices:qn,_sosType:Math.max(W,qd)%2?j:C,_eosType:Math.max(ye,Se)%2?j:C})}}for(var ct=0;ct<sn.length;ct++){var pt=sn[ct],Oe=pt._seqIndices,bt=pt._sosType,_t=pt._eosType,xt=Pe[Oe[0]]&1?j:C;if(le.get(I))for(var en=0;en<Oe.length;en++){var $n=Oe[en];if(q[$n]&I){for(var Zt=bt,bn=en-1;bn>=0;bn--)if(!(q[Oe[bn]]&c)){Zt=q[Oe[bn]];break}ce($n,Zt&(s|_e)?ee:Zt)}}if(le.get(k))for(var mt=0;mt<Oe.length;mt++){var rt=Oe[mt];if(q[rt]&k)for(var yr=mt-1;yr>=-1;yr--){var Ct=yr===-1?bt:q[Oe[yr]];if(Ct&a){Ct===F&&ce(rt,B);break}}}if(le.get(F))for(var an=0;an<Oe.length;an++){var ji=Oe[an];q[ji]&F&&ce(ji,j)}if(le.get(P)||le.get(Y))for(var ur=1;ur<Oe.length-1;ur++){var Rn=Oe[ur];if(q[Rn]&(P|Y)){for(var tn=0,mi=0,qs=ur-1;qs>=0&&(tn=q[Oe[qs]],!!(tn&c));qs--);for(var zn=ur+1;zn<Oe.length&&(mi=q[Oe[zn]],!!(mi&c));zn++);tn===mi&&(q[Rn]===P?tn===k:tn&(k|B))&&ce(Rn,tn)}}if(le.get(k))for(var br=0;br<Oe.length;br++){var Zr=Oe[br];if(q[Zr]&k){for(var Ea=br-1;Ea>=0&&q[Oe[Ea]]&(H|c);Ea--)ce(Oe[Ea],k);for(br++;br<Oe.length&&q[Oe[br]]&(H|c|k);br++)q[Oe[br]]!==k&&ce(Oe[br],k)}}if(le.get(H)||le.get(P)||le.get(Y))for(var Sl=0;Sl<Oe.length;Sl++){var Bp=Oe[Sl];if(q[Bp]&(H|P|Y)){ce(Bp,ee);for(var Na=Sl-1;Na>=0&&q[Oe[Na]]&c;Na--)ce(Oe[Na],ee);for(var Ta=Sl+1;Ta<Oe.length&&q[Oe[Ta]]&c;Ta++)ce(Oe[Ta],ee)}}if(le.get(k))for(var Aa=0,Ml=bt;Aa<Oe.length;Aa++){var Vp=Oe[Aa],$d=q[Vp];$d&k?Ml===C&&ce(Vp,C):$d&a&&(Ml=$d)}if(le.get(l)){var Ca=j|k|B,Wc=Ca|C,$s=[];{for(var xo=[],Zs=0;Zs<Oe.length;Zs++)if(q[Oe[Zs]]&l){var It=ge[Oe[Zs]],Zd=void 0;if(E(It)!==null)if(xo.length<63)xo.push({char:It,seqIndex:Zs});else break;else if((Zd=A(It))!==null)for(var ka=xo.length-1;ka>=0;ka--){var Xc=xo[ka].char;if(Xc===Zd||Xc===A(T(It))||E(T(Xc))===It){$s.push([xo[ka].seqIndex,Zs]),xo.length=ka;break}}}$s.sort(function(hr,ei){return hr[0]-ei[0]})}for(var Kd=0;Kd<$s.length;Kd++){for(var Hp=$s[Kd],_n=Hp[0],El=Hp[1],Gp=!1,Kr=0,Jd=_n+1;Jd<El;Jd++){var Nl=Oe[Jd];if(q[Nl]&Wc){Gp=!0;var Li=q[Nl]&Ca?j:C;if(Li===xt){Kr=Li;break}}}if(Gp&&!Kr){Kr=bt;for(var Qd=_n-1;Qd>=0;Qd--){var Wp=Oe[Qd];if(q[Wp]&Wc){var Di=q[Wp]&Ca?j:C;Di!==xt?Kr=Di:Kr=xt;break}}}if(Kr){if(q[Oe[_n]]=q[Oe[El]]=Kr,Kr!==xt){for(var Jr=_n+1;Jr<Oe.length;Jr++)if(!(q[Oe[Jr]]&c)){m(ge[Oe[Jr]])&I&&(q[Oe[Jr]]=Kr);break}}if(Kr!==xt){for(var Ks=El+1;Ks<Oe.length;Ks++)if(!(q[Oe[Ks]]&c)){m(ge[Oe[Ks]])&I&&(q[Oe[Ks]]=Kr);break}}}}for(var Ji=0;Ji<Oe.length;Ji++)if(q[Oe[Ji]]&l){for(var eh=Ji,th=Ji,gi=bt,Tl=Ji-1;Tl>=0;Tl--)if(q[Oe[Tl]]&c)eh=Tl;else{gi=q[Oe[Tl]]&Ca?j:C;break}for(var Al=_t,Cl=Ji+1;Cl<Oe.length;Cl++)if(q[Oe[Cl]]&(l|c))th=Cl;else{Al=q[Oe[Cl]]&Ca?j:C;break}for(var Qr=eh;Qr<=th;Qr++)q[Oe[Qr]]=gi===Al?gi:xt;Ji=th}}}for(var dr=ze.start;dr<=ze.end;dr++){var Yc=Pe[dr],_s=q[dr];if(Yc&1?_s&(C|k|B)&&Pe[dr]++:_s&j?Pe[dr]++:_s&(B|k)&&(Pe[dr]+=2),_s&c&&(Pe[dr]=dr===0?ze.level:Pe[dr-1]),dr===ze.end||m(ge[dr])&(Q|V))for(var vo=dr;vo>=0&&m(ge[vo])&u;vo--)Pe[vo]=ze.level}}return{levels:Pe,paragraphs:Fe};function qc(hr,ei){for(var Bn=hr;Bn<ge.length;Bn++){var Vn=q[Bn];if(Vn&(j|F))return 1;if(Vn&(V|C)||ei&&Vn===_e)return 0;if(Vn&s){var Ii=Xp(Bn);Bn=Ii===-1?ge.length:Ii}}return 0}function Xp(hr){for(var ei=1,Bn=hr+1;Bn<ge.length;Bn++){var Vn=q[Bn];if(Vn&V)break;if(Vn&_e){if(--ei===0)return Bn}else Vn&s&&ei++}return-1}}var Le="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",Te;function G(){if(!Te){var ge=_(Le,!0),O=ge.map,L=ge.reverseMap;L.forEach(function(q,fe){O.set(fe,q)}),Te=O}}function Ee(ge){return G(),Te.get(ge)||null}function me(ge,O,L,q){var fe=ge.length;L=Math.max(0,L==null?0:+L),q=Math.min(fe-1,q==null?fe-1:+q);for(var le=new Map,ce=L;ce<=q;ce++)if(O[ce]&1){var Pe=Ee(ge[ce]);Pe!==null&&le.set(ce,Pe)}return le}function ve(ge,O,L,q){var fe=ge.length;L=Math.max(0,L==null?0:+L),q=Math.min(fe-1,q==null?fe-1:+q);var le=[];return O.paragraphs.forEach(function(ce){var Pe=Math.max(L,ce.start),Ue=Math.min(q,ce.end);if(Pe<Ue){for(var Fe=O.levels.slice(Pe,Ue+1),ze=Ue;ze>=Pe&&m(ge[ze])&u;ze--)Fe[ze]=ce.level;for(var $e=ce.level,Ae=1/0,at=0;at<Fe.length;at++){var Xe=Fe[at];Xe>$e&&($e=Xe),Xe<Ae&&(Ae=Xe|1)}for(var Ke=$e;Ke>=Ae;Ke--)for(var Be=0;Be<Fe.length;Be++)if(Fe[Be]>=Ke){for(var Re=Be;Be+1<Fe.length&&Fe[Be+1]>=Ke;)Be++;Be>Re&&le.push([Re+Pe,Be+Pe])}}}),le}function he(ge,O,L,q){var fe=We(ge,O,L,q),le=[].concat(ge);return fe.forEach(function(ce,Pe){le[Pe]=(O.levels[ce]&1?Ee(ge[ce]):null)||ge[ce]}),le.join("")}function We(ge,O,L,q){for(var fe=ve(ge,O,L,q),le=[],ce=0;ce<ge.length;ce++)le[ce]=ce;return fe.forEach(function(Pe){for(var Ue=Pe[0],Fe=Pe[1],ze=le.slice(Ue,Fe+1),$e=ze.length;$e--;)le[Fe-$e]=ze[$e]}),le}return e.closingToOpeningBracket=A,e.getBidiCharType=m,e.getBidiCharTypeName=g,e.getCanonicalBracket=T,e.getEmbeddingLevels=je,e.getMirroredCharacter=Ee,e.getMirroredCharactersMap=me,e.getReorderSegments=ve,e.getReorderedIndices=We,e.getReorderedString=he,e.openingToClosingBracket=E,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return t}const mI=/\bvoid\s+main\s*\(\s*\)\s*{/g;function B_(t){const e=/^[ \t]*#include +<([\w\d./]+)>/gm;function n(r,i){let s=kt[i];return s?B_(s):r}return t.replace(e,n)}const Sr=[];for(let t=0;t<256;t++)Sr[t]=(t<16?"0":"")+t.toString(16);function AK(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(Sr[t&255]+Sr[t>>8&255]+Sr[t>>16&255]+Sr[t>>24&255]+"-"+Sr[e&255]+Sr[e>>8&255]+"-"+Sr[e>>16&15|64]+Sr[e>>24&255]+"-"+Sr[n&63|128]+Sr[n>>8&255]+"-"+Sr[n>>16&255]+Sr[n>>24&255]+Sr[r&255]+Sr[r>>8&255]+Sr[r>>16&255]+Sr[r>>24&255]).toUpperCase()}const Zl=Object.assign||function(){let t=arguments[0];for(let e=1,n=arguments.length;e<n;e++){let r=arguments[e];if(r)for(let i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},CK=Date.now(),P3=new WeakMap,R3=new Map;let kK=1e10;function V_(t,e){const n=LK(e);let r=P3.get(t);if(r||P3.set(t,r=Object.create(null)),r[n])return new r[n];const i=`_onBeforeCompile${n}`,s=function(u,d){t.onBeforeCompile.call(this,u,d);const f=this.customProgramCacheKey()+"|"+u.vertexShader+"|"+u.fragmentShader;let m=R3[f];if(!m){const g=PK(this,u,e,n);m=R3[f]=g}u.vertexShader=m.vertexShader,u.fragmentShader=m.fragmentShader,Zl(u.uniforms,this.uniforms),e.timeUniform&&(u.uniforms[e.timeUniform]={get value(){return Date.now()-CK}}),this[i]&&this[i](u)},a=function(){return l(e.chained?t:t.clone())},l=function(u){const d=Object.create(u,c);return Object.defineProperty(d,"baseMaterial",{value:t}),Object.defineProperty(d,"id",{value:kK++}),d.uuid=AK(),d.uniforms=Zl({},u.uniforms,e.uniforms),d.defines=Zl({},u.defines,e.defines),d.defines[`TROIKA_DERIVED_MATERIAL_${n}`]="",d.extensions=Zl({},u.extensions,e.extensions),d._listeners=void 0,d},c={constructor:{value:a},isDerivedMaterial:{value:!0},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return t.customProgramCacheKey()+"|"+n}},onBeforeCompile:{get(){return s},set(u){this[i]=u}},copy:{writable:!0,configurable:!0,value:function(u){return t.copy.call(this,u),!t.isShaderMaterial&&!t.isDerivedMaterial&&(Zl(this.extensions,u.extensions),Zl(this.defines,u.defines),Zl(this.uniforms,JS.clone(u.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const u=new t.constructor;return l(u).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let u=this._depthMaterial;return u||(u=this._depthMaterial=V_(t.isDerivedMaterial?t.getDepthMaterial():new cv({depthPacking:WS}),e),u.defines.IS_DEPTH_MATERIAL="",u.uniforms=this.uniforms),u}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let u=this._distanceMaterial;return u||(u=this._distanceMaterial=V_(t.isDerivedMaterial?t.getDistanceMaterial():new uv,e),u.defines.IS_DISTANCE_MATERIAL="",u.uniforms=this.uniforms),u}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:u,_distanceMaterial:d}=this;u&&u.dispose(),d&&d.dispose(),t.dispose.call(this)}}};return r[n]=a,new a}function PK(t,{vertexShader:e,fragmentShader:n},r,i){let{vertexDefs:s,vertexMainIntro:a,vertexMainOutro:l,vertexTransform:c,fragmentDefs:u,fragmentMainIntro:d,fragmentMainOutro:f,fragmentColorTransform:m,customRewriter:g,timeUniform:v}=r;if(s=s||"",a=a||"",l=l||"",u=u||"",d=d||"",f=f||"",(c||g)&&(e=B_(e)),(m||g)&&(n=n.replace(/^[ \t]*#include <((?:tonemapping|encodings|fog|premultiplied_alpha|dithering)_fragment)>/gm,`
//!BEGIN_POST_CHUNK $1
$&
//!END_POST_CHUNK
`),n=B_(n)),g){let _=g({vertexShader:e,fragmentShader:n});e=_.vertexShader,n=_.fragmentShader}if(m){let _=[];n=n.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,b=>(_.push(b),"")),f=`${m}
${_.join(`
`)}
${f}`}if(v){const _=`
uniform float ${v};
`;s=_+s,u=_+u}return c&&(e=`vec3 troika_position_${i};
vec3 troika_normal_${i};
vec2 troika_uv_${i};
${e}
`,s=`${s}
void troikaVertexTransform${i}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${c}
}
`,a=`
troika_position_${i} = vec3(position);
troika_normal_${i} = vec3(normal);
troika_uv_${i} = vec2(uv);
troikaVertexTransform${i}(troika_position_${i}, troika_normal_${i}, troika_uv_${i});
${a}
`,e=e.replace(/\b(position|normal|uv)\b/g,(_,b,x,y)=>/\battribute\s+vec[23]\s+$/.test(y.substr(0,x))?b:`troika_${b}_${i}`),t.map&&t.map.channel>0||(e=e.replace(/\bMAP_UV\b/g,`troika_uv_${i}`))),e=j3(e,i,s,a,l),n=j3(n,i,u,d,f),{vertexShader:e,fragmentShader:n}}function j3(t,e,n,r,i){return(r||i||n)&&(t=t.replace(mI,`
${n}
void troikaOrigMain${e}() {`),t+=`
void main() {
  ${r}
  troikaOrigMain${e}();
  ${i}
}`),t}function RK(t,e){return t==="uniforms"?void 0:typeof e=="function"?e.toString():e}let jK=0;const L3=new Map;function LK(t){const e=JSON.stringify(t,RK);let n=L3.get(e);return n==null&&L3.set(e,n=++jK),n}function DK(t,e,n){const{defaultFontURL:r}=n,i=Object.create(null),s=1/0,a=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,l="[^\\S\\u00A0]",c=new RegExp(`${l}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function u(y,S){function E(){const A=T=>{console.error(`Failure loading font ${y}${y===r?"":"; trying fallback"}`,T),y!==r&&(y=r,E())};try{const T=new XMLHttpRequest;T.open("get",y,!0),T.responseType="arraybuffer",T.onload=function(){if(T.status>=400)A(new Error(T.statusText));else if(T.status>0)try{const C=t(T.response);S(C)}catch(C){A(C)}},T.onerror=A,T.send()}catch(T){A(T)}}E()}function d(y,S){y||(y=r);let E=i[y];E?E.pending?E.pending.push(S):S(E):(i[y]={pending:[S]},u(y,A=>{let T=i[y].pending;i[y]=A,T.forEach(C=>C(A))}))}function f({text:y="",font:S=r,sdfGlyphSize:E=64,fontSize:A=1,letterSpacing:T=0,lineHeight:C="normal",maxWidth:j=s,direction:k,textAlign:P="left",textIndent:H=0,whiteSpace:B="normal",overflowWrap:Y="normal",anchorX:V=0,anchorY:Q=0,includeCaretPositions:ee=!1,chunkedBoundsSize:re=8192,colorRanges:I=null},F,z=!1){const U=_(),Z={fontLoad:0,typesetting:0};y.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),y=y.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),A=+A,T=+T,j=+j,C=C||"normal",H=+H,d(S,K=>{const ne=isFinite(j);let ie=null,de=null,ae=null,_e=null,je=null,Le=null,Te=null,G=0,Ee=0,me=B!=="nowrap";const{ascender:ve,descender:he,unitsPerEm:We,lineGap:ge,capHeight:O,xHeight:L}=K;Z.fontLoad=_()-U;const q=_(),fe=A/We;C==="normal"&&(C=(ve-he+ge)/We),C=C*A;const le=(C-(ve-he)*fe)/2,ce=-(ve*fe+le),Pe=Math.min(C,(ve-he)*fe),Ue=(ve+he)/2*fe-Pe/2;let Fe=H,ze=new b;const $e=[ze];K.forEachGlyph(y,A,T,(Xe,Ke,Be)=>{const Re=y.charAt(Be),J=Xe.advanceWidth*fe,we=ze.count;let Ge;if("isEmpty"in Xe||(Xe.isWhitespace=!!Re&&new RegExp(l).test(Re),Xe.canBreakAfter=!!Re&&c.test(Re),Xe.isEmpty=Xe.xMin===Xe.xMax||Xe.yMin===Xe.yMax||a.test(Re)),!Xe.isWhitespace&&!Xe.isEmpty&&Ee++,me&&ne&&!Xe.isWhitespace&&Ke+J+Fe>j&&we){if(ze.glyphAt(we-1).glyphObj.canBreakAfter)Ge=new b,Fe=-Ke;else for(let Ce=we;Ce--;)if(Ce===0&&Y==="break-word"){Ge=new b,Fe=-Ke;break}else if(ze.glyphAt(Ce).glyphObj.canBreakAfter){Ge=ze.splitAt(Ce+1);const te=Ge.glyphAt(0).x;Fe-=te;for(let Ve=Ge.count;Ve--;)Ge.glyphAt(Ve).x-=te;break}Ge&&(ze.isSoftWrapped=!0,ze=Ge,$e.push(ze),G=j)}let De=ze.glyphAt(ze.count);De.glyphObj=Xe,De.x=Ke+Fe,De.width=J,De.charIndex=Be,Re===`
`&&(ze=new b,$e.push(ze),Fe=-(Ke+J+T*A)+H)}),$e.forEach(Xe=>{for(let Ke=Xe.count;Ke--;){let{glyphObj:Be,x:Re,width:J}=Xe.glyphAt(Ke);if(!Be.isWhitespace){Xe.width=Re+J,Xe.width>G&&(G=Xe.width);return}}});let Ae=0,at=0;if(V&&(typeof V=="number"?Ae=-V:typeof V=="string"&&(Ae=-G*(V==="left"?0:V==="center"?.5:V==="right"?1:g(V)))),Q){if(typeof Q=="number")at=-Q;else if(typeof Q=="string"){let Xe=$e.length*C;at=Q==="top"?0:Q==="top-baseline"?-ce:Q==="top-cap"?-ce-O*fe:Q==="top-ex"?-ce-L*fe:Q==="middle"?Xe/2:Q==="bottom"?Xe:Q==="bottom-baseline"?Xe-le+he*fe:g(Q)*Xe}}if(!z){const Xe=e.getEmbeddingLevels(y,k);ie=new Uint16Array(Ee),de=new Float32Array(Ee*2),ae={},Le=[s,s,-s,-s],Te=[];let Ke=ce;ee&&(je=new Float32Array(y.length*3)),I&&(_e=new Uint8Array(Ee*3));let Be=0,Re=-1,J=-1,we,Ge;if($e.forEach((De,Ce)=>{let{count:te,width:Ve}=De;if(te>0){let qe=0;for(let Mt=te;Mt--&&De.glyphAt(Mt).glyphObj.isWhitespace;)qe++;let lt=0,Je=0;if(P==="center")lt=(G-Ve)/2;else if(P==="right")lt=G-Ve;else if(P==="justify"&&De.isSoftWrapped){let Mt=0;for(let ft=te-qe;ft--;)De.glyphAt(ft).glyphObj.isWhitespace&&Mt++;Je=(G-Ve)/Mt}if(Je||lt){let Mt=0;for(let ft=0;ft<te;ft++){let $t=De.glyphAt(ft);const sn=$t.glyphObj;$t.x+=lt+Mt,Je!==0&&sn.isWhitespace&&ft<te-qe&&(Mt+=Je,$t.width+=Je)}}const gt=e.getReorderSegments(y,Xe,De.glyphAt(0).charIndex,De.glyphAt(De.count-1).charIndex);for(let Mt=0;Mt<gt.length;Mt++){const[ft,$t]=gt[Mt];let sn=1/0,Bt=-1/0;for(let yn=0;yn<te;yn++)if(De.glyphAt(yn).charIndex>=ft){let nr=yn,un=yn;for(;un<te;un++){let dn=De.glyphAt(un);if(dn.charIndex>$t)break;un<te-qe&&(sn=Math.min(sn,dn.x),Bt=Math.max(Bt,dn.x+dn.width))}for(let dn=nr;dn<un;dn++){const qn=De.glyphAt(dn);qn.x=Bt-(qn.x+qn.width-sn)}break}}let ut;const zt=Mt=>ut=Mt;for(let Mt=0;Mt<te;Mt++){let ft=De.glyphAt(Mt);ut=ft.glyphObj;const $t=ut.index,sn=Xe.levels[ft.charIndex]&1;if(sn){const Bt=e.getMirroredCharacter(y[ft.charIndex]);Bt&&K.forEachGlyph(Bt,0,0,zt)}if(ee){const{charIndex:Bt}=ft,yn=ft.x+Ae,nr=ft.x+ft.width+Ae;je[Bt*3]=sn?nr:yn,je[Bt*3+1]=sn?yn:nr,je[Bt*3+2]=Ke+Ue+at;const un=Bt-Re;un>1&&v(je,Re,un),Re=Bt}if(I){const{charIndex:Bt}=ft;for(;Bt>J;)J++,I.hasOwnProperty(J)&&(Ge=I[J])}if(!ut.isWhitespace&&!ut.isEmpty){const Bt=Be++;ae[$t]||(ae[$t]={path:ut.path,pathBounds:[ut.xMin,ut.yMin,ut.xMax,ut.yMax]});const yn=ft.x+Ae,nr=Ke+at;de[Bt*2]=yn,de[Bt*2+1]=nr;const un=yn+ut.xMin*fe,dn=nr+ut.yMin*fe,qn=yn+ut.xMax*fe,Ri=nr+ut.yMax*fe;un<Le[0]&&(Le[0]=un),dn<Le[1]&&(Le[1]=dn),qn>Le[2]&&(Le[2]=qn),Ri>Le[3]&&(Le[3]=Ri),Bt%re===0&&(we={start:Bt,end:Bt,rect:[s,s,-s,-s]},Te.push(we)),we.end++;const $r=we.rect;if(un<$r[0]&&($r[0]=un),dn<$r[1]&&($r[1]=dn),qn>$r[2]&&($r[2]=qn),Ri>$r[3]&&($r[3]=Ri),ie[Bt]=$t,I){const bs=Bt*3;_e[bs]=Ge>>16&255,_e[bs+1]=Ge>>8&255,_e[bs+2]=Ge&255}}}}Ke-=C}),je){const De=y.length-Re;De>1&&v(je,Re,De)}}Z.typesetting=_()-q,F({glyphIds:ie,glyphPositions:de,glyphData:ae,caretPositions:je,caretHeight:Pe,glyphColors:_e,chunkedBounds:Te,fontSize:A,unitsPerEm:We,ascender:ve*fe,descender:he*fe,capHeight:O*fe,xHeight:L*fe,lineHeight:C,topBaseline:ce,blockBounds:[Ae,at-$e.length*C,Ae+G,at],visibleBounds:Le,timings:Z})})}function m(y,S){f(y,E=>{const[A,T,C,j]=E.blockBounds;S({width:C-A,height:j-T})},{metricsOnly:!0})}function g(y){let S=y.match(/^([\d.]+)%$/),E=S?parseFloat(S[1]):NaN;return isNaN(E)?0:E/100}function v(y,S,E){const A=y[S*3],T=y[S*3+1],C=y[S*3+2],j=(T-A)/E;for(let k=0;k<E;k++){const P=(S+k)*3;y[P]=A+j*k,y[P+1]=A+j*(k+1),y[P+2]=C}}function _(){return(self.performance||Date).now()}function b(){this.data=[]}const x=["glyphObj","x","width","charIndex"];return b.prototype={width:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/x.length)},glyphAt(y){let S=b.flyweight;return S.data=this.data,S.index=y,S},splitAt(y){let S=new b;return S.data=this.data.splice(y*x.length),S}},b.flyweight=x.reduce((y,S,E,A)=>(Object.defineProperty(y,S,{get(){return this.data[this.index*x.length+E]},set(T){this.data[this.index*x.length+E]=T}}),y),{data:null,index:0}),{typeset:f,measure:m,loadFont:d}}const Nc=()=>(self.performance||Date).now(),Rv=pI();let D3;function IK(t,e,n,r,i,s,a,l,c,u,d=!0){return d?OK(t,e,n,r,i,s,a,l,c,u).then(null,f=>(D3||(console.warn("WebGL SDF generation failed, falling back to JS",f),D3=!0),U3(t,e,n,r,i,s,a,l,c,u))):U3(t,e,n,r,i,s,a,l,c,u)}const A0=[],UK=5;let H_=0;function gI(){const t=Nc();for(;A0.length&&Nc()-t<UK;)A0.shift()();H_=A0.length?setTimeout(gI,0):0}const OK=(...t)=>new Promise((e,n)=>{A0.push(()=>{const r=Nc();try{Rv.webgl.generateIntoCanvas(...t),e({timing:Nc()-r})}catch(i){n(i)}}),H_||(H_=setTimeout(gI,0))}),FK=4,zK=2e3,I3={};let BK=0;function U3(t,e,n,r,i,s,a,l,c,u){const d="TroikaTextSDFGenerator_JS_"+BK++%FK;let f=I3[d];return f||(f=I3[d]={workerModule:Fp({name:d,workerId:d,dependencies:[pI,Nc],init(m,g){const v=m().javascript.generate;return function(..._){const b=g();return{textureData:v(..._),timing:g()-b}}},getTransferables(m){return[m.textureData.buffer]}}),requests:0,idleTimer:null}),f.requests++,clearTimeout(f.idleTimer),f.workerModule(t,e,n,r,i,s).then(({textureData:m,timing:g})=>{const v=Nc(),_=new Uint8Array(m.length*4);for(let b=0;b<m.length;b++)_[b*4+u]=m[b];return Rv.webglUtils.renderImageData(a,_,l,c,t,e,1<<3-u),g+=Nc()-v,--f.requests===0&&(f.idleTimer=setTimeout(()=>{EK(d)},zK)),{timing:g}})}function VK(t){t._warm||(Rv.webgl.isSupported(t),t._warm=!0)}const HK=Rv.webglUtils.resizeWebGLCanvasWithoutClearing;/*!
Custom build of Typr.ts (https://github.com/fredli74/Typr.ts) for use in Troika text rendering.
Original MIT license applies: https://github.com/fredli74/Typr.ts/blob/master/LICENSE
*/function GK(){return typeof window>"u"&&(self.window=self),function(t){var e={parse:function(i){var s=e._bin,a=new Uint8Array(i);if(s.readASCII(a,0,4)=="ttcf"){var l=4;s.readUshort(a,l),l+=2,s.readUshort(a,l),l+=2;var c=s.readUint(a,l);l+=4;for(var u=[],d=0;d<c;d++){var f=s.readUint(a,l);l+=4,u.push(e._readFont(a,f))}return u}return[e._readFont(a,0)]},_readFont:function(i,s){var a=e._bin,l=s;a.readFixed(i,s),s+=4;var c=a.readUshort(i,s);s+=2,a.readUshort(i,s),s+=2,a.readUshort(i,s),s+=2,a.readUshort(i,s),s+=2;for(var u=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GPOS","GSUB","SVG "],d={_data:i,_offset:l},f={},m=0;m<c;m++){var g=a.readASCII(i,s,4);s+=4,a.readUint(i,s),s+=4;var v=a.readUint(i,s);s+=4;var _=a.readUint(i,s);s+=4,f[g]={offset:v,length:_}}for(m=0;m<u.length;m++){var b=u[m];f[b]&&(d[b.trim()]=e[b.trim()].parse(i,f[b].offset,f[b].length,d))}return d},_tabOffset:function(i,s,a){for(var l=e._bin,c=l.readUshort(i,a+4),u=a+12,d=0;d<c;d++){var f=l.readASCII(i,u,4);u+=4,l.readUint(i,u),u+=4;var m=l.readUint(i,u);if(u+=4,l.readUint(i,u),u+=4,f==s)return m}return 0}};e._bin={readFixed:function(i,s){return(i[s]<<8|i[s+1])+(i[s+2]<<8|i[s+3])/65540},readF2dot14:function(i,s){return e._bin.readShort(i,s)/16384},readInt:function(i,s){return e._bin._view(i).getInt32(s)},readInt8:function(i,s){return e._bin._view(i).getInt8(s)},readShort:function(i,s){return e._bin._view(i).getInt16(s)},readUshort:function(i,s){return e._bin._view(i).getUint16(s)},readUshorts:function(i,s,a){for(var l=[],c=0;c<a;c++)l.push(e._bin.readUshort(i,s+2*c));return l},readUint:function(i,s){return e._bin._view(i).getUint32(s)},readUint64:function(i,s){return 4294967296*e._bin.readUint(i,s)+e._bin.readUint(i,s+4)},readASCII:function(i,s,a){for(var l="",c=0;c<a;c++)l+=String.fromCharCode(i[s+c]);return l},readUnicode:function(i,s,a){for(var l="",c=0;c<a;c++){var u=i[s++]<<8|i[s++];l+=String.fromCharCode(u)}return l},_tdec:typeof window<"u"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(i,s,a){var l=e._bin._tdec;return l&&s==0&&a==i.length?l.decode(i):e._bin.readASCII(i,s,a)},readBytes:function(i,s,a){for(var l=[],c=0;c<a;c++)l.push(i[s+c]);return l},readASCIIArray:function(i,s,a){for(var l=[],c=0;c<a;c++)l.push(String.fromCharCode(i[s+c]));return l},_view:function(i){return i._dataView||(i._dataView=i.buffer?new DataView(i.buffer,i.byteOffset,i.byteLength):new DataView(new Uint8Array(i).buffer))}},e._lctf={},e._lctf.parse=function(i,s,a,l,c){var u=e._bin,d={},f=s;u.readFixed(i,s),s+=4;var m=u.readUshort(i,s);s+=2;var g=u.readUshort(i,s);s+=2;var v=u.readUshort(i,s);return s+=2,d.scriptList=e._lctf.readScriptList(i,f+m),d.featureList=e._lctf.readFeatureList(i,f+g),d.lookupList=e._lctf.readLookupList(i,f+v,c),d},e._lctf.readLookupList=function(i,s,a){var l=e._bin,c=s,u=[],d=l.readUshort(i,s);s+=2;for(var f=0;f<d;f++){var m=l.readUshort(i,s);s+=2;var g=e._lctf.readLookupTable(i,c+m,a);u.push(g)}return u},e._lctf.readLookupTable=function(i,s,a){var l=e._bin,c=s,u={tabs:[]};u.ltype=l.readUshort(i,s),s+=2,u.flag=l.readUshort(i,s),s+=2;var d=l.readUshort(i,s);s+=2;for(var f=u.ltype,m=0;m<d;m++){var g=l.readUshort(i,s);s+=2;var v=a(i,f,c+g,u);u.tabs.push(v)}return u},e._lctf.numOfOnes=function(i){for(var s=0,a=0;a<32;a++)i>>>a&1&&s++;return s},e._lctf.readClassDef=function(i,s){var a=e._bin,l=[],c=a.readUshort(i,s);if(s+=2,c==1){var u=a.readUshort(i,s);s+=2;var d=a.readUshort(i,s);s+=2;for(var f=0;f<d;f++)l.push(u+f),l.push(u+f),l.push(a.readUshort(i,s)),s+=2}if(c==2){var m=a.readUshort(i,s);for(s+=2,f=0;f<m;f++)l.push(a.readUshort(i,s)),s+=2,l.push(a.readUshort(i,s)),s+=2,l.push(a.readUshort(i,s)),s+=2}return l},e._lctf.getInterval=function(i,s){for(var a=0;a<i.length;a+=3){var l=i[a],c=i[a+1];if(i[a+2],l<=s&&s<=c)return a}return-1},e._lctf.readCoverage=function(i,s){var a=e._bin,l={};l.fmt=a.readUshort(i,s),s+=2;var c=a.readUshort(i,s);return s+=2,l.fmt==1&&(l.tab=a.readUshorts(i,s,c)),l.fmt==2&&(l.tab=a.readUshorts(i,s,3*c)),l},e._lctf.coverageIndex=function(i,s){var a=i.tab;if(i.fmt==1)return a.indexOf(s);if(i.fmt==2){var l=e._lctf.getInterval(a,s);if(l!=-1)return a[l+2]+(s-a[l])}return-1},e._lctf.readFeatureList=function(i,s){var a=e._bin,l=s,c=[],u=a.readUshort(i,s);s+=2;for(var d=0;d<u;d++){var f=a.readASCII(i,s,4);s+=4;var m=a.readUshort(i,s);s+=2;var g=e._lctf.readFeatureTable(i,l+m);g.tag=f.trim(),c.push(g)}return c},e._lctf.readFeatureTable=function(i,s){var a=e._bin,l=s,c={},u=a.readUshort(i,s);s+=2,u>0&&(c.featureParams=l+u);var d=a.readUshort(i,s);s+=2,c.tab=[];for(var f=0;f<d;f++)c.tab.push(a.readUshort(i,s+2*f));return c},e._lctf.readScriptList=function(i,s){var a=e._bin,l=s,c={},u=a.readUshort(i,s);s+=2;for(var d=0;d<u;d++){var f=a.readASCII(i,s,4);s+=4;var m=a.readUshort(i,s);s+=2,c[f.trim()]=e._lctf.readScriptTable(i,l+m)}return c},e._lctf.readScriptTable=function(i,s){var a=e._bin,l=s,c={},u=a.readUshort(i,s);s+=2,c.default=e._lctf.readLangSysTable(i,l+u);var d=a.readUshort(i,s);s+=2;for(var f=0;f<d;f++){var m=a.readASCII(i,s,4);s+=4;var g=a.readUshort(i,s);s+=2,c[m.trim()]=e._lctf.readLangSysTable(i,l+g)}return c},e._lctf.readLangSysTable=function(i,s){var a=e._bin,l={};a.readUshort(i,s),s+=2,l.reqFeature=a.readUshort(i,s),s+=2;var c=a.readUshort(i,s);return s+=2,l.features=a.readUshorts(i,s,c),l},e.CFF={},e.CFF.parse=function(i,s,a){var l=e._bin;(i=new Uint8Array(i.buffer,s,a))[s=0],i[++s],i[++s],i[++s],s++;var c=[];s=e.CFF.readIndex(i,s,c);for(var u=[],d=0;d<c.length-1;d++)u.push(l.readASCII(i,s+c[d],c[d+1]-c[d]));s+=c[c.length-1];var f=[];s=e.CFF.readIndex(i,s,f);var m=[];for(d=0;d<f.length-1;d++)m.push(e.CFF.readDict(i,s+f[d],s+f[d+1]));s+=f[f.length-1];var g=m[0],v=[];s=e.CFF.readIndex(i,s,v);var _=[];for(d=0;d<v.length-1;d++)_.push(l.readASCII(i,s+v[d],v[d+1]-v[d]));if(s+=v[v.length-1],e.CFF.readSubrs(i,s,g),g.CharStrings){s=g.CharStrings,v=[],s=e.CFF.readIndex(i,s,v);var b=[];for(d=0;d<v.length-1;d++)b.push(l.readBytes(i,s+v[d],v[d+1]-v[d]));g.CharStrings=b}if(g.ROS){s=g.FDArray;var x=[];for(s=e.CFF.readIndex(i,s,x),g.FDArray=[],d=0;d<x.length-1;d++){var y=e.CFF.readDict(i,s+x[d],s+x[d+1]);e.CFF._readFDict(i,y,_),g.FDArray.push(y)}s+=x[x.length-1],s=g.FDSelect,g.FDSelect=[];var S=i[s];if(s++,S!=3)throw S;var E=l.readUshort(i,s);for(s+=2,d=0;d<E+1;d++)g.FDSelect.push(l.readUshort(i,s),i[s+2]),s+=3}return g.Encoding&&(g.Encoding=e.CFF.readEncoding(i,g.Encoding,g.CharStrings.length)),g.charset&&(g.charset=e.CFF.readCharset(i,g.charset,g.CharStrings.length)),e.CFF._readFDict(i,g,_),g},e.CFF._readFDict=function(i,s,a){var l;for(var c in s.Private&&(l=s.Private[1],s.Private=e.CFF.readDict(i,l,l+s.Private[0]),s.Private.Subrs&&e.CFF.readSubrs(i,l+s.Private.Subrs,s.Private)),s)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(c)!=-1&&(s[c]=a[s[c]-426+35])},e.CFF.readSubrs=function(i,s,a){var l=e._bin,c=[];s=e.CFF.readIndex(i,s,c);var u,d=c.length;u=d<1240?107:d<33900?1131:32768,a.Bias=u,a.Subrs=[];for(var f=0;f<c.length-1;f++)a.Subrs.push(l.readBytes(i,s+c[f],c[f+1]-c[f]))},e.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],e.CFF.glyphByUnicode=function(i,s){for(var a=0;a<i.charset.length;a++)if(i.charset[a]==s)return a;return-1},e.CFF.glyphBySE=function(i,s){return s<0||s>255?-1:e.CFF.glyphByUnicode(i,e.CFF.tableSE[s])},e.CFF.readEncoding=function(i,s,a){e._bin;var l=[".notdef"],c=i[s];if(s++,c!=0)throw"error: unknown encoding format: "+c;var u=i[s];s++;for(var d=0;d<u;d++)l.push(i[s+d]);return l},e.CFF.readCharset=function(i,s,a){var l=e._bin,c=[".notdef"],u=i[s];if(s++,u==0)for(var d=0;d<a;d++){var f=l.readUshort(i,s);s+=2,c.push(f)}else{if(u!=1&&u!=2)throw"error: format: "+u;for(;c.length<a;){f=l.readUshort(i,s),s+=2;var m=0;for(u==1?(m=i[s],s++):(m=l.readUshort(i,s),s+=2),d=0;d<=m;d++)c.push(f),f++}}return c},e.CFF.readIndex=function(i,s,a){var l=e._bin,c=l.readUshort(i,s)+1,u=i[s+=2];if(s++,u==1)for(var d=0;d<c;d++)a.push(i[s+d]);else if(u==2)for(d=0;d<c;d++)a.push(l.readUshort(i,s+2*d));else if(u==3)for(d=0;d<c;d++)a.push(16777215&l.readUint(i,s+3*d-1));else if(c!=1)throw"unsupported offset size: "+u+", count: "+c;return(s+=c*u)-1},e.CFF.getCharString=function(i,s,a){var l=e._bin,c=i[s],u=i[s+1];i[s+2],i[s+3],i[s+4];var d=1,f=null,m=null;c<=20&&(f=c,d=1),c==12&&(f=100*c+u,d=2),21<=c&&c<=27&&(f=c,d=1),c==28&&(m=l.readShort(i,s+1),d=3),29<=c&&c<=31&&(f=c,d=1),32<=c&&c<=246&&(m=c-139,d=1),247<=c&&c<=250&&(m=256*(c-247)+u+108,d=2),251<=c&&c<=254&&(m=256*-(c-251)-u-108,d=2),c==255&&(m=l.readInt(i,s+1)/65535,d=5),a.val=m??"o"+f,a.size=d},e.CFF.readCharString=function(i,s,a){for(var l=s+a,c=e._bin,u=[];s<l;){var d=i[s],f=i[s+1];i[s+2],i[s+3],i[s+4];var m=1,g=null,v=null;d<=20&&(g=d,m=1),d==12&&(g=100*d+f,m=2),d!=19&&d!=20||(g=d,m=2),21<=d&&d<=27&&(g=d,m=1),d==28&&(v=c.readShort(i,s+1),m=3),29<=d&&d<=31&&(g=d,m=1),32<=d&&d<=246&&(v=d-139,m=1),247<=d&&d<=250&&(v=256*(d-247)+f+108,m=2),251<=d&&d<=254&&(v=256*-(d-251)-f-108,m=2),d==255&&(v=c.readInt(i,s+1)/65535,m=5),u.push(v??"o"+g),s+=m}return u},e.CFF.readDict=function(i,s,a){for(var l=e._bin,c={},u=[];s<a;){var d=i[s],f=i[s+1];i[s+2],i[s+3],i[s+4];var m=1,g=null,v=null;if(d==28&&(v=l.readShort(i,s+1),m=3),d==29&&(v=l.readInt(i,s+1),m=5),32<=d&&d<=246&&(v=d-139,m=1),247<=d&&d<=250&&(v=256*(d-247)+f+108,m=2),251<=d&&d<=254&&(v=256*-(d-251)-f-108,m=2),d==255)throw v=l.readInt(i,s+1)/65535,m=5,"unknown number";if(d==30){var _=[];for(m=1;;){var b=i[s+m];m++;var x=b>>4,y=15&b;if(x!=15&&_.push(x),y!=15&&_.push(y),y==15)break}for(var S="",E=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],A=0;A<_.length;A++)S+=E[_[A]];v=parseFloat(S)}d<=21&&(g=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][d],m=1,d==12&&(g=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][f],m=2)),g!=null?(c[g]=u.length==1?u[0]:u,u=[]):u.push(v),s+=m}return c},e.cmap={},e.cmap.parse=function(i,s,a){i=new Uint8Array(i.buffer,s,a),s=0;var l=e._bin,c={};l.readUshort(i,s),s+=2;var u=l.readUshort(i,s);s+=2;var d=[];c.tables=[];for(var f=0;f<u;f++){var m=l.readUshort(i,s);s+=2;var g=l.readUshort(i,s);s+=2;var v=l.readUint(i,s);s+=4;var _="p"+m+"e"+g,b=d.indexOf(v);if(b==-1){var x;b=c.tables.length,d.push(v);var y=l.readUshort(i,v);y==0?x=e.cmap.parse0(i,v):y==4?x=e.cmap.parse4(i,v):y==6?x=e.cmap.parse6(i,v):y==12?x=e.cmap.parse12(i,v):console.debug("unknown format: "+y,m,g,v),c.tables.push(x)}if(c[_]!=null)throw"multiple tables for one platform+encoding";c[_]=b}return c},e.cmap.parse0=function(i,s){var a=e._bin,l={};l.format=a.readUshort(i,s),s+=2;var c=a.readUshort(i,s);s+=2,a.readUshort(i,s),s+=2,l.map=[];for(var u=0;u<c-6;u++)l.map.push(i[s+u]);return l},e.cmap.parse4=function(i,s){var a=e._bin,l=s,c={};c.format=a.readUshort(i,s),s+=2;var u=a.readUshort(i,s);s+=2,a.readUshort(i,s),s+=2;var d=a.readUshort(i,s);s+=2;var f=d/2;c.searchRange=a.readUshort(i,s),s+=2,c.entrySelector=a.readUshort(i,s),s+=2,c.rangeShift=a.readUshort(i,s),s+=2,c.endCount=a.readUshorts(i,s,f),s+=2*f,s+=2,c.startCount=a.readUshorts(i,s,f),s+=2*f,c.idDelta=[];for(var m=0;m<f;m++)c.idDelta.push(a.readShort(i,s)),s+=2;for(c.idRangeOffset=a.readUshorts(i,s,f),s+=2*f,c.glyphIdArray=[];s<l+u;)c.glyphIdArray.push(a.readUshort(i,s)),s+=2;return c},e.cmap.parse6=function(i,s){var a=e._bin,l={};l.format=a.readUshort(i,s),s+=2,a.readUshort(i,s),s+=2,a.readUshort(i,s),s+=2,l.firstCode=a.readUshort(i,s),s+=2;var c=a.readUshort(i,s);s+=2,l.glyphIdArray=[];for(var u=0;u<c;u++)l.glyphIdArray.push(a.readUshort(i,s)),s+=2;return l},e.cmap.parse12=function(i,s){var a=e._bin,l={};l.format=a.readUshort(i,s),s+=2,s+=2,a.readUint(i,s),s+=4,a.readUint(i,s),s+=4;var c=a.readUint(i,s);s+=4,l.groups=[];for(var u=0;u<c;u++){var d=s+12*u,f=a.readUint(i,d+0),m=a.readUint(i,d+4),g=a.readUint(i,d+8);l.groups.push([f,m,g])}return l},e.glyf={},e.glyf.parse=function(i,s,a,l){for(var c=[],u=0;u<l.maxp.numGlyphs;u++)c.push(null);return c},e.glyf._parseGlyf=function(i,s){var a=e._bin,l=i._data,c=e._tabOffset(l,"glyf",i._offset)+i.loca[s];if(i.loca[s]==i.loca[s+1])return null;var u={};if(u.noc=a.readShort(l,c),c+=2,u.xMin=a.readShort(l,c),c+=2,u.yMin=a.readShort(l,c),c+=2,u.xMax=a.readShort(l,c),c+=2,u.yMax=a.readShort(l,c),c+=2,u.xMin>=u.xMax||u.yMin>=u.yMax)return null;if(u.noc>0){u.endPts=[];for(var d=0;d<u.noc;d++)u.endPts.push(a.readUshort(l,c)),c+=2;var f=a.readUshort(l,c);if(c+=2,l.length-c<f)return null;u.instructions=a.readBytes(l,c,f),c+=f;var m=u.endPts[u.noc-1]+1;for(u.flags=[],d=0;d<m;d++){var g=l[c];if(c++,u.flags.push(g),(8&g)!=0){var v=l[c];c++;for(var _=0;_<v;_++)u.flags.push(g),d++}}for(u.xs=[],d=0;d<m;d++){var b=(2&u.flags[d])!=0,x=(16&u.flags[d])!=0;b?(u.xs.push(x?l[c]:-l[c]),c++):x?u.xs.push(0):(u.xs.push(a.readShort(l,c)),c+=2)}for(u.ys=[],d=0;d<m;d++)b=(4&u.flags[d])!=0,x=(32&u.flags[d])!=0,b?(u.ys.push(x?l[c]:-l[c]),c++):x?u.ys.push(0):(u.ys.push(a.readShort(l,c)),c+=2);var y=0,S=0;for(d=0;d<m;d++)y+=u.xs[d],S+=u.ys[d],u.xs[d]=y,u.ys[d]=S}else{var E;u.parts=[];do{E=a.readUshort(l,c),c+=2;var A={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(u.parts.push(A),A.glyphIndex=a.readUshort(l,c),c+=2,1&E){var T=a.readShort(l,c);c+=2;var C=a.readShort(l,c);c+=2}else T=a.readInt8(l,c),c++,C=a.readInt8(l,c),c++;2&E?(A.m.tx=T,A.m.ty=C):(A.p1=T,A.p2=C),8&E?(A.m.a=A.m.d=a.readF2dot14(l,c),c+=2):64&E?(A.m.a=a.readF2dot14(l,c),c+=2,A.m.d=a.readF2dot14(l,c),c+=2):128&E&&(A.m.a=a.readF2dot14(l,c),c+=2,A.m.b=a.readF2dot14(l,c),c+=2,A.m.c=a.readF2dot14(l,c),c+=2,A.m.d=a.readF2dot14(l,c),c+=2)}while(32&E);if(256&E){var j=a.readUshort(l,c);for(c+=2,u.instr=[],d=0;d<j;d++)u.instr.push(l[c]),c++}}return u},e.GPOS={},e.GPOS.parse=function(i,s,a,l){return e._lctf.parse(i,s,a,l,e.GPOS.subt)},e.GPOS.subt=function(i,s,a,l){var c=e._bin,u=a,d={};if(d.fmt=c.readUshort(i,a),a+=2,s==1||s==2||s==3||s==7||s==8&&d.fmt<=2){var f=c.readUshort(i,a);a+=2,d.coverage=e._lctf.readCoverage(i,f+u)}if(s==1&&d.fmt==1){var m=c.readUshort(i,a);a+=2;var g=e._lctf.numOfOnes(m);m!=0&&(d.pos=e.GPOS.readValueRecord(i,a,m))}else if(s==2&&d.fmt>=1&&d.fmt<=2){m=c.readUshort(i,a),a+=2;var v=c.readUshort(i,a);a+=2,g=e._lctf.numOfOnes(m);var _=e._lctf.numOfOnes(v);if(d.fmt==1){d.pairsets=[];var b=c.readUshort(i,a);a+=2;for(var x=0;x<b;x++){var y=u+c.readUshort(i,a);a+=2;var S=c.readUshort(i,y);y+=2;for(var E=[],A=0;A<S;A++){var T=c.readUshort(i,y);y+=2,m!=0&&(B=e.GPOS.readValueRecord(i,y,m),y+=2*g),v!=0&&(Y=e.GPOS.readValueRecord(i,y,v),y+=2*_),E.push({gid2:T,val1:B,val2:Y})}d.pairsets.push(E)}}if(d.fmt==2){var C=c.readUshort(i,a);a+=2;var j=c.readUshort(i,a);a+=2;var k=c.readUshort(i,a);a+=2;var P=c.readUshort(i,a);for(a+=2,d.classDef1=e._lctf.readClassDef(i,u+C),d.classDef2=e._lctf.readClassDef(i,u+j),d.matrix=[],x=0;x<k;x++){var H=[];for(A=0;A<P;A++){var B=null,Y=null;m!=0&&(B=e.GPOS.readValueRecord(i,a,m),a+=2*g),v!=0&&(Y=e.GPOS.readValueRecord(i,a,v),a+=2*_),H.push({val1:B,val2:Y})}d.matrix.push(H)}}}else{if(s==9&&d.fmt==1){var V=c.readUshort(i,a);a+=2;var Q=c.readUint(i,a);if(a+=4,l.ltype==9)l.ltype=V;else if(l.ltype!=V)throw"invalid extension substitution";return e.GPOS.subt(i,l.ltype,u+Q)}console.debug("unsupported GPOS table LookupType",s,"format",d.fmt)}return d},e.GPOS.readValueRecord=function(i,s,a){var l=e._bin,c=[];return c.push(1&a?l.readShort(i,s):0),s+=1&a?2:0,c.push(2&a?l.readShort(i,s):0),s+=2&a?2:0,c.push(4&a?l.readShort(i,s):0),s+=4&a?2:0,c.push(8&a?l.readShort(i,s):0),s+=8&a?2:0,c},e.GSUB={},e.GSUB.parse=function(i,s,a,l){return e._lctf.parse(i,s,a,l,e.GSUB.subt)},e.GSUB.subt=function(i,s,a,l){var c=e._bin,u=a,d={};if(d.fmt=c.readUshort(i,a),a+=2,s!=1&&s!=4&&s!=5&&s!=6)return null;if(s==1||s==4||s==5&&d.fmt<=2||s==6&&d.fmt<=2){var f=c.readUshort(i,a);a+=2,d.coverage=e._lctf.readCoverage(i,u+f)}if(s==1&&d.fmt>=1&&d.fmt<=2){if(d.fmt==1)d.delta=c.readShort(i,a),a+=2;else if(d.fmt==2){var m=c.readUshort(i,a);a+=2,d.newg=c.readUshorts(i,a,m),a+=2*d.newg.length}}else if(s==4){d.vals=[],m=c.readUshort(i,a),a+=2;for(var g=0;g<m;g++){var v=c.readUshort(i,a);a+=2,d.vals.push(e.GSUB.readLigatureSet(i,u+v))}}else if(s==5&&d.fmt==2){if(d.fmt==2){var _=c.readUshort(i,a);a+=2,d.cDef=e._lctf.readClassDef(i,u+_),d.scset=[];var b=c.readUshort(i,a);for(a+=2,g=0;g<b;g++){var x=c.readUshort(i,a);a+=2,d.scset.push(x==0?null:e.GSUB.readSubClassSet(i,u+x))}}}else if(s==6&&d.fmt==3){if(d.fmt==3){for(g=0;g<3;g++){m=c.readUshort(i,a),a+=2;for(var y=[],S=0;S<m;S++)y.push(e._lctf.readCoverage(i,u+c.readUshort(i,a+2*S)));a+=2*m,g==0&&(d.backCvg=y),g==1&&(d.inptCvg=y),g==2&&(d.ahedCvg=y)}m=c.readUshort(i,a),a+=2,d.lookupRec=e.GSUB.readSubstLookupRecords(i,a,m)}}else{if(s==7&&d.fmt==1){var E=c.readUshort(i,a);a+=2;var A=c.readUint(i,a);if(a+=4,l.ltype==9)l.ltype=E;else if(l.ltype!=E)throw"invalid extension substitution";return e.GSUB.subt(i,l.ltype,u+A)}console.debug("unsupported GSUB table LookupType",s,"format",d.fmt)}return d},e.GSUB.readSubClassSet=function(i,s){var a=e._bin.readUshort,l=s,c=[],u=a(i,s);s+=2;for(var d=0;d<u;d++){var f=a(i,s);s+=2,c.push(e.GSUB.readSubClassRule(i,l+f))}return c},e.GSUB.readSubClassRule=function(i,s){var a=e._bin.readUshort,l={},c=a(i,s),u=a(i,s+=2);s+=2,l.input=[];for(var d=0;d<c-1;d++)l.input.push(a(i,s)),s+=2;return l.substLookupRecords=e.GSUB.readSubstLookupRecords(i,s,u),l},e.GSUB.readSubstLookupRecords=function(i,s,a){for(var l=e._bin.readUshort,c=[],u=0;u<a;u++)c.push(l(i,s),l(i,s+2)),s+=4;return c},e.GSUB.readChainSubClassSet=function(i,s){var a=e._bin,l=s,c=[],u=a.readUshort(i,s);s+=2;for(var d=0;d<u;d++){var f=a.readUshort(i,s);s+=2,c.push(e.GSUB.readChainSubClassRule(i,l+f))}return c},e.GSUB.readChainSubClassRule=function(i,s){for(var a=e._bin,l={},c=["backtrack","input","lookahead"],u=0;u<c.length;u++){var d=a.readUshort(i,s);s+=2,u==1&&d--,l[c[u]]=a.readUshorts(i,s,d),s+=2*l[c[u]].length}return d=a.readUshort(i,s),s+=2,l.subst=a.readUshorts(i,s,2*d),s+=2*l.subst.length,l},e.GSUB.readLigatureSet=function(i,s){var a=e._bin,l=s,c=[],u=a.readUshort(i,s);s+=2;for(var d=0;d<u;d++){var f=a.readUshort(i,s);s+=2,c.push(e.GSUB.readLigature(i,l+f))}return c},e.GSUB.readLigature=function(i,s){var a=e._bin,l={chain:[]};l.nglyph=a.readUshort(i,s),s+=2;var c=a.readUshort(i,s);s+=2;for(var u=0;u<c-1;u++)l.chain.push(a.readUshort(i,s)),s+=2;return l},e.head={},e.head.parse=function(i,s,a){var l=e._bin,c={};return l.readFixed(i,s),s+=4,c.fontRevision=l.readFixed(i,s),s+=4,l.readUint(i,s),s+=4,l.readUint(i,s),s+=4,c.flags=l.readUshort(i,s),s+=2,c.unitsPerEm=l.readUshort(i,s),s+=2,c.created=l.readUint64(i,s),s+=8,c.modified=l.readUint64(i,s),s+=8,c.xMin=l.readShort(i,s),s+=2,c.yMin=l.readShort(i,s),s+=2,c.xMax=l.readShort(i,s),s+=2,c.yMax=l.readShort(i,s),s+=2,c.macStyle=l.readUshort(i,s),s+=2,c.lowestRecPPEM=l.readUshort(i,s),s+=2,c.fontDirectionHint=l.readShort(i,s),s+=2,c.indexToLocFormat=l.readShort(i,s),s+=2,c.glyphDataFormat=l.readShort(i,s),s+=2,c},e.hhea={},e.hhea.parse=function(i,s,a){var l=e._bin,c={};return l.readFixed(i,s),s+=4,c.ascender=l.readShort(i,s),s+=2,c.descender=l.readShort(i,s),s+=2,c.lineGap=l.readShort(i,s),s+=2,c.advanceWidthMax=l.readUshort(i,s),s+=2,c.minLeftSideBearing=l.readShort(i,s),s+=2,c.minRightSideBearing=l.readShort(i,s),s+=2,c.xMaxExtent=l.readShort(i,s),s+=2,c.caretSlopeRise=l.readShort(i,s),s+=2,c.caretSlopeRun=l.readShort(i,s),s+=2,c.caretOffset=l.readShort(i,s),s+=2,s+=8,c.metricDataFormat=l.readShort(i,s),s+=2,c.numberOfHMetrics=l.readUshort(i,s),s+=2,c},e.hmtx={},e.hmtx.parse=function(i,s,a,l){for(var c=e._bin,u={aWidth:[],lsBearing:[]},d=0,f=0,m=0;m<l.maxp.numGlyphs;m++)m<l.hhea.numberOfHMetrics&&(d=c.readUshort(i,s),s+=2,f=c.readShort(i,s),s+=2),u.aWidth.push(d),u.lsBearing.push(f);return u},e.kern={},e.kern.parse=function(i,s,a,l){var c=e._bin,u=c.readUshort(i,s);if(s+=2,u==1)return e.kern.parseV1(i,s-2,a,l);var d=c.readUshort(i,s);s+=2;for(var f={glyph1:[],rval:[]},m=0;m<d;m++){s+=2,a=c.readUshort(i,s),s+=2;var g=c.readUshort(i,s);s+=2;var v=g>>>8;if((v&=15)!=0)throw"unknown kern table format: "+v;s=e.kern.readFormat0(i,s,f)}return f},e.kern.parseV1=function(i,s,a,l){var c=e._bin;c.readFixed(i,s),s+=4;var u=c.readUint(i,s);s+=4;for(var d={glyph1:[],rval:[]},f=0;f<u;f++){c.readUint(i,s),s+=4;var m=c.readUshort(i,s);s+=2,c.readUshort(i,s),s+=2;var g=m>>>8;if((g&=15)!=0)throw"unknown kern table format: "+g;s=e.kern.readFormat0(i,s,d)}return d},e.kern.readFormat0=function(i,s,a){var l=e._bin,c=-1,u=l.readUshort(i,s);s+=2,l.readUshort(i,s),s+=2,l.readUshort(i,s),s+=2,l.readUshort(i,s),s+=2;for(var d=0;d<u;d++){var f=l.readUshort(i,s);s+=2;var m=l.readUshort(i,s);s+=2;var g=l.readShort(i,s);s+=2,f!=c&&(a.glyph1.push(f),a.rval.push({glyph2:[],vals:[]}));var v=a.rval[a.rval.length-1];v.glyph2.push(m),v.vals.push(g),c=f}return s},e.loca={},e.loca.parse=function(i,s,a,l){var c=e._bin,u=[],d=l.head.indexToLocFormat,f=l.maxp.numGlyphs+1;if(d==0)for(var m=0;m<f;m++)u.push(c.readUshort(i,s+(m<<1))<<1);if(d==1)for(m=0;m<f;m++)u.push(c.readUint(i,s+(m<<2)));return u},e.maxp={},e.maxp.parse=function(i,s,a){var l=e._bin,c={},u=l.readUint(i,s);return s+=4,c.numGlyphs=l.readUshort(i,s),s+=2,u==65536&&(c.maxPoints=l.readUshort(i,s),s+=2,c.maxContours=l.readUshort(i,s),s+=2,c.maxCompositePoints=l.readUshort(i,s),s+=2,c.maxCompositeContours=l.readUshort(i,s),s+=2,c.maxZones=l.readUshort(i,s),s+=2,c.maxTwilightPoints=l.readUshort(i,s),s+=2,c.maxStorage=l.readUshort(i,s),s+=2,c.maxFunctionDefs=l.readUshort(i,s),s+=2,c.maxInstructionDefs=l.readUshort(i,s),s+=2,c.maxStackElements=l.readUshort(i,s),s+=2,c.maxSizeOfInstructions=l.readUshort(i,s),s+=2,c.maxComponentElements=l.readUshort(i,s),s+=2,c.maxComponentDepth=l.readUshort(i,s),s+=2),c},e.name={},e.name.parse=function(i,s,a){var l=e._bin,c={};l.readUshort(i,s),s+=2;var u=l.readUshort(i,s);s+=2,l.readUshort(i,s);for(var d,f=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],m=s+=2,g=0;g<u;g++){var v=l.readUshort(i,s);s+=2;var _=l.readUshort(i,s);s+=2;var b=l.readUshort(i,s);s+=2;var x=l.readUshort(i,s);s+=2;var y=l.readUshort(i,s);s+=2;var S=l.readUshort(i,s);s+=2;var E,A=f[x],T=m+12*u+S;if(v==0)E=l.readUnicode(i,T,y/2);else if(v==3&&_==0)E=l.readUnicode(i,T,y/2);else if(_==0)E=l.readASCII(i,T,y);else if(_==1)E=l.readUnicode(i,T,y/2);else if(_==3)E=l.readUnicode(i,T,y/2);else{if(v!=1)throw"unknown encoding "+_+", platformID: "+v;E=l.readASCII(i,T,y),console.debug("reading unknown MAC encoding "+_+" as ASCII")}var C="p"+v+","+b.toString(16);c[C]==null&&(c[C]={}),c[C][A!==void 0?A:x]=E,c[C]._lang=b}for(var j in c)if(c[j].postScriptName!=null&&c[j]._lang==1033)return c[j];for(var j in c)if(c[j].postScriptName!=null&&c[j]._lang==0)return c[j];for(var j in c)if(c[j].postScriptName!=null&&c[j]._lang==3084)return c[j];for(var j in c)if(c[j].postScriptName!=null)return c[j];for(var j in c){d=j;break}return console.debug("returning name table with languageID "+c[d]._lang),c[d]},e["OS/2"]={},e["OS/2"].parse=function(i,s,a){var l=e._bin.readUshort(i,s);s+=2;var c={};if(l==0)e["OS/2"].version0(i,s,c);else if(l==1)e["OS/2"].version1(i,s,c);else if(l==2||l==3||l==4)e["OS/2"].version2(i,s,c);else{if(l!=5)throw"unknown OS/2 table version: "+l;e["OS/2"].version5(i,s,c)}return c},e["OS/2"].version0=function(i,s,a){var l=e._bin;return a.xAvgCharWidth=l.readShort(i,s),s+=2,a.usWeightClass=l.readUshort(i,s),s+=2,a.usWidthClass=l.readUshort(i,s),s+=2,a.fsType=l.readUshort(i,s),s+=2,a.ySubscriptXSize=l.readShort(i,s),s+=2,a.ySubscriptYSize=l.readShort(i,s),s+=2,a.ySubscriptXOffset=l.readShort(i,s),s+=2,a.ySubscriptYOffset=l.readShort(i,s),s+=2,a.ySuperscriptXSize=l.readShort(i,s),s+=2,a.ySuperscriptYSize=l.readShort(i,s),s+=2,a.ySuperscriptXOffset=l.readShort(i,s),s+=2,a.ySuperscriptYOffset=l.readShort(i,s),s+=2,a.yStrikeoutSize=l.readShort(i,s),s+=2,a.yStrikeoutPosition=l.readShort(i,s),s+=2,a.sFamilyClass=l.readShort(i,s),s+=2,a.panose=l.readBytes(i,s,10),s+=10,a.ulUnicodeRange1=l.readUint(i,s),s+=4,a.ulUnicodeRange2=l.readUint(i,s),s+=4,a.ulUnicodeRange3=l.readUint(i,s),s+=4,a.ulUnicodeRange4=l.readUint(i,s),s+=4,a.achVendID=[l.readInt8(i,s),l.readInt8(i,s+1),l.readInt8(i,s+2),l.readInt8(i,s+3)],s+=4,a.fsSelection=l.readUshort(i,s),s+=2,a.usFirstCharIndex=l.readUshort(i,s),s+=2,a.usLastCharIndex=l.readUshort(i,s),s+=2,a.sTypoAscender=l.readShort(i,s),s+=2,a.sTypoDescender=l.readShort(i,s),s+=2,a.sTypoLineGap=l.readShort(i,s),s+=2,a.usWinAscent=l.readUshort(i,s),s+=2,a.usWinDescent=l.readUshort(i,s),s+=2},e["OS/2"].version1=function(i,s,a){var l=e._bin;return s=e["OS/2"].version0(i,s,a),a.ulCodePageRange1=l.readUint(i,s),s+=4,a.ulCodePageRange2=l.readUint(i,s),s+=4},e["OS/2"].version2=function(i,s,a){var l=e._bin;return s=e["OS/2"].version1(i,s,a),a.sxHeight=l.readShort(i,s),s+=2,a.sCapHeight=l.readShort(i,s),s+=2,a.usDefault=l.readUshort(i,s),s+=2,a.usBreak=l.readUshort(i,s),s+=2,a.usMaxContext=l.readUshort(i,s),s+=2},e["OS/2"].version5=function(i,s,a){var l=e._bin;return s=e["OS/2"].version2(i,s,a),a.usLowerOpticalPointSize=l.readUshort(i,s),s+=2,a.usUpperOpticalPointSize=l.readUshort(i,s),s+=2},e.post={},e.post.parse=function(i,s,a){var l=e._bin,c={};return c.version=l.readFixed(i,s),s+=4,c.italicAngle=l.readFixed(i,s),s+=4,c.underlinePosition=l.readShort(i,s),s+=2,c.underlineThickness=l.readShort(i,s),s+=2,c},e==null&&(e={}),e.U==null&&(e.U={}),e.U.codeToGlyph=function(i,s){var a=i.cmap,l=-1;if(a.p0e4!=null?l=a.p0e4:a.p3e1!=null?l=a.p3e1:a.p1e0!=null?l=a.p1e0:a.p0e3!=null&&(l=a.p0e3),l==-1)throw"no familiar platform and encoding!";var c=a.tables[l];if(c.format==0)return s>=c.map.length?0:c.map[s];if(c.format==4){for(var u=-1,d=0;d<c.endCount.length;d++)if(s<=c.endCount[d]){u=d;break}return u==-1||c.startCount[u]>s?0:65535&(c.idRangeOffset[u]!=0?c.glyphIdArray[s-c.startCount[u]+(c.idRangeOffset[u]>>1)-(c.idRangeOffset.length-u)]:s+c.idDelta[u])}if(c.format==12){if(s>c.groups[c.groups.length-1][1])return 0;for(d=0;d<c.groups.length;d++){var f=c.groups[d];if(f[0]<=s&&s<=f[1])return f[2]+(s-f[0])}return 0}throw"unknown cmap table format "+c.format},e.U.glyphToPath=function(i,s){var a={cmds:[],crds:[]};if(i.SVG&&i.SVG.entries[s]){var l=i.SVG.entries[s];return l==null?a:(typeof l=="string"&&(l=e.SVG.toPath(l),i.SVG.entries[s]=l),l)}if(i.CFF){var c={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:i.CFF.Private?i.CFF.Private.defaultWidthX:0,open:!1},u=i.CFF,d=i.CFF.Private;if(u.ROS){for(var f=0;u.FDSelect[f+2]<=s;)f+=2;d=u.FDArray[u.FDSelect[f+1]].Private}e.U._drawCFF(i.CFF.CharStrings[s],c,u,d,a)}else i.glyf&&e.U._drawGlyf(s,i,a);return a},e.U._drawGlyf=function(i,s,a){var l=s.glyf[i];l==null&&(l=s.glyf[i]=e.glyf._parseGlyf(s,i)),l!=null&&(l.noc>-1?e.U._simpleGlyph(l,a):e.U._compoGlyph(l,s,a))},e.U._simpleGlyph=function(i,s){for(var a=0;a<i.noc;a++){for(var l=a==0?0:i.endPts[a-1]+1,c=i.endPts[a],u=l;u<=c;u++){var d=u==l?c:u-1,f=u==c?l:u+1,m=1&i.flags[u],g=1&i.flags[d],v=1&i.flags[f],_=i.xs[u],b=i.ys[u];if(u==l)if(m){if(!g){e.U.P.moveTo(s,_,b);continue}e.U.P.moveTo(s,i.xs[d],i.ys[d])}else g?e.U.P.moveTo(s,i.xs[d],i.ys[d]):e.U.P.moveTo(s,(i.xs[d]+_)/2,(i.ys[d]+b)/2);m?g&&e.U.P.lineTo(s,_,b):v?e.U.P.qcurveTo(s,_,b,i.xs[f],i.ys[f]):e.U.P.qcurveTo(s,_,b,(_+i.xs[f])/2,(b+i.ys[f])/2)}e.U.P.closePath(s)}},e.U._compoGlyph=function(i,s,a){for(var l=0;l<i.parts.length;l++){var c={cmds:[],crds:[]},u=i.parts[l];e.U._drawGlyf(u.glyphIndex,s,c);for(var d=u.m,f=0;f<c.crds.length;f+=2){var m=c.crds[f],g=c.crds[f+1];a.crds.push(m*d.a+g*d.b+d.tx),a.crds.push(m*d.c+g*d.d+d.ty)}for(f=0;f<c.cmds.length;f++)a.cmds.push(c.cmds[f])}},e.U._getGlyphClass=function(i,s){var a=e._lctf.getInterval(s,i);return a==-1?0:s[a+2]},e.U.getPairAdjustment=function(i,s,a){var l=!1;if(i.GPOS)for(var c=i.GPOS,u=c.lookupList,d=c.featureList,f=[],m=0;m<d.length;m++){var g=d[m];if(g.tag=="kern"){l=!0;for(var v=0;v<g.tab.length;v++)if(!f[g.tab[v]]){f[g.tab[v]]=!0;for(var _=u[g.tab[v]],b=0;b<_.tabs.length;b++)if(_.tabs[b]!=null){var x,y=_.tabs[b];if((!y.coverage||(x=e._lctf.coverageIndex(y.coverage,s))!=-1)&&_.ltype!=1){if(_.ltype==2){var S=null;if(y.fmt==1){var E=y.pairsets[x];for(m=0;m<E.length;m++)E[m].gid2==a&&(S=E[m])}else if(y.fmt==2){var A=e.U._getGlyphClass(s,y.classDef1),T=e.U._getGlyphClass(a,y.classDef2);S=y.matrix[A][T]}if(S){var C=0;return S.val1&&S.val1[2]&&(C+=S.val1[2]),S.val2&&S.val2[0]&&(C+=S.val2[0]),C}}}}}}}if(i.kern&&!l){var j=i.kern.glyph1.indexOf(s);if(j!=-1){var k=i.kern.rval[j].glyph2.indexOf(a);if(k!=-1)return i.kern.rval[j].vals[k]}}return 0},e.U._applySubs=function(i,s,a,l){for(var c=i.length-s-1,u=0;u<a.tabs.length;u++)if(a.tabs[u]!=null){var d,f=a.tabs[u];if(!f.coverage||(d=e._lctf.coverageIndex(f.coverage,i[s]))!=-1){if(a.ltype==1)i[s],f.fmt==1?i[s]=i[s]+f.delta:i[s]=f.newg[d];else if(a.ltype==4)for(var m=f.vals[d],g=0;g<m.length;g++){var v=m[g],_=v.chain.length;if(!(_>c)){for(var b=!0,x=0,y=0;y<_;y++){for(;i[s+x+(1+y)]==-1;)x++;v.chain[y]!=i[s+x+(1+y)]&&(b=!1)}if(b){for(i[s]=v.nglyph,y=0;y<_+x;y++)i[s+y+1]=-1;break}}}else if(a.ltype==5&&f.fmt==2)for(var S=e._lctf.getInterval(f.cDef,i[s]),E=f.cDef[S+2],A=f.scset[E],T=0;T<A.length;T++){var C=A[T],j=C.input;if(!(j.length>c)){for(b=!0,y=0;y<j.length;y++){var k=e._lctf.getInterval(f.cDef,i[s+1+y]);if(S==-1&&f.cDef[k+2]!=j[y]){b=!1;break}}if(b){var P=C.substLookupRecords;for(g=0;g<P.length;g+=2)P[g],P[g+1]}}}else if(a.ltype==6&&f.fmt==3){if(!e.U._glsCovered(i,f.backCvg,s-f.backCvg.length)||!e.U._glsCovered(i,f.inptCvg,s)||!e.U._glsCovered(i,f.ahedCvg,s+f.inptCvg.length))continue;var H=f.lookupRec;for(T=0;T<H.length;T+=2){S=H[T];var B=l[H[T+1]];e.U._applySubs(i,s+S,B,l)}}}}},e.U._glsCovered=function(i,s,a){for(var l=0;l<s.length;l++)if(e._lctf.coverageIndex(s[l],i[a+l])==-1)return!1;return!0},e.U.glyphsToPath=function(i,s,a){for(var l={cmds:[],crds:[]},c=0,u=0;u<s.length;u++){var d=s[u];if(d!=-1){for(var f=u<s.length-1&&s[u+1]!=-1?s[u+1]:0,m=e.U.glyphToPath(i,d),g=0;g<m.crds.length;g+=2)l.crds.push(m.crds[g]+c),l.crds.push(m.crds[g+1]);for(a&&l.cmds.push(a),g=0;g<m.cmds.length;g++)l.cmds.push(m.cmds[g]);a&&l.cmds.push("X"),c+=i.hmtx.aWidth[d],u<s.length-1&&(c+=e.U.getPairAdjustment(i,d,f))}}return l},e.U.P={},e.U.P.moveTo=function(i,s,a){i.cmds.push("M"),i.crds.push(s,a)},e.U.P.lineTo=function(i,s,a){i.cmds.push("L"),i.crds.push(s,a)},e.U.P.curveTo=function(i,s,a,l,c,u,d){i.cmds.push("C"),i.crds.push(s,a,l,c,u,d)},e.U.P.qcurveTo=function(i,s,a,l,c){i.cmds.push("Q"),i.crds.push(s,a,l,c)},e.U.P.closePath=function(i){i.cmds.push("Z")},e.U._drawCFF=function(i,s,a,l,c){for(var u=s.stack,d=s.nStems,f=s.haveWidth,m=s.width,g=s.open,v=0,_=s.x,b=s.y,x=0,y=0,S=0,E=0,A=0,T=0,C=0,j=0,k=0,P=0,H={val:0,size:0};v<i.length;){e.CFF.getCharString(i,v,H);var B=H.val;if(v+=H.size,B=="o1"||B=="o18")u.length%2!=0&&!f&&(m=u.shift()+l.nominalWidthX),d+=u.length>>1,u.length=0,f=!0;else if(B=="o3"||B=="o23")u.length%2!=0&&!f&&(m=u.shift()+l.nominalWidthX),d+=u.length>>1,u.length=0,f=!0;else if(B=="o4")u.length>1&&!f&&(m=u.shift()+l.nominalWidthX,f=!0),g&&e.U.P.closePath(c),b+=u.pop(),e.U.P.moveTo(c,_,b),g=!0;else if(B=="o5")for(;u.length>0;)_+=u.shift(),b+=u.shift(),e.U.P.lineTo(c,_,b);else if(B=="o6"||B=="o7")for(var Y=u.length,V=B=="o6",Q=0;Q<Y;Q++){var ee=u.shift();V?_+=ee:b+=ee,V=!V,e.U.P.lineTo(c,_,b)}else if(B=="o8"||B=="o24"){Y=u.length;for(var re=0;re+6<=Y;)x=_+u.shift(),y=b+u.shift(),S=x+u.shift(),E=y+u.shift(),_=S+u.shift(),b=E+u.shift(),e.U.P.curveTo(c,x,y,S,E,_,b),re+=6;B=="o24"&&(_+=u.shift(),b+=u.shift(),e.U.P.lineTo(c,_,b))}else{if(B=="o11")break;if(B=="o1234"||B=="o1235"||B=="o1236"||B=="o1237")B=="o1234"&&(y=b,S=(x=_+u.shift())+u.shift(),P=E=y+u.shift(),T=E,j=b,_=(C=(A=(k=S+u.shift())+u.shift())+u.shift())+u.shift(),e.U.P.curveTo(c,x,y,S,E,k,P),e.U.P.curveTo(c,A,T,C,j,_,b)),B=="o1235"&&(x=_+u.shift(),y=b+u.shift(),S=x+u.shift(),E=y+u.shift(),k=S+u.shift(),P=E+u.shift(),A=k+u.shift(),T=P+u.shift(),C=A+u.shift(),j=T+u.shift(),_=C+u.shift(),b=j+u.shift(),u.shift(),e.U.P.curveTo(c,x,y,S,E,k,P),e.U.P.curveTo(c,A,T,C,j,_,b)),B=="o1236"&&(x=_+u.shift(),y=b+u.shift(),S=x+u.shift(),P=E=y+u.shift(),T=E,C=(A=(k=S+u.shift())+u.shift())+u.shift(),j=T+u.shift(),_=C+u.shift(),e.U.P.curveTo(c,x,y,S,E,k,P),e.U.P.curveTo(c,A,T,C,j,_,b)),B=="o1237"&&(x=_+u.shift(),y=b+u.shift(),S=x+u.shift(),E=y+u.shift(),k=S+u.shift(),P=E+u.shift(),A=k+u.shift(),T=P+u.shift(),C=A+u.shift(),j=T+u.shift(),Math.abs(C-_)>Math.abs(j-b)?_=C+u.shift():b=j+u.shift(),e.U.P.curveTo(c,x,y,S,E,k,P),e.U.P.curveTo(c,A,T,C,j,_,b));else if(B=="o14"){if(u.length>0&&!f&&(m=u.shift()+a.nominalWidthX,f=!0),u.length==4){var I=u.shift(),F=u.shift(),z=u.shift(),U=u.shift(),Z=e.CFF.glyphBySE(a,z),K=e.CFF.glyphBySE(a,U);e.U._drawCFF(a.CharStrings[Z],s,a,l,c),s.x=I,s.y=F,e.U._drawCFF(a.CharStrings[K],s,a,l,c)}g&&(e.U.P.closePath(c),g=!1)}else if(B=="o19"||B=="o20")u.length%2!=0&&!f&&(m=u.shift()+l.nominalWidthX),d+=u.length>>1,u.length=0,f=!0,v+=d+7>>3;else if(B=="o21")u.length>2&&!f&&(m=u.shift()+l.nominalWidthX,f=!0),b+=u.pop(),_+=u.pop(),g&&e.U.P.closePath(c),e.U.P.moveTo(c,_,b),g=!0;else if(B=="o22")u.length>1&&!f&&(m=u.shift()+l.nominalWidthX,f=!0),_+=u.pop(),g&&e.U.P.closePath(c),e.U.P.moveTo(c,_,b),g=!0;else if(B=="o25"){for(;u.length>6;)_+=u.shift(),b+=u.shift(),e.U.P.lineTo(c,_,b);x=_+u.shift(),y=b+u.shift(),S=x+u.shift(),E=y+u.shift(),_=S+u.shift(),b=E+u.shift(),e.U.P.curveTo(c,x,y,S,E,_,b)}else if(B=="o26")for(u.length%2&&(_+=u.shift());u.length>0;)x=_,y=b+u.shift(),_=S=x+u.shift(),b=(E=y+u.shift())+u.shift(),e.U.P.curveTo(c,x,y,S,E,_,b);else if(B=="o27")for(u.length%2&&(b+=u.shift());u.length>0;)y=b,S=(x=_+u.shift())+u.shift(),E=y+u.shift(),_=S+u.shift(),b=E,e.U.P.curveTo(c,x,y,S,E,_,b);else if(B=="o10"||B=="o29"){var ne=B=="o10"?l:a;if(u.length==0)console.debug("error: empty stack");else{var ie=u.pop(),de=ne.Subrs[ie+ne.Bias];s.x=_,s.y=b,s.nStems=d,s.haveWidth=f,s.width=m,s.open=g,e.U._drawCFF(de,s,a,l,c),_=s.x,b=s.y,d=s.nStems,f=s.haveWidth,m=s.width,g=s.open}}else if(B=="o30"||B=="o31"){var ae=u.length,_e=(re=0,B=="o31");for(re+=ae-(Y=-3&ae);re<Y;)_e?(y=b,S=(x=_+u.shift())+u.shift(),b=(E=y+u.shift())+u.shift(),Y-re==5?(_=S+u.shift(),re++):_=S,_e=!1):(x=_,y=b+u.shift(),S=x+u.shift(),E=y+u.shift(),_=S+u.shift(),Y-re==5?(b=E+u.shift(),re++):b=E,_e=!0),e.U.P.curveTo(c,x,y,S,E,_,b),re+=4}else{if((B+"").charAt(0)=="o")throw console.debug("Unknown operation: "+B,i),B;u.push(B)}}}s.x=_,s.y=b,s.nStems=d,s.haveWidth=f,s.width=m,s.open=g};var n=e,r={Typr:n};return t.Typr=n,t.default=r,Object.defineProperty(t,"__esModule",{value:!0}),t}({}).Typr}/*!
Custom bundle of woff2otf (https://github.com/arty-name/woff2otf) with fflate
(https://github.com/101arrowz/fflate) for use in Troika text rendering. 
Original licenses apply: 
- fflate: https://github.com/101arrowz/fflate/blob/master/LICENSE (MIT)
- woff2otf.js: https://github.com/arty-name/woff2otf/blob/master/woff2otf.js (Apache2)
*/function WK(){return function(t){var e=Uint8Array,n=Uint16Array,r=Uint32Array,i=new e([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),s=new e([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),a=new e([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),l=function(B,Y){for(var V=new n(31),Q=0;Q<31;++Q)V[Q]=Y+=1<<B[Q-1];var ee=new r(V[30]);for(Q=1;Q<30;++Q)for(var re=V[Q];re<V[Q+1];++re)ee[re]=re-V[Q]<<5|Q;return[V,ee]},c=l(i,2),u=c[0],d=c[1];u[28]=258,d[258]=28;for(var f=l(s,0)[0],m=new n(32768),g=0;g<32768;++g){var v=(43690&g)>>>1|(21845&g)<<1;v=(61680&(v=(52428&v)>>>2|(13107&v)<<2))>>>4|(3855&v)<<4,m[g]=((65280&v)>>>8|(255&v)<<8)>>>1}var _=function(B,Y,V){for(var Q=B.length,ee=0,re=new n(Y);ee<Q;++ee)++re[B[ee]-1];var I,F=new n(Y);for(ee=0;ee<Y;++ee)F[ee]=F[ee-1]+re[ee-1]<<1;if(V){I=new n(1<<Y);var z=15-Y;for(ee=0;ee<Q;++ee)if(B[ee])for(var U=ee<<4|B[ee],Z=Y-B[ee],K=F[B[ee]-1]++<<Z,ne=K|(1<<Z)-1;K<=ne;++K)I[m[K]>>>z]=U}else for(I=new n(Q),ee=0;ee<Q;++ee)B[ee]&&(I[ee]=m[F[B[ee]-1]++]>>>15-B[ee]);return I},b=new e(288);for(g=0;g<144;++g)b[g]=8;for(g=144;g<256;++g)b[g]=9;for(g=256;g<280;++g)b[g]=7;for(g=280;g<288;++g)b[g]=8;var x=new e(32);for(g=0;g<32;++g)x[g]=5;var y=_(b,9,1),S=_(x,5,1),E=function(B){for(var Y=B[0],V=1;V<B.length;++V)B[V]>Y&&(Y=B[V]);return Y},A=function(B,Y,V){var Q=Y/8|0;return(B[Q]|B[Q+1]<<8)>>(7&Y)&V},T=function(B,Y){var V=Y/8|0;return(B[V]|B[V+1]<<8|B[V+2]<<16)>>(7&Y)},C=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],j=function(B,Y,V){var Q=new Error(Y||C[B]);if(Q.code=B,Error.captureStackTrace&&Error.captureStackTrace(Q,j),!V)throw Q;return Q},k=function(B,Y,V){var Q=B.length;if(!Q||V&&!V.l&&Q<5)return Y||new e(0);var ee=!Y||V,re=!V||V.i;V||(V={}),Y||(Y=new e(3*Q));var I,F=function(Re){var J=Y.length;if(Re>J){var we=new e(Math.max(2*J,Re));we.set(Y),Y=we}},z=V.f||0,U=V.p||0,Z=V.b||0,K=V.l,ne=V.d,ie=V.m,de=V.n,ae=8*Q;do{if(!K){V.f=z=A(B,U,1);var _e=A(B,U+1,3);if(U+=3,!_e){var je=B[(L=((I=U)/8|0)+(7&I&&1)+4)-4]|B[L-3]<<8,Le=L+je;if(Le>Q){re&&j(0);break}ee&&F(Z+je),Y.set(B.subarray(L,Le),Z),V.b=Z+=je,V.p=U=8*Le;continue}if(_e==1)K=y,ne=S,ie=9,de=5;else if(_e==2){var Te=A(B,U,31)+257,G=A(B,U+10,15)+4,Ee=Te+A(B,U+5,31)+1;U+=14;for(var me=new e(Ee),ve=new e(19),he=0;he<G;++he)ve[a[he]]=A(B,U+3*he,7);U+=3*G;var We=E(ve),ge=(1<<We)-1,O=_(ve,We,1);for(he=0;he<Ee;){var L,q=O[A(B,U,ge)];if(U+=15&q,(L=q>>>4)<16)me[he++]=L;else{var fe=0,le=0;for(L==16?(le=3+A(B,U,3),U+=2,fe=me[he-1]):L==17?(le=3+A(B,U,7),U+=3):L==18&&(le=11+A(B,U,127),U+=7);le--;)me[he++]=fe}}var ce=me.subarray(0,Te),Pe=me.subarray(Te);ie=E(ce),de=E(Pe),K=_(ce,ie,1),ne=_(Pe,de,1)}else j(1);if(U>ae){re&&j(0);break}}ee&&F(Z+131072);for(var Ue=(1<<ie)-1,Fe=(1<<de)-1,ze=U;;ze=U){var $e=(fe=K[T(B,U)&Ue])>>>4;if((U+=15&fe)>ae){re&&j(0);break}if(fe||j(2),$e<256)Y[Z++]=$e;else{if($e==256){ze=U,K=null;break}var Ae=$e-254;if($e>264){var at=i[he=$e-257];Ae=A(B,U,(1<<at)-1)+u[he],U+=at}var Xe=ne[T(B,U)&Fe],Ke=Xe>>>4;if(Xe||j(3),U+=15&Xe,Pe=f[Ke],Ke>3&&(at=s[Ke],Pe+=T(B,U)&(1<<at)-1,U+=at),U>ae){re&&j(0);break}ee&&F(Z+131072);for(var Be=Z+Ae;Z<Be;Z+=4)Y[Z]=Y[Z-Pe],Y[Z+1]=Y[Z+1-Pe],Y[Z+2]=Y[Z+2-Pe],Y[Z+3]=Y[Z+3-Pe];Z=Be}}V.l=K,V.p=ze,V.b=Z,K&&(z=1,V.m=ie,V.d=ne,V.n=de)}while(!z);return Z==Y.length?Y:function(Re,J,we){(J==null||J<0)&&(J=0),(we==null||we>Re.length)&&(we=Re.length);var Ge=new(Re instanceof n?n:Re instanceof r?r:e)(we-J);return Ge.set(Re.subarray(J,we)),Ge}(Y,0,Z)},P=new e(0),H=typeof TextDecoder<"u"&&new TextDecoder;try{H.decode(P,{stream:!0})}catch{}return t.convert_streams=function(B){var Y=new DataView(B),V=0;function Q(){var Te=Y.getUint16(V);return V+=2,Te}function ee(){var Te=Y.getUint32(V);return V+=4,Te}function re(Te){je.setUint16(Le,Te),Le+=2}function I(Te){je.setUint32(Le,Te),Le+=4}for(var F={signature:ee(),flavor:ee(),length:ee(),numTables:Q(),reserved:Q(),totalSfntSize:ee(),majorVersion:Q(),minorVersion:Q(),metaOffset:ee(),metaLength:ee(),metaOrigLength:ee(),privOffset:ee(),privLength:ee()},z=0;Math.pow(2,z)<=F.numTables;)z++;z--;for(var U=16*Math.pow(2,z),Z=16*F.numTables-U,K=12,ne=[],ie=0;ie<F.numTables;ie++)ne.push({tag:ee(),offset:ee(),compLength:ee(),origLength:ee(),origChecksum:ee()}),K+=16;var de,ae=new Uint8Array(12+16*ne.length+ne.reduce(function(Te,G){return Te+G.origLength+4},0)),_e=ae.buffer,je=new DataView(_e),Le=0;return I(F.flavor),re(F.numTables),re(U),re(z),re(Z),ne.forEach(function(Te){I(Te.tag),I(Te.origChecksum),I(K),I(Te.origLength),Te.outOffset=K,(K+=Te.origLength)%4!=0&&(K+=4-K%4)}),ne.forEach(function(Te){var G,Ee=B.slice(Te.offset,Te.offset+Te.compLength);if(Te.compLength!=Te.origLength){var me=new Uint8Array(Te.origLength);G=new Uint8Array(Ee,2),k(G,me)}else me=new Uint8Array(Ee);ae.set(me,Te.outOffset);var ve=0;(K=Te.outOffset+Te.origLength)%4!=0&&(ve=4-K%4),ae.set(new Uint8Array(ve).buffer,Te.outOffset+Te.origLength),de=K+ve}),_e.slice(0,de)},Object.defineProperty(t,"__esModule",{value:!0}),t}({}).convert_streams}function XK(t,e){const n={M:2,L:2,Q:4,C:6,Z:0},r={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},i=1,s=2,a=4,l=8,c=16,u=32;let d;function f(A){if(!d){const T={R:s,L:i,D:a,C:c,U:u,T:l};d=new Map;for(let C in r){let j=0;r[C].split(",").forEach(k=>{let[P,H]=k.split("+");P=parseInt(P,36),H=H?parseInt(H,36):0,d.set(j+=P,T[C]);for(let B=H;B--;)d.set(++j,T[C])})}}return d.get(A)||u}const m=1,g=2,v=3,_=4,b=[null,"isol","init","fina","medi"];function x(A){const T=new Uint8Array(A.length);let C=u,j=m,k=-1;for(let P=0;P<A.length;P++){const H=A.codePointAt(P);let B=f(H)|0,Y=m;B&l||(C&(i|a|c)?B&(s|a|c)?(Y=v,(j===m||j===v)&&T[k]++):B&(i|u)&&(j===g||j===_)&&T[k]--:C&(s|u)&&(j===g||j===_)&&T[k]--,j=T[P]=Y,C=B,k=P,H>65535&&P++)}return T}function y(A,T){const C=[];for(let k=0;k<T.length;k++){const P=T.codePointAt(k);P>65535&&k++,C.push(t.U.codeToGlyph(A,P))}const j=A.GSUB;if(j){const{lookupList:k,featureList:P}=j;let H;const B=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws)$/,Y=[];P.forEach(V=>{if(B.test(V.tag))for(let Q=0;Q<V.tab.length;Q++){if(Y[V.tab[Q]])continue;Y[V.tab[Q]]=!0;const ee=k[V.tab[Q]],re=/^(isol|init|fina|medi)$/.test(V.tag);re&&!H&&(H=x(T));for(let I=0;I<C.length;I++)(!H||!re||b[H[I]]===V.tag)&&t.U._applySubs(C,I,ee,k)}})}return C}function S(...A){for(let T=0;T<A.length;T++)if(typeof A[T]=="number")return A[T]}function E(A){const T=Object.create(null),C=A["OS/2"],j=A.hhea,k=A.head.unitsPerEm,P=S(C&&C.sTypoAscender,j&&j.ascender,k),H={unitsPerEm:k,ascender:P,descender:S(C&&C.sTypoDescender,j&&j.descender,0),capHeight:S(C&&C.sCapHeight,P),xHeight:S(C&&C.sxHeight,P),lineGap:S(C&&C.sTypoLineGap,j&&j.lineGap),forEachGlyph(B,Y,V,Q){let ee=0;const re=1/H.unitsPerEm*Y,I=y(A,B);let F=0,z=-1;return I.forEach((U,Z)=>{if(U!==-1){let K=T[U];if(!K){const{cmds:ne,crds:ie}=t.U.glyphToPath(A,U);let de="",ae=0;for(let G=0,Ee=ne.length;G<Ee;G++){const me=n[ne[G]];de+=ne[G];for(let ve=1;ve<=me;ve++)de+=(ve>1?",":"")+ie[ae++]}let _e,je,Le,Te;if(ie.length){_e=je=1/0,Le=Te=-1/0;for(let G=0,Ee=ie.length;G<Ee;G+=2){let me=ie[G],ve=ie[G+1];me<_e&&(_e=me),ve<je&&(je=ve),me>Le&&(Le=me),ve>Te&&(Te=ve)}}else _e=Le=je=Te=0;K=T[U]={index:U,advanceWidth:A.hmtx.aWidth[U],xMin:_e,yMin:je,xMax:Le,yMax:Te,path:de,pathCommandCount:ne.length}}z!==-1&&(ee+=t.U.getPairAdjustment(A,z,U)*re),Q.call(null,K,ee,F),K.advanceWidth&&(ee+=K.advanceWidth*re),V&&(ee+=V*Y),z=U}F+=B.codePointAt(F)>65535?2:1}),ee}};return H}return function(T){const C=new Uint8Array(T,0,4),j=t._bin.readASCII(C,0,4);if(j==="wOFF")T=e(T);else if(j==="wOF2")throw new Error("woff2 fonts not supported");return E(t.parse(T)[0])}}const YK=Fp({name:"Typr Font Parser",dependencies:[GK,WK,XK],init(t,e,n){const r=t(),i=e();return n(r,i)}}),ad={defaultFontURL:"https://fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxM.woff",sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},qK=new nt;function ku(){return(self.performance||Date).now()}const O3=Object.create(null);function xI(t,e){t=KK({},t);const n=ku();if(t.font=JK(t.font||ad.defaultFontURL),t.text=""+t.text,t.sdfGlyphSize=t.sdfGlyphSize||ad.sdfGlyphSize,t.colorRanges!=null){let f={};for(let m in t.colorRanges)if(t.colorRanges.hasOwnProperty(m)){let g=t.colorRanges[m];typeof g!="number"&&(g=qK.set(g).getHex()),f[m]=g}t.colorRanges=f}Object.freeze(t);const{textureWidth:r,sdfExponent:i}=ad,{sdfGlyphSize:s}=t,a=r/s*4;let l=O3[s];if(!l){const f=document.createElement("canvas");f.width=r,f.height=s*256/a,l=O3[s]={glyphCount:0,sdfGlyphSize:s,sdfCanvas:f,sdfTexture:new Cn(f,void 0,void 0,void 0,Mn,Mn),contextLost:!1,glyphsByFont:new Map},l.sdfTexture.generateMipmaps=!1,$K(l)}const{sdfTexture:c,sdfCanvas:u}=l;let d=l.glyphsByFont.get(t.font);d||l.glyphsByFont.set(t.font,d=new Map),eJ(t).then(f=>{const{glyphIds:m,glyphPositions:g,fontSize:v,unitsPerEm:_,timings:b}=f,x=[],y=new Float32Array(m.length*4),S=v/_;let E=0,A=0;const T=ku();m.forEach((H,B)=>{let Y=d.get(H);if(!Y){const{path:re,pathBounds:I}=f.glyphData[H],F=Math.max(I[2]-I[0],I[3]-I[1])/s*(ad.sdfMargin*s+.5),z=l.glyphCount++,U=[I[0]-F,I[1]-F,I[2]+F,I[3]+F];d.set(H,Y={path:re,atlasIndex:z,sdfViewBox:U}),x.push(Y)}const{sdfViewBox:V}=Y,Q=g[A++],ee=g[A++];y[E++]=Q+V[0]*S,y[E++]=ee+V[1]*S,y[E++]=Q+V[2]*S,y[E++]=ee+V[3]*S,m[B]=Y.atlasIndex}),b.quads=(b.quads||0)+(ku()-T);const C=ku();b.sdf={};const j=u.height,k=Math.ceil(l.glyphCount/a),P=Math.pow(2,Math.ceil(Math.log2(k*s)));P>j&&(console.info(`Increasing SDF texture size ${j}->${P}`),HK(u,r,P),c.dispose()),Promise.all(x.map(H=>vI(H,l,t.gpuAccelerateSDF).then(({timing:B})=>{b.sdf[H.atlasIndex]=B}))).then(()=>{x.length&&!l.contextLost&&(yI(l),c.needsUpdate=!0),b.sdfTotal=ku()-C,b.total=ku()-n,e(Object.freeze({parameters:t,sdfTexture:c,sdfGlyphSize:s,sdfExponent:i,glyphBounds:y,glyphAtlasIndices:m,glyphColors:f.glyphColors,caretPositions:f.caretPositions,caretHeight:f.caretHeight,chunkedBounds:f.chunkedBounds,ascender:f.ascender,descender:f.descender,lineHeight:f.lineHeight,capHeight:f.capHeight,xHeight:f.xHeight,topBaseline:f.topBaseline,blockBounds:f.blockBounds,visibleBounds:f.visibleBounds,timings:f.timings}))})}),Promise.resolve().then(()=>{l.contextLost||VK(u)})}function vI({path:t,atlasIndex:e,sdfViewBox:n},{sdfGlyphSize:r,sdfCanvas:i,contextLost:s},a){if(s)return Promise.resolve({timing:-1});const{textureWidth:l,sdfExponent:c}=ad,u=Math.max(n[2]-n[0],n[3]-n[1]),d=Math.floor(e/4),f=d%(l/r)*r,m=Math.floor(d/(l/r))*r,g=e%4;return IK(r,r,t,n,u,c,i,f,m,g,a)}function $K(t){const e=t.sdfCanvas;e.addEventListener("webglcontextlost",n=>{console.log("Context Lost",n),n.preventDefault(),t.contextLost=!0}),e.addEventListener("webglcontextrestored",n=>{console.log("Context Restored",n),t.contextLost=!1;const r=[];t.glyphsByFont.forEach(i=>{i.forEach(s=>{r.push(vI(s,t,!0))})}),Promise.all(r).then(()=>{yI(t),t.sdfTexture.needsUpdate=!0})})}function ZK({font:t,characters:e,sdfGlyphSize:n},r){let i=Array.isArray(e)?e.join(`
`):""+e;xI({font:t,sdfGlyphSize:n,text:i},r)}function KK(t,e){for(let n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}let $g;function JK(t){return $g||($g=typeof document>"u"?{}:document.createElement("a")),$g.href=t,$g.href}function yI(t){if(typeof createImageBitmap!="function"){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:e,sdfTexture:n}=t,{width:r,height:i}=e,s=t.sdfCanvas.getContext("webgl");let a=n.image.data;(!a||a.length!==r*i*4)&&(a=new Uint8Array(r*i*4),n.image={width:r,height:i,data:a},n.flipY=!1,n.isDataTexture=!0),s.readPixels(0,0,r,i,s.RGBA,s.UNSIGNED_BYTE,a)}}const QK=Fp({name:"Typesetter",dependencies:[ad,YK,DK,TK],init(t,e,n,r){const{defaultFontURL:i}=t;return n(e,r(),{defaultFontURL:i})}}),eJ=Fp({name:"Typesetter",dependencies:[QK],init(t){return function(e){return new Promise(n=>{t.typeset(e,n)})}},getTransferables(t){const e=[t.glyphPositions.buffer,t.glyphIds.buffer];return t.caretPositions&&e.push(t.caretPositions.buffer),t.glyphColors&&e.push(t.glyphColors.buffer),e}}),F3={};function tJ(t){let e=F3[t];if(!e){const n=new bl(1,1,t,t),r=n.clone(),i=n.attributes,s=r.attributes,a=new At,l=i.uv.count;for(let c=0;c<l;c++)s.position.array[c*3]*=-1,s.normal.array[c*3+2]*=-1;["position","normal","uv"].forEach(c=>{a.setAttribute(c,new ot([...i[c].array,...s[c].array],i[c].itemSize))}),a.setIndex([...n.index.array,...r.index.array.map(c=>c+l)]),a.translate(.5,.5,0),e=F3[t]=a}return e}const nJ="aTroikaGlyphBounds",z3="aTroikaGlyphIndex",rJ="aTroikaGlyphColor";class iJ extends xM{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new Tr,this.boundingBox=new Wr}computeBoundingSphere(){}computeBoundingBox(){}setSide(e){const n=this.getIndex().count;this.setDrawRange(e===Hr?n/2:0,e===Gi?n:n/2)}set detail(e){if(e!==this._detail){this._detail=e,(typeof e!="number"||e<1)&&(e=1);let n=tJ(e);["position","normal","uv"].forEach(r=>{this.attributes[r]=n.attributes[r].clone()}),this.setIndex(n.getIndex().clone())}}get detail(){return this._detail}set curveRadius(e){e!==this._curveRadius&&(this._curveRadius=e,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(e,n,r,i,s){hb(this,nJ,e,4),hb(this,z3,n,1),hb(this,rJ,s,3),this._blockBounds=r,this._chunkedBounds=i,this.instanceCount=n.length,this._updateBounds()}_updateBounds(){const e=this._blockBounds;if(e){const{curveRadius:n,boundingBox:r}=this;if(n){const{PI:i,floor:s,min:a,max:l,sin:c,cos:u}=Math,d=i/2,f=i*2,m=Math.abs(n),g=e[0]/m,v=e[2]/m,_=s((g+d)/f)!==s((v+d)/f)?-m:a(c(g)*m,c(v)*m),b=s((g-d)/f)!==s((v-d)/f)?m:l(c(g)*m,c(v)*m),x=s((g+i)/f)!==s((v+i)/f)?m*2:l(m-u(g)*m,m-u(v)*m);r.min.set(_,e[1],n<0?-x:0),r.max.set(b,e[3],n<0?0:x)}else r.min.set(e[0],e[1],0),r.max.set(e[2],e[3],0);r.getBoundingSphere(this.boundingSphere)}}applyClipRect(e){let n=this.getAttribute(z3).count,r=this._chunkedBounds;if(r)for(let i=r.length;i--;){n=r[i].end;let s=r[i].rect;if(s[1]<e.w&&s[3]>e.y&&s[0]<e.z&&s[2]>e.x)break}this.instanceCount=n}}function hb(t,e,n,r){const i=t.getAttribute(e);n?i&&i.array.length===n.length?(i.array.set(n),i.needsUpdate=!0):(t.setAttribute(e,new Lc(n,r)),delete t._maxInstanceCount,t.dispose()):i&&t.deleteAttribute(e)}const sJ=`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaDistanceOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,aJ=`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaDistanceOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaDistanceOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,oJ=`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaDistanceOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaOutlineOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of exponential encoding in webgl-sdf-generator
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,lJ=`
float aaDist = troikaGetAADist();
float fragDistance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(fragDistance, uTroikaDistanceOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  fragDistance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`;function cJ(t){const e=V_(t,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new ke},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new Yt(0,0,0,0)},uTroikaClipRect:{value:new Yt(0,0,0,0)},uTroikaDistanceOffset:{value:0},uTroikaOutlineOpacity:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new ke},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new nt},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new Rt},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:sJ,vertexTransform:aJ,fragmentDefs:oJ,fragmentColorTransform:lJ,customRewriter({vertexShader:n,fragmentShader:r}){let i=/\buniform\s+vec3\s+diffuse\b/;return i.test(r)&&(r=r.replace(i,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),i.test(n)||(n=n.replace(mI,`uniform vec3 diffuse;
$&
vTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;
`))),{vertexShader:n,fragmentShader:r}}});return e.transparent=!0,Object.defineProperties(e,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),e}const EM=new go({color:16777215,side:Gi,transparent:!0}),B3=8421504,V3=new St,Zg=new X,fb=new X,Hh=[],uJ=new X,pb="+x+y";function H3(t){return Array.isArray(t)?t[0]:t}let bI=()=>{const t=new Fn(new bl(1,1),EM);return bI=()=>t,t},_I=()=>{const t=new Fn(new bl(1,1,32,1),EM);return _I=()=>t,t};const dJ={type:"syncstart"},hJ={type:"synccomplete"},wI=["font","fontSize","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],fJ=wI.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");let SI=class extends Fn{constructor(){const e=new iJ;super(e,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.fontSize=.1,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=B3,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=pb,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(e){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(e):(this._isSyncing=!0,this.dispatchEvent(dJ),xI({text:this.text,font:this.font,fontSize:this.fontSize||.1,letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF},n=>{this._isSyncing=!1,this._textRenderInfo=n,this.geometry.updateGlyphs(n.glyphBounds,n.glyphAtlasIndices,n.blockBounds,n.chunkedBounds,n.glyphColors);const r=this._queuedSyncs;r&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{r.forEach(i=>i&&i())})),this.dispatchEvent(hJ),e&&e()})))}onBeforeRender(e,n,r,i,s,a){this.sync(),s.isTroikaTextMaterial&&this._prepareForRender(s),s._hadOwnSide=s.hasOwnProperty("side"),this.geometry.setSide(s._actualSide=s.side),s.side=ya}onAfterRender(e,n,r,i,s,a){s._hadOwnSide?s.side=s._actualSide:delete s.side}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}get material(){let e=this._derivedMaterial;const n=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=EM.clone());if((!e||e.baseMaterial!==n)&&(e=this._derivedMaterial=cJ(n),n.addEventListener("dispose",function r(){n.removeEventListener("dispose",r),e.dispose()})),this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY){let r=e._outlineMtl;return r||(r=e._outlineMtl=Object.create(e,{id:{value:e.id+.1}}),r.isTextOutlineMaterial=!0,r.depthWrite=!1,r.map=null,e.addEventListener("dispose",function i(){e.removeEventListener("dispose",i),r.dispose()})),[r,e]}else return e}set material(e){e&&e.isTroikaTextMaterial?(this._derivedMaterial=e,this._baseMaterial=e.baseMaterial):this._baseMaterial=e}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(e){this.geometry.detail=e}get curveRadius(){return this.geometry.curveRadius}set curveRadius(e){this.geometry.curveRadius=e}get customDepthMaterial(){return H3(this.material).getDepthMaterial()}get customDistanceMaterial(){return H3(this.material).getDistanceMaterial()}_prepareForRender(e){const n=e.isTextOutlineMaterial,r=e.uniforms,i=this.textRenderInfo;if(i){const{sdfTexture:l,blockBounds:c}=i;r.uTroikaSDFTexture.value=l,r.uTroikaSDFTextureSize.value.set(l.image.width,l.image.height),r.uTroikaSDFGlyphSize.value=i.sdfGlyphSize,r.uTroikaSDFExponent.value=i.sdfExponent,r.uTroikaTotalBounds.value.fromArray(c),r.uTroikaUseGlyphColors.value=!n&&!!i.glyphColors;let u=0,d=0,f=0,m,g,v,_=0,b=0;if(n){let{outlineWidth:y,outlineOffsetX:S,outlineOffsetY:E,outlineBlur:A,outlineOpacity:T}=this;u=this._parsePercent(y)||0,d=Math.max(0,this._parsePercent(A)||0),m=T,_=this._parsePercent(S)||0,b=this._parsePercent(E)||0}else f=Math.max(0,this._parsePercent(this.strokeWidth)||0),f&&(v=this.strokeColor,r.uTroikaStrokeColor.value.set(v??B3),g=this.strokeOpacity,g==null&&(g=1)),m=this.fillOpacity;r.uTroikaDistanceOffset.value=u,r.uTroikaPositionOffset.value.set(_,b),r.uTroikaBlurRadius.value=d,r.uTroikaStrokeWidth.value=f,r.uTroikaStrokeOpacity.value=g,r.uTroikaFillOpacity.value=m??1,r.uTroikaCurveRadius.value=this.curveRadius||0;let x=this.clipRect;if(x&&Array.isArray(x)&&x.length===4)r.uTroikaClipRect.value.fromArray(x);else{const y=(this.fontSize||.1)*100;r.uTroikaClipRect.value.set(c[0]-y,c[1]-y,c[2]+y,c[3]+y)}this.geometry.applyClipRect(r.uTroikaClipRect.value)}r.uTroikaSDFDebug.value=!!this.debugSDF,e.polygonOffset=!!this.depthOffset,e.polygonOffsetFactor=e.polygonOffsetUnits=this.depthOffset||0;const s=n?this.outlineColor||0:this.color;if(s==null)delete e.color;else{const l=e.hasOwnProperty("color")?e.color:e.color=new nt;(s!==l._input||typeof s=="object")&&l.set(l._input=s)}let a=this.orientation||pb;if(a!==e._orientation){let l=r.uTroikaOrient.value;a=a.replace(/[^-+xyz]/g,"");let c=a!==pb&&a.match(/^([-+])([xyz])([-+])([xyz])$/);if(c){let[,u,d,f,m]=c;Zg.set(0,0,0)[d]=u==="-"?1:-1,fb.set(0,0,0)[m]=f==="-"?-1:1,V3.lookAt(uJ,Zg.cross(fb),fb),l.setFromMatrix4(V3)}else l.identity();e._orientation=a}}_parsePercent(e){if(typeof e=="string"){let n=e.match(/^(-?[\d.]+)%$/),r=n?parseFloat(n[1]):NaN;e=(isNaN(r)?0:r/100)*this.fontSize}return e}localPositionToTextCoords(e,n=new ke){n.copy(e);const r=this.curveRadius;return r&&(n.x=Math.atan2(e.x,Math.abs(r)-Math.abs(e.z))*Math.abs(r)),n}worldPositionToTextCoords(e,n=new ke){return Zg.copy(e),this.localPositionToTextCoords(this.worldToLocal(Zg),n)}raycast(e,n){const{textRenderInfo:r,curveRadius:i}=this;if(r){const s=r.blockBounds,a=i?_I():bI(),l=a.geometry,{position:c,uv:u}=l.attributes;for(let d=0;d<u.count;d++){let f=s[0]+u.getX(d)*(s[2]-s[0]);const m=s[1]+u.getY(d)*(s[3]-s[1]);let g=0;i&&(g=i-Math.cos(f/i)*i,f=Math.sin(f/i)*i),c.setXYZ(d,f,m,g)}l.boundingSphere=this.geometry.boundingSphere,l.boundingBox=this.geometry.boundingBox,a.matrixWorld=this.matrixWorld,a.material.side=this.material.side,Hh.length=0,a.raycast(e,Hh);for(let d=0;d<Hh.length;d++)Hh[d].object=this,n.push(Hh[d])}}copy(e){const n=this.geometry;return super.copy(e),this.geometry=n,fJ.forEach(r=>{this[r]=e[r]}),this}clone(){return new this.constructor().copy(this)}};wI.forEach(t=>{const e="_private_"+t;Object.defineProperty(SI.prototype,t,{get(){return this[e]},set(n){n!==this[e]&&(this[e]=n,this._needsSync=!0)}})});const G3=D.forwardRef(({sdfGlyphSize:t=64,anchorX:e="center",anchorY:n="middle",font:r,fontSize:i=1,children:s,characters:a,onSync:l,...c},u)=>{const d=ia(({invalidate:v})=>v),[f]=D.useState(()=>new SI),[m,g]=D.useMemo(()=>{const v=[];let _="";return D.Children.forEach(s,b=>{typeof b=="string"||typeof b=="number"?_+=b:v.push(b)}),[v,_]},[s]);return AZ(()=>new Promise(v=>ZK({font:r,characters:a},v)),["troika-text",r,a]),D.useLayoutEffect(()=>void f.sync(()=>{d(),l&&l(f)})),D.useEffect(()=>()=>f.dispose(),[f]),D.createElement("primitive",Rd({object:f,ref:u,font:r,text:g,anchorX:e,anchorY:n,fontSize:i,sdfGlyphSize:t},c),m)}),pJ=D.forwardRef(({makeDefault:t,camera:e,regress:n,domElement:r,enableDamping:i=!0,keyEvents:s=!1,onChange:a,onStart:l,onEnd:c,...u},d)=>{const f=ia(T=>T.invalidate),m=ia(T=>T.camera),g=ia(T=>T.gl),v=ia(T=>T.events),_=ia(T=>T.setEvents),b=ia(T=>T.set),x=ia(T=>T.get),y=ia(T=>T.performance),S=e||m,E=r||v.connected||g.domElement,A=D.useMemo(()=>new bK(S),[S]);return Pv(()=>{A.enabled&&A.update()},-1),D.useEffect(()=>(s&&A.connect(s===!0?E:s),A.connect(E),()=>void A.dispose()),[s,E,n,A,f]),D.useEffect(()=>{const T=k=>{f(),n&&y.regress(),a&&a(k)},C=k=>{l&&l(k)},j=k=>{c&&c(k)};return A.addEventListener("change",T),A.addEventListener("start",C),A.addEventListener("end",j),()=>{A.removeEventListener("start",C),A.removeEventListener("end",j),A.removeEventListener("change",T)}},[a,l,c,A,f,_]),D.useEffect(()=>{if(t){const T=x().controls;return b({controls:A}),()=>b({controls:T})}},[t,A]),D.createElement("primitive",Rd({ref:d,object:A,enableDamping:i},u))}),mJ=D.forwardRef(({children:t,enabled:e=!0,speed:n=1,rotationIntensity:r=1,floatIntensity:i=1,floatingRange:s=[-.1,.1],...a},l)=>{const c=D.useRef(null),u=D.useRef(Math.random()*1e4);return Pv(d=>{var f,m;if(!e||n===0)return;const g=u.current+d.clock.getElapsedTime();c.current.rotation.x=Math.cos(g/4*n)/8*r,c.current.rotation.y=Math.sin(g/4*n)/8*r,c.current.rotation.z=Math.sin(g/4*n)/20*r;let v=Math.sin(g/4*n)/10;v=O4.mapLinear(v,-.1,.1,(f=s==null?void 0:s[0])!==null&&f!==void 0?f:-.1,(m=s==null?void 0:s[1])!==null&&m!==void 0?m:.1),c.current.position.y=v*i,c.current.updateMatrix()}),D.createElement("group",a,D.createElement("group",{ref:hK([c,l]),matrixAutoUpdate:!1},t))});/**
 * lil-gui
 * https://lil-gui.georgealways.com
 * @version 0.21.0
 * @author George Michael Brower
 * @license MIT
 */class ma{constructor(e,n,r,i,s="div"){this.parent=e,this.object=n,this.property=r,this._disabled=!1,this._hidden=!1,this.initialValue=this.getValue(),this.domElement=document.createElement(s),this.domElement.classList.add("lil-controller"),this.domElement.classList.add(i),this.$name=document.createElement("div"),this.$name.classList.add("lil-name"),ma.nextNameID=ma.nextNameID||0,this.$name.id=`lil-gui-name-${++ma.nextNameID}`,this.$widget=document.createElement("div"),this.$widget.classList.add("lil-widget"),this.$disable=this.$widget,this.domElement.appendChild(this.$name),this.domElement.appendChild(this.$widget),this.domElement.addEventListener("keydown",a=>a.stopPropagation()),this.domElement.addEventListener("keyup",a=>a.stopPropagation()),this.parent.children.push(this),this.parent.controllers.push(this),this.parent.$children.appendChild(this.domElement),this._listenCallback=this._listenCallback.bind(this),this.name(r)}name(e){return this._name=e,this.$name.textContent=e,this}onChange(e){return this._onChange=e,this}_callOnChange(){this.parent._callOnChange(this),this._onChange!==void 0&&this._onChange.call(this,this.getValue()),this._changed=!0}onFinishChange(e){return this._onFinishChange=e,this}_callOnFinishChange(){this._changed&&(this.parent._callOnFinishChange(this),this._onFinishChange!==void 0&&this._onFinishChange.call(this,this.getValue())),this._changed=!1}reset(){return this.setValue(this.initialValue),this._callOnFinishChange(),this}enable(e=!0){return this.disable(!e)}disable(e=!0){return e===this._disabled?this:(this._disabled=e,this.domElement.classList.toggle("lil-disabled",e),this.$disable.toggleAttribute("disabled",e),this)}show(e=!0){return this._hidden=!e,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}options(e){const n=this.parent.add(this.object,this.property,e);return n.name(this._name),this.destroy(),n}min(e){return this}max(e){return this}step(e){return this}decimals(e){return this}listen(e=!0){return this._listening=e,this._listenCallbackID!==void 0&&(cancelAnimationFrame(this._listenCallbackID),this._listenCallbackID=void 0),this._listening&&this._listenCallback(),this}_listenCallback(){this._listenCallbackID=requestAnimationFrame(this._listenCallback);const e=this.save();e!==this._listenPrevValue&&this.updateDisplay(),this._listenPrevValue=e}getValue(){return this.object[this.property]}setValue(e){return this.getValue()!==e&&(this.object[this.property]=e,this._callOnChange(),this.updateDisplay()),this}updateDisplay(){return this}load(e){return this.setValue(e),this._callOnFinishChange(),this}save(){return this.getValue()}destroy(){this.listen(!1),this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.controllers.splice(this.parent.controllers.indexOf(this),1),this.parent.$children.removeChild(this.domElement)}}class gJ extends ma{constructor(e,n,r){super(e,n,r,"lil-boolean","label"),this.$input=document.createElement("input"),this.$input.setAttribute("type","checkbox"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$widget.appendChild(this.$input),this.$input.addEventListener("change",()=>{this.setValue(this.$input.checked),this._callOnFinishChange()}),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.checked=this.getValue(),this}}function G_(t){let e,n;return(e=t.match(/(#|0x)?([a-f0-9]{6})/i))?n=e[2]:(e=t.match(/rgb\(\s*(\d*)\s*,\s*(\d*)\s*,\s*(\d*)\s*\)/))?n=parseInt(e[1]).toString(16).padStart(2,0)+parseInt(e[2]).toString(16).padStart(2,0)+parseInt(e[3]).toString(16).padStart(2,0):(e=t.match(/^#?([a-f0-9])([a-f0-9])([a-f0-9])$/i))&&(n=e[1]+e[1]+e[2]+e[2]+e[3]+e[3]),n?"#"+n:!1}const xJ={isPrimitive:!0,match:t=>typeof t=="string",fromHexString:G_,toHexString:G_},gp={isPrimitive:!0,match:t=>typeof t=="number",fromHexString:t=>parseInt(t.substring(1),16),toHexString:t=>"#"+t.toString(16).padStart(6,0)},vJ={isPrimitive:!1,match:t=>Array.isArray(t)||ArrayBuffer.isView(t),fromHexString(t,e,n=1){const r=gp.fromHexString(t);e[0]=(r>>16&255)/255*n,e[1]=(r>>8&255)/255*n,e[2]=(r&255)/255*n},toHexString([t,e,n],r=1){r=255/r;const i=t*r<<16^e*r<<8^n*r<<0;return gp.toHexString(i)}},yJ={isPrimitive:!1,match:t=>Object(t)===t,fromHexString(t,e,n=1){const r=gp.fromHexString(t);e.r=(r>>16&255)/255*n,e.g=(r>>8&255)/255*n,e.b=(r&255)/255*n},toHexString({r:t,g:e,b:n},r=1){r=255/r;const i=t*r<<16^e*r<<8^n*r<<0;return gp.toHexString(i)}},bJ=[xJ,gp,vJ,yJ];function _J(t){return bJ.find(e=>e.match(t))}class wJ extends ma{constructor(e,n,r,i){super(e,n,r,"lil-color"),this.$input=document.createElement("input"),this.$input.setAttribute("type","color"),this.$input.setAttribute("tabindex",-1),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$text=document.createElement("input"),this.$text.setAttribute("type","text"),this.$text.setAttribute("spellcheck","false"),this.$text.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("lil-display"),this.$display.appendChild(this.$input),this.$widget.appendChild(this.$display),this.$widget.appendChild(this.$text),this._format=_J(this.initialValue),this._rgbScale=i,this._initialValueHexString=this.save(),this._textFocused=!1,this.$input.addEventListener("input",()=>{this._setValueFromHexString(this.$input.value)}),this.$input.addEventListener("blur",()=>{this._callOnFinishChange()}),this.$text.addEventListener("input",()=>{const s=G_(this.$text.value);s&&this._setValueFromHexString(s)}),this.$text.addEventListener("focus",()=>{this._textFocused=!0,this.$text.select()}),this.$text.addEventListener("blur",()=>{this._textFocused=!1,this.updateDisplay(),this._callOnFinishChange()}),this.$disable=this.$text,this.updateDisplay()}reset(){return this._setValueFromHexString(this._initialValueHexString),this}_setValueFromHexString(e){if(this._format.isPrimitive){const n=this._format.fromHexString(e);this.setValue(n)}else this._format.fromHexString(e,this.getValue(),this._rgbScale),this._callOnChange(),this.updateDisplay()}save(){return this._format.toHexString(this.getValue(),this._rgbScale)}load(e){return this._setValueFromHexString(e),this._callOnFinishChange(),this}updateDisplay(){return this.$input.value=this._format.toHexString(this.getValue(),this._rgbScale),this._textFocused||(this.$text.value=this.$input.value.substring(1)),this.$display.style.backgroundColor=this.$input.value,this}}class mb extends ma{constructor(e,n,r){super(e,n,r,"lil-function"),this.$button=document.createElement("button"),this.$button.appendChild(this.$name),this.$widget.appendChild(this.$button),this.$button.addEventListener("click",i=>{i.preventDefault(),this.getValue().call(this.object),this._callOnChange()}),this.$button.addEventListener("touchstart",()=>{},{passive:!0}),this.$disable=this.$button}}class SJ extends ma{constructor(e,n,r,i,s,a){super(e,n,r,"lil-number"),this._initInput(),this.min(i),this.max(s);const l=a!==void 0;this.step(l?a:this._getImplicitStep(),l),this.updateDisplay()}decimals(e){return this._decimals=e,this.updateDisplay(),this}min(e){return this._min=e,this._onUpdateMinMax(),this}max(e){return this._max=e,this._onUpdateMinMax(),this}step(e,n=!0){return this._step=e,this._stepExplicit=n,this}updateDisplay(){const e=this.getValue();if(this._hasSlider){let n=(e-this._min)/(this._max-this._min);n=Math.max(0,Math.min(n,1)),this.$fill.style.width=n*100+"%"}return this._inputFocused||(this.$input.value=this._decimals===void 0?e:e.toFixed(this._decimals)),this}_initInput(){this.$input=document.createElement("input"),this.$input.setAttribute("type","text"),this.$input.setAttribute("aria-labelledby",this.$name.id),window.matchMedia("(pointer: coarse)").matches&&(this.$input.setAttribute("type","number"),this.$input.setAttribute("step","any")),this.$widget.appendChild(this.$input),this.$disable=this.$input;const n=()=>{let y=parseFloat(this.$input.value);isNaN(y)||(this._stepExplicit&&(y=this._snap(y)),this.setValue(this._clamp(y)))},r=y=>{const S=parseFloat(this.$input.value);isNaN(S)||(this._snapClampSetValue(S+y),this.$input.value=this.getValue())},i=y=>{y.key==="Enter"&&this.$input.blur(),y.code==="ArrowUp"&&(y.preventDefault(),r(this._step*this._arrowKeyMultiplier(y))),y.code==="ArrowDown"&&(y.preventDefault(),r(this._step*this._arrowKeyMultiplier(y)*-1))},s=y=>{this._inputFocused&&(y.preventDefault(),r(this._step*this._normalizeMouseWheel(y)))};let a=!1,l,c,u,d,f;const m=5,g=y=>{l=y.clientX,c=u=y.clientY,a=!0,d=this.getValue(),f=0,window.addEventListener("mousemove",v),window.addEventListener("mouseup",_)},v=y=>{if(a){const S=y.clientX-l,E=y.clientY-c;Math.abs(E)>m?(y.preventDefault(),this.$input.blur(),a=!1,this._setDraggingStyle(!0,"vertical")):Math.abs(S)>m&&_()}if(!a){const S=y.clientY-u;f-=S*this._step*this._arrowKeyMultiplier(y),d+f>this._max?f=this._max-d:d+f<this._min&&(f=this._min-d),this._snapClampSetValue(d+f)}u=y.clientY},_=()=>{this._setDraggingStyle(!1,"vertical"),this._callOnFinishChange(),window.removeEventListener("mousemove",v),window.removeEventListener("mouseup",_)},b=()=>{this._inputFocused=!0},x=()=>{this._inputFocused=!1,this.updateDisplay(),this._callOnFinishChange()};this.$input.addEventListener("input",n),this.$input.addEventListener("keydown",i),this.$input.addEventListener("wheel",s,{passive:!1}),this.$input.addEventListener("mousedown",g),this.$input.addEventListener("focus",b),this.$input.addEventListener("blur",x)}_initSlider(){this._hasSlider=!0,this.$slider=document.createElement("div"),this.$slider.classList.add("lil-slider"),this.$fill=document.createElement("div"),this.$fill.classList.add("lil-fill"),this.$slider.appendChild(this.$fill),this.$widget.insertBefore(this.$slider,this.$input),this.domElement.classList.add("lil-has-slider");const e=(x,y,S,E,A)=>(x-y)/(S-y)*(A-E)+E,n=x=>{const y=this.$slider.getBoundingClientRect();let S=e(x,y.left,y.right,this._min,this._max);this._snapClampSetValue(S)},r=x=>{this._setDraggingStyle(!0),n(x.clientX),window.addEventListener("mousemove",i),window.addEventListener("mouseup",s)},i=x=>{n(x.clientX)},s=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("mousemove",i),window.removeEventListener("mouseup",s)};let a=!1,l,c;const u=x=>{x.preventDefault(),this._setDraggingStyle(!0),n(x.touches[0].clientX),a=!1},d=x=>{x.touches.length>1||(this._hasScrollBar?(l=x.touches[0].clientX,c=x.touches[0].clientY,a=!0):u(x),window.addEventListener("touchmove",f,{passive:!1}),window.addEventListener("touchend",m))},f=x=>{if(a){const y=x.touches[0].clientX-l,S=x.touches[0].clientY-c;Math.abs(y)>Math.abs(S)?u(x):(window.removeEventListener("touchmove",f),window.removeEventListener("touchend",m))}else x.preventDefault(),n(x.touches[0].clientX)},m=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("touchmove",f),window.removeEventListener("touchend",m)},g=this._callOnFinishChange.bind(this),v=400;let _;const b=x=>{if(Math.abs(x.deltaX)<Math.abs(x.deltaY)&&this._hasScrollBar)return;x.preventDefault();const S=this._normalizeMouseWheel(x)*this._step;this._snapClampSetValue(this.getValue()+S),this.$input.value=this.getValue(),clearTimeout(_),_=setTimeout(g,v)};this.$slider.addEventListener("mousedown",r),this.$slider.addEventListener("touchstart",d,{passive:!1}),this.$slider.addEventListener("wheel",b,{passive:!1})}_setDraggingStyle(e,n="horizontal"){this.$slider&&this.$slider.classList.toggle("lil-active",e),document.body.classList.toggle("lil-dragging",e),document.body.classList.toggle(`lil-${n}`,e)}_getImplicitStep(){return this._hasMin&&this._hasMax?(this._max-this._min)/1e3:.1}_onUpdateMinMax(){!this._hasSlider&&this._hasMin&&this._hasMax&&(this._stepExplicit||this.step(this._getImplicitStep(),!1),this._initSlider(),this.updateDisplay())}_normalizeMouseWheel(e){let{deltaX:n,deltaY:r}=e;return Math.floor(e.deltaY)!==e.deltaY&&e.wheelDelta&&(n=0,r=-e.wheelDelta/120,r*=this._stepExplicit?1:10),n+-r}_arrowKeyMultiplier(e){let n=this._stepExplicit?1:10;return e.shiftKey?n*=10:e.altKey&&(n/=10),n}_snap(e){let n=0;return this._hasMin?n=this._min:this._hasMax&&(n=this._max),e-=n,e=Math.round(e/this._step)*this._step,e+=n,e=parseFloat(e.toPrecision(15)),e}_clamp(e){return e<this._min&&(e=this._min),e>this._max&&(e=this._max),e}_snapClampSetValue(e){this.setValue(this._clamp(this._snap(e)))}get _hasScrollBar(){const e=this.parent.root.$children;return e.scrollHeight>e.clientHeight}get _hasMin(){return this._min!==void 0}get _hasMax(){return this._max!==void 0}}class MJ extends ma{constructor(e,n,r,i){super(e,n,r,"lil-option"),this.$select=document.createElement("select"),this.$select.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("lil-display"),this.$select.addEventListener("change",()=>{this.setValue(this._values[this.$select.selectedIndex]),this._callOnFinishChange()}),this.$select.addEventListener("focus",()=>{this.$display.classList.add("lil-focus")}),this.$select.addEventListener("blur",()=>{this.$display.classList.remove("lil-focus")}),this.$widget.appendChild(this.$select),this.$widget.appendChild(this.$display),this.$disable=this.$select,this.options(i)}options(e){return this._values=Array.isArray(e)?e:Object.values(e),this._names=Array.isArray(e)?e:Object.keys(e),this.$select.replaceChildren(),this._names.forEach(n=>{const r=document.createElement("option");r.textContent=n,this.$select.appendChild(r)}),this.updateDisplay(),this}updateDisplay(){const e=this.getValue(),n=this._values.indexOf(e);return this.$select.selectedIndex=n,this.$display.textContent=n===-1?e:this._names[n],this}}class EJ extends ma{constructor(e,n,r){super(e,n,r,"lil-string"),this.$input=document.createElement("input"),this.$input.setAttribute("type","text"),this.$input.setAttribute("spellcheck","false"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$input.addEventListener("input",()=>{this.setValue(this.$input.value)}),this.$input.addEventListener("keydown",i=>{i.code==="Enter"&&this.$input.blur()}),this.$input.addEventListener("blur",()=>{this._callOnFinishChange()}),this.$widget.appendChild(this.$input),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.value=this.getValue(),this}}var NJ=`.lil-gui {
  font-family: var(--font-family);
  font-size: var(--font-size);
  line-height: 1;
  font-weight: normal;
  font-style: normal;
  text-align: left;
  color: var(--text-color);
  user-select: none;
  -webkit-user-select: none;
  touch-action: manipulation;
  --background-color: #1f1f1f;
  --text-color: #ebebeb;
  --title-background-color: #111111;
  --title-text-color: #ebebeb;
  --widget-color: #424242;
  --hover-color: #4f4f4f;
  --focus-color: #595959;
  --number-color: #2cc9ff;
  --string-color: #a2db3c;
  --font-size: 11px;
  --input-font-size: 11px;
  --font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
  --font-family-mono: Menlo, Monaco, Consolas, "Droid Sans Mono", monospace;
  --padding: 4px;
  --spacing: 4px;
  --widget-height: 20px;
  --title-height: calc(var(--widget-height) + var(--spacing) * 1.25);
  --name-width: 45%;
  --slider-knob-width: 2px;
  --slider-input-width: 27%;
  --color-input-width: 27%;
  --slider-input-min-width: 45px;
  --color-input-min-width: 45px;
  --folder-indent: 7px;
  --widget-padding: 0 0 0 3px;
  --widget-border-radius: 2px;
  --checkbox-size: calc(0.75 * var(--widget-height));
  --scrollbar-width: 5px;
}
.lil-gui, .lil-gui * {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}
.lil-gui.lil-root {
  width: var(--width, 245px);
  display: flex;
  flex-direction: column;
  background: var(--background-color);
}
.lil-gui.lil-root > .lil-title {
  background: var(--title-background-color);
  color: var(--title-text-color);
}
.lil-gui.lil-root > .lil-children {
  overflow-x: hidden;
  overflow-y: auto;
}
.lil-gui.lil-root > .lil-children::-webkit-scrollbar {
  width: var(--scrollbar-width);
  height: var(--scrollbar-width);
  background: var(--background-color);
}
.lil-gui.lil-root > .lil-children::-webkit-scrollbar-thumb {
  border-radius: var(--scrollbar-width);
  background: var(--focus-color);
}
@media (pointer: coarse) {
  .lil-gui.lil-allow-touch-styles, .lil-gui.lil-allow-touch-styles .lil-gui {
    --widget-height: 28px;
    --padding: 6px;
    --spacing: 6px;
    --font-size: 13px;
    --input-font-size: 16px;
    --folder-indent: 10px;
    --scrollbar-width: 7px;
    --slider-input-min-width: 50px;
    --color-input-min-width: 65px;
  }
}
.lil-gui.lil-force-touch-styles, .lil-gui.lil-force-touch-styles .lil-gui {
  --widget-height: 28px;
  --padding: 6px;
  --spacing: 6px;
  --font-size: 13px;
  --input-font-size: 16px;
  --folder-indent: 10px;
  --scrollbar-width: 7px;
  --slider-input-min-width: 50px;
  --color-input-min-width: 65px;
}
.lil-gui.lil-auto-place, .lil-gui.autoPlace {
  max-height: 100%;
  position: fixed;
  top: 0;
  right: 15px;
  z-index: 1001;
}

.lil-controller {
  display: flex;
  align-items: center;
  padding: 0 var(--padding);
  margin: var(--spacing) 0;
}
.lil-controller.lil-disabled {
  opacity: 0.5;
}
.lil-controller.lil-disabled, .lil-controller.lil-disabled * {
  pointer-events: none !important;
}
.lil-controller > .lil-name {
  min-width: var(--name-width);
  flex-shrink: 0;
  white-space: pre;
  padding-right: var(--spacing);
  line-height: var(--widget-height);
}
.lil-controller .lil-widget {
  position: relative;
  display: flex;
  align-items: center;
  width: 100%;
  min-height: var(--widget-height);
}
.lil-controller.lil-string input {
  color: var(--string-color);
}
.lil-controller.lil-boolean {
  cursor: pointer;
}
.lil-controller.lil-color .lil-display {
  width: 100%;
  height: var(--widget-height);
  border-radius: var(--widget-border-radius);
  position: relative;
}
@media (hover: hover) {
  .lil-controller.lil-color .lil-display:hover:before {
    content: " ";
    display: block;
    position: absolute;
    border-radius: var(--widget-border-radius);
    border: 1px solid #fff9;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
  }
}
.lil-controller.lil-color input[type=color] {
  opacity: 0;
  width: 100%;
  height: 100%;
  cursor: pointer;
}
.lil-controller.lil-color input[type=text] {
  margin-left: var(--spacing);
  font-family: var(--font-family-mono);
  min-width: var(--color-input-min-width);
  width: var(--color-input-width);
  flex-shrink: 0;
}
.lil-controller.lil-option select {
  opacity: 0;
  position: absolute;
  width: 100%;
  max-width: 100%;
}
.lil-controller.lil-option .lil-display {
  position: relative;
  pointer-events: none;
  border-radius: var(--widget-border-radius);
  height: var(--widget-height);
  line-height: var(--widget-height);
  max-width: 100%;
  overflow: hidden;
  word-break: break-all;
  padding-left: 0.55em;
  padding-right: 1.75em;
  background: var(--widget-color);
}
@media (hover: hover) {
  .lil-controller.lil-option .lil-display.lil-focus {
    background: var(--focus-color);
  }
}
.lil-controller.lil-option .lil-display.lil-active {
  background: var(--focus-color);
}
.lil-controller.lil-option .lil-display:after {
  font-family: "lil-gui";
  content: "";
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  padding-right: 0.375em;
}
.lil-controller.lil-option .lil-widget,
.lil-controller.lil-option select {
  cursor: pointer;
}
@media (hover: hover) {
  .lil-controller.lil-option .lil-widget:hover .lil-display {
    background: var(--hover-color);
  }
}
.lil-controller.lil-number input {
  color: var(--number-color);
}
.lil-controller.lil-number.lil-has-slider input {
  margin-left: var(--spacing);
  width: var(--slider-input-width);
  min-width: var(--slider-input-min-width);
  flex-shrink: 0;
}
.lil-controller.lil-number .lil-slider {
  width: 100%;
  height: var(--widget-height);
  background: var(--widget-color);
  border-radius: var(--widget-border-radius);
  padding-right: var(--slider-knob-width);
  overflow: hidden;
  cursor: ew-resize;
  touch-action: pan-y;
}
@media (hover: hover) {
  .lil-controller.lil-number .lil-slider:hover {
    background: var(--hover-color);
  }
}
.lil-controller.lil-number .lil-slider.lil-active {
  background: var(--focus-color);
}
.lil-controller.lil-number .lil-slider.lil-active .lil-fill {
  opacity: 0.95;
}
.lil-controller.lil-number .lil-fill {
  height: 100%;
  border-right: var(--slider-knob-width) solid var(--number-color);
  box-sizing: content-box;
}

.lil-dragging .lil-gui {
  --hover-color: var(--widget-color);
}
.lil-dragging * {
  cursor: ew-resize !important;
}
.lil-dragging.lil-vertical * {
  cursor: ns-resize !important;
}

.lil-gui .lil-title {
  height: var(--title-height);
  font-weight: 600;
  padding: 0 var(--padding);
  width: 100%;
  text-align: left;
  background: none;
  text-decoration-skip: objects;
}
.lil-gui .lil-title:before {
  font-family: "lil-gui";
  content: "";
  padding-right: 2px;
  display: inline-block;
}
.lil-gui .lil-title:active {
  background: var(--title-background-color);
  opacity: 0.75;
}
@media (hover: hover) {
  body:not(.lil-dragging) .lil-gui .lil-title:hover {
    background: var(--title-background-color);
    opacity: 0.85;
  }
  .lil-gui .lil-title:focus {
    text-decoration: underline var(--focus-color);
  }
}
.lil-gui.lil-root > .lil-title:focus {
  text-decoration: none !important;
}
.lil-gui.lil-closed > .lil-title:before {
  content: "";
}
.lil-gui.lil-closed > .lil-children {
  transform: translateY(-7px);
  opacity: 0;
}
.lil-gui.lil-closed:not(.lil-transition) > .lil-children {
  display: none;
}
.lil-gui.lil-transition > .lil-children {
  transition-duration: 300ms;
  transition-property: height, opacity, transform;
  transition-timing-function: cubic-bezier(0.2, 0.6, 0.35, 1);
  overflow: hidden;
  pointer-events: none;
}
.lil-gui .lil-children:empty:before {
  content: "Empty";
  padding: 0 var(--padding);
  margin: var(--spacing) 0;
  display: block;
  height: var(--widget-height);
  font-style: italic;
  line-height: var(--widget-height);
  opacity: 0.5;
}
.lil-gui.lil-root > .lil-children > .lil-gui > .lil-title {
  border: 0 solid var(--widget-color);
  border-width: 1px 0;
  transition: border-color 300ms;
}
.lil-gui.lil-root > .lil-children > .lil-gui.lil-closed > .lil-title {
  border-bottom-color: transparent;
}
.lil-gui + .lil-controller {
  border-top: 1px solid var(--widget-color);
  margin-top: 0;
  padding-top: var(--spacing);
}
.lil-gui .lil-gui .lil-gui > .lil-title {
  border: none;
}
.lil-gui .lil-gui .lil-gui > .lil-children {
  border: none;
  margin-left: var(--folder-indent);
  border-left: 2px solid var(--widget-color);
}
.lil-gui .lil-gui .lil-controller {
  border: none;
}

.lil-gui label, .lil-gui input, .lil-gui button {
  -webkit-tap-highlight-color: transparent;
}
.lil-gui input {
  border: 0;
  outline: none;
  font-family: var(--font-family);
  font-size: var(--input-font-size);
  border-radius: var(--widget-border-radius);
  height: var(--widget-height);
  background: var(--widget-color);
  color: var(--text-color);
  width: 100%;
}
@media (hover: hover) {
  .lil-gui input:hover {
    background: var(--hover-color);
  }
  .lil-gui input:active {
    background: var(--focus-color);
  }
}
.lil-gui input:disabled {
  opacity: 1;
}
.lil-gui input[type=text],
.lil-gui input[type=number] {
  padding: var(--widget-padding);
  -moz-appearance: textfield;
}
.lil-gui input[type=text]:focus,
.lil-gui input[type=number]:focus {
  background: var(--focus-color);
}
.lil-gui input[type=checkbox] {
  appearance: none;
  width: var(--checkbox-size);
  height: var(--checkbox-size);
  border-radius: var(--widget-border-radius);
  text-align: center;
  cursor: pointer;
}
.lil-gui input[type=checkbox]:checked:before {
  font-family: "lil-gui";
  content: "";
  font-size: var(--checkbox-size);
  line-height: var(--checkbox-size);
}
@media (hover: hover) {
  .lil-gui input[type=checkbox]:focus {
    box-shadow: inset 0 0 0 1px var(--focus-color);
  }
}
.lil-gui button {
  outline: none;
  cursor: pointer;
  font-family: var(--font-family);
  font-size: var(--font-size);
  color: var(--text-color);
  width: 100%;
  border: none;
}
.lil-gui .lil-controller button {
  height: var(--widget-height);
  text-transform: none;
  background: var(--widget-color);
  border-radius: var(--widget-border-radius);
}
@media (hover: hover) {
  .lil-gui .lil-controller button:hover {
    background: var(--hover-color);
  }
  .lil-gui .lil-controller button:focus {
    box-shadow: inset 0 0 0 1px var(--focus-color);
  }
}
.lil-gui .lil-controller button:active {
  background: var(--focus-color);
}

@font-face {
  font-family: "lil-gui";
  src: url("data:application/font-woff2;charset=utf-8;base64,d09GMgABAAAAAALkAAsAAAAABtQAAAKVAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHFQGYACDMgqBBIEbATYCJAMUCwwABCAFhAoHgQQbHAbIDiUFEYVARAAAYQTVWNmz9MxhEgodq49wYRUFKE8GWNiUBxI2LBRaVnc51U83Gmhs0Q7JXWMiz5eteLwrKwuxHO8VFxUX9UpZBs6pa5ABRwHA+t3UxUnH20EvVknRerzQgX6xC/GH6ZUvTcAjAv122dF28OTqCXrPuyaDER30YBA1xnkVutDDo4oCi71Ca7rrV9xS8dZHbPHefsuwIyCpmT7j+MnjAH5X3984UZoFFuJ0yiZ4XEJFxjagEBeqs+e1iyK8Xf/nOuwF+vVK0ur765+vf7txotUi0m3N0m/84RGSrBCNrh8Ee5GjODjF4gnWP+dJrH/Lk9k4oT6d+gr6g/wssA2j64JJGP6cmx554vUZnpZfn6ZfX2bMwPPrlANsB86/DiHjhl0OP+c87+gaJo/gY084s3HoYL/ZkWHTRfBXvvoHnnkHvngKun4KBE/ede7tvq3/vQOxDXB1/fdNz6XbPdcr0Vhpojj9dG+owuSKFsslCi1tgEjirjXdwMiov2EioadxmqTHUCIwo8NgQaeIasAi0fTYSPTbSmwbMOFduyh9wvBrESGY0MtgRjtgQR8Q1bRPohn2UoCRZf9wyYANMXFeJTysqAe0I4mrherOekFdKMrYvJjLvOIUM9SuwYB5DVZUwwVjJJOaUnZCmcEkIZZrKqNvRGRMvmFZsmhP4VMKCSXBhSqUBxgMS7h0cZvEd71AWkEhGWaeMFcNnpqyJkyXgYL7PQ1MoSq0wDAkRtJIijkZSmqYTiSImfLiSWXIZwhRh3Rug2X0kk1Dgj+Iu43u5p98ghopcpSo0Uyc8SnjlYX59WUeaMoDqmVD2TOWD9a4pCRAzf2ECgwGcrHjPOWY9bNxq/OL3I/QjwEAAAA=") format("woff2");
}`;function TJ(t){const e=document.createElement("style");e.innerHTML=t;const n=document.querySelector("head link[rel=stylesheet], head style");n?document.head.insertBefore(e,n):document.head.appendChild(e)}let W3=!1;class NM{constructor({parent:e,autoPlace:n=e===void 0,container:r,width:i,title:s="Controls",closeFolders:a=!1,injectStyles:l=!0,touchStyles:c=!0}={}){if(this.parent=e,this.root=e?e.root:this,this.children=[],this.controllers=[],this.folders=[],this._closed=!1,this._hidden=!1,this.domElement=document.createElement("div"),this.domElement.classList.add("lil-gui"),this.$title=document.createElement("button"),this.$title.classList.add("lil-title"),this.$title.setAttribute("aria-expanded",!0),this.$title.addEventListener("click",()=>this.openAnimated(this._closed)),this.$title.addEventListener("touchstart",()=>{},{passive:!0}),this.$children=document.createElement("div"),this.$children.classList.add("lil-children"),this.domElement.appendChild(this.$title),this.domElement.appendChild(this.$children),this.title(s),this.parent){this.parent.children.push(this),this.parent.folders.push(this),this.parent.$children.appendChild(this.domElement);return}this.domElement.classList.add("lil-root"),c&&this.domElement.classList.add("lil-allow-touch-styles"),!W3&&l&&(TJ(NJ),W3=!0),r?r.appendChild(this.domElement):n&&(this.domElement.classList.add("lil-auto-place","autoPlace"),document.body.appendChild(this.domElement)),i&&this.domElement.style.setProperty("--width",i+"px"),this._closeFolders=a}add(e,n,r,i,s){if(Object(r)===r)return new MJ(this,e,n,r);const a=e[n];switch(typeof a){case"number":return new SJ(this,e,n,r,i,s);case"boolean":return new gJ(this,e,n);case"string":return new EJ(this,e,n);case"function":return new mb(this,e,n)}console.error(`gui.add failed
	property:`,n,`
	object:`,e,`
	value:`,a)}addColor(e,n,r=1){return new wJ(this,e,n,r)}addFolder(e){const n=new NM({parent:this,title:e});return this.root._closeFolders&&n.close(),n}load(e,n=!0){return e.controllers&&this.controllers.forEach(r=>{r instanceof mb||r._name in e.controllers&&r.load(e.controllers[r._name])}),n&&e.folders&&this.folders.forEach(r=>{r._title in e.folders&&r.load(e.folders[r._title])}),this}save(e=!0){const n={controllers:{},folders:{}};return this.controllers.forEach(r=>{if(!(r instanceof mb)){if(r._name in n.controllers)throw new Error(`Cannot save GUI with duplicate property "${r._name}"`);n.controllers[r._name]=r.save()}}),e&&this.folders.forEach(r=>{if(r._title in n.folders)throw new Error(`Cannot save GUI with duplicate folder "${r._title}"`);n.folders[r._title]=r.save()}),n}open(e=!0){return this._setClosed(!e),this.$title.setAttribute("aria-expanded",!this._closed),this.domElement.classList.toggle("lil-closed",this._closed),this}close(){return this.open(!1)}_setClosed(e){this._closed!==e&&(this._closed=e,this._callOnOpenClose(this))}show(e=!0){return this._hidden=!e,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}openAnimated(e=!0){return this._setClosed(!e),this.$title.setAttribute("aria-expanded",!this._closed),requestAnimationFrame(()=>{const n=this.$children.clientHeight;this.$children.style.height=n+"px",this.domElement.classList.add("lil-transition");const r=s=>{s.target===this.$children&&(this.$children.style.height="",this.domElement.classList.remove("lil-transition"),this.$children.removeEventListener("transitionend",r))};this.$children.addEventListener("transitionend",r);const i=e?this.$children.scrollHeight:0;this.domElement.classList.toggle("lil-closed",!e),requestAnimationFrame(()=>{this.$children.style.height=i+"px"})}),this}title(e){return this._title=e,this.$title.textContent=e,this}reset(e=!0){return(e?this.controllersRecursive():this.controllers).forEach(r=>r.reset()),this}onChange(e){return this._onChange=e,this}_callOnChange(e){this.parent&&this.parent._callOnChange(e),this._onChange!==void 0&&this._onChange.call(this,{object:e.object,property:e.property,value:e.getValue(),controller:e})}onFinishChange(e){return this._onFinishChange=e,this}_callOnFinishChange(e){this.parent&&this.parent._callOnFinishChange(e),this._onFinishChange!==void 0&&this._onFinishChange.call(this,{object:e.object,property:e.property,value:e.getValue(),controller:e})}onOpenClose(e){return this._onOpenClose=e,this}_callOnOpenClose(e){this.parent&&this.parent._callOnOpenClose(e),this._onOpenClose!==void 0&&this._onOpenClose.call(this,e)}destroy(){this.parent&&(this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.folders.splice(this.parent.folders.indexOf(this),1)),this.domElement.parentElement&&this.domElement.parentElement.removeChild(this.domElement),Array.from(this.children).forEach(e=>e.destroy())}controllersRecursive(){let e=Array.from(this.controllers);return this.folders.forEach(n=>{e=e.concat(n.controllersRecursive())}),e}foldersRecursive(){let e=Array.from(this.folders);return this.folders.forEach(n=>{e=e.concat(n.foldersRecursive())}),e}}const ic=[{month:"2025-01",collected:38420,pending:3150,overdue:2980,vacancy:5600,maintenance:2100},{month:"2025-02",collected:39100,pending:2880,overdue:2450,vacancy:5600,maintenance:1800},{month:"2025-03",collected:40250,pending:2400,overdue:1920,vacancy:4200,maintenance:2400},{month:"2025-04",collected:41800,pending:2050,overdue:1400,vacancy:3500,maintenance:3100},{month:"2025-05",collected:42600,pending:1900,overdue:1100,vacancy:2800,maintenance:1500},{month:"2025-06",collected:43200,pending:1750,overdue:980,vacancy:2800,maintenance:2200},{month:"2025-07",collected:44100,pending:1620,overdue:860,vacancy:2100,maintenance:1900},{month:"2025-08",collected:44650,pending:1580,overdue:820,vacancy:2100,maintenance:2800},{month:"2025-09",collected:43900,pending:1900,overdue:1200,vacancy:2800,maintenance:3500},{month:"2025-10",collected:43200,pending:2150,overdue:1550,vacancy:3500,maintenance:2900},{month:"2025-11",collected:42100,pending:2400,overdue:1980,vacancy:4200,maintenance:4100},{month:"2025-12",collected:41300,pending:2700,overdue:2450,vacancy:4900,maintenance:3800},{month:"2026-01",collected:42750,pending:2250,overdue:1850,vacancy:3500,maintenance:2600}],AJ=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],X3={months:ic.map(t=>{const[e,n]=t.month.split("-"),r=parseInt(n,10)-1;return r===0?`Jan '${e.slice(2)}`:AJ[r]}),collected:ic.map(t=>t.collected),pending:ic.map(t=>t.pending),overdue:ic.map(t=>t.overdue),vacancy:ic.map(t=>t.vacancy),maintenance:ic.map(t=>t.maintenance)},sc=[{key:"collected",color:"#16a34a",glowColor:"#22c55e",label:"Collected",opacity:.85},{key:"pending",color:"#2563eb",glowColor:"#3b82f6",label:"Pending",opacity:.9},{key:"maintenance",color:"#eab308",glowColor:"#facc15",label:"Maintenance",opacity:.9},{key:"overdue",color:"#dc2626",glowColor:"#ef4444",label:"Overdue",opacity:.92},{key:"vacancy",color:"#9333ea",glowColor:"#a855f7",label:"Vacancy",opacity:.95}],Y3={cameraX:0,cameraY:.9,cameraZ:7.5,cameraZoom:1,autoRotate:!1,autoRotateSpeed:.5,bgColor:"#f6f9fc",bgOpacity:1,ambientIntensity:.5,directionalIntensity:1.2,directionalX:2,directionalY:4,directionalZ:5,pointLight1Color:"#3b82f6",pointLight1Intensity:0,pointLight2Color:"#22c55e",pointLight2Intensity:0,backlightIntensity:1,chartY:-1,chartZ:0,layerOpacity:.35,layerDepth:.05,emissiveIntensity:.5,glowIntensity:.2,pulseSpeed:.8,chartLayersZ:.3,riskLineZ:.6,gridlinesZ:-.6,riskLineThickness:.02,riskLineEmissive:1,showRiskLine:!1};function CJ({points:t,basePoints:e,color:n,glowColor:r,index:i,params:s,layerOpacity:a,zPosition:l,renderOrder:c,dimmed:u,isHovered:d}){D.useRef(null);const f=D.useRef(null),m=D.useMemo(()=>x=>{x.uniforms.uMinOpacity={value:.6},x.vertexShader=`
            varying float vLocalAlpha;
            ${x.vertexShader}
        `.replace("#include <uv_vertex>",`
            #include <uv_vertex>
            vLocalAlpha = uv.y;
            `),x.fragmentShader=`
            uniform float uMinOpacity;
            varying float vLocalAlpha;
            ${x.fragmentShader}
        `.replace("#include <color_fragment>",`
            #include <color_fragment>
            // Gradient: uMinOpacity at bottom, 1.0 opaque at top
            // Using local UV.y ensures every layer gets the full gradient
            float gradient = mix(uMinOpacity, 1.0, vLocalAlpha); 
            diffuseColor.a *= gradient;
            `),f.current=x},[]);Pv(()=>{if(f.current){const x=d?.33:.6;f.current.uniforms.uMinOpacity.value=x}});const g=u?.1:a,v=D.useMemo(()=>{const x=new At,y=t.length-1,S=y*4*3,E=y*4*2,A=new Float32Array(S),T=new Float32Array(E),C=[];let j=0,k=0,P=0;for(let H=0;H<y;H++){const B=t[H],Y=e[H],V=t[H+1],Q=e[H+1];A[j++]=Y.x,A[j++]=Y.y,A[j++]=0,T[k++]=0,T[k++]=0,A[j++]=Q.x,A[j++]=Q.y,A[j++]=0,T[k++]=1,T[k++]=0,A[j++]=B.x,A[j++]=B.y,A[j++]=0,T[k++]=0,T[k++]=1,A[j++]=V.x,A[j++]=V.y,A[j++]=0,T[k++]=1,T[k++]=1,C.push(P,P+1,P+2),C.push(P+1,P+3,P+2),P+=4}return x.setAttribute("position",new qt(A,3)),x.setAttribute("uv",new qt(T,2)),x.setIndex(C),x.computeVertexNormals(),x},[t,e]),_=D.useMemo(()=>{const x=t.map(y=>new X(y.x,y.y,0));return new xv(x,!1,"catmullrom",.5)},[t]),b=D.useMemo(()=>new Xd(_,64,.015,8,!1),[_]);return o.jsxs("group",{position:[0,0,l],children:[o.jsx("mesh",{geometry:v,renderOrder:c,children:o.jsx("meshBasicMaterial",{color:n,transparent:!0,opacity:g,side:Gi,depthWrite:!1,onBeforeCompile:m})}),o.jsx("mesh",{geometry:b,position:[0,0,0],renderOrder:c+10,children:o.jsx("meshBasicMaterial",{color:r,transparent:!0,opacity:u?.1:1})})]})}function kJ({data:t,params:e,hoveredLayer:n}){const{maxDataValue:r,yAxisMax:i,yScale:s,ticks:a}=D.useMemo(()=>{const d=Math.max(...t.months.map((v,_)=>t.collected[_]+t.pending[_]+t.maintenance[_]+t.overdue[_]+t.vacancy[_])),f=Math.ceil(d/1e4)*1e4,m=3.5/f,g=[];for(let v=1e4;v<=f;v+=1e4)g.push(v);return{maxDataValue:d,yAxisMax:f,yScale:m,ticks:g}},[t]),l=8,c=D.useMemo(()=>{const d=[],f=t.months.length,m=[];for(let b=0;b<f;b++)m.push([0,t.collected[b],t.collected[b]+t.pending[b],t.collected[b]+t.pending[b]+t.maintenance[b],t.collected[b]+t.pending[b]+t.maintenance[b]+t.overdue[b],t.collected[b]+t.pending[b]+t.maintenance[b]+t.overdue[b]+t.vacancy[b]]);const g=(b,x,y)=>{const S=[];for(let E=0;E<b.length-1;E++)for(let A=0;A<y;A++){const T=A/y,C=(1-Math.cos(T*Math.PI))/2,j=x[E]+(x[E+1]-x[E])*T,k=b[E]+(b[E+1]-b[E])*C;S.push(new X(j,k*s,0))}return S.push(new X(x[x.length-1],b[b.length-1]*s,0)),S},v=t.months.map((b,x)=>x/(f-1)*l-l/2),_=6;for(let b=0;b<5;b++){const x=m.map(S=>S[b+1]),y=m.map(S=>S[b]);d.push({points:g(x,v,_),basePoints:g(y,v,_)})}return d},[t,s,l]),u=[e.chartLayersZ,e.chartLayersZ,e.chartLayersZ,e.chartLayersZ,e.chartLayersZ];return o.jsxs("group",{position:[0,e.chartY,e.chartZ],children:[c.map((d,f)=>o.jsx(CJ,{points:d.points,basePoints:d.basePoints,color:sc[f].color,glowColor:sc[f].glowColor,index:4-f,params:e,layerOpacity:sc[f].opacity,zPosition:u[f],renderOrder:f,dimmed:n!==null&&n!==sc[f].key,isHovered:n===sc[f].key},sc[f].key)),a.map(d=>{const f=d*s;return o.jsxs("line",{children:[o.jsx("bufferGeometry",{children:o.jsx("bufferAttribute",{attach:"attributes-position",count:2,array:new Float32Array([-l/2,f,e.gridlinesZ,l/2,f,e.gridlinesZ]),itemSize:3})}),o.jsx("lineBasicMaterial",{color:"#475569",transparent:!0,opacity:.08})]},`grid-${d}`)}),t.months.map((d,f)=>{const m=f/(t.months.length-1)*l-l/2;return o.jsx(G3,{position:[m,-.3,.5],fontSize:.14,color:"#475569",anchorX:"center",anchorY:"top",children:d},`${d}-${f}`)}),a.map(d=>{const f=d*s;return o.jsx(G3,{position:[-l/2-.5,f,.5],fontSize:.12,color:"#475569",anchorX:"right",anchorY:"middle",children:`$${d/1e3}K`},`label-${d}`)})]})}function PJ({data:t,params:e}){const n=D.useMemo(()=>{const a=[],c=Math.max(...t.months.map((f,m)=>t.collected[m]+t.pending[m]+t.maintenance[m]+t.overdue[m]+t.vacancy[m])),d=3.5/(Math.ceil(c/1e4)*1e4);return t.months.forEach((f,m)=>{const g=m/(t.months.length-1)*8-4,_=(t.collected[m]+t.pending[m]+t.maintenance[m]+t.overdue[m]+t.vacancy[m])*d+.3;a.push(new X(g,_,e.riskLineZ))}),a},[t,e.riskLineZ]),r=D.useMemo(()=>new xv(n,!1,"catmullrom",.5),[n]),i=D.useMemo(()=>new Xd(r,128,e.riskLineThickness,8,!1),[r,e.riskLineThickness]),s="#f59e0b";return e.showRiskLine?o.jsxs(mJ,{speed:1.5,rotationIntensity:0,floatIntensity:.1,children:[o.jsx("mesh",{geometry:i,renderOrder:100,children:o.jsx("meshBasicMaterial",{color:s})}),o.jsx("mesh",{geometry:i,scale:[1.3,1.3,1.3],renderOrder:99,children:o.jsx("meshBasicMaterial",{color:s,transparent:!0,opacity:.15,depthWrite:!1})}),n.map((a,l)=>o.jsxs("group",{position:a,children:[o.jsxs("mesh",{renderOrder:101,children:[o.jsx("sphereGeometry",{args:[.045,16,16]}),o.jsx("meshBasicMaterial",{color:s})]}),o.jsxs("mesh",{renderOrder:101,children:[o.jsx("sphereGeometry",{args:[.08,16,16]}),o.jsx("meshBasicMaterial",{color:s,transparent:!0,opacity:.2,depthWrite:!1})]})]},l))]}):null}function RJ({params:t}){return o.jsxs(o.Fragment,{children:[o.jsx("ambientLight",{intensity:1.5})," "]})}function jJ({params:t,controlsRef:e}){const{camera:n}=ia(),r=D.useRef({x:t.cameraX,y:t.cameraY,z:t.cameraZ,zoom:t.cameraZoom});return Pv(()=>{(r.current.x!==t.cameraX||r.current.y!==t.cameraY||r.current.z!==t.cameraZ)&&(n.position.set(t.cameraX,t.cameraY,t.cameraZ),e.current&&e.current.update(),r.current={x:t.cameraX,y:t.cameraY,z:t.cameraZ,zoom:t.cameraZoom}),r.current.zoom!==t.cameraZoom&&(n.zoom=t.cameraZoom,n.updateProjectionMatrix(),r.current.zoom=t.cameraZoom)}),null}function LJ({params:t,controlsRef:e,hoveredLayer:n}){return o.jsxs(o.Fragment,{children:[o.jsx(jJ,{params:t,controlsRef:e}),o.jsx(RJ,{params:t}),o.jsx(kJ,{data:X3,params:t,hoveredLayer:n}),o.jsx(PJ,{data:X3,params:t})]})}function DJ(){const[t,e]=D.useState({...Y3}),n=D.useRef(null),r=D.useRef(null),i=D.useRef(null),s=D.useRef({...Y3}),[a,l]=D.useState(null);D.useEffect(()=>{if(n.current)return;const u=s.current,d=new NM({title:" Chart Controls",width:300});n.current=d;const f=d.addFolder(" Camera");f.add(u,"cameraX",-10,10,.1).name("Position X").onChange(x=>{e(y=>({...y,cameraX:x}))}),f.add(u,"cameraY",-5,10,.1).name("Position Y").onChange(x=>{e(y=>({...y,cameraY:x}))}),f.add(u,"cameraZ",0,15,.1).name("Position Z").onChange(x=>{e(y=>({...y,cameraZ:x}))}),f.add(u,"autoRotate").name("Auto Rotate").onChange(x=>{e(y=>({...y,autoRotate:x}))}),f.add(u,"autoRotateSpeed",.1,5,.1).name("Rotate Speed").onChange(x=>{e(y=>({...y,autoRotateSpeed:x}))}),f.add(u,"cameraZoom",.5,3,.1).name("Zoom").onChange(x=>{e(y=>({...y,cameraZoom:x}))});const m=d.addFolder(" Background");m.addColor(u,"bgColor").name("Color").onChange(x=>{e(y=>({...y,bgColor:x}))}),m.add(u,"bgOpacity",0,1,.05).name("Opacity").onChange(x=>{e(y=>({...y,bgOpacity:x}))});const g=d.addFolder(" Lighting");g.add(u,"ambientIntensity",0,2,.05).name("Ambient").onChange(x=>{e(y=>({...y,ambientIntensity:x}))}),g.add(u,"directionalIntensity",0,3,.1).name("Directional").onChange(x=>{e(y=>({...y,directionalIntensity:x}))}),g.add(u,"directionalX",-10,10,.5).name("Dir Light X").onChange(x=>{e(y=>({...y,directionalX:x}))}),g.add(u,"directionalY",-10,15,.5).name("Dir Light Y").onChange(x=>{e(y=>({...y,directionalY:x}))}),g.add(u,"directionalZ",-10,10,.5).name("Dir Light Z").onChange(x=>{e(y=>({...y,directionalZ:x}))}),g.addColor(u,"pointLight1Color").name("Accent 1 Color").onChange(x=>{e(y=>({...y,pointLight1Color:x}))}),g.add(u,"pointLight1Intensity",0,12,.1).name("Accent 1 Int").onChange(x=>{e(y=>({...y,pointLight1Intensity:x}))}),g.addColor(u,"pointLight2Color").name("Accent 2 Color").onChange(x=>{e(y=>({...y,pointLight2Color:x}))}),g.add(u,"pointLight2Intensity",0,12,.1).name("Accent 2 Int").onChange(x=>{e(y=>({...y,pointLight2Intensity:x}))}),g.add(u,"backlightIntensity",0,2,.1).name("Backlight").onChange(x=>{e(y=>({...y,backlightIntensity:x}))});const v=d.addFolder(" Chart");v.add(u,"chartY",-3,3,.1).name("Chart Y").onChange(x=>{e(y=>({...y,chartY:x}))}),v.add(u,"chartZ",-3,3,.1).name("Chart Z").onChange(x=>{e(y=>({...y,chartZ:x}))}),v.add(u,"layerOpacity",.1,1,.05).name("Layer Opacity").onChange(x=>{e(y=>({...y,layerOpacity:x}))}),v.add(u,"layerDepth",.05,.5,.01).name("Layer Depth").onChange(x=>{e(y=>({...y,layerDepth:x}))}),v.add(u,"emissiveIntensity",0,1,.05).name("Emissive").onChange(x=>{e(y=>({...y,emissiveIntensity:x}))}),v.add(u,"glowIntensity",0,.5,.01).name("Glow").onChange(x=>{e(y=>({...y,glowIntensity:x}))}),v.add(u,"pulseSpeed",0,5,.1).name("Pulse Speed").onChange(x=>{e(y=>({...y,pulseSpeed:x}))});const _=d.addFolder(" Risk Line");_.add(u,"showRiskLine").name("Show").onChange(x=>{e(y=>({...y,showRiskLine:x}))}),_.add(u,"riskLineThickness",.01,.1,.005).name("Thickness").onChange(x=>{e(y=>({...y,riskLineThickness:x}))}),_.add(u,"riskLineEmissive",0,2,.1).name("Glow").onChange(x=>{e(y=>({...y,riskLineEmissive:x}))});const b=d.addFolder(" Layer Z Positions");return b.add(u,"chartLayersZ",-3,3,.05).name("Layers Z").onChange(x=>{e(y=>({...y,chartLayersZ:x}))}),b.add(u,"riskLineZ",-3,3,.05).name("Risk Line Z").onChange(x=>{e(y=>({...y,riskLineZ:x}))}),b.add(u,"gridlinesZ",-3,3,.05).name("Gridlines Z").onChange(x=>{e(y=>({...y,gridlinesZ:x}))}),f.open(),m.open(),b.open(),()=>{d.destroy(),n.current=null}},[]);const c=D.useMemo(()=>({backgroundColor:t.bgColor,opacity:t.bgOpacity}),[t.bgColor,t.bgOpacity]);return o.jsxs("div",{ref:r,className:"relative w-full h-full min-h-[400px] rounded-xl overflow-hidden border border-slate-200",style:c,children:[o.jsxs(dK,{camera:{position:[t.cameraX,t.cameraY,t.cameraZ],fov:50,zoom:t.cameraZoom},dpr:[1,2],gl:{antialias:!0,alpha:!0},children:[o.jsx(pJ,{ref:i,enablePan:!0,enableZoom:!0,enableRotate:!0,autoRotate:t.autoRotate,autoRotateSpeed:t.autoRotateSpeed,target:[0,.8,0],minDistance:2,maxDistance:15}),o.jsx(LJ,{params:t,controlsRef:i,hoveredLayer:a})]}),o.jsx("div",{className:"absolute bottom-3 left-3 flex flex-wrap gap-3 text-[10px]",children:sc.map(u=>o.jsxs("div",{className:`flex items-center gap-1.5 transition-colors cursor-pointer ${a&&a!==u.key?"text-slate-400 opacity-50":"text-slate-600"}`,onMouseEnter:()=>l(u.key),onMouseLeave:()=>l(null),children:[o.jsx("div",{className:"w-2 h-2 rounded-sm",style:{backgroundColor:u.color,boxShadow:`0 0 3px ${u.glowColor}`,border:`1px solid ${u.glowColor}40`}}),u.label]},u.key))}),t.showRiskLine&&o.jsxs("div",{className:"absolute top-3 left-3 bg-slate-900/80 backdrop-blur-sm border border-white/10 rounded-lg px-3 py-2 flex items-center gap-2",children:[o.jsx("div",{className:"w-2 h-2 rounded-full bg-amber-500 animate-pulse",style:{boxShadow:"0 0 8px #f59e0b"}}),o.jsx("span",{className:"text-[10px] font-medium text-slate-300",children:"Risk Pressure Line"})]})]})}const Kg=t=>{const e=t.length;if(e===0)return{mean:0,stdDev:0};const n=t.reduce((i,s)=>i+s,0)/e,r=t.reduce((i,s)=>i+Math.pow(s-n,2),0)/e;return{mean:n,stdDev:Math.sqrt(r)}},IJ=t=>{const e=t.length;if(e<2)return 0;const n=Array.from({length:e},(u,d)=>d),r=t,i=n.reduce((u,d)=>u+d,0),s=r.reduce((u,d)=>u+d,0),a=n.reduce((u,d)=>u+d*r[d],0),l=n.reduce((u,d)=>u+d*d,0);return(e*a-i*s)/(e*l-i*i)};function UJ(t=ic){const e=t.map(S=>S.collected-S.maintenance),{mean:n,stdDev:r}=Kg(e),i=n?r/n:0,s=Math.max(0,Math.min(100,100*(1-i/.3))),a=t.map(S=>{const E=S.collected+S.pending+S.overdue;return E>0?S.collected/E:1}),{mean:l}=Kg(a),c=l*100,u=t.map(S=>S.collected>0?S.maintenance/S.collected:0),{stdDev:d}=Kg(u),f=Math.max(0,Math.min(100,100*(1-d/.15))),m=t.map(S=>{const E=S.collected+S.pending+S.overdue+S.vacancy;return E>0?S.vacancy/E:0}),{mean:g}=Kg(m),v=(1-g)*100,_=t.map(S=>{const E=S.collected+S.pending+S.overdue+S.vacancy;if(E===0)return 0;const A=S.overdue/S.collected,T=S.vacancy/E,C=S.collected>0?A:1;return Math.min(1,(C*.6+T*.4)*3)}),b=IJ(_),x=Math.max(0,Math.min(100,50-b*500+30)),y=s*.3+c*.25+f*.2+v*.15+x*.1;return{score:Math.round(y),details:{volatility:Math.round(s),collection:Math.round(c),expense:Math.round(f),vacancy:Math.round(v),trend:Math.round(x),netCashFlow:e[e.length-1],expenseBurn:u[u.length-1]*100,avgRent:Math.round(t[t.length-1].collected/21)}}}function OJ(){const t=D.useMemo(()=>UJ(),[]),{score:e,details:n}=t;return o.jsxs("section",{className:"bg-card rounded-xl border border-border p-6 shadow-sm h-full flex flex-col",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("h3",{className:"font-semibold text-lg flex items-center gap-2",children:[o.jsx("div",{className:"p-1.5 bg-green-100 text-green-600 rounded-md",children:o.jsx(vr,{className:"w-4 h-4"})}),"Cashflow Health Spectrum"]}),o.jsx(UL,{})]}),o.jsxs("div",{className:"flex-1 flex flex-col gap-6",children:[o.jsx(DJ,{}),o.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[o.jsxs("div",{className:"p-3 bg-muted/20 rounded-lg",children:[o.jsx("div",{className:"text-[10px] text-muted-foreground font-medium uppercase tracking-wider",children:"Net Cash Flow"}),o.jsxs("div",{className:"text-lg font-bold flex items-center gap-1.5 mt-1",children:[n.netCashFlow>0?"+":"","$",n.netCashFlow.toLocaleString(),o.jsx(xH,{className:"w-3.5 h-3.5 text-green-500"})]})]}),o.jsxs("div",{className:"p-3 bg-muted/20 rounded-lg",children:[o.jsx("div",{className:"text-[10px] text-muted-foreground font-medium uppercase tracking-wider",children:"Avg Rent"}),o.jsxs("div",{className:"text-lg font-bold mt-1",children:["$",n.avgRent.toLocaleString()]})]}),o.jsxs("div",{className:"p-3 bg-muted/20 rounded-lg",children:[o.jsx("div",{className:"text-[10px] text-muted-foreground font-medium uppercase tracking-wider",children:"Expense Burn"}),o.jsxs("div",{className:"text-lg font-bold flex items-center gap-1.5 mt-1",children:[n.expenseBurn.toFixed(1),"%",o.jsx(gH,{className:"w-3.5 h-3.5 text-amber-500"})]})]}),o.jsxs("div",{className:"p-3 bg-muted/20 rounded-lg relative group",children:[o.jsxs("div",{className:"flex items-center gap-1.5 mb-1",children:[o.jsx("div",{className:"text-[10px] text-muted-foreground font-medium uppercase tracking-wider",children:"Stability"}),o.jsx("span",{className:"px-1.5 py-0.5 bg-blue-100 text-blue-600 text-[9px] font-bold rounded-sm border border-blue-200",children:"BETA"}),o.jsxs("div",{className:"relative group/tooltip",children:[o.jsx(AS,{className:"w-3 h-3 text-muted-foreground cursor-help"}),o.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 w-48 p-2 bg-slate-900 text-white text-xs rounded shadow-lg opacity-0 invisible group-hover/tooltip:opacity-100 group-hover/tooltip:visible transition-all z-50 text-center pointer-events-none",children:["Stability is a 0-100 score reflecting cash flow predictability and resilience. Higher is better.",o.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 border-4 border-transparent border-t-slate-900"})]})]})]}),o.jsxs("div",{className:"text-lg font-bold flex items-center gap-1.5 mt-1",children:[e,o.jsx(pd,{className:`w-3.5 h-3.5 ${e>=80?"text-green-500":e>=60?"text-blue-500":"text-amber-500"}`})]})]})]})]})]})}const gb=({icon:t,title:e,meta:n,urgency:r="medium",actionLabel:i})=>o.jsxs("div",{className:"group flex items-center gap-4 p-3 rounded-xl bg-muted/20 border border-border/50 hover:border-border hover:bg-muted/50 transition-all duration-200 cursor-pointer",children:[o.jsx("div",{className:pe("p-2 rounded-lg flex-shrink-0",r==="high"?"bg-red-100 text-red-600 dark:bg-red-900/20 dark:text-red-400":r==="medium"?"bg-amber-100 text-amber-600 dark:bg-amber-900/20 dark:text-amber-400":"bg-blue-100 text-blue-600 dark:bg-blue-900/20 dark:text-blue-400"),children:o.jsx(t,{className:"w-5 h-5"})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h4",{className:"font-medium text-sm text-foreground truncate",children:e}),o.jsx("p",{className:"text-xs text-muted-foreground mt-0.5",children:n})]}),o.jsxs("div",{className:"flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[o.jsx("span",{className:"text-xs font-semibold text-primary",children:i}),o.jsx(so,{className:"w-4 h-4 text-primary"})]})]});function FJ(){return o.jsxs("section",{className:"bg-card rounded-xl border border-border p-6 shadow-sm h-full overflow-hidden flex flex-col",children:[o.jsx("div",{className:"flex items-center justify-between mb-2",children:o.jsxs("h3",{className:"font-semibold text-lg flex items-center gap-2",children:["Action Queue",o.jsx("span",{className:"bg-red-100 text-red-600 text-xs font-bold px-2 py-0.5 rounded-full dark:bg-red-900/20 dark:text-red-400",children:"3 Urgent"})]})}),o.jsx("p",{className:"text-sm text-muted-foreground mb-6",children:"Immediate attention required."}),o.jsxs("div",{className:"flex flex-col gap-2 -mx-2 px-2 overflow-y-auto max-h-[400px]",children:[o.jsx(gb,{icon:ui,title:"Water leak  Unit 3B",meta:"Reported 2 hours ago  Vendor unassigned",urgency:"high",actionLabel:"Assign"}),o.jsx(gb,{icon:pL,title:"Rent overdue  John S.",meta:"7 days overdue  $1,250",urgency:"medium",actionLabel:"Review"}),o.jsx(gb,{icon:Pn,title:"Lease expires in 21 days",meta:"Unit 12  Sarah Jenkins",urgency:"medium",actionLabel:"Renew"})]})]})}function zJ(){return o.jsxs("section",{className:"bg-card rounded-xl border border-border p-6 shadow-sm h-full",children:[o.jsx("h3",{className:"font-semibold text-lg mb-4",children:"Properties"}),o.jsx("div",{className:"overflow-hidden rounded-lg border border-border",children:o.jsxs("table",{className:"w-full text-sm",children:[o.jsx("thead",{className:"bg-muted/50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-3 text-left font-medium text-muted-foreground",children:"Property"}),o.jsx("th",{className:"px-4 py-3 text-left font-medium text-muted-foreground w-20",children:"Units"}),o.jsx("th",{className:"px-4 py-3 text-left font-medium text-muted-foreground w-24",children:"Occupancy"}),o.jsx("th",{className:"px-4 py-3 text-left font-medium text-muted-foreground w-24",children:"Stability"})]})}),o.jsxs("tbody",{className:"divide-y divide-border",children:[o.jsxs("tr",{className:"group hover:bg-muted/30 transition-colors cursor-pointer",children:[o.jsxs("td",{className:"px-4 py-3 font-medium text-foreground flex items-center gap-2",children:[o.jsx(da,{className:"w-4 h-4 text-muted-foreground/50 group-hover:text-primary transition-colors"}),"Oak Street Apartments"]}),o.jsx("td",{className:"px-4 py-3 text-muted-foreground",children:"12"}),o.jsx("td",{className:"px-4 py-3 text-green-600 font-medium",children:"92%"}),o.jsxs("td",{className:"px-4 py-3 font-bold text-blue-600 flex items-center gap-1.5",children:["78",o.jsx(pd,{className:"w-3.5 h-3.5"})]})]}),o.jsxs("tr",{className:"group hover:bg-muted/30 transition-colors cursor-pointer",children:[o.jsxs("td",{className:"px-4 py-3 font-medium text-foreground flex items-center gap-2",children:[o.jsx(da,{className:"w-4 h-4 text-muted-foreground/50 group-hover:text-primary transition-colors"}),"Burnside Duplex"]}),o.jsx("td",{className:"px-4 py-3 text-muted-foreground",children:"2"}),o.jsx("td",{className:"px-4 py-3 text-green-600 font-medium",children:"100%"}),o.jsxs("td",{className:"px-4 py-3 font-bold text-green-600 flex items-center gap-1.5",children:["96",o.jsx(pd,{className:"w-3.5 h-3.5"})]})]}),o.jsxs("tr",{className:"group hover:bg-muted/30 transition-colors cursor-pointer",children:[o.jsxs("td",{className:"px-4 py-3 font-medium text-foreground flex items-center gap-2",children:[o.jsx(da,{className:"w-4 h-4 text-muted-foreground/50 group-hover:text-primary transition-colors"}),"Pineview Heights"]}),o.jsx("td",{className:"px-4 py-3 text-muted-foreground",children:"24"}),o.jsx("td",{className:"px-4 py-3 text-amber-600 font-medium",children:"85%"}),o.jsxs("td",{className:"px-4 py-3 font-bold text-amber-600 flex items-center gap-1.5",children:["58",o.jsx(pd,{className:"w-3.5 h-3.5"})]})]})]})]})}),o.jsx("div",{className:"mt-4 text-center",children:o.jsx("button",{className:"text-sm font-medium text-primary hover:text-primary/80 transition-colors",children:"View All Properties"})})]})}function BJ(){return o.jsxs("section",{className:"bg-card rounded-xl border border-border p-6 shadow-sm h-full",children:[o.jsx("h3",{className:"font-semibold text-lg mb-4",children:"Tenant Pulse"}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[o.jsxs("div",{className:"p-3 bg-red-50 dark:bg-red-900/10 rounded-lg border border-red-100 dark:border-red-900/30",children:[o.jsx("div",{className:"text-2xl font-bold text-red-600",children:"4.2%"}),o.jsx("div",{className:"text-xs font-medium text-red-800/70 dark:text-red-300",children:"Late Payment Rate"})]}),o.jsxs("div",{className:"p-3 bg-muted/20 rounded-lg border border-border",children:[o.jsx("div",{className:"text-2xl font-bold text-foreground",children:"1.2"}),o.jsx("div",{className:"text-xs font-medium text-muted-foreground",children:"Requests / Unit"})]})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider mb-3",children:"At Risk"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center gap-3 p-2 rounded-lg hover:bg-muted/50 transition-colors",children:[o.jsx("div",{className:"w-8 h-8 rounded-full bg-amber-100 text-amber-700 flex items-center justify-center font-bold text-xs",children:"OJ"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"text-sm font-medium",children:"Oliver Johnson"}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Chronic late payer"})]})]}),o.jsxs("div",{className:"flex items-center gap-3 p-2 rounded-lg hover:bg-muted/50 transition-colors",children:[o.jsx("div",{className:"w-8 h-8 rounded-full bg-red-100 text-red-700 flex items-center justify-center font-bold text-xs",children:"MC"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"text-sm font-medium",children:"Maria Cruz"}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Lease ending + Balance"})]})]})]})]})]})}function VJ(){return o.jsxs("div",{children:[o.jsxs("header",{className:"mb-8",children:[o.jsx("h1",{className:"text-3xl font-bold tracking-tight text-foreground",children:"Dashboard"}),o.jsx("p",{className:"text-muted-foreground mt-1",children:"Overview of your portfolio health and pending actions."})]}),o.jsx(SG,{}),o.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-[3fr_2fr] gap-6 mb-6",children:[o.jsx(OJ,{}),o.jsx(FJ,{})]}),o.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-[2fr_3fr] gap-6",children:[o.jsx(BJ,{}),o.jsx(zJ,{})]})]})}const HJ=[{id:"p1",name:"Highland Lofts",address:"4221 Highland Ave, Seattle WA",rentCollected:14200,rentExpected:15600,units:[{id:"u1",unitNumber:"101",status:"occupied",tenantName:"Sarah Jenkins",rentAmount:2300,leaseEndDate:"2024-08-01"},{id:"u2",unitNumber:"102",status:"occupied",tenantName:"Mike Ross",rentAmount:2300,leaseEndDate:"2024-09-15"},{id:"u3",unitNumber:"201",status:"maintenance",maintenanceRequest:!0},{id:"u4",unitNumber:"202",status:"occupied",tenantName:"Jessica P.",rentAmount:2400,leaseEndDate:"2024-11-30"},{id:"u5",unitNumber:"301",status:"vacant",rentAmount:2600},{id:"u6",unitNumber:"302",status:"occupied",tenantName:"Donna M.",rentAmount:2600,leaseEndDate:"2025-01-01"}]},{id:"p2",name:"The Oakley",address:"881 Oak Street, Portland OR",rentCollected:8400,rentExpected:8400,units:[{id:"u7",unitNumber:"1A",status:"occupied",tenantName:"K. Lamar",rentAmount:1200,leaseEndDate:"2024-06-01"},{id:"u8",unitNumber:"1B",status:"occupied",tenantName:"J. Cole",rentAmount:1200,leaseEndDate:"2024-06-01"},{id:"u9",unitNumber:"2A",status:"occupied",tenantName:"Drake G.",rentAmount:1250,leaseEndDate:"2024-07-01"},{id:"u10",unitNumber:"2B",status:"occupied",tenantName:"Travis S.",rentAmount:1250,leaseEndDate:"2024-07-01"},{id:"u11",unitNumber:"3A",status:"occupied",tenantName:"Abel T.",rentAmount:1750,leaseEndDate:"2025-02-01"},{id:"u12",unitNumber:"3B",status:"occupied",tenantName:"Future",rentAmount:1750,leaseEndDate:"2025-02-01"}]},{id:"p3",name:"Sunset Duplex",address:"101 Sunset Blvd, Los Angeles CA",rentCollected:0,rentExpected:4500,units:[{id:"u13",unitNumber:"A",status:"occupied",tenantName:"Walter W.",rentAmount:2250,leaseEndDate:"2024-12-01"},{id:"u14",unitNumber:"B",status:"occupied",tenantName:"Jesse P.",rentAmount:2250,leaseEndDate:"2024-12-01",maintenanceRequest:!0}]}],GJ=({status:t})=>{const e={occupied:"bg-emerald-100/50 text-emerald-700 dark:bg-emerald-500/10 dark:text-emerald-400 border-emerald-200/50 dark:border-emerald-500/20",vacant:"bg-rose-100/50 text-rose-700 dark:bg-rose-500/10 dark:text-rose-400 border-rose-200/50 dark:border-rose-500/20",maintenance:"bg-amber-100/50 text-amber-700 dark:bg-amber-500/10 dark:text-amber-400 border-amber-200/50 dark:border-amber-500/20"},n={occupied:"Occupied",vacant:"Vacant",maintenance:"Maintenance"};return o.jsx("span",{className:pe("text-[10px] uppercase font-bold px-2 py-0.5 rounded-full border tracking-wide",e[t]),children:n[t]})},WJ=({units:t})=>o.jsx("div",{className:"w-full bg-slate-50/50 dark:bg-slate-900/20 border-t border-border/50 animate-in fade-in slide-in-from-top-1 duration-200",children:o.jsxs("table",{className:"w-full text-sm text-left",children:[o.jsx("thead",{className:"bg-slate-100/50 dark:bg-slate-800/50 text-muted-foreground font-medium text-xs uppercase tracking-wider",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 pl-14",children:"Unit"}),o.jsx("th",{className:"px-6 py-3",children:"Status"}),o.jsx("th",{className:"px-6 py-3",children:"Tenant"}),o.jsx("th",{className:"px-6 py-3",children:"Rent"}),o.jsx("th",{className:"px-6 py-3",children:"Lease"}),o.jsx("th",{className:"px-6 py-3 text-right",children:"Actions"})]})}),o.jsx("tbody",{className:"divide-y divide-border/30",children:t.map(e=>o.jsxs("tr",{className:"hover:bg-slate-100/50 dark:hover:bg-slate-800/30 transition-colors",children:[o.jsx("td",{className:"px-6 py-3 pl-14 font-medium",children:e.unitNumber}),o.jsx("td",{className:"px-6 py-3",children:o.jsx(GJ,{status:e.status})}),o.jsx("td",{className:"px-6 py-3 text-muted-foreground",children:e.tenantName||""}),o.jsx("td",{className:"px-6 py-3 font-medium",children:e.rentAmount?`$${e.rentAmount.toLocaleString()}`:""}),o.jsx("td",{className:"px-6 py-3 text-muted-foreground",children:e.leaseEndDate||""}),o.jsxs("td",{className:"px-6 py-3 text-right",children:[e.maintenanceRequest&&o.jsxs("span",{className:"inline-flex items-center gap-1 text-xs text-amber-600 dark:text-amber-500 font-medium mr-4",children:[o.jsx(Ft,{size:12})," Req"]}),o.jsx("button",{className:"text-muted-foreground hover:text-foreground transition-colors",children:"Edit"})]})]},e.id))})]})}),XJ=({property:t})=>{const[e,n]=D.useState(!1),r=qr(),i=t.units.filter(c=>c.status==="occupied").length,s=Math.round(i/t.units.length*100),a=t.units.filter(c=>c.maintenanceRequest||c.status==="maintenance").length,l=t.rentCollected<t.rentExpected;return o.jsxs("div",{className:pe("group border rounded-xl bg-card transition-all duration-200",e?"shadow-md ring-1 ring-primary/5 border-primary/20":"hover:border-primary/20 hover:shadow-sm"),children:[o.jsxs("div",{className:"p-4 flex flex-col md:flex-row md:items-center gap-4 cursor-pointer",onClick:()=>r(`/app/properties/${t.id}`),children:[o.jsx("div",{className:"flex-1 min-w-[200px]",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-2 bg-primary/10 rounded-lg text-primary",children:o.jsx(fo,{size:20})}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-foreground",children:t.name}),o.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[o.jsx(Tp,{size:12}),t.address]})]})]})}),o.jsxs("div",{className:"flex-1 grid grid-cols-2 md:grid-cols-4 gap-4 items-center",children:[o.jsxs("div",{className:"flex flex-col items-center justify-center text-center",children:[o.jsx("div",{className:"text-muted-foreground text-xs mb-1",children:"Units"}),o.jsx("div",{className:"font-semibold text-base",children:t.units.length})]}),o.jsxs("div",{className:"flex flex-col items-center justify-center text-center",children:[o.jsx("div",{className:"text-muted-foreground text-xs mb-1",children:"Occupancy"}),o.jsxs("div",{className:pe("font-semibold text-base",s<90?"text-amber-600 dark:text-amber-500":"text-foreground"),children:[s,"%"]})]}),o.jsxs("div",{className:"flex flex-col items-center justify-center text-center",children:[o.jsx("div",{className:"text-muted-foreground text-xs mb-1",children:"Rent Status"}),o.jsxs("div",{className:"flex flex-col items-center leading-tight",children:[o.jsxs("span",{className:"font-semibold text-base",children:["$",t.rentCollected.toLocaleString()]}),o.jsxs("span",{className:"text-muted-foreground text-[11px] font-normal",children:["/ $",t.rentExpected.toLocaleString()]})]})]}),o.jsxs("div",{className:"flex flex-col items-center justify-center text-center",children:[o.jsx("div",{className:"text-muted-foreground text-xs mb-1",children:"Maintenance"}),o.jsx("div",{className:"font-medium flex items-center justify-center h-6",children:a>0?o.jsxs("span",{className:"text-amber-600 dark:text-amber-500 flex items-center gap-1.5 font-semibold",children:[o.jsx(Ft,{size:14})," ",a]}):o.jsx("span",{className:"text-muted-foreground",children:""})})]})]}),o.jsxs("div",{className:"flex items-center gap-4 justify-end min-w-[100px]",children:[l&&o.jsx("div",{className:"text-rose-500",title:"Rent Overdue",children:o.jsx(ui,{size:18})}),o.jsx("div",{className:pe("transition-transform duration-200 p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-800",e&&"rotate-180"),onClick:c=>{c.stopPropagation(),n(!e)},children:o.jsx(vs,{size:20,className:"text-muted-foreground"})})]})]}),e&&o.jsx(WJ,{units:t.units})]})};function YJ(){const t=qr();return o.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Properties"}),o.jsx("p",{className:"text-muted-foreground",children:"Manage your buildings and check unit status."})]}),o.jsx("div",{className:"flex items-center gap-2",children:o.jsxs("button",{onClick:()=>t("/app/properties/new"),className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-primary text-primary-foreground hover:bg-primary/90 transition-colors font-medium text-sm",children:[o.jsx(Ws,{size:16}),"Add Property"]})})]}),o.jsxs("div",{className:"flex items-center gap-2 bg-card p-2 rounded-lg border shadow-sm max-w-2xl",children:[o.jsx(di,{className:"text-muted-foreground ml-2",size:18}),o.jsx("input",{type:"text",placeholder:"Search properties...",className:"flex-1 bg-transparent border-none focus:ring-0 text-sm placeholder:text-muted-foreground"}),o.jsx("div",{className:"w-px h-6 bg-border mx-2"}),o.jsxs("button",{className:"flex items-center gap-2 px-3 py-1.5 rounded-md hover:bg-slate-100 dark:hover:bg-slate-800 text-sm font-medium text-muted-foreground hover:text-foreground transition-colors",children:[o.jsx(po,{size:14}),"Filters"]})]}),o.jsx("div",{className:"space-y-4",children:HJ.map(e=>o.jsx(XJ,{property:e},e.id))})]})}function qJ(){const t=qr(),[e,n]=D.useState("basics"),[r,i]=D.useState({name:"",address:"",city:"",state:"",zip:"",type:"multi-family",units:1}),s=()=>{e==="basics"?n("units"):e==="units"&&n("review")},a=()=>{e==="units"?n("basics"):e==="review"&&n("units")},{toast:l}=Fc();return o.jsxs("div",{className:"max-w-4xl mx-auto py-10 px-4",children:[o.jsxs("div",{className:"mb-10 text-center",children:[o.jsx("h1",{className:"text-3xl font-bold tracking-tight mb-4",children:"Add New Property"}),o.jsxs("div",{className:"flex items-center justify-center gap-4 text-sm font-medium text-muted-foreground",children:[o.jsx(xb,{current:e,step:"basics",label:"Basics",num:1}),o.jsx("div",{className:"w-10 h-px bg-border"}),o.jsx(xb,{current:e,step:"units",label:"Units",num:2}),o.jsx("div",{className:"w-10 h-px bg-border"}),o.jsx(xb,{current:e,step:"review",label:"Review",num:3})]})]}),o.jsxs("div",{className:"bg-card border border-border rounded-xl shadow-sm overflow-hidden min-h-[400px] flex flex-col",children:[o.jsx("div",{className:"flex-1 p-8",children:o.jsxs(cn,{mode:"wait",children:[e==="basics"&&o.jsxs(Et.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6 max-w-lg mx-auto",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("h2",{className:"text-xl font-semibold",children:"Property Details"}),o.jsx("p",{className:"text-muted-foreground text-sm",children:"Where is this property located?"})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1.5",children:"Property Name"}),o.jsxs("div",{className:"relative",children:[o.jsx(fo,{className:"absolute left-3 top-2.5 w-4 h-4 text-muted-foreground"}),o.jsx("input",{type:"text",placeholder:"e.g. Sunset Apartments",className:"w-full pl-9 bg-background border rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-primary/20 outline-none transition-all",value:r.name,onChange:c=>i({...r,name:c.target.value})})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1.5",children:"Address Line 1"}),o.jsxs("div",{className:"relative",children:[o.jsx(Tp,{className:"absolute left-3 top-2.5 w-4 h-4 text-muted-foreground"}),o.jsx("input",{type:"text",placeholder:"123 Main St",className:"w-full pl-9 bg-background border rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-primary/20 outline-none transition-all",value:r.address,onChange:c=>i({...r,address:c.target.value})})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1.5",children:"City"}),o.jsx("input",{type:"text",className:"w-full bg-background border rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-primary/20 outline-none transition-all",value:r.city,onChange:c=>i({...r,city:c.target.value})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1.5",children:"State"}),o.jsx("input",{type:"text",className:"w-full bg-background border rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-primary/20 outline-none transition-all",value:r.state,onChange:c=>i({...r,state:c.target.value})})]})]})]})]},"basics"),e==="units"&&o.jsxs(Et.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6 max-w-lg mx-auto",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("h2",{className:"text-xl font-semibold",children:"Configuration"}),o.jsx("p",{className:"text-muted-foreground text-sm",children:"What type of property is this?"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsx(q3,{icon:ys,label:"Single Family",active:r.type==="single-family",onClick:()=>i({...r,type:"single-family",units:1})}),o.jsx(q3,{icon:wL,label:"Multi-Family",active:r.type==="multi-family",onClick:()=>i({...r,type:"multi-family"})})]}),r.type==="multi-family"&&o.jsxs("div",{className:"mt-6 p-4 bg-muted/30 rounded-lg border border-border/50",children:[o.jsx("label",{className:"block text-sm font-medium mb-1.5",children:"Number of Units"}),o.jsx("input",{type:"number",min:"2",className:"w-full bg-background border rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-primary/20 outline-none transition-all",value:r.units,onChange:c=>i({...r,units:parseInt(c.target.value)||0})}),o.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["We'll generate ",r.units," default units (Unit 1, Unit 2, etc.) which you can customize later."]})]})]},"units"),e==="review"&&o.jsxs(Et.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6 max-w-lg mx-auto",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("h2",{className:"text-xl font-semibold",children:"Review & Create"}),o.jsx("p",{className:"text-muted-foreground text-sm",children:"Double check the details before creating."})]}),o.jsxs("div",{className:"bg-muted/30 rounded-xl p-6 space-y-4 border border-border/50",children:[o.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-border/50",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Property Name"}),o.jsx("span",{className:"font-medium",children:r.name})]}),o.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-border/50",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Location"}),o.jsxs("span",{className:"font-medium text-right",children:[r.address,o.jsx("br",{}),r.city,", ",r.state]})]}),o.jsxs("div",{className:"flex justify-between items-center py-2",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Configuration"}),o.jsxs("span",{className:"font-medium capitalize",children:[r.type.replace("-"," "),"  ",r.units," Unit(s)"]})]})]})]},"review")]})}),o.jsxs("div",{className:"p-6 border-t border-border bg-muted/10 flex justify-between items-center",children:[e!=="basics"?o.jsxs("button",{onClick:a,className:"flex items-center gap-2 text-sm font-medium text-muted-foreground hover:text-foreground transition-colors",children:[o.jsx(qx,{className:"w-4 h-4"}),"Back"]}):o.jsx("button",{onClick:()=>t("/app/properties"),className:"text-sm font-medium text-muted-foreground hover:text-foreground transition-colors",children:"Cancel"}),e==="review"?o.jsxs("button",{onClick:()=>{l({type:"success",title:"Property Created",message:`${r.name} has been added to your portfolio.`}),t("/app/properties")},className:"flex items-center gap-2 bg-primary text-primary-foreground px-6 py-2 rounded-lg font-medium hover:bg-primary/90 transition-colors",children:["Create Property",o.jsx(ai,{className:"w-4 h-4"})]}):o.jsxs("button",{onClick:s,className:"flex items-center gap-2 bg-primary text-primary-foreground px-6 py-2 rounded-lg font-medium hover:bg-primary/90 transition-colors",children:["Continue",o.jsx(so,{className:"w-4 h-4"})]})]})]})]})}function xb({current:t,step:e,label:n,num:r}){const i=["basics","units","review"],s=i.indexOf(t),a=i.indexOf(e),l=t===e,c=s>a;return o.jsxs("div",{className:pe("flex items-center gap-2",l?"text-primary":c?"text-foreground":"text-muted-foreground/50"),children:[o.jsx("div",{className:pe("w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold border",l?"border-primary bg-primary/10":c?"border-foreground bg-foreground text-background":"border-current"),children:c?o.jsx(ai,{className:"w-3 h-3"}):r}),o.jsx("span",{children:n})]})}function q3({icon:t,label:e,active:n,onClick:r}){return o.jsxs("div",{onClick:r,className:pe("cursor-pointer p-4 rounded-xl border-2 transition-all duration-200 flex flex-col items-center gap-3 text-center hover:border-primary/50 hover:bg-primary/5",n?"border-primary bg-primary/5":"border-border bg-card"),children:[o.jsx("div",{className:pe("p-3 rounded-full",n?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"),children:o.jsx(t,{className:"w-6 h-6"})}),o.jsx("span",{className:pe("font-medium",n?"text-primary":"text-foreground"),children:e})]})}function $J(){const t=qr(),{propertyId:e}=Vx(),[n,r]=D.useState("details"),{toast:i}=Fc(),s={name:"Highland Lofts",address:"123 Highland Ave, Seattle WA 98102",units:24},[a,l]=D.useState({identifier:"",type:"1-bedroom",beds:1,baths:1,sqft:"",status:"vacant",floor:"",rentAmount:"",rentFrequency:"monthly",deposit:"",marketRent:""}),c=()=>{n==="details"?r("financials"):n==="financials"&&r("review")},u=()=>{n==="financials"?r("details"):n==="review"&&r("financials")};return o.jsxs("div",{className:"max-w-4xl mx-auto py-10 px-4",children:[o.jsxs("div",{className:"mb-8 p-4 bg-muted/30 border border-border/50 rounded-xl flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-2 bg-primary/10 rounded-lg text-primary",children:o.jsx(fo,{size:20})}),o.jsxs("div",{children:[o.jsx("h2",{className:"font-semibold text-sm text-foreground",children:s.name}),o.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[o.jsx(Tp,{size:12})," ",s.address]})]})]}),o.jsxs("div",{className:"text-xs font-medium text-muted-foreground px-3 py-1 bg-background border rounded-lg",children:["Adding to ",s.units," existing units"]})]}),o.jsxs("div",{className:"bg-card border border-border rounded-xl shadow-sm overflow-hidden min-h-[500px] flex flex-col",children:[o.jsxs("div",{className:"border-b border-border p-6 bg-muted/10",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("h1",{className:"text-xl font-bold tracking-tight",children:"Add Unit"}),o.jsxs("span",{className:"text-sm text-muted-foreground",children:["Step ",n==="details"?1:n==="financials"?2:3," of 3"]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(vb,{active:n==="details"||n==="financials"||n==="review"}),o.jsx(vb,{active:n==="financials"||n==="review"}),o.jsx(vb,{active:n==="review"})]})]}),o.jsx("div",{className:"flex-1 p-8",children:o.jsxs(cn,{mode:"wait",children:[n==="details"&&o.jsxs(Et.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6 max-w-2xl mx-auto",children:[o.jsx("h2",{className:"text-lg font-semibold",children:"Unit Details"}),o.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[o.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[o.jsxs("label",{className:"block text-sm font-medium mb-1.5",children:["Unit Identifier ",o.jsx("span",{className:"text-rose-500",children:"*"})]}),o.jsxs("div",{className:"relative",children:[o.jsx(nH,{className:"absolute left-3 top-2.5 w-4 h-4 text-muted-foreground"}),o.jsx("input",{type:"text",placeholder:"e.g. 101, 4B, Penthouse",className:"w-full pl-9 bg-background border rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-primary/20 outline-none transition-all",value:a.identifier,onChange:d=>l({...a,identifier:d.target.value}),autoFocus:!0})]}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Must be unique within property."})]}),o.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[o.jsx("label",{className:"block text-sm font-medium mb-1.5",children:"Unit Type"}),o.jsxs("select",{className:"w-full bg-background border rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-primary/20 outline-none transition-all appearance-none",value:a.type,onChange:d=>l({...a,type:d.target.value}),children:[o.jsx("option",{value:"studio",children:"Studio"}),o.jsx("option",{value:"1-bedroom",children:"1 Bedroom"}),o.jsx("option",{value:"2-bedroom",children:"2 Bedroom"}),o.jsx("option",{value:"3-bedroom",children:"3 Bedroom"}),o.jsx("option",{value:"custom",children:"Custom"})]})]})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1.5",children:"Bedrooms"}),o.jsx("input",{type:"number",min:"0",className:"w-full bg-background border rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-primary/20 outline-none transition-all",value:a.beds,onChange:d=>l({...a,beds:Number(d.target.value)})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1.5",children:"Bathrooms"}),o.jsx("input",{type:"number",min:"0",step:"0.5",className:"w-full bg-background border rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-primary/20 outline-none transition-all",value:a.baths,onChange:d=>l({...a,baths:Number(d.target.value)})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1.5",children:"Sq. Ft."}),o.jsxs("div",{className:"relative",children:[o.jsx(hH,{className:"absolute left-3 top-2.5 w-4 h-4 text-muted-foreground"}),o.jsx("input",{type:"number",className:"w-full pl-9 bg-background border rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-primary/20 outline-none transition-all",value:a.sqft,onChange:d=>l({...a,sqft:d.target.value})})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1.5",children:"Initial Status"}),o.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[o.jsx(yb,{value:"vacant",label:"Vacant",current:a.status,onClick:d=>l({...a,status:d})}),o.jsx(yb,{value:"occupied",label:"Occupied",current:a.status,onClick:d=>l({...a,status:d})}),o.jsx(yb,{value:"offline",label:"Offline",current:a.status,onClick:d=>l({...a,status:d})})]}),o.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:[a.status==="occupied"&&"You'll be prompted to add a lease after creating this unit.",a.status==="vacant"&&"This unit will be listed as available for rent immediately.",a.status==="offline"&&"Use this for units under renovation or not for rent."]})]})]},"details"),n==="financials"&&o.jsxs(Et.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6 max-w-2xl mx-auto",children:[o.jsx("h2",{className:"text-lg font-semibold",children:"Rent & Financials"}),o.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium mb-1.5",children:["Base Rent Amount ",o.jsx("span",{className:"text-rose-500",children:"*"})]}),o.jsxs("div",{className:"relative",children:[o.jsx(vr,{className:"absolute left-3 top-2.5 w-4 h-4 text-muted-foreground"}),o.jsx("input",{type:"number",placeholder:"0.00",className:"w-full pl-9 bg-background border rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-primary/20 outline-none transition-all",value:a.rentAmount,onChange:d=>l({...a,rentAmount:d.target.value}),autoFocus:!0})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1.5",children:"Rent Frequency"}),o.jsxs("select",{className:"w-full bg-background border rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-primary/20 outline-none transition-all",value:a.rentFrequency,onChange:d=>l({...a,rentFrequency:d.target.value}),children:[o.jsx("option",{value:"monthly",children:"Monthly"}),o.jsx("option",{value:"weekly",children:"Weekly"})]})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1.5",children:"Security Deposit"}),o.jsxs("div",{className:"relative",children:[o.jsx(vr,{className:"absolute left-3 top-2.5 w-4 h-4 text-muted-foreground"}),o.jsx("input",{type:"number",placeholder:"0.00",className:"w-full pl-9 bg-background border rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-primary/20 outline-none transition-all",value:a.deposit,onChange:d=>l({...a,deposit:d.target.value})})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1.5",children:"Market Rent (Estimate)"}),o.jsxs("div",{className:"relative",children:[o.jsx(vr,{className:"absolute left-3 top-2.5 w-4 h-4 text-muted-foreground"}),o.jsx("input",{type:"number",placeholder:"0.00",className:"w-full pl-9 bg-background border rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-primary/20 outline-none transition-all",value:a.marketRent,onChange:d=>l({...a,marketRent:d.target.value})})]})]})]})]},"financials"),n==="review"&&o.jsxs(Et.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6 max-w-2xl mx-auto",children:[o.jsx("h2",{className:"text-lg font-semibold",children:"Review & Create"}),o.jsxs("div",{className:"bg-muted/30 rounded-xl p-6 border border-border/50",children:[o.jsx("h3",{className:"text-sm font-medium text-muted-foreground uppercase tracking-wide mb-4",children:"Unit Summary"}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-muted-foreground block",children:"Identifier"}),o.jsx("span",{className:"font-medium",children:a.identifier})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-muted-foreground block",children:"Configuration"}),o.jsxs("span",{className:"font-medium capitalize",children:[a.type.replace("-"," "),"  ",a.beds," Bed, ",a.baths," Bath"]})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-muted-foreground block",children:"Size"}),o.jsx("span",{className:"font-medium",children:a.sqft?`${a.sqft} sq ft`:""})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-muted-foreground block",children:"Status"}),o.jsx("span",{className:pe("inline-flex items-center px-2 py-0.5 rounded text-xs font-medium capitalize",a.status==="vacant"&&"bg-slate-100 text-slate-700 dark:bg-slate-800 dark:text-slate-400",a.status==="occupied"&&"bg-emerald-50 text-emerald-700 dark:bg-emerald-900/20 dark:text-emerald-400",a.status==="offline"&&"bg-amber-50 text-amber-700 dark:bg-amber-900/20 dark:text-amber-400"),children:a.status})]})]}),o.jsx("div",{className:"w-full h-px bg-border/50 my-6"}),o.jsx("h3",{className:"text-sm font-medium text-muted-foreground uppercase tracking-wide mb-4",children:"Financials"}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-muted-foreground block",children:"Base Rent"}),o.jsxs("span",{className:"font-medium",children:["$",a.rentAmount||"0"," / ",a.rentFrequency]})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-muted-foreground block",children:"Deposit"}),o.jsxs("span",{className:"font-medium",children:["$",a.deposit||"0"]})]})]})]})]},"review")]})}),o.jsxs("div",{className:"p-6 border-t border-border bg-muted/10 flex justify-between items-center",children:[n!=="details"?o.jsxs("button",{onClick:u,className:"flex items-center gap-2 text-sm font-medium text-muted-foreground hover:text-foreground transition-colors",children:[o.jsx(qx,{className:"w-4 h-4"}),"Back"]}):o.jsx("button",{onClick:()=>t(-1),className:"text-sm font-medium text-muted-foreground hover:text-foreground transition-colors",children:"Cancel"}),n==="review"?o.jsxs("button",{onClick:()=>{i({type:"success",title:"Unit Created",message:`Unit ${a.identifier} was successfully added.`}),t(`/app/properties/${e}`)},className:"flex items-center gap-2 bg-primary text-primary-foreground px-6 py-2 rounded-lg font-medium hover:bg-primary/90 transition-colors",children:["Add Unit",o.jsx(ai,{className:"w-4 h-4"})]}):o.jsxs("button",{onClick:c,className:"flex items-center gap-2 bg-primary text-primary-foreground px-6 py-2 rounded-lg font-medium hover:bg-primary/90 transition-colors",children:["Continue",o.jsx(so,{className:"w-4 h-4"})]})]})]})]})}function vb({active:t}){return o.jsx("div",{className:pe("h-1 flex-1 rounded-full transition-colors duration-300",t?"bg-primary":"bg-primary/10")})}function yb({value:t,label:e,current:n,onClick:r}){const i=t===n;return o.jsx("div",{onClick:()=>r(t),className:pe("cursor-pointer border rounded-lg p-3 text-center transition-all",i?"border-primary bg-primary/5 text-primary font-medium ring-1 ring-primary":"border-border hover:border-primary/50 text-muted-foreground"),children:e})}const MI=[{id:"t1",name:"Jane Smith",email:"jane.smith@example.com",phone:"555-0101",propertyId:"p1",propertyName:"Oak Street Apartments",unitId:"u6",unitNumber:"3B",leaseStatus:"active",leaseStartDate:"2023-02-15",leaseEndDate:"2024-02-15",moveInDate:"2023-02-15",rentAmount:1450,rentStatus:"overdue",balance:1450,autopayEnabled:!1,paymentMethod:"ach",maintenanceRequestCount:1,lastMaintenanceRequestDate:"2024-01-05",communicationStatus:"responsive",portalStatus:"accepted",documentStatus:"complete",tags:["renewal_risk"],createdAt:"2023-02-01"},{id:"t2",name:"Michael Chen",email:"m.chen@example.com",propertyId:"p2",propertyName:"Highland Lofts",unitId:"u8",unitNumber:"102",leaseStatus:"active",leaseStartDate:"2023-08-01",leaseEndDate:"2024-08-01",rentAmount:2300,rentStatus:"paid",balance:0,autopayEnabled:!0,paymentMethod:"credit_card",lastPaymentDate:"2024-01-01",maintenanceRequestCount:0,communicationStatus:"responsive",portalStatus:"accepted",documentStatus:"complete",tags:["vip"],createdAt:"2023-07-15"},{id:"t3",name:"Sarah Johnson",email:"s.johnson@example.com",propertyId:"p2",propertyName:"Highland Lofts",unitId:"u10",unitNumber:"201",leaseStatus:"month_to_month",leaseStartDate:"2023-06-30",leaseEndDate:"2024-06-30",rentAmount:2100,rentStatus:"partial",balance:450,autopayEnabled:!1,paymentMethod:"ach",lastPaymentDate:"2024-01-03",maintenanceRequestCount:0,communicationStatus:"unread",portalStatus:"invited",documentStatus:"complete",tags:[],createdAt:"2023-06-15"},{id:"t4",name:"David Wilson",email:"dwilson@example.com",propertyId:"p3",propertyName:"Sunset Duplex",unitId:"u11",unitNumber:"A",leaseStatus:"active",leaseStartDate:"2023-11-15",leaseEndDate:"2024-11-15",rentAmount:1850,rentStatus:"paid",balance:0,autopayEnabled:!0,paymentMethod:"check",lastPaymentDate:"2024-01-01",maintenanceRequestCount:2,lastMaintenanceRequestDate:"2023-12-28",communicationStatus:"responsive",portalStatus:"accepted",documentStatus:"complete",tags:["maintenance_heavy"],createdAt:"2023-11-01"},{id:"t5",name:"Emily Davis",email:"emily.d@example.com",propertyId:"p1",propertyName:"Oak Street Apartments",unitId:"u1",unitNumber:"1A",leaseStatus:"renewal_pending",leaseStartDate:"2023-03-01",leaseEndDate:"2024-03-01",rentAmount:1200,rentStatus:"paid",balance:0,autopayEnabled:!0,paymentMethod:"ach",lastPaymentDate:"2024-01-02",maintenanceRequestCount:0,communicationStatus:"responsive",portalStatus:"accepted",documentStatus:"lease_signed",tags:[],createdAt:"2023-02-20"},{id:"t6",name:"Robert Brown",email:"robert.brown@example.com",propertyId:"p1",propertyName:"Oak Street Apartments",unitId:"u2",unitNumber:"1B",leaseStatus:"active",leaseStartDate:"2023-09-01",leaseEndDate:"2024-09-01",rentAmount:1350,rentStatus:"credit",balance:-50,autopayEnabled:!0,paymentMethod:"ach",maintenanceRequestCount:0,communicationStatus:"responsive",portalStatus:"accepted",documentStatus:"complete",tags:[],createdAt:"2023-08-15"},{id:"t7",name:"Jennifer Wu",email:"j.wu@example.com",propertyId:"p2",propertyName:"Highland Lofts",unitId:"u7",unitNumber:"101",leaseStatus:"pending_move_in",leaseStartDate:"2024-02-01",leaseEndDate:"2025-02-01",rentAmount:2250,rentStatus:"paid",balance:0,autopayEnabled:!1,maintenanceRequestCount:0,communicationStatus:"responsive",portalStatus:"invited",documentStatus:"missing_docs",tags:["new_tenant"],createdAt:"2024-01-20"},{id:"t8",name:"Kevin O'Connell",email:"kevin.o@example.com",propertyId:"p3",propertyName:"Sunset Duplex",unitId:"u12",unitNumber:"B",leaseStatus:"eviction",leaseStartDate:"2022-05-01",leaseEndDate:"2023-05-01",rentAmount:1900,rentStatus:"overdue",balance:5700,autopayEnabled:!1,paymentMethod:"other",maintenanceRequestCount:5,communicationStatus:"unresponsive",portalStatus:"disabled",documentStatus:"complete",tags:["high_risk","legal"],createdAt:"2022-04-15"}],C0={status:[],rentStatus:[],leaseStatus:[],propertyIds:[],paymentMethod:[]},W_=[{id:"p1",name:"Oak Street Apartments",address:"123 Oak St, Seattle, WA",units:[{id:"u1",number:"1A",status:"occupied"},{id:"u2",number:"1B",status:"occupied"},{id:"u3",number:"2A",status:"vacant"},{id:"u4",number:"2B",status:"occupied"},{id:"u5",number:"3A",status:"occupied"},{id:"u6",number:"3B",status:"occupied"}]},{id:"p2",name:"Highland Lofts",address:"459 Highland Ave, Seattle, WA",units:[{id:"u7",number:"101",status:"occupied"},{id:"u8",number:"102",status:"occupied"},{id:"u9",number:"103",status:"vacant"},{id:"u10",number:"201",status:"occupied"}]},{id:"p3",name:"Sunset Duplex",address:"88 Sunset Blvd, Los Angeles, CA",units:[{id:"u11",number:"A",status:"occupied"},{id:"u12",number:"B",status:"occupied"}]}],Gh=({title:t,icon:e,isOpenDefault:n=!0,children:r,count:i=0})=>{const[s,a]=D.useState(n);return o.jsxs("div",{className:"border-b border-border/50 py-4 last:border-0",children:[o.jsxs("button",{onClick:()=>a(!s),className:"flex items-center justify-between w-full group outline-none",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-foreground",children:[o.jsx(e,{size:16,className:"text-muted-foreground"}),t,i>0&&o.jsx("span",{className:"bg-primary/10 text-primary text-[10px] px-1.5 py-0.5 rounded-full",children:i})]}),o.jsx("div",{className:pe("text-muted-foreground transition-transform duration-200",s&&"rotate-180"),children:o.jsx(vs,{size:16})})]}),o.jsx(cn,{children:s&&o.jsx(Et.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:o.jsx("div",{className:"pt-4 space-y-3",children:r})})})]})};function ZJ({isOpen:t,onClose:e,currentFilters:n,onApply:r,onReset:i}){const[s,a]=D.useState(n);if(D.useEffect(()=>{t&&a(n)},[t,n]),!t)return null;const l=()=>{r(s),e()},c=()=>{a(C0),i()},u=d=>{const f=s[d];return Array.isArray(f)?f.length:f?1:0};return wa.createPortal(o.jsxs("div",{className:"fixed inset-0 z-50 flex justify-end",children:[o.jsx(Et.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"absolute inset-0 bg-background/80 backdrop-blur-sm"}),o.jsxs(Et.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",damping:30,stiffness:300},className:"relative w-full max-w-md bg-card border-l h-full shadow-2xl flex flex-col",children:[o.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(po,{size:18,className:"text-primary"}),o.jsx("h2",{className:"text-lg font-bold",children:"Filters"})]}),o.jsx("button",{onClick:e,className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-full transition-colors",children:o.jsx(va,{size:20,className:"text-muted-foreground"})})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto px-6 py-2",children:[o.jsx(Gh,{title:"Tenant Status",icon:Vs,count:u("status"),children:o.jsx("div",{className:"grid grid-cols-2 gap-2",children:["active","inactive","pending_move_in","pending_move_out","eviction"].map(d=>o.jsxs("label",{className:"flex items-center gap-2 text-sm cursor-pointer select-none group",children:[o.jsx("div",{className:pe("w-4 h-4 rounded border flex items-center justify-center transition-colors",s.status.includes(d)?"bg-primary border-primary text-primary-foreground":"border-muted-foreground/30 group-hover:border-primary/50"),children:s.status.includes(d)&&o.jsx(ai,{size:10})}),o.jsx("span",{className:"capitalize",children:d.replace(/_/g," ")})]},d))})}),o.jsxs(Gh,{title:"Rent & Financial",icon:vr,count:u("rentStatus"),children:[o.jsx("h4",{className:"text-xs font-semibold text-muted-foreground mb-2 uppercase tracking-wider",children:"Rent Status"}),o.jsx("div",{className:"grid grid-cols-2 gap-2 mb-4",children:["paid","partial","overdue","credit"].map(d=>o.jsxs("label",{className:"flex items-center gap-2 text-sm cursor-pointer select-none group",children:[o.jsx("div",{className:pe("w-4 h-4 rounded border flex items-center justify-center transition-colors",s.rentStatus.includes(d)?"bg-primary border-primary text-primary-foreground":"border-muted-foreground/30 group-hover:border-primary/50"),children:s.rentStatus.includes(d)&&o.jsx(ai,{size:10})}),o.jsx("span",{className:"capitalize",children:d})]},d))}),o.jsx("h4",{className:"text-xs font-semibold text-muted-foreground mb-2 uppercase tracking-wider",children:"Balance"}),o.jsxs("div",{className:"flex gap-2 items-center",children:[o.jsx("input",{type:"number",placeholder:"Min",value:s.balanceMin||"",onChange:d=>a(f=>({...f,balanceMin:d.target.value?Number(d.target.value):void 0})),className:"w-full px-3 py-1.5 text-sm rounded-md border bg-slate-50 dark:bg-slate-900 outline-none focus:ring-1 focus:ring-primary"}),o.jsx("span",{className:"text-muted-foreground",children:"-"}),o.jsx("input",{type:"number",placeholder:"Max",value:s.balanceMax||"",onChange:d=>a(f=>({...f,balanceMax:d.target.value?Number(d.target.value):void 0})),className:"w-full px-3 py-1.5 text-sm rounded-md border bg-slate-50 dark:bg-slate-900 outline-none focus:ring-1 focus:ring-primary"})]})]}),o.jsx(Gh,{title:"Property",icon:ys,count:u("propertyIds"),children:o.jsx("div",{className:"space-y-2",children:W_.map(d=>o.jsxs("label",{className:"flex items-center gap-2 text-sm cursor-pointer select-none group",children:[o.jsx("div",{className:pe("w-4 h-4 rounded border flex items-center justify-center transition-colors",s.propertyIds.includes(d.id)?"bg-primary border-primary text-primary-foreground":"border-muted-foreground/30 group-hover:border-primary/50"),children:s.propertyIds.includes(d.id)&&o.jsx(ai,{size:10})}),o.jsx("span",{className:"truncate",children:d.name})]},d.id))})}),o.jsx(Gh,{title:"Lease Details",icon:Pn,count:u("leaseStatus"),children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"text-xs font-semibold text-muted-foreground mb-2 uppercase tracking-wider",children:"Lease Status"}),o.jsx("div",{className:"grid grid-cols-1 gap-2",children:["active","month_to_month","renewal_pending","expired"].map(d=>o.jsxs("label",{className:"flex items-center gap-2 text-sm cursor-pointer select-none group",children:[o.jsx("div",{className:pe("w-4 h-4 rounded border flex items-center justify-center transition-colors",s.leaseStatus.includes(d)?"bg-primary border-primary text-primary-foreground":"border-muted-foreground/30 group-hover:border-primary/50"),children:s.leaseStatus.includes(d)&&o.jsx(ai,{size:10})}),o.jsx("span",{className:"capitalize",children:d.replace(/_/g," ")})]},d))})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-xs font-semibold text-muted-foreground mb-2 uppercase tracking-wider",children:"Expiring Soon"}),o.jsx("div",{className:"flex gap-2",children:[30,60,90].map(d=>o.jsxs("button",{onClick:()=>a(f=>({...f,leaseExpiringDays:f.leaseExpiringDays===d?void 0:d})),className:pe("px-3 py-1.5 rounded-full text-xs font-medium border transition-colors",s.leaseExpiringDays===d?"bg-primary text-primary-foreground border-primary":"bg-background hover:bg-slate-50 border-border"),children:[d," Days"]},d))})]})]})}),o.jsx(Gh,{title:"Maintenance",icon:ui,count:s.hasOpenTickets?1:0,children:o.jsxs("label",{className:"flex items-center gap-2 text-sm cursor-pointer select-none",children:[o.jsx("input",{type:"checkbox",checked:!!s.hasOpenTickets,onChange:d=>a(f=>({...f,hasOpenTickets:d.target.checked})),className:"rounded border-gray-300 text-primary focus:ring-primary"}),o.jsx("span",{children:"Has Open Tickets"})]})})]}),o.jsxs("div",{className:"p-6 border-t bg-slate-50/50 dark:bg-slate-900/50 flex gap-3",children:[o.jsxs("button",{onClick:c,className:"flex-1 px-4 py-2 text-sm font-medium text-muted-foreground hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg transition-colors flex items-center justify-center gap-2",children:[o.jsx(ML,{size:14})," Reset"]}),o.jsx("button",{onClick:l,className:"flex-[2] px-4 py-2 text-sm font-medium bg-primary text-primary-foreground hover:bg-primary/90 rounded-lg shadow-sm transition-colors",children:"Show Results"})]})]})]}),document.body)}const KJ=({status:t})=>{const e={paid:"bg-emerald-100/50 text-emerald-700 dark:bg-emerald-500/10 dark:text-emerald-400 border-emerald-200/50 dark:border-emerald-500/20",partial:"bg-amber-100/50 text-amber-700 dark:bg-amber-500/10 dark:text-amber-400 border-amber-200/50 dark:border-amber-500/20",overdue:"bg-rose-100/50 text-rose-700 dark:bg-rose-500/10 dark:text-rose-400 border-rose-200/50 dark:border-rose-500/20",credit:"bg-blue-100/50 text-blue-700 dark:bg-blue-500/10 dark:text-blue-400 border-blue-200/50 dark:border-blue-500/20",no_balance:"bg-slate-100/50 text-slate-700 dark:bg-slate-500/10 dark:text-slate-400 border-slate-200/50 dark:border-slate-500/20"},n={paid:"Paid",partial:"Partial",overdue:"Overdue",credit:"Credit",no_balance:"Settled"};return o.jsx("span",{className:pe("text-[10px] uppercase font-bold px-2 py-0.5 rounded-full border tracking-wide",e[t]),children:n[t]})},JJ=({tenant:t})=>{var l;const e=qr(),[n,r]=D.useState(!1),i=Math.ceil((new Date(t.leaseEndDate).getTime()-new Date().getTime())/(1e3*3600*24)),s=i<=60&&i>0,a=i<=0;return o.jsxs("div",{className:pe("group border rounded-xl bg-card transition-all duration-200",n?"shadow-md ring-1 ring-primary/5 border-primary/20":"hover:border-primary/20 hover:shadow-sm"),children:[o.jsxs("div",{className:"p-4 flex flex-col md:flex-row md:items-center gap-4 cursor-pointer",onClick:()=>r(!n),children:[o.jsx("div",{className:"flex-1 min-w-[200px]",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-100 dark:bg-slate-800 flex items-center justify-center text-muted-foreground font-medium text-sm border",children:t.name.split(" ").slice(0,2).map(c=>c[0]).join("")}),o.jsxs("div",{children:[o.jsxs("h3",{className:"font-semibold text-foreground flex items-center gap-2",children:[t.name,t.rentStatus==="overdue"&&o.jsx(ui,{size:14,className:"text-rose-500"}),t.tags.includes("vip")&&o.jsx("span",{className:"text-[10px] bg-indigo-100 text-indigo-700 px-1 rounded-sm border border-indigo-200",children:"VIP"})]}),o.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[o.jsx(xa,{size:12})," ",t.email]})]})]})}),o.jsxs("div",{className:"flex-1 md:max-w-[200px]",children:[o.jsx("div",{className:"text-sm font-medium text-foreground",children:t.propertyName}),o.jsxs("div",{className:"text-xs text-muted-foreground",children:["Unit ",t.unitNumber]})]}),o.jsxs("div",{className:"flex-[2] grid grid-cols-3 gap-4 items-center",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Lease"}),o.jsx("div",{className:pe("text-sm font-medium flex items-center gap-1.5",s?"text-amber-600 dark:text-amber-500":a?"text-rose-600":"text-foreground"),children:s?o.jsxs(o.Fragment,{children:[o.jsx(Pn,{size:14})," Ends in ",i," days"]}):a?o.jsx(o.Fragment,{children:"Expired"}):o.jsx("span",{className:"capitalize",children:t.leaseStatus.replace(/_/g," ")})})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Status"}),o.jsx(KJ,{status:t.rentStatus})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Balance"}),o.jsxs("div",{className:pe("text-sm font-medium",t.balance>0?"text-rose-600 dark:text-rose-500":"text-foreground"),children:["$",t.balance>0?t.balance.toLocaleString():"0.00"]})]})]}),o.jsxs("div",{className:"flex items-center gap-3 justify-end min-w-[50px]",children:[t.maintenanceRequestCount>0&&o.jsx("div",{className:"p-1.5 rounded-full bg-amber-100/50 text-amber-600 dark:bg-amber-900/20 dark:text-amber-500 border border-amber-200/30",title:"Open Maintenance Req",children:o.jsx(Ft,{size:14})}),o.jsx("div",{className:pe("transition-transform duration-200 text-muted-foreground",n&&"rotate-180"),children:o.jsx(vs,{size:20})})]})]}),o.jsx(cn,{children:n&&o.jsx(Et.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"overflow-hidden border-t border-border/50 bg-slate-50/50 dark:bg-slate-900/20",children:o.jsxs("div",{className:"p-6 grid grid-cols-1 md:grid-cols-4 gap-6",children:[o.jsxs("div",{className:"space-y-3",children:[o.jsxs("h4",{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground flex items-center gap-2",children:[o.jsx(Pn,{size:14})," Lease Details"]}),o.jsxs("div",{className:"space-y-2 text-sm",children:[o.jsxs("div",{className:"flex justify-between border-b pb-1 border-border/50",children:[o.jsx("span",{className:"text-muted-foreground",children:"Ends"}),o.jsx("span",{className:"font-medium",children:t.leaseEndDate})]}),o.jsxs("div",{className:"flex justify-between border-b pb-1 border-border/50",children:[o.jsx("span",{className:"text-muted-foreground",children:"Rent"}),o.jsxs("span",{className:"font-medium",children:["$",t.rentAmount.toLocaleString(),"/mo"]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-muted-foreground",children:"Start"}),o.jsx("span",{className:"font-medium",children:t.leaseStartDate})]})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("h4",{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground flex items-center gap-2",children:[o.jsx(vr,{size:14})," Payment"]}),o.jsxs("div",{className:"space-y-2 text-sm",children:[o.jsxs("div",{className:"flex justify-between border-b pb-1 border-border/50",children:[o.jsx("span",{className:"text-muted-foreground",children:"Last Paid"}),o.jsx("span",{className:"font-medium",children:t.lastPaymentDate||""})]}),o.jsxs("div",{className:"flex justify-between border-b pb-1 border-border/50",children:[o.jsx("span",{className:"text-muted-foreground",children:"Method"}),o.jsx("span",{className:"font-medium capitalize",children:((l=t.paymentMethod)==null?void 0:l.replace("_"," "))||""})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-muted-foreground",children:"Auto-Pay"}),o.jsx("span",{className:pe("font-medium",t.autopayEnabled?"text-emerald-600":"text-muted-foreground"),children:t.autopayEnabled?"Enabled":"Off"})]})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("h4",{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground flex items-center gap-2",children:[o.jsx(Ft,{size:14})," Maintenance"]}),t.maintenanceRequestCount>0?o.jsxs("div",{className:"p-3 rounded-md bg-amber-50 dark:bg-amber-900/10 border border-amber-200/50 dark:border-amber-800/30",children:[o.jsxs("div",{className:"text-amber-700 dark:text-amber-500 font-medium text-sm flex items-center gap-2",children:[o.jsx(zs,{size:16}),t.maintenanceRequestCount," Active Request",t.maintenanceRequestCount>1?"s":""]}),t.lastMaintenanceRequestDate&&o.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Last: ",t.lastMaintenanceRequestDate]})]}):o.jsxs("div",{className:"flex items-center gap-2 text-emerald-600 dark:text-emerald-500 text-sm mt-2",children:[o.jsx($x,{size:16})," No active requests"]})]}),o.jsxs("div",{className:"space-y-3 md:border-l md:pl-6 border-border/50",children:[o.jsx("h4",{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground",children:"Actions"}),o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsxs("button",{className:"flex items-center gap-2 w-full px-3 py-2 text-sm font-medium text-foreground bg-white dark:bg-card border rounded-md hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors shadow-sm",children:[o.jsx(xa,{size:14,className:"text-muted-foreground"})," Message Tenant"]}),o.jsxs("button",{className:"flex items-center gap-2 w-full px-3 py-2 text-sm font-medium text-foreground bg-white dark:bg-card border rounded-md hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors shadow-sm",children:[o.jsx(vr,{size:14,className:"text-muted-foreground"})," Record Payment"]}),o.jsxs("button",{onClick:()=>e(`/app/tenants/${t.id}`),className:"flex items-center gap-2 w-full px-3 py-2 text-sm font-medium text-foreground bg-white dark:bg-card border rounded-md hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors shadow-sm",children:[o.jsx(Oc,{size:14,className:"text-muted-foreground"})," View Profile & Docs"]})]})]})]})})})]})};function QJ(){const[t,e]=D.useState(!1),[n,r]=D.useState(""),[i,s]=D.useState(C0),[a,l]=D.useState(null),c=m=>{l(g=>(g==null?void 0:g.key)===m?{key:m,direction:g.direction==="asc"?"desc":"asc"}:{key:m,direction:"asc"})},u=D.useMemo(()=>{let m=MI.filter(g=>{const v=n.toLowerCase();if(!(g.name.toLowerCase().includes(v)||g.email.toLowerCase().includes(v)||g.unitNumber.toLowerCase().includes(v))||i.status.length>0&&!i.status.includes(g.leaseStatus)||i.leaseStatus.length>0&&!i.leaseStatus.includes(g.leaseStatus)||i.rentStatus.length>0&&!i.rentStatus.includes(g.rentStatus)||i.propertyIds.length>0&&!i.propertyIds.includes(g.propertyId)||i.hasOpenTickets&&g.maintenanceRequestCount===0||i.balanceMin!==void 0&&g.balance<i.balanceMin||i.balanceMax!==void 0&&g.balance>i.balanceMax)return!1;if(i.leaseExpiringDays){const b=Math.ceil((new Date(g.leaseEndDate).getTime()-new Date().getTime())/864e5);if(b<0||b>i.leaseExpiringDays)return!1}return!0});return a&&m.sort((g,v)=>{const _=g[a.key],b=v[a.key];if(_===b)return 0;if(_==null)return 1;if(b==null)return-1;const x=_>b?1:-1;return a.direction==="asc"?x:-x}),m},[n,i,a]),d=i.status.length+i.rentStatus.length+i.leaseStatus.length+i.propertyIds.length+(i.hasOpenTickets?1:0)+(i.leaseExpiringDays?1:0)+(i.balanceMin||i.balanceMax?1:0),f=({label:m,sortKey:g,className:v})=>o.jsxs("div",{onClick:()=>c(g),className:pe("flex items-center gap-1 cursor-pointer hover:text-foreground transition-colors select-none",(a==null?void 0:a.key)===g?"text-primary font-bold":"",v),children:[m,(a==null?void 0:a.key)===g?a.direction==="asc"?o.jsx(FV,{size:12}):o.jsx(IV,{size:12}):o.jsx(dL,{size:12,className:"opacity-0 group-hover:opacity-50 transition-opacity"})]});return o.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Tenants"}),o.jsx("p",{className:"text-muted-foreground",children:"All active and historical renters."})]}),o.jsx("div",{className:"flex items-center gap-2",children:o.jsxs("button",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-primary text-primary-foreground hover:bg-primary/90 transition-colors font-medium text-sm",children:[o.jsx(Ws,{size:16}),"Add Tenant"]})})]}),o.jsxs("div",{className:"flex items-center gap-2 bg-card p-2 rounded-lg border shadow-sm max-w-2xl",children:[o.jsx(di,{className:"text-muted-foreground ml-2",size:18}),o.jsx("input",{type:"text",placeholder:"Search by name, email, or unit...",value:n,onChange:m=>r(m.target.value),className:"flex-1 bg-transparent border-none focus:ring-0 text-sm placeholder:text-muted-foreground outline-none"}),o.jsx("div",{className:"w-px h-6 bg-border mx-2"}),o.jsxs("button",{onClick:()=>e(!0),className:pe("flex items-center gap-2 px-3 py-1.5 rounded-md text-sm font-medium transition-colors",d>0?"bg-primary/10 text-primary hover:bg-primary/20":"text-muted-foreground hover:text-foreground hover:bg-slate-100 dark:hover:bg-slate-800"),children:[o.jsx(po,{size:14}),"Filters",d>0&&o.jsx("span",{className:"bg-primary text-primary-foreground text-[10px] px-1.5 rounded-full h-4 min-w-[1rem] flex items-center justify-center",children:d})]})]}),d>0&&o.jsxs("div",{className:"flex gap-2 flex-wrap",children:[i.hasOpenTickets&&o.jsx("div",{className:"text-xs bg-card border rounded-full px-2 py-1 flex items-center gap-1",children:"Checking Maintenance"}),i.propertyIds.length>0&&o.jsxs("div",{className:"text-xs bg-card border rounded-full px-2 py-1 flex items-center gap-1",children:[i.propertyIds.length," Properties"]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"hidden md:flex px-4 py-2 items-center gap-4 text-xs font-semibold text-muted-foreground uppercase tracking-wider group",children:[o.jsx("div",{className:"flex-1 min-w-[200px]",children:o.jsx(f,{label:"Tenant",sortKey:"name"})}),o.jsx("div",{className:"flex-1 max-w-[200px]",children:o.jsx(f,{label:"Property",sortKey:"propertyName"})}),o.jsxs("div",{className:"flex-[2] grid grid-cols-3 gap-4",children:[o.jsx(f,{label:"Lease",sortKey:"leaseStatus"}),o.jsx(f,{label:"Status",sortKey:"rentStatus"}),o.jsx(f,{label:"Balance",sortKey:"balance"})]}),o.jsx("div",{className:"min-w-[50px]"})]}),u.length>0?u.map(m=>o.jsx(JJ,{tenant:m},m.id)):o.jsxs("div",{className:"text-center py-12 text-muted-foreground bg-card/50 rounded-xl border border-dashed",children:[o.jsx("p",{children:"No tenants found matching your criteria."}),o.jsx("button",{onClick:()=>{s(C0),r("")},className:"mt-2 text-primary hover:underline text-sm font-medium",children:"Clear all filters"})]})]}),o.jsx(ZJ,{isOpen:t,onClose:()=>e(!1),currentFilters:i,onApply:s,onReset:()=>s(C0)})]})}const EI=6048e5,eQ=864e5,tQ=36e5,Jg=43200,$3=1440,Z3=Symbol.for("constructDateFrom");function Gs(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&Z3 in t?t[Z3](e):t instanceof Date?new t.constructor(e):new Date(e)}function tr(t,e){return Gs(e||t,t)}function nQ(t,e,n){const r=tr(t,n==null?void 0:n.in);return isNaN(e)?Gs((n==null?void 0:n.in)||t,NaN):(e&&r.setDate(r.getDate()+e),r)}function rQ(t,e,n){return Gs((n==null?void 0:n.in)||t,+tr(t)+e)}function iQ(t,e,n){return rQ(t,e*tQ,n)}let sQ={};function zp(){return sQ}function xp(t,e){var l,c,u,d;const n=zp(),r=(e==null?void 0:e.weekStartsOn)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,i=tr(t,e==null?void 0:e.in),s=i.getDay(),a=(s<r?7:0)+s-r;return i.setDate(i.getDate()-a),i.setHours(0,0,0,0),i}function wx(t,e){return xp(t,{...e,weekStartsOn:1})}function NI(t,e){const n=tr(t,e==null?void 0:e.in),r=n.getFullYear(),i=Gs(n,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);const s=wx(i),a=Gs(n,0);a.setFullYear(r,0,4),a.setHours(0,0,0,0);const l=wx(a);return n.getTime()>=s.getTime()?r+1:n.getTime()>=l.getTime()?r:r-1}function Sx(t){const e=tr(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function jv(t,...e){const n=Gs.bind(null,t||e.find(r=>typeof r=="object"));return e.map(n)}function K3(t,e){const n=tr(t,e==null?void 0:e.in);return n.setHours(0,0,0,0),n}function aQ(t,e,n){const[r,i]=jv(n==null?void 0:n.in,t,e),s=K3(r),a=K3(i),l=+s-Sx(s),c=+a-Sx(a);return Math.round((l-c)/eQ)}function oQ(t,e){const n=NI(t,e),r=Gs((e==null?void 0:e.in)||t,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),wx(r)}function k0(t,e){const n=+tr(t)-+tr(e);return n<0?-1:n>0?1:n}function lQ(t){return Gs(t,Date.now())}function cQ(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function uQ(t){return!(!cQ(t)&&typeof t!="number"||isNaN(+tr(t)))}function dQ(t,e,n){const[r,i]=jv(n==null?void 0:n.in,t,e),s=r.getFullYear()-i.getFullYear(),a=r.getMonth()-i.getMonth();return s*12+a}function hQ(t){return e=>{const r=(t?Math[t]:Math.trunc)(e);return r===0?0:r}}function fQ(t,e){return+tr(t)-+tr(e)}function pQ(t,e){const n=tr(t,e==null?void 0:e.in);return n.setHours(23,59,59,999),n}function mQ(t,e){const n=tr(t,e==null?void 0:e.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function gQ(t,e){const n=tr(t,e==null?void 0:e.in);return+pQ(n,e)==+mQ(n,e)}function xQ(t,e,n){const[r,i,s]=jv(n==null?void 0:n.in,t,t,e),a=k0(i,s),l=Math.abs(dQ(i,s));if(l<1)return 0;i.getMonth()===1&&i.getDate()>27&&i.setDate(30),i.setMonth(i.getMonth()-a*l);let c=k0(i,s)===-a;gQ(r)&&l===1&&k0(r,s)===1&&(c=!1);const u=a*(l-+c);return u===0?0:u}function vQ(t,e,n){const r=fQ(t,e)/1e3;return hQ(n==null?void 0:n.roundingMethod)(r)}function yQ(t,e){const n=tr(t,e==null?void 0:e.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const bQ={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},_Q=(t,e,n)=>{let r;const i=bQ[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function bb(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const wQ={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},SQ={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},MQ={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},EQ={date:bb({formats:wQ,defaultWidth:"full"}),time:bb({formats:SQ,defaultWidth:"full"}),dateTime:bb({formats:MQ,defaultWidth:"full"})},NQ={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},TQ=(t,e,n,r)=>NQ[t];function Wh(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const a=t.defaultFormattingWidth||t.defaultWidth,l=n!=null&&n.width?String(n.width):a;i=t.formattingValues[l]||t.formattingValues[a]}else{const a=t.defaultWidth,l=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[l]||t.values[a]}const s=t.argumentCallback?t.argumentCallback(e):e;return i[s]}}const AQ={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},CQ={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},kQ={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},PQ={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},RQ={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},jQ={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},LQ=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},DQ={ordinalNumber:LQ,era:Wh({values:AQ,defaultWidth:"wide"}),quarter:Wh({values:CQ,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Wh({values:kQ,defaultWidth:"wide"}),day:Wh({values:PQ,defaultWidth:"wide"}),dayPeriod:Wh({values:RQ,defaultWidth:"wide",formattingValues:jQ,defaultFormattingWidth:"wide"})};function Xh(t){return(e,n={})=>{const r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;const a=s[0],l=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(l)?UQ(l,f=>f.test(a)):IQ(l,f=>f.test(a));let u;u=t.valueCallback?t.valueCallback(c):c,u=n.valueCallback?n.valueCallback(u):u;const d=e.slice(a.length);return{value:u,rest:d}}}function IQ(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function UQ(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function OQ(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],s=e.match(t.parsePattern);if(!s)return null;let a=t.valueCallback?t.valueCallback(s[0]):s[0];a=n.valueCallback?n.valueCallback(a):a;const l=e.slice(i.length);return{value:a,rest:l}}}const FQ=/^(\d+)(th|st|nd|rd)?/i,zQ=/\d+/i,BQ={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},VQ={any:[/^b/i,/^(a|c)/i]},HQ={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},GQ={any:[/1/i,/2/i,/3/i,/4/i]},WQ={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},XQ={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},YQ={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},qQ={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},$Q={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},ZQ={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},KQ={ordinalNumber:OQ({matchPattern:FQ,parsePattern:zQ,valueCallback:t=>parseInt(t,10)}),era:Xh({matchPatterns:BQ,defaultMatchWidth:"wide",parsePatterns:VQ,defaultParseWidth:"any"}),quarter:Xh({matchPatterns:HQ,defaultMatchWidth:"wide",parsePatterns:GQ,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Xh({matchPatterns:WQ,defaultMatchWidth:"wide",parsePatterns:XQ,defaultParseWidth:"any"}),day:Xh({matchPatterns:YQ,defaultMatchWidth:"wide",parsePatterns:qQ,defaultParseWidth:"any"}),dayPeriod:Xh({matchPatterns:$Q,defaultMatchWidth:"any",parsePatterns:ZQ,defaultParseWidth:"any"})},TI={code:"en-US",formatDistance:_Q,formatLong:EQ,formatRelative:TQ,localize:DQ,match:KQ,options:{weekStartsOn:0,firstWeekContainsDate:1}};function JQ(t,e){const n=tr(t,e==null?void 0:e.in);return aQ(n,yQ(n))+1}function QQ(t,e){const n=tr(t,e==null?void 0:e.in),r=+wx(n)-+oQ(n);return Math.round(r/EI)+1}function AI(t,e){var d,f,m,g;const n=tr(t,e==null?void 0:e.in),r=n.getFullYear(),i=zp(),s=(e==null?void 0:e.firstWeekContainsDate)??((f=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??i.firstWeekContainsDate??((g=(m=i.locale)==null?void 0:m.options)==null?void 0:g.firstWeekContainsDate)??1,a=Gs((e==null?void 0:e.in)||t,0);a.setFullYear(r+1,0,s),a.setHours(0,0,0,0);const l=xp(a,e),c=Gs((e==null?void 0:e.in)||t,0);c.setFullYear(r,0,s),c.setHours(0,0,0,0);const u=xp(c,e);return+n>=+l?r+1:+n>=+u?r:r-1}function eee(t,e){var l,c,u,d;const n=zp(),r=(e==null?void 0:e.firstWeekContainsDate)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,i=AI(t,e),s=Gs((e==null?void 0:e.in)||t,0);return s.setFullYear(i,0,r),s.setHours(0,0,0,0),xp(s,e)}function tee(t,e){const n=tr(t,e==null?void 0:e.in),r=+xp(n,e)-+eee(n,e);return Math.round(r/EI)+1}function Kt(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const Uo={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return Kt(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):Kt(n+1,2)},d(t,e){return Kt(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return Kt(t.getHours()%12||12,e.length)},H(t,e){return Kt(t.getHours(),e.length)},m(t,e){return Kt(t.getMinutes(),e.length)},s(t,e){return Kt(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return Kt(i,e.length)}},Pu={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},J3={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return Uo.y(t,e)},Y:function(t,e,n,r){const i=AI(t,r),s=i>0?i:1-i;if(e==="YY"){const a=s%100;return Kt(a,2)}return e==="Yo"?n.ordinalNumber(s,{unit:"year"}):Kt(s,e.length)},R:function(t,e){const n=NI(t);return Kt(n,e.length)},u:function(t,e){const n=t.getFullYear();return Kt(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Kt(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Kt(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return Uo.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return Kt(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const i=tee(t,r);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):Kt(i,e.length)},I:function(t,e,n){const r=QQ(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):Kt(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Uo.d(t,e)},D:function(t,e,n){const r=JQ(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Kt(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const i=t.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return Kt(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const i=t.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return Kt(s,e.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return Kt(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let i;switch(r===12?i=Pu.noon:r===0?i=Pu.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let i;switch(r>=17?i=Pu.evening:r>=12?i=Pu.afternoon:r>=4?i=Pu.morning:i=Pu.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Uo.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Uo.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Kt(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):Kt(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Uo.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Uo.s(t,e)},S:function(t,e){return Uo.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return ek(r);case"XXXX":case"XX":return ac(r);case"XXXXX":case"XXX":default:return ac(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return ek(r);case"xxxx":case"xx":return ac(r);case"xxxxx":case"xxx":default:return ac(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Q3(r,":");case"OOOO":default:return"GMT"+ac(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Q3(r,":");case"zzzz":default:return"GMT"+ac(r,":")}},t:function(t,e,n){const r=Math.trunc(+t/1e3);return Kt(r,e.length)},T:function(t,e,n){return Kt(+t,e.length)}};function Q3(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Math.trunc(r/60),s=r%60;return s===0?n+String(i):n+String(i)+e+Kt(s,2)}function ek(t,e){return t%60===0?(t>0?"-":"+")+Kt(Math.abs(t)/60,2):ac(t,e)}function ac(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Kt(Math.trunc(r/60),2),s=Kt(r%60,2);return n+i+e+s}const tk=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},CI=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},nee=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return tk(t,e);let s;switch(r){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",tk(r,e)).replace("{{time}}",CI(i,e))},ree={p:CI,P:nee},iee=/^D+$/,see=/^Y+$/,aee=["D","DD","YY","YYYY"];function oee(t){return iee.test(t)}function lee(t){return see.test(t)}function cee(t,e,n){const r=uee(t,e,n);if(console.warn(r),aee.includes(t))throw new RangeError(r)}function uee(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const dee=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,hee=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,fee=/^'([^]*?)'?$/,pee=/''/g,mee=/[a-zA-Z]/;function Os(t,e,n){var d,f,m,g,v,_,b,x;const r=zp(),i=(n==null?void 0:n.locale)??r.locale??TI,s=(n==null?void 0:n.firstWeekContainsDate)??((f=(d=n==null?void 0:n.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??r.firstWeekContainsDate??((g=(m=r.locale)==null?void 0:m.options)==null?void 0:g.firstWeekContainsDate)??1,a=(n==null?void 0:n.weekStartsOn)??((_=(v=n==null?void 0:n.locale)==null?void 0:v.options)==null?void 0:_.weekStartsOn)??r.weekStartsOn??((x=(b=r.locale)==null?void 0:b.options)==null?void 0:x.weekStartsOn)??0,l=tr(t,n==null?void 0:n.in);if(!uQ(l))throw new RangeError("Invalid time value");let c=e.match(hee).map(y=>{const S=y[0];if(S==="p"||S==="P"){const E=ree[S];return E(y,i.formatLong)}return y}).join("").match(dee).map(y=>{if(y==="''")return{isToken:!1,value:"'"};const S=y[0];if(S==="'")return{isToken:!1,value:gee(y)};if(J3[S])return{isToken:!0,value:y};if(S.match(mee))throw new RangeError("Format string contains an unescaped latin alphabet character `"+S+"`");return{isToken:!1,value:y}});i.localize.preprocessor&&(c=i.localize.preprocessor(l,c));const u={firstWeekContainsDate:s,weekStartsOn:a,locale:i};return c.map(y=>{if(!y.isToken)return y.value;const S=y.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&lee(S)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&oee(S))&&cee(S,e,String(t));const E=J3[S[0]];return E(l,S,i.localize,u)}).join("")}function gee(t){const e=t.match(fee);return e?e[1].replace(pee,"'"):t}function xee(t,e,n){const r=zp(),i=(n==null?void 0:n.locale)??r.locale??TI,s=2520,a=k0(t,e);if(isNaN(a))throw new RangeError("Invalid time value");const l=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:a}),[c,u]=jv(n==null?void 0:n.in,...a>0?[e,t]:[t,e]),d=vQ(u,c),f=(Sx(u)-Sx(c))/1e3,m=Math.round((d-f)/60);let g;if(m<2)return n!=null&&n.includeSeconds?d<5?i.formatDistance("lessThanXSeconds",5,l):d<10?i.formatDistance("lessThanXSeconds",10,l):d<20?i.formatDistance("lessThanXSeconds",20,l):d<40?i.formatDistance("halfAMinute",0,l):d<60?i.formatDistance("lessThanXMinutes",1,l):i.formatDistance("xMinutes",1,l):m===0?i.formatDistance("lessThanXMinutes",1,l):i.formatDistance("xMinutes",m,l);if(m<45)return i.formatDistance("xMinutes",m,l);if(m<90)return i.formatDistance("aboutXHours",1,l);if(m<$3){const v=Math.round(m/60);return i.formatDistance("aboutXHours",v,l)}else{if(m<s)return i.formatDistance("xDays",1,l);if(m<Jg){const v=Math.round(m/$3);return i.formatDistance("xDays",v,l)}else if(m<Jg*2)return g=Math.round(m/Jg),i.formatDistance("aboutXMonths",g,l)}if(g=xQ(u,c),g<12){const v=Math.round(m/Jg);return i.formatDistance("xMonths",v,l)}else{const v=g%12,_=Math.trunc(g/12);return v<3?i.formatDistance("aboutXYears",_,l):v<9?i.formatDistance("overXYears",_,l):i.formatDistance("almostXYears",_+1,l)}}function vee(t,e){return xee(t,lQ(t),e)}function os(t,e,n){return nQ(t,-e,n)}function Yh(t,e,n){return iQ(t,-e,n)}const X_=[{id:"a1",type:"payment",description:"Rent payment of $1,600 received",actor:"System",timestamp:"2024-01-01T10:00:00"},{id:"a2",type:"maintenance",description:'opened ticket #M-1024: "Leaky Faucet"',actor:"Jane Smith",timestamp:"2023-12-28T14:30:00"},{id:"a3",type:"communication",description:"Sent lease renewal reminder email",actor:"System",timestamp:"2023-12-15T09:00:00"},{id:"a4",type:"note",description:"Tenant mentioned getting a dog next month",actor:"Admin",timestamp:"2023-11-20T11:15:00"}],yee=[{id:"h1",name:"James Smith",role:"occupant",relation:"Spouse",phone:"555-0102",email:"james.s@example.com"},{id:"h2",name:"Mary Johnson",role:"emergency",relation:"Mother",phone:"555-0199"}];function bee(){const{id:t}=Vx(),e=qr(),[n,r]=D.useState("overview"),i=MI.find(a=>a.id===t);if(!i)return o.jsxs("div",{className:"p-8 flex flex-col items-center justify-center text-center",children:[o.jsx("div",{className:"w-16 h-16 bg-muted rounded-full flex items-center justify-center mb-4",children:o.jsx(Vs,{className:"w-8 h-8 text-muted-foreground"})}),o.jsx("h2",{className:"text-xl font-semibold",children:"Tenant Not Found"}),o.jsx("p",{className:"text-muted-foreground mt-2 mb-6",children:"The tenant profile you are looking for does not exist."}),o.jsx("button",{onClick:()=>e("/app/tenants"),className:"text-primary hover:underline",children:"Return to Tenants List"})]});const s=a=>{switch(a){case"active":return"bg-emerald-500/15 text-emerald-700 dark:text-emerald-400 border-emerald-200/50";case"inactive":return"bg-slate-500/15 text-slate-700 dark:text-slate-400 border-slate-200/50";case"pending_move_in":return"bg-blue-500/15 text-blue-700 dark:text-blue-400 border-blue-200/50";case"eviction":return"bg-red-500/15 text-red-700 dark:text-red-400 border-red-200/50";default:return"bg-slate-100 text-slate-600 border-slate-200"}};return o.jsxs("div",{className:"max-w-[1600px] mx-auto min-h-screen pb-20",children:[o.jsxs("div",{className:"bg-background border-b sticky top-0 z-30 pt-6 pb-0 px-8 mb-6",children:[o.jsxs("div",{className:"flex flex-col md:flex-row gap-6 mb-8",children:[o.jsx("div",{className:"shrink-0",children:o.jsx("div",{className:"w-24 h-24 rounded-2xl bg-gradient-to-br from-indigo-100 to-slate-100 dark:from-indigo-900/50 dark:to-slate-900/50 border flex items-center justify-center text-3xl font-bold text-indigo-600 dark:text-indigo-400 shadow-sm",children:i.name.split(" ").map(a=>a[0]).join("")})}),o.jsx("div",{className:"flex-1 min-w-0 pt-1",children:o.jsxs("div",{className:"flex items-start justify-between gap-4",children:[o.jsxs("div",{children:[o.jsxs("h1",{className:"text-3xl font-bold tracking-tight text-foreground flex items-center gap-3",children:[i.name,i.tags.map(a=>o.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-[10px] font-bold uppercase tracking-wide bg-indigo-50 text-indigo-600 border border-indigo-100",children:a.replace("_"," ")},a))]}),o.jsxs("div",{className:"mt-3 flex flex-wrap gap-4 text-sm text-muted-foreground",children:[o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx(xa,{className:"w-4 h-4 text-slate-400"}),o.jsx("a",{href:`mailto:${i.email}`,className:"hover:text-primary transition-colors",children:i.email})]}),o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx(kS,{className:"w-4 h-4 text-slate-400"}),o.jsx("a",{href:`tel:${i.phone}`,className:"hover:text-primary transition-colors",children:i.phone||"No phone"})]}),o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx(Pn,{className:"w-4 h-4 text-slate-400"}),o.jsxs("span",{children:["Customer since ",Os(new Date(i.createdAt),"MMM yyyy")]})]})]})]}),o.jsxs("div",{className:"flex flex-col items-end gap-2",children:[o.jsxs("div",{className:pe("px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wide border",s(i.leaseStatus)),children:["Lease: ",i.leaseStatus.replace(/_/g," ")]}),o.jsxs("div",{className:pe("px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wide border",i.rentStatus==="paid"?"bg-emerald-50 text-emerald-600 border-emerald-100":i.rentStatus==="overdue"?"bg-red-50 text-red-600 border-red-100":"bg-amber-50 text-amber-600 border-amber-100"),children:["Rent: ",i.rentStatus]})]})]})})]}),o.jsx("div",{className:"flex items-center gap-1 overflow-x-auto no-scrollbar mask-gradient-right",children:[{id:"overview",label:"Overview",icon:ga},{id:"leases",label:"Leases",icon:Kx},{id:"payments",label:"Payments",icon:vr},{id:"maintenance",label:"Maintenance",icon:Ft},{id:"documents",label:"Documents",icon:rn},{id:"messages",label:"Messages",icon:Bs},{id:"household",label:"Household",icon:ev},{id:"notes",label:"Notes",icon:ao},{id:"activity",label:"Activity",icon:bL}].map(a=>o.jsxs("button",{onClick:()=>r(a.id),className:pe("flex items-center gap-2 px-4 py-3 text-sm font-medium border-b-2 transition-all whitespace-nowrap",n===a.id?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground hover:border-border"),children:[o.jsx(a.icon,{className:"w-4 h-4"}),a.label]},a.id))})]}),o.jsx("div",{className:"px-8",children:o.jsxs("div",{className:"grid grid-cols-12 gap-8",children:[o.jsx("div",{className:"col-span-12 lg:col-span-9 space-y-6",children:o.jsx(cn,{mode:"wait",children:o.jsxs(Et.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:[n==="overview"&&o.jsx(_ee,{tenant:i}),n==="leases"&&o.jsx(wee,{tenant:i}),n==="payments"&&o.jsx(See,{tenant:i}),n==="household"&&o.jsx(Mee,{tenant:i}),n==="activity"&&o.jsx(Eee,{tenant:i}),["maintenance","documents","messages","notes"].includes(n)&&o.jsxs("div",{className:"p-12 text-center border rounded-xl border-dashed bg-muted/30",children:[o.jsx(Ft,{className:"w-12 h-12 text-muted-foreground/20 mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-medium text-foreground",children:"Work in Progress"}),o.jsxs("p",{className:"text-muted-foreground",children:["The ",n," section is currently under development."]})]})]},n)})}),o.jsxs("div",{className:"col-span-12 lg:col-span-3 space-y-6",children:[o.jsxs("div",{className:"bg-card rounded-xl border shadow-sm p-4 sticky top-48",children:[o.jsx("h3",{className:"text-xs font-bold uppercase tracking-wider text-muted-foreground mb-4",children:"Quick Actions"}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("button",{className:"w-full flex items-center gap-3 px-3 py-2 text-sm font-medium text-foreground bg-secondary/50 hover:bg-secondary rounded-lg transition-colors text-left group",children:[o.jsx("div",{className:"p-1.5 bg-background rounded-md shadow-sm group-hover:scale-105 transition-transform",children:o.jsx(Bs,{className:"w-4 h-4 text-blue-600"})}),"Message Tenant"]}),o.jsxs("button",{className:"w-full flex items-center gap-3 px-3 py-2 text-sm font-medium text-foreground bg-secondary/50 hover:bg-secondary rounded-lg transition-colors text-left group",children:[o.jsx("div",{className:"p-1.5 bg-background rounded-md shadow-sm group-hover:scale-105 transition-transform",children:o.jsx(ki,{className:"w-4 h-4 text-emerald-600"})}),"Record Payment"]}),o.jsxs("button",{className:"w-full flex items-center gap-3 px-3 py-2 text-sm font-medium text-foreground bg-secondary/50 hover:bg-secondary rounded-lg transition-colors text-left group",children:[o.jsx("div",{className:"p-1.5 bg-background rounded-md shadow-sm group-hover:scale-105 transition-transform",children:o.jsx(Ft,{className:"w-4 h-4 text-amber-600"})}),"Create Ticket"]}),o.jsx("div",{className:"h-px bg-border my-2"}),o.jsxs("button",{className:"w-full flex items-center gap-3 px-3 py-2 text-sm font-medium text-muted-foreground hover:text-foreground hover:bg-muted/50 rounded-lg transition-colors text-left",children:[o.jsx(Oc,{className:"w-4 h-4"}),"More Options"]})]})]}),o.jsxs("div",{className:"bg-card rounded-xl border shadow-sm p-5",children:[o.jsx("h3",{className:"text-xs font-bold uppercase tracking-wider text-muted-foreground mb-4",children:"Current Residence"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-xs text-muted-foreground block mb-1",children:"Property"}),o.jsxs("div",{className:"font-medium text-sm flex items-center gap-2",children:[o.jsx(ga,{className:"w-3.5 h-3.5 text-muted-foreground"}),i.propertyName]})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-xs text-muted-foreground block mb-1",children:"Unit"}),o.jsxs("div",{className:"font-medium text-sm flex items-center gap-2",children:[o.jsx(Tp,{className:"w-3.5 h-3.5 text-muted-foreground"}),i.unitNumber]})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-xs text-muted-foreground block mb-1",children:"Lease Term"}),o.jsxs("div",{className:"font-medium text-sm",children:[Os(new Date(i.leaseStartDate),"MMM d, yyyy")," - ",Os(new Date(i.leaseEndDate),"MMM d, yyyy")]})]})]})]})]})]})})]})}function _ee({tenant:t}){return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsx(_b,{label:"Current Balance",value:`$${t.balance.toLocaleString()}`,subtext:t.balance>0?"Overdue":"In good standing",status:t.balance>0?"critical":"good",icon:vr}),o.jsx(_b,{label:"Monthly Rent",value:`$${t.rentAmount.toLocaleString()}`,subtext:"Due on the 1st",status:"neutral",icon:Bd}),o.jsx(_b,{label:"Open Tickets",value:t.maintenanceRequestCount.toString(),subtext:t.maintenanceRequestCount>0?"Review required":"No active requests",status:t.maintenanceRequestCount>0?"warning":"good",icon:Ft})]}),o.jsxs("div",{className:"bg-card rounded-xl border shadow-sm",children:[o.jsxs("div",{className:"px-6 py-4 border-b flex items-center justify-between",children:[o.jsx("h3",{className:"font-semibold text-sm",children:"Recent Activity"}),o.jsx("button",{className:"text-xs font-medium text-primary hover:underline",children:"View All"})]}),o.jsx("div",{className:"p-0",children:X_.map((e,n)=>o.jsxs("div",{className:pe("flex gap-4 p-4 hover:bg-muted/30 transition-colors",n!==X_.length-1&&"border-b"),children:[o.jsx("div",{className:"shrink-0 mt-1",children:o.jsxs("div",{className:"w-8 h-8 rounded-full bg-slate-100 dark:bg-slate-800 flex items-center justify-center",children:[e.type==="payment"&&o.jsx(vr,{className:"w-4 h-4 text-emerald-600"}),e.type==="maintenance"&&o.jsx(Ft,{className:"w-4 h-4 text-amber-600"}),e.type==="communication"&&o.jsx(xa,{className:"w-4 h-4 text-blue-600"}),e.type==="note"&&o.jsx(rn,{className:"w-4 h-4 text-slate-600"})]})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"text-sm font-medium text-foreground",children:e.description}),o.jsxs("div",{className:"flex items-center gap-2 mt-1 text-xs text-muted-foreground",children:[o.jsx("span",{children:Os(new Date(e.timestamp),"MMM d, h:mm a")}),o.jsx("span",{children:""}),o.jsxs("span",{children:["by ",e.actor]})]})]})]},e.id))})]})]})}function wee({tenant:t}){return o.jsxs("div",{className:"bg-card rounded-xl border shadow-sm",children:[o.jsx("div",{className:"px-6 py-4 border-b",children:o.jsx("h3",{className:"font-semibold text-sm",children:"Lease History"})}),o.jsx("div",{className:"p-6",children:o.jsxs("div",{className:"relative border-l-2 border-slate-200 dark:border-slate-800 ml-3 space-y-8 pl-8",children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute -left-[39px] mt-1.5 w-5 h-5 rounded-full border-2 border-emerald-500 bg-background"}),o.jsxs("div",{className:"bg-muted/30 p-4 rounded-lg border",children:[o.jsxs("div",{className:"flex justify-between items-start mb-2",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("h4",{className:"font-semibold text-sm",children:"Current Lease"}),o.jsx("span",{className:"px-2 py-0.5 rounded text-[10px] bg-emerald-100 text-emerald-700 font-medium uppercase",children:"Active"})]}),o.jsxs("p",{className:"text-sm text-foreground mt-1",children:[t.propertyName," - ",t.unitNumber]})]}),o.jsx("div",{className:"text-right",children:o.jsxs("p",{className:"text-sm font-medium",children:["$",t.rentAmount,"/mo"]})})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4 text-sm text-muted-foreground",children:[o.jsxs("div",{children:[o.jsx("span",{className:"block text-xs uppercase tracking-wider mb-1",children:"Term"}),Os(new Date(t.leaseStartDate),"MMM d, yyyy")," - ",Os(new Date(t.leaseEndDate),"MMM d, yyyy")]}),o.jsxs("div",{children:[o.jsx("span",{className:"block text-xs uppercase tracking-wider mb-1",children:"Deposit"}),"$1,500.00 (Held)"]})]}),o.jsxs("div",{className:"mt-4 flex gap-3",children:[o.jsx("button",{className:"text-xs font-medium text-primary border border-primary/20 px-3 py-1.5 rounded-md hover:bg-primary/5",children:"View Agreement"}),o.jsx("button",{className:"text-xs font-medium text-foreground border border-border px-3 py-1.5 rounded-md hover:bg-muted",children:"Renew Lease"})]})]})]}),o.jsxs("div",{className:"relative opacity-60",children:[o.jsx("div",{className:"absolute -left-[39px] mt-1.5 w-5 h-5 rounded-full border-2 border-slate-300 bg-background"}),o.jsxs("div",{className:"bg-transparent p-4 rounded-lg border border-dashed",children:[o.jsx("div",{className:"flex justify-between items-start mb-2",children:o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("h4",{className:"font-semibold text-sm",children:"Previous Lease"}),o.jsx("span",{className:"px-2 py-0.5 rounded text-[10px] bg-slate-100 text-slate-700 font-medium uppercase",children:"Expired"})]}),o.jsx("p",{className:"text-sm text-foreground mt-1",children:"Different Property (Example)"})]})}),o.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:"Jan 1, 2022 - Jan 1, 2023"})]})]})]})})]})}function See({tenant:t}){return o.jsxs("div",{className:"bg-card rounded-xl border shadow-sm",children:[o.jsxs("div",{className:"px-6 py-4 border-b flex items-center justify-between",children:[o.jsx("h3",{className:"font-semibold text-sm",children:"Ledger"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{className:"text-xs font-medium px-3 py-1.5 rounded-md hover:bg-muted transition-colors flex items-center gap-1",children:[o.jsx(Yr,{className:"w-3.5 h-3.5"})," Export"]}),o.jsxs("button",{className:"text-xs font-medium px-3 py-1.5 rounded-md bg-primary text-primary-foreground hover:bg-primary/90 transition-colors flex items-center gap-1",children:[o.jsx(Ws,{className:"w-3.5 h-3.5"})," Record Payment"]})]})]}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full text-sm",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"border-b bg-muted/40 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:[o.jsx("th",{className:"px-6 py-3",children:"Date"}),o.jsx("th",{className:"px-6 py-3",children:"Description"}),o.jsx("th",{className:"px-6 py-3",children:"Type"}),o.jsx("th",{className:"px-6 py-3",children:"Status"}),o.jsx("th",{className:"px-6 py-3 text-right",children:"Amount"}),o.jsx("th",{className:"px-6 py-3 text-right",children:"Balance"})]})}),o.jsxs("tbody",{className:"divide-y",children:[o.jsxs("tr",{className:"hover:bg-muted/50 transition-colors",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:Os(new Date,"MMM d, yyyy")}),o.jsx("td",{className:"px-6 py-4",children:"Rent Charge - January 2025"}),o.jsx("td",{className:"px-6 py-4 text-xs uppercase tracking-wide",children:"Charge"}),o.jsx("td",{className:"px-6 py-4",children:o.jsx("span",{className:"inline-flex items-center text-xs font-medium text-slate-600",children:"Posted"})}),o.jsxs("td",{className:"px-6 py-4 text-right font-medium text-foreground",children:["$",t.rentAmount.toLocaleString()]}),o.jsx("td",{className:"px-6 py-4 text-right text-muted-foreground",children:"$1,600.00"})]}),o.jsxs("tr",{className:"hover:bg-muted/50 transition-colors",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:Os(new Date().setDate(1),"MMM d, yyyy")}),o.jsx("td",{className:"px-6 py-4",children:"Payment - ACH"}),o.jsx("td",{className:"px-6 py-4 text-xs uppercase tracking-wide",children:"Payment"}),o.jsx("td",{className:"px-6 py-4",children:o.jsx("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-[10px] font-bold uppercase bg-emerald-100 text-emerald-700",children:"Cleared"})}),o.jsxs("td",{className:"px-6 py-4 text-right font-medium text-emerald-600",children:["($",t.rentAmount.toLocaleString(),")"]}),o.jsx("td",{className:"px-6 py-4 text-right text-muted-foreground",children:"$0.00"})]})]})]})})]})}function Mee({tenant:t}){return o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:yee.map(e=>o.jsxs("div",{className:"bg-card p-5 rounded-xl border shadow-sm flex items-start gap-4",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-indigo-50 dark:bg-indigo-900/20 flex items-center justify-center text-indigo-600 font-semibold",children:e.name.charAt(0)}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsx("h4",{className:"font-medium text-foreground",children:e.name}),o.jsx("span",{className:pe("text-[10px] font-bold uppercase px-2 py-0.5 rounded",e.role==="emergency"?"bg-red-100 text-red-700":"bg-slate-100 text-slate-700"),children:e.role})]}),o.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:e.relation}),o.jsxs("div",{className:"space-y-1 text-sm",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(kS,{className:"w-3.5 h-3.5 text-muted-foreground"}),o.jsx("a",{href:`tel:${e.phone}`,className:"hover:text-primary",children:e.phone})]}),e.email&&o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(xa,{className:"w-3.5 h-3.5 text-muted-foreground"}),o.jsx("a",{href:`mailto:${e.email}`,className:"hover:text-primary",children:e.email})]})]})]})]},e.id))})}function Eee({tenant:t}){return o.jsxs("div",{className:"bg-card rounded-xl border shadow-sm",children:[o.jsx("div",{className:"px-6 py-4 border-b",children:o.jsx("h3",{className:"font-semibold text-sm",children:"Audit Log"})}),o.jsx("div",{className:"p-0 divide-y",children:X_.map(e=>o.jsxs("div",{className:"flex gap-4 p-4 px-6 hover:bg-muted/30 transition-colors",children:[o.jsx("div",{className:"text-xs text-muted-foreground w-24 shrink-0 pt-1",children:Os(new Date(e.timestamp),"MMM d, h:mm a")}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx("span",{className:pe("text-[10px] font-bold uppercase px-1.5 py-0.5 rounded border",e.type==="payment"?"bg-emerald-50 border-emerald-100 text-emerald-700":e.type==="maintenance"?"bg-amber-50 border-amber-100 text-amber-700":"bg-slate-50 border-slate-100 text-slate-700"),children:e.type}),o.jsxs("span",{className:"text-xs text-muted-foreground",children:["by ",e.actor]})]}),o.jsx("p",{className:"text-sm text-foreground",children:e.description})]})]},e.id))})]})}function _b({label:t,value:e,subtext:n,status:r,icon:i}){return o.jsxs("div",{className:"p-5 rounded-xl border bg-card shadow-sm flex items-start justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider mb-1",children:t}),o.jsx("div",{className:"text-2xl font-bold text-foreground mb-1",children:e}),o.jsx("p",{className:pe("text-xs font-medium",r==="good"?"text-emerald-600":r==="critical"?"text-red-600":r==="warning"?"text-amber-600":"text-muted-foreground"),children:n})]}),o.jsx("div",{className:pe("p-2 rounded-lg",r==="good"?"bg-emerald-100 text-emerald-600 dark:bg-emerald-900/20":r==="critical"?"bg-red-100 text-red-600 dark:bg-red-900/20":r==="warning"?"bg-amber-100 text-amber-600 dark:bg-amber-900/20":"bg-slate-100 text-slate-600 dark:bg-slate-800"),children:o.jsx(i,{className:"w-5 h-5"})})]})}const Nee=[{id:"l1",tenantName:"Jane Smith",propertyName:"Oak Street Apartments",unitNumber:"3B",startDate:"2023-01-01",endDate:"2024-03-01",rentAmount:1450,securityDeposit:1450,status:"ending",renewalStatus:"pending",documentUrl:"#"},{id:"l2",tenantName:"Michael Chen",propertyName:"Highland Lofts",unitNumber:"102",startDate:"2023-08-01",endDate:"2024-08-01",rentAmount:2300,securityDeposit:2300,status:"active",renewalStatus:"not_offered",documentUrl:"#"},{id:"l3",tenantName:"David Wilson",propertyName:"Sunset Duplex",unitNumber:"A",startDate:"2022-11-15",endDate:"2023-11-15",rentAmount:1850,securityDeposit:1850,status:"expired",renewalStatus:"not_offered",documentUrl:"#"},{id:"l4",tenantName:"Sarah Johnson",propertyName:"Highland Lofts",unitNumber:"205",startDate:"2023-06-30",endDate:"2024-06-30",rentAmount:2100,securityDeposit:2100,status:"active",renewalStatus:"not_offered",documentUrl:"#"}],Tee=({status:t})=>{const e={active:"bg-emerald-100/50 text-emerald-700 dark:bg-emerald-500/10 dark:text-emerald-400 border-emerald-200/50 dark:border-emerald-500/20",ending:"bg-amber-100/50 text-amber-700 dark:bg-amber-500/10 dark:text-amber-400 border-amber-200/50 dark:border-amber-500/20",expired:"bg-slate-100/50 text-slate-700 dark:bg-slate-800/50 dark:text-slate-400 border-slate-200/50 dark:border-slate-700/50",draft:"bg-blue-100/50 text-blue-700 dark:bg-blue-500/10 dark:text-blue-400 border-blue-200/50 dark:border-blue-500/20"},n={active:"Active",ending:"Ending Soon",expired:"Expired",draft:"Draft"};return o.jsx("span",{className:pe("text-[10px] uppercase font-bold px-2 py-0.5 rounded-full border tracking-wide",e[t]),children:n[t]})},Aee=({start:t,end:e})=>{const n=new Date(e).getTime()-new Date(t).getTime(),r=new Date().getTime()-new Date(t).getTime(),i=Math.min(Math.max(r/n*100,0),100);return o.jsx("div",{className:"w-full h-1.5 bg-slate-100 dark:bg-slate-800 rounded-full overflow-hidden mt-1",children:o.jsx("div",{className:pe("h-full rounded-full",i>90?"bg-amber-500":"bg-primary"),style:{width:`${i}%`}})})},Cee=({lease:t})=>{const[e,n]=D.useState(!1),r=Math.ceil((new Date(t.endDate).getTime()-new Date().getTime())/(1e3*3600*24)),i=r>0&&r<=60;return o.jsxs("div",{className:pe("group border rounded-xl bg-card transition-all duration-200",e?"shadow-md ring-1 ring-primary/5 border-primary/20":"hover:border-primary/20 hover:shadow-sm"),children:[o.jsxs("div",{className:"p-4 flex flex-col md:flex-row md:items-center gap-4 cursor-pointer",onClick:()=>n(!e),children:[o.jsx("div",{className:"flex-1 min-w-[200px]",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-2 bg-primary/10 rounded-lg text-primary",children:o.jsx(rn,{size:20})}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-foreground",children:t.tenantName}),o.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[t.propertyName,"  Unit ",t.unitNumber]})]})]})}),o.jsxs("div",{className:"flex-1 md:max-w-[300px]",children:[o.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mb-1",children:[o.jsx("span",{children:new Date(t.startDate).toLocaleDateString(void 0,{month:"short",year:"numeric"})}),o.jsx("span",{className:pe(i&&"text-amber-600 dark:text-amber-500 font-medium"),children:new Date(t.endDate).toLocaleDateString(void 0,{month:"short",year:"numeric"})})]}),o.jsx(Aee,{start:t.startDate,end:t.endDate}),i&&o.jsxs("div",{className:"text-[10px] text-amber-600 dark:text-amber-500 mt-1 font-medium flex items-center gap-1",children:[o.jsx(ui,{size:10})," Expires in ",r," days"]})]}),o.jsxs("div",{className:"flex-1 grid grid-cols-2 gap-4 items-center pl-4 border-l border-border/50 ml-4",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Status"}),o.jsx(Tee,{status:t.status})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Rent"}),o.jsxs("div",{className:"text-sm font-medium",children:["$",t.rentAmount.toLocaleString(),o.jsx("span",{className:"text-muted-foreground font-normal text-xs",children:"/mo"})]})]})]}),o.jsxs("div",{className:"flex items-center gap-3 justify-end",children:[o.jsx("div",{className:"w-32 flex-shrink-0 flex justify-end",children:t.renewalStatus==="pending"&&o.jsx("div",{className:"hidden md:flex items-center text-xs font-medium text-amber-600 bg-amber-50 px-2 py-1 rounded",children:"Renewal Pending"})}),o.jsx("div",{className:pe("transition-transform duration-200 text-muted-foreground",e&&"rotate-180"),children:o.jsx(vs,{size:20})})]})]}),o.jsx(cn,{children:e&&o.jsx(Et.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"overflow-hidden border-t border-border/50 bg-slate-50/50 dark:bg-slate-900/20",children:o.jsxs("div",{className:"p-6 grid grid-cols-1 md:grid-cols-3 gap-8",children:[o.jsxs("div",{className:"space-y-3",children:[o.jsxs("h4",{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground flex items-center gap-2",children:[o.jsx(Bd,{size:14})," Terms"]}),o.jsxs("div",{className:"space-y-2 text-sm bg-card border rounded-md p-3",children:[o.jsxs("div",{className:"flex justify-between border-b pb-2 border-border/50",children:[o.jsx("span",{className:"text-muted-foreground",children:"Term Start"}),o.jsx("span",{className:"font-medium",children:t.startDate})]}),o.jsxs("div",{className:"flex justify-between border-b pb-2 border-border/50",children:[o.jsx("span",{className:"text-muted-foreground",children:"Term End"}),o.jsx("span",{className:"font-medium",children:t.endDate})]}),o.jsxs("div",{className:"flex justify-between border-b pb-2 border-border/50",children:[o.jsx("span",{className:"text-muted-foreground",children:"Monthly Rent"}),o.jsxs("span",{className:"font-medium",children:["$",t.rentAmount.toLocaleString()]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-muted-foreground",children:"Security Deposit"}),o.jsxs("span",{className:"font-medium",children:["$",t.securityDeposit.toLocaleString()]})]})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("h4",{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground flex items-center gap-2",children:[o.jsx(KV,{size:14})," Status & Docs"]}),o.jsxs("div",{className:"grid gap-3",children:[o.jsxs("div",{className:"flex items-center justify-between p-3 bg-card border rounded-md",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-medium",children:"Original Lease.pdf"}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Signed Jan 1, 2023"})]}),o.jsx("button",{className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-md transition-colors text-muted-foreground",children:o.jsx(Yr,{size:16})})]}),o.jsxs("div",{className:"p-3 bg-card border rounded-md",children:[o.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Renewal Status"}),o.jsx("div",{className:"flex items-center gap-2",children:t.renewalStatus==="pending"?o.jsxs("span",{className:"flex items-center gap-1.5 text-sm font-medium text-amber-600",children:[o.jsx(Pn,{size:14})," Decision Pending"]}):o.jsx("span",{className:"flex items-center gap-1.5 text-sm font-medium text-muted-foreground",children:"Checking availability..."})})]})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("h4",{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground",children:"Actions"}),o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsxs("button",{className:"flex items-center gap-2 w-full px-3 py-2 text-sm font-medium text-primary-foreground bg-primary border border-transparent rounded-md hover:bg-primary/90 transition-colors shadow-sm justify-center",children:[o.jsx(PS,{size:14})," Send Renewal Offer"]}),o.jsxs("button",{className:"flex items-center gap-2 w-full px-3 py-2 text-sm font-medium text-foreground bg-white dark:bg-card border rounded-md hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors shadow-sm justify-center",children:[o.jsx(Yr,{size:14,className:"text-muted-foreground"})," Download PDF"]}),o.jsxs("button",{className:"flex items-center gap-2 w-full px-3 py-2 text-sm font-medium text-foreground bg-white dark:bg-card border rounded-md hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors shadow-sm justify-center",children:[o.jsx(Oc,{size:14,className:"text-muted-foreground"})," View Details"]})]})]})]})})})]})};function kee(){const[t,e]=D.useState("tenant"),[n,r]=D.useState(!1),i=[...Nee].sort((s,a)=>t==="tenant"?s.tenantName.localeCompare(a.tenantName):s.propertyName.localeCompare(a.propertyName));return o.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Leases"}),o.jsx("p",{className:"text-muted-foreground",children:"Active, upcoming, and historical lease agreements."})]}),o.jsx("div",{className:"flex items-center gap-2",children:o.jsxs("button",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-primary text-primary-foreground hover:bg-primary/90 transition-colors font-medium text-sm",children:[o.jsx(Ws,{size:16}),"Create Lease"]})})]}),o.jsxs("div",{className:"flex items-center justify-between gap-2",children:[o.jsxs("div",{className:"flex items-center gap-2 bg-card p-2 rounded-lg border shadow-sm flex-1 max-w-2xl",children:[o.jsx(di,{className:"text-muted-foreground ml-2",size:18}),o.jsx("input",{type:"text",placeholder:"Search by tenant, unit, or property...",className:"flex-1 bg-transparent border-none focus:ring-0 text-sm placeholder:text-muted-foreground outline-none"}),o.jsx("div",{className:"w-px h-6 bg-border mx-2"}),o.jsxs("button",{className:"flex items-center gap-2 px-3 py-1.5 rounded-md hover:bg-slate-100 dark:hover:bg-slate-800 text-sm font-medium text-muted-foreground hover:text-foreground transition-colors",children:[o.jsx(po,{size:14}),"Filters"]})]}),o.jsxs("div",{className:"relative",children:[o.jsxs("button",{onClick:()=>r(!n),className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-card border shadow-sm hover:bg-slate-50 dark:hover:bg-slate-800 text-sm font-medium text-muted-foreground hover:text-foreground transition-colors",children:[o.jsx(dL,{size:14}),"Sort By",o.jsx(vs,{size:14,className:pe("transition-transform",n&&"rotate-180")})]}),o.jsx(cn,{children:n&&o.jsxs(Et.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.15},className:"absolute right-0 mt-2 w-56 bg-card border rounded-lg shadow-lg overflow-hidden z-10",children:[o.jsx("button",{onClick:()=>{e("tenant"),r(!1)},className:pe("w-full text-left px-4 py-2.5 text-sm hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",t==="tenant"&&"bg-primary/5 text-primary font-medium"),children:"Tenant Name (Alphabetical)"}),o.jsx("button",{onClick:()=>{e("property"),r(!1)},className:pe("w-full text-left px-4 py-2.5 text-sm hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors border-t border-border/50",t==="property"&&"bg-primary/5 text-primary font-medium"),children:"Property Name (Alphabetical)"})]})})]})]}),o.jsx("div",{className:"space-y-3",children:i.map(s=>o.jsx(Cee,{lease:s},s.id))})]})}const Pee=[{id:"m1",title:"Water leak under sink",description:"Tenant reports steady drip from p-trap under kitchen sink. Cabinet is damp.",propertyId:"p1",propertyName:"Oak Street Apartments",unitId:"u6",unitNumber:"3B",categoryId:"plumbing",reportedBy:"Jane Smith",reporterType:"tenant",urgency:"urgent",status:"in_progress",vendorName:"Rapid Plumbers Co.",estimatedCost:350,accessPermission:!0,preferredTime:"anytime",createdAt:"2024-01-03 09:30 AM",updatedAt:"2024-01-03 11:45 AM"},{id:"m2",title:"HVAC not heating",description:"Heater blowing cold air. Thermostat set to 72, temp is 64.",propertyId:"p2",propertyName:"Highland Lofts",unitId:"u8",unitNumber:"102",categoryId:"hvac",reportedBy:"System Alert",reporterType:"system",urgency:"emergency",status:"open",estimatedCost:800,accessPermission:!1,createdAt:"2024-01-04 06:15 AM",updatedAt:"2024-01-04 06:15 AM"},{id:"m3",title:"Closet door off rack",description:"Sliding door allows stuck.",propertyId:"p3",propertyName:"Sunset Duplex",unitId:"u11",unitNumber:"A",categoryId:"general",reportedBy:"David Wilson",reporterType:"tenant",urgency:"routine",status:"waiting",vendorName:"Handyman Joe",estimatedCost:150,accessPermission:!0,preferredTime:"morning",createdAt:"2023-12-28 02:00 PM",updatedAt:"2024-01-02 10:00 AM"},{id:"m4",title:"Lobby light flickering",description:"Main recessed light in entry hallway is strobing.",propertyId:"p2",propertyName:"Highland Lofts",unitId:void 0,unitNumber:"Common Area",categoryId:"electrical",reportedBy:"Property Manager",reporterType:"manager",urgency:"routine",status:"resolved",vendorName:"Bright Spark Electric",estimatedCost:200,actualCost:185,accessPermission:!1,createdAt:"2023-12-20",updatedAt:"2023-12-22"}],nk=[{id:"v1",name:"Rapid Plumbers Co.",category:"plumbing"},{id:"v2",name:"Bright Spark Electric",category:"electrical"},{id:"v3",name:"Handyman Joe",category:"general"},{id:"v4",name:"Cool Air HVAC",category:"hvac"}];function Ree({isOpen:t,onClose:e,onCreate:n,userRole:r="manager"}){const{toast:i}=Fc(),[s,a]=D.useState(""),[l,c]=D.useState(""),[u,d]=D.useState(""),[f,m]=D.useState(""),[g,v]=D.useState(""),[_,b]=D.useState(""),[x,y]=D.useState("routine"),[S,E]=D.useState(!1),[A,T]=D.useState("anytime"),[C,j]=D.useState(""),[k,P]=D.useState("");D.useState(!0);const H=W_.find(Y=>Y.id===s);if(D.useEffect(()=>{},[t]),!t)return null;const B=Y=>{var Q,ee;if(Y.preventDefault(),!s||!f||!g||!_){i({type:"error",title:"Missing Fields",message:"Please fill in all required fields."});return}const V={propertyId:s,propertyName:(H==null?void 0:H.name)||"",unitId:l==="common"?void 0:l,unitNumber:l==="common"?"Common Area":((Q=H==null?void 0:H.units.find(re=>re.id===l))==null?void 0:Q.number)||"",title:f,description:_,categoryId:g,urgency:x,accessPermission:S,preferredTime:A,status:"open",reportedBy:"Current User",reporterType:r==="tenant"?"tenant":"manager",vendorId:C,vendorName:(ee=nk.find(re=>re.id===C))==null?void 0:ee.name,estimatedCost:k?parseFloat(k):void 0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};n(V),i({type:"success",title:"Ticket Created",message:"The maintenance request has been submitted."}),e(),m(""),b(""),y("routine")};return wa.createPortal(o.jsx("div",{className:"fixed inset-0 bg-background/80 backdrop-blur-sm z-50 flex items-center justify-center p-4 min-h-screen",children:o.jsxs("div",{className:"bg-card w-full max-w-3xl rounded-xl border shadow-xl flex flex-col max-h-[90vh] animate-in zoom-in-95 duration-200",children:[o.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-lg font-bold",children:"Create Maintenance Ticket"}),o.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground mt-0.5",children:[o.jsxs("span",{className:"capitalize",children:[r," Mode"]}),o.jsx("span",{children:""}),"Draft autosaved"]})]}),o.jsx("button",{onClick:e,className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-full transition-colors",children:o.jsx(va,{size:20,className:"text-muted-foreground"})})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-8",children:[o.jsxs("section",{className:"space-y-4",children:[o.jsxs("h3",{className:"text-sm font-semibold uppercase tracking-wider text-muted-foreground flex items-center gap-2",children:[o.jsx(ys,{size:14})," Location & Scope"]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"space-y-1.5",children:[o.jsxs("label",{className:"text-sm font-medium",children:["Property ",o.jsx("span",{className:"text-rose-500",children:"*"})]}),o.jsxs("select",{className:"w-full px-3 py-2 rounded-lg border bg-slate-50 dark:bg-slate-900 focus:ring-2 focus:ring-primary/20 outline-none",value:s,onChange:Y=>{a(Y.target.value),c("")},children:[o.jsx("option",{value:"",children:"Select Property..."}),W_.map(Y=>o.jsx("option",{value:Y.id,children:Y.name},Y.id))]})]}),o.jsxs("div",{className:"space-y-1.5",children:[o.jsxs("label",{className:"text-sm font-medium",children:["Unit ",o.jsx("span",{className:"text-rose-500",children:"*"})]}),o.jsxs("select",{className:"w-full px-3 py-2 rounded-lg border bg-slate-50 dark:bg-slate-900 focus:ring-2 focus:ring-primary/20 outline-none disabled:opacity-50",value:l,onChange:Y=>c(Y.target.value),disabled:!s,children:[o.jsx("option",{value:"",children:"Select Unit..."}),o.jsx("option",{value:"common",children:"Common Area"}),H==null?void 0:H.units.map(Y=>o.jsxs("option",{value:Y.id,children:["Unit ",Y.number," (",Y.status,")"]},Y.id))]})]}),o.jsxs("div",{className:"space-y-1.5 sm:col-span-2",children:[o.jsx("label",{className:"text-sm font-medium",children:"Area / Room"}),o.jsx("div",{className:"flex flex-wrap gap-2",children:["Kitchen","Bathroom","Bedroom","Living Room","Exterior","Appliance","HVAC"].map(Y=>o.jsx("button",{type:"button",onClick:()=>d(Y),className:`px-3 py-1.5 rounded-full text-xs font-medium border transition-colors ${u===Y?"bg-primary text-primary-foreground border-primary":"bg-white dark:bg-slate-900 hover:bg-slate-50 dark:hover:bg-slate-800"}`,children:Y},Y))})]})]})]}),o.jsx("div",{className:"w-full h-px bg-border/50"}),o.jsxs("section",{className:"space-y-4",children:[o.jsxs("h3",{className:"text-sm font-semibold uppercase tracking-wider text-muted-foreground flex items-center gap-2",children:[o.jsx(ui,{size:14})," Issue Details"]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-1.5",children:[o.jsxs("label",{className:"text-sm font-medium",children:["Issue Title ",o.jsx("span",{className:"text-rose-500",children:"*"})]}),o.jsx("input",{type:"text",placeholder:"e.g., Water leaking under sink",className:"w-full px-3 py-2 rounded-lg border bg-slate-50 dark:bg-slate-900 focus:ring-2 focus:ring-primary/20 outline-none",value:f,onChange:Y=>m(Y.target.value)})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"space-y-1.5",children:[o.jsxs("label",{className:"text-sm font-medium",children:["Category ",o.jsx("span",{className:"text-rose-500",children:"*"})]}),o.jsxs("select",{className:"w-full px-3 py-2 rounded-lg border bg-slate-50 dark:bg-slate-900 focus:ring-2 focus:ring-primary/20 outline-none",value:g,onChange:Y=>v(Y.target.value),children:[o.jsx("option",{value:"",children:"Select Category..."}),o.jsx("option",{value:"plumbing",children:"Plumbing"}),o.jsx("option",{value:"electrical",children:"Electrical"}),o.jsx("option",{value:"hvac",children:"HVAC"}),o.jsx("option",{value:"appliance",children:"Appliance"}),o.jsx("option",{value:"general",children:"General Repair"})]})]}),g&&o.jsxs("div",{className:"flex items-center p-3 bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 rounded-lg text-xs gap-2",children:[o.jsx("div",{className:"bg-blue-200 dark:bg-blue-800 p-1 rounded-full",children:o.jsx(NS,{size:12})}),o.jsxs("span",{children:["We'll suggest ",g==="plumbing"?"Rapid Plumbers":g==="electrical"?"Bright Spark":"preferred vendors"," for this."]})]})]}),o.jsxs("div",{className:"space-y-1.5",children:[o.jsxs("label",{className:"text-sm font-medium",children:["Description ",o.jsx("span",{className:"text-rose-500",children:"*"})]}),o.jsx("textarea",{rows:4,placeholder:"Please describe the issue in detail...",className:"w-full px-3 py-2 rounded-lg border bg-slate-50 dark:bg-slate-900 focus:ring-2 focus:ring-primary/20 outline-none resize-none",value:_,onChange:Y=>b(Y.target.value)})]})]})]}),o.jsx("div",{className:"w-full h-px bg-border/50"}),o.jsxs("section",{className:"space-y-4",children:[o.jsxs("h3",{className:"text-sm font-semibold uppercase tracking-wider text-muted-foreground flex items-center gap-2",children:[o.jsx(Pn,{size:14})," Severity & Access"]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"space-y-3",children:[o.jsxs("label",{className:"text-sm font-medium",children:["Priority ",o.jsx("span",{className:"text-rose-500",children:"*"})]}),o.jsx("div",{className:"space-y-2",children:["routine","urgent","emergency"].map(Y=>o.jsxs("label",{className:`flex items-start gap-3 p-3 rounded-lg border cursor-pointer transition-all ${x===Y?Y==="emergency"?"border-rose-500 bg-rose-50 dark:bg-rose-900/10":"border-primary bg-primary/5":"hover:bg-slate-50 dark:hover:bg-slate-900"}`,children:[o.jsx("input",{type:"radio",name:"urgency",checked:x===Y,onChange:()=>y(Y),className:"mt-1"}),o.jsxs("div",{children:[o.jsx("div",{className:`font-medium text-sm capitalize ${Y==="emergency"?"text-rose-600":""}`,children:Y}),o.jsx("div",{className:"text-xs text-muted-foreground mt-0.5",children:Y==="routine"?"Standard repair timeframe.":Y==="urgent"?"Needs attention within 48h.":"Immediate threat to property/safety."})]})]},Y))})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium",children:"Access Permission"}),o.jsxs("label",{className:"flex items-start gap-3 p-3 rounded-lg border hover:bg-slate-50 dark:hover:bg-slate-900 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:S,onChange:Y=>E(Y.target.checked),className:"mt-1"}),o.jsxs("div",{className:"text-sm",children:[o.jsx("span",{className:"font-medium",children:"Enter without tenant present"}),o.jsx("p",{className:"text-xs text-muted-foreground mt-0.5",children:"Allow maintenance staff to enter if tenant is not home."})]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium",children:"Preferred Time"}),o.jsxs("select",{className:"w-full px-3 py-2 rounded-lg border bg-slate-50 dark:bg-slate-900 focus:ring-2 focus:ring-primary/20 outline-none",value:A,onChange:Y=>T(Y.target.value),children:[o.jsx("option",{value:"anytime",children:"Anytime (Fastest)"}),o.jsx("option",{value:"morning",children:"Morning (8am - 12pm)"}),o.jsx("option",{value:"afternoon",children:"Afternoon (12pm - 5pm)"})]})]})]})]})]}),r!=="tenant"&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"w-full h-px bg-border/50"}),o.jsxs("section",{className:"space-y-4",children:[o.jsxs("h3",{className:"text-sm font-semibold uppercase tracking-wider text-muted-foreground flex items-center gap-2",children:[o.jsx(Vs,{size:14})," Assignment (Manager)"]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"space-y-1.5",children:[o.jsx("label",{className:"text-sm font-medium",children:"Assign Vendor"}),o.jsxs("select",{className:"w-full px-3 py-2 rounded-lg border bg-slate-50 dark:bg-slate-900 focus:ring-2 focus:ring-primary/20 outline-none",value:C,onChange:Y=>j(Y.target.value),children:[o.jsx("option",{value:"",children:"Unassigned (Decide Later)"}),nk.map(Y=>o.jsxs("option",{value:Y.id,children:[Y.name," (",Y.category,")"]},Y.id))]})]}),o.jsxs("div",{className:"space-y-1.5",children:[o.jsx("label",{className:"text-sm font-medium",children:"Estimated Cost ($)"}),o.jsx("input",{type:"number",placeholder:"0.00",className:"w-full px-3 py-2 rounded-lg border bg-slate-50 dark:bg-slate-900 focus:ring-2 focus:ring-primary/20 outline-none",value:k,onChange:Y=>P(Y.target.value)})]})]})]})]}),o.jsx("div",{className:"w-full h-px bg-border/50"}),o.jsxs("section",{className:"space-y-4",children:[o.jsxs("h3",{className:"text-sm font-semibold uppercase tracking-wider text-muted-foreground flex items-center gap-2",children:[o.jsx(X2,{size:14})," Attachments"]}),o.jsxs("div",{className:"border-2 border-dashed border-border rounded-xl p-8 flex flex-col items-center justify-center text-center hover:bg-slate-50 dark:hover:bg-slate-900 transition-colors cursor-pointer",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-100 dark:bg-slate-800 flex items-center justify-center mb-3",children:o.jsx(X2,{size:18,className:"text-muted-foreground"})}),o.jsx("p",{className:"text-sm font-medium",children:"Click to upload photos or videos"}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"SVG, PNG, JPG or MP4 (max. 10MB)"})]})]})]}),o.jsxs("div",{className:"p-6 border-t bg-slate-50/50 dark:bg-slate-900/50 flex items-center justify-between",children:[o.jsx("button",{className:"text-sm font-medium text-emerald-600 hover:underline",children:"Open full ticket view"}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:e,className:"px-4 py-2 text-sm font-medium text-muted-foreground hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg transition-colors",children:"Cancel"}),o.jsx("button",{onClick:B,className:"px-6 py-2 text-sm font-medium bg-primary text-primary-foreground hover:bg-primary/90 rounded-lg shadow-sm transition-colors flex items-center gap-2",children:C?"Create & Assign":"Create Ticket"})]})]})]})}),document.body)}const jee=({level:t})=>{const e={routine:"bg-slate-100/50 text-slate-600 dark:bg-slate-800/50 dark:text-slate-400 border-slate-200/50 dark:border-slate-700/50",urgent:"bg-amber-100/50 text-amber-700 dark:bg-amber-500/10 dark:text-amber-400 border-amber-200/50 dark:border-amber-500/20",emergency:"bg-rose-100/50 text-rose-700 dark:bg-rose-500/10 dark:text-rose-400 border-rose-200/50 dark:border-rose-500/20"},n={routine:null,urgent:o.jsx(ui,{size:10,className:"mr-1"}),emergency:o.jsx(jV,{size:10,className:"mr-1"})};return o.jsxs("span",{className:pe("inline-flex items-center text-[10px] uppercase font-bold px-2 py-0.5 rounded-full border tracking-wide",e[t]),children:[n[t]," ",t]})},Lee=({status:t})=>{const e={open:"Open",in_progress:"In Progress",waiting:"Waiting",resolved:"Resolved",closed:"Closed"},n={open:"text-rose-600 bg-rose-50 border-rose-100 dark:bg-rose-900/10 dark:text-rose-400 dark:border-rose-900/20",in_progress:"text-blue-600 bg-blue-50 border-blue-100 dark:bg-blue-900/10 dark:text-blue-400 dark:border-blue-900/20",waiting:"text-amber-600 bg-amber-50 border-amber-100 dark:bg-amber-900/10 dark:text-amber-400 dark:border-amber-900/20",resolved:"text-emerald-600 bg-emerald-50 border-emerald-100 dark:bg-emerald-900/10 dark:text-emerald-400 dark:border-emerald-900/20",closed:"text-slate-600 bg-slate-50 border-slate-100 dark:bg-slate-900/10 dark:text-slate-400 dark:border-slate-900/20"};return o.jsx("span",{className:pe("text-xs font-medium px-2 py-1 rounded-md border",n[t]),children:e[t]})},Dee=({ticket:t})=>{const[e,n]=D.useState(!1);return o.jsxs("div",{className:pe("group border rounded-xl bg-card transition-all duration-200",e?"shadow-md ring-1 ring-primary/5 border-primary/20":"hover:border-primary/20 hover:shadow-sm"),children:[o.jsxs("div",{className:"p-4 flex flex-col md:flex-row md:items-center gap-4 cursor-pointer",onClick:()=>n(!e),children:[o.jsx("div",{className:"flex-1 min-w-[250px]",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:pe("p-2 rounded-lg mt-0.5",t.urgency==="emergency"?"bg-rose-100 text-rose-600 dark:bg-rose-900/20 dark:text-rose-400":"bg-slate-100 text-slate-500 dark:bg-slate-800 dark:text-slate-400"),children:o.jsx(Ft,{size:20})}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-foreground leading-tight mb-1",children:t.title}),o.jsxs("div",{className:"flex flex-wrap items-center gap-x-2 gap-y-1 text-sm text-muted-foreground",children:[o.jsx("span",{children:t.propertyName}),o.jsx("span",{className:"w-1 h-1 rounded-full bg-border"}),o.jsxs("span",{children:["Unit ",t.unitNumber]}),o.jsx("span",{className:"w-1 h-1 rounded-full bg-border"}),o.jsxs("span",{className:"text-xs",children:["Rep. by ",t.reportedBy]})]})]})]})}),o.jsxs("div",{className:"flex-1 grid grid-cols-2 md:grid-cols-3 gap-4 items-center",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Priority"}),o.jsx(jee,{level:t.urgency})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Status"}),o.jsx(Lee,{status:t.status})]}),o.jsxs("div",{className:"hidden md:block",children:[o.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Assigned"}),o.jsx("div",{className:"text-sm font-medium flex items-center gap-1.5 truncate",children:t.vendorName?o.jsxs(o.Fragment,{children:[o.jsx(NS,{size:12,className:"text-muted-foreground"})," ",t.vendorName]}):o.jsx("span",{className:"text-muted-foreground italic text-xs",children:"Unassigned"})})]})]}),o.jsxs("div",{className:"flex items-center gap-3 justify-end min-w-[50px]",children:[t.estimatedCost&&o.jsxs("div",{className:"text-xs font-semibold text-slate-600 dark:text-slate-400 bg-slate-100 dark:bg-slate-800/50 px-2 py-1 rounded",children:["$",t.estimatedCost]}),o.jsx("div",{className:pe("transition-transform duration-200 text-muted-foreground",e&&"rotate-180"),children:o.jsx(vs,{size:20})})]})]}),o.jsx(cn,{children:e&&o.jsx(Et.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"overflow-hidden border-t border-border/50 bg-slate-50/50 dark:bg-slate-900/20",children:o.jsxs("div",{className:"p-6 grid grid-cols-1 md:grid-cols-3 gap-8",children:[o.jsxs("div",{className:"md:col-span-2 space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("h4",{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground",children:"Description"}),o.jsx("p",{className:"text-sm text-foreground leading-relaxed",children:t.description})]}),o.jsxs("div",{className:"space-y-3 pt-4 border-t border-border/50",children:[o.jsxs("h4",{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground flex items-center gap-2",children:[o.jsx(Pn,{size:14})," Activity"]}),o.jsxs("div",{className:"text-sm space-y-3 pl-2 border-l-2 border-border/50",children:[o.jsxs("div",{className:"pl-4 relative",children:[o.jsx("div",{className:"absolute -left-[21px] top-1 w-2.5 h-2.5 rounded-full bg-slate-300 dark:bg-slate-700"}),o.jsx("span",{className:"text-muted-foreground text-xs",children:t.updatedAt}),o.jsxs("p",{className:"mt-0.5",children:["Status updated to ",o.jsx("span",{className:"font-medium text-foreground",children:t.status.replace("_"," ")})]})]}),o.jsxs("div",{className:"pl-4 relative",children:[o.jsx("div",{className:"absolute -left-[21px] top-1 w-2.5 h-2.5 rounded-full bg-slate-300 dark:bg-slate-700"}),o.jsx("span",{className:"text-muted-foreground text-xs",children:t.createdAt}),o.jsxs("p",{className:"mt-0.5",children:["Ticket created by ",t.reportedBy]})]})]})]})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"p-3 bg-card border rounded-md space-y-2",children:[o.jsx("h4",{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground",children:"Financial"}),o.jsxs("div",{className:"flex justify-between items-center text-sm",children:[o.jsx("span",{className:"text-muted-foreground",children:"Estimated"}),o.jsxs("span",{className:"font-medium",children:["$",t.estimatedCost||0]})]}),o.jsxs("div",{className:"flex justify-between items-center text-sm",children:[o.jsx("span",{className:"text-muted-foreground",children:"Actual"}),o.jsxs("span",{className:"font-medium",children:["$",t.actualCost||0]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("button",{className:"flex items-center gap-2 w-full px-3 py-2 text-sm font-medium text-primary-foreground bg-primary border border-transparent rounded-md hover:bg-primary/90 transition-colors shadow-sm justify-center",children:[o.jsx(Vs,{size:14})," Assign Vendor"]}),o.jsxs("button",{className:"flex items-center gap-2 w-full px-3 py-2 text-sm font-medium text-foreground bg-white dark:bg-card border rounded-md hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors shadow-sm justify-center",children:[o.jsx(Bs,{size:14,className:"text-muted-foreground"})," Add Note"]}),o.jsxs("button",{className:"flex items-center gap-2 w-full px-3 py-2 text-sm font-medium text-emerald-600 bg-emerald-50 border border-emerald-100 rounded-md hover:bg-emerald-100 transition-colors shadow-sm justify-center",children:[o.jsx($x,{size:14})," Resolve Ticket"]})]})]})]})})})]})};function Iee(){const[t,e]=D.useState(Pee),[n,r]=D.useState(!1),i=s=>{const a={...s,id:`m${Date.now()}`};e(l=>[a,...l])};return o.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Maintenance"}),o.jsx("p",{className:"text-muted-foreground",children:"Triage and track property issues."})]}),o.jsx("div",{className:"flex items-center gap-2",children:o.jsxs("button",{onClick:()=>r(!0),className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-rose-600 text-white hover:bg-rose-700 transition-colors font-medium text-sm shadow-sm",children:[o.jsx(Ws,{size:16}),"New Ticket"]})})]}),o.jsxs("div",{className:"flex items-center gap-2 bg-card p-2 rounded-lg border shadow-sm w-full",children:[o.jsx(di,{className:"text-muted-foreground ml-2",size:18}),o.jsx("input",{type:"text",placeholder:"Search issues, units, or vendors...",className:"flex-1 bg-transparent border-none focus:ring-0 text-sm placeholder:text-muted-foreground outline-none"}),o.jsx("div",{className:"w-px h-6 bg-border mx-2"}),o.jsxs("button",{className:"flex items-center gap-2 px-3 py-1.5 rounded-md hover:bg-slate-100 dark:hover:bg-slate-800 text-sm font-medium text-muted-foreground hover:text-foreground transition-colors",children:[o.jsx(po,{size:14}),"Filters"]})]}),o.jsx("div",{className:"space-y-3",children:t.map(s=>o.jsx(Dee,{ticket:s},s.id))}),o.jsx(Ree,{isOpen:n,onClose:()=>r(!1),onCreate:i,userRole:"manager"})]})}const Uee=[{id:"t1",date:"2024-01-05",description:"Rent Payment - Jane Smith",category:"rental_income",propertyName:"Oak Street Apartments",unitNumber:"3B",amount:1450,type:"credit",sourceRef:"PMT-8821"},{id:"t2",date:"2024-01-04",description:"Emergency HVAC Repair",category:"maintenance",propertyName:"Highland Lofts",unitNumber:"102",amount:350,type:"debit",sourceRef:"TKT-991"},{id:"t3",date:"2024-01-03",description:"Water Bill - Dec 2023",category:"utilities",propertyName:"Sunset Duplex",amount:185.4,type:"debit"},{id:"t4",date:"2024-01-01",description:"Rent Payment - Michael Chen",category:"rental_income",propertyName:"Highland Lofts",unitNumber:"102",amount:2300,type:"credit",sourceRef:"PMT-8822"},{id:"t5",date:"2024-01-01",description:"Management Fee (5%)",category:"management_fees",propertyName:"The Oakley",amount:420,type:"debit"}],Oee=({entry:t})=>{const[e,n]=D.useState(!1),r={rental_income:"Rental Income",maintenance:"Maintenance",utilities:"Utilities",management_fees:"Mgmt Fees",insurance:"Insurance",taxes:"Taxes",late_fees:"Late Fees",other:"Other"};return o.jsxs("div",{className:pe("group border-b last:border-0 hover:bg-slate-50/50 dark:hover:bg-slate-800/30 transition-colors",e&&"bg-slate-50/80 dark:bg-slate-800/50"),children:[o.jsxs("div",{className:"grid grid-cols-12 gap-4 p-4 items-center cursor-pointer",onClick:()=>n(!e),children:[o.jsx("div",{className:"col-span-2 text-sm text-foreground tabular-nums",children:new Date(t.date).toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})}),o.jsxs("div",{className:"col-span-5 md:col-span-4",children:[o.jsx("div",{className:"text-sm font-medium text-foreground truncate",children:t.description}),o.jsxs("div",{className:"text-xs text-muted-foreground flex items-center gap-1.5 mt-0.5",children:[o.jsx("span",{children:t.propertyName}),t.unitNumber&&o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"w-0.5 h-0.5 rounded-full bg-muted-foreground/50"}),o.jsxs("span",{children:["Unit ",t.unitNumber]})]})]})]}),o.jsx("div",{className:"hidden md:flex col-span-2",children:o.jsxs("span",{className:"inline-flex items-center text-xs text-muted-foreground border rounded-full px-2 py-0.5 bg-slate-50 dark:bg-slate-900/50",children:[o.jsx(pH,{size:10,className:"mr-1.5 opacity-70"})," ",r[t.category]]})}),o.jsxs("div",{className:pe("col-span-4 md:col-span-3 text-right font-medium text-sm tabular-nums",t.type==="credit"?"text-emerald-600 dark:text-emerald-500":"text-foreground"),children:[t.type==="credit"?"+":"-","$",t.amount.toLocaleString(void 0,{minimumFractionDigits:2})]}),o.jsx("div",{className:"col-span-1 flex justify-end",children:o.jsx(da,{size:16,className:pe("text-muted-foreground transition-transform duration-200",e&&"rotate-90")})})]}),o.jsx(cn,{children:e&&o.jsx(Et.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"overflow-hidden bg-slate-50 dark:bg-slate-900/40 border-t border-border/50",children:o.jsxs("div",{className:"p-4 pl-14 grid grid-cols-1 md:grid-cols-2 gap-8 text-sm",children:[o.jsx("div",{className:"space-y-3",children:o.jsxs("div",{className:"grid grid-cols-3 gap-y-2",children:[o.jsx("span",{className:"text-muted-foreground text-xs uppercase tracking-wide",children:"Category"}),o.jsx("div",{className:"col-span-2 font-medium",children:r[t.category]}),o.jsx("span",{className:"text-muted-foreground text-xs uppercase tracking-wide",children:"Ref ID"}),o.jsx("div",{className:"col-span-2 font-mono text-xs",children:t.id.toUpperCase()}),t.sourceRef&&o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"text-muted-foreground text-xs uppercase tracking-wide",children:"Source"}),o.jsxs("div",{className:"col-span-2 flex items-center gap-1 text-primary hover:underline cursor-pointer",children:[o.jsx(iH,{size:12})," ",t.sourceRef]})]})]})}),o.jsxs("div",{className:"flex items-center justify-end gap-2 md:border-l md:pl-8 border-border/50",children:[o.jsx("button",{className:"px-3 py-1.5 text-xs font-medium border rounded-md hover:bg-white dark:hover:bg-slate-800 transition-colors",children:"Edit Category"}),o.jsx("button",{className:"px-3 py-1.5 text-xs font-medium border rounded-md hover:bg-white dark:hover:bg-slate-800 transition-colors",children:"Add Memo"}),o.jsx("button",{className:"px-3 py-1.5 text-xs font-medium text-emerald-600 border border-emerald-100 bg-emerald-50 dark:bg-emerald-900/10 dark:border-emerald-900/20 rounded-md hover:bg-emerald-100 transition-colors",children:"View Receipt"})]})]})})})]})};function Fee(){return o.jsxs("div",{className:"max-w-5xl mx-auto space-y-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Accounting"}),o.jsx("p",{className:"text-muted-foreground",children:"Income, expenses, and financial records."})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("button",{className:"inline-flex items-center gap-2 px-3 py-2 rounded-lg bg-card border hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors text-sm font-medium shadow-sm",children:[o.jsx(Bd,{size:16,className:"text-muted-foreground"}),"This Year",o.jsx(vs,{size:14,className:"text-muted-foreground"})]}),o.jsxs("button",{className:"inline-flex items-center gap-2 px-3 py-2 rounded-lg bg-card border hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors text-sm font-medium shadow-sm",children:[o.jsx(TS,{size:16,className:"text-emerald-600"}),"Export CSV"]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{className:"p-4 rounded-xl border bg-card shadow-sm space-y-2",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Total Income"}),o.jsx("div",{className:"p-1.5 bg-emerald-100/50 text-emerald-600 rounded-lg",children:o.jsx(hL,{size:16})})]}),o.jsxs("div",{className:"text-2xl font-bold text-foreground",children:["$",124500 .toLocaleString()]})]}),o.jsxs("div",{className:"p-4 rounded-xl border bg-card shadow-sm space-y-2",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Total Expenses"}),o.jsx("div",{className:"p-1.5 bg-rose-100/50 text-rose-600 rounded-lg",children:o.jsx(DV,{size:16})})]}),o.jsxs("div",{className:"text-2xl font-bold text-foreground",children:["$",42350 .toLocaleString()]})]}),o.jsxs("div",{className:"p-4 rounded-xl border bg-card shadow-sm space-y-2",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Net Cash Flow"}),o.jsx("div",{className:"p-1.5 bg-blue-100/50 text-blue-600 rounded-lg",children:o.jsx(xL,{size:16})})]}),o.jsxs("div",{className:"text-2xl font-bold text-foreground",children:["$",82150 .toLocaleString()]})]})]}),o.jsxs("div",{className:"flex items-center gap-2 mt-8",children:[o.jsxs("div",{className:"relative flex-1 max-w-sm",children:[o.jsx(di,{className:"absolute left-2.5 top-2.5 text-muted-foreground",size:16}),o.jsx("input",{type:"text",placeholder:"Search transactions...",className:"w-full pl-9 pr-4 py-2 bg-card border rounded-lg text-sm focus:ring-1 focus:ring-primary outline-none"})]}),o.jsxs("button",{className:"flex items-center gap-2 px-3 py-2 rounded-lg border bg-card hover:bg-slate-50 dark:hover:bg-slate-800 text-sm font-medium text-muted-foreground hover:text-foreground transition-colors",children:[o.jsx(po,{size:14}),"Filters"]}),o.jsxs("button",{className:"flex items-center gap-2 px-3 py-2 rounded-lg border bg-card hover:bg-slate-50 dark:hover:bg-slate-800 text-sm font-medium text-muted-foreground hover:text-foreground transition-colors ml-auto",children:[o.jsx(fo,{size:14})," All Properties ",o.jsx(vs,{size:14})]})]}),o.jsxs("div",{className:"border rounded-xl bg-card shadow-sm overflow-hidden",children:[o.jsxs("div",{className:"grid grid-cols-12 gap-4 px-4 py-3 bg-slate-50/50 dark:bg-slate-800/50 border-b text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:[o.jsx("div",{className:"col-span-2",children:"Date"}),o.jsx("div",{className:"col-span-5 md:col-span-4",children:"Description"}),o.jsx("div",{className:"hidden md:block col-span-2",children:"Category"}),o.jsx("div",{className:"col-span-4 md:col-span-3 text-right",children:"Amount"}),o.jsx("div",{className:"col-span-1"})]}),o.jsx("div",{className:"divide-y divide-border/50",children:Uee.map(r=>o.jsx(Oee,{entry:r},r.id))})]})]})}const zee=[{id:"d1",name:"Lease Agreement - Jane Smith.pdf",type:"lease",status:"signed",relatedEntityType:"lease",relatedEntityName:"Jane Smith - Unit 3B",size:"2.4 MB",uploadedAt:"2023-12-15",signedAt:"2023-12-20",uploadedBy:"System"},{id:"d2",name:"Move-in Inspection - Unit 102.jpg",type:"report",status:"draft",relatedEntityType:"unit",relatedEntityName:"Highland Lofts - 102",size:"4.1 MB",uploadedAt:"2024-01-02",uploadedBy:"Mike Ross (Tenant)"},{id:"d3",name:"Notice to Enter - Unit A.pdf",type:"notice",status:"unsigned",relatedEntityType:"tenant",relatedEntityName:"David Wilson",size:"145 KB",uploadedAt:"2024-01-04",uploadedBy:"Property Manager"},{id:"d4",name:"Plumbing Invoice #4492.pdf",type:"invoice",status:"signed",relatedEntityType:"property",relatedEntityName:"Oak Street Apartments",size:"88 KB",uploadedAt:"2023-12-28",uploadedBy:"Rapid Plumbers Co."}],Bee=({status:t})=>{const n={signed:{icon:$x,color:"text-emerald-500",label:"Signed"},unsigned:{icon:Pn,color:"text-amber-500",label:"Pending"},expired:{icon:zs,color:"text-rose-500",label:"Expired"},draft:{icon:rn,color:"text-slate-400",label:"Draft"}}[t];return o.jsxs("div",{className:"flex items-center gap-1.5",title:n.label,children:[o.jsx(n.icon,{size:14,className:n.color}),o.jsx("span",{className:pe("text-xs font-medium hidden md:inline-block",n.color),children:n.label})]})},Vee=({type:t})=>{switch(t){case"lease":return o.jsx(rn,{className:"text-blue-500",size:20});case"notice":return o.jsx(zs,{className:"text-amber-500",size:20});case"report":return o.jsx(JV,{className:"text-slate-500",size:20});case"invoice":return o.jsx(rn,{className:"text-emerald-500",size:20});case"other":return o.jsx(QV,{className:"text-purple-500",size:20});default:return o.jsx(rn,{className:"text-slate-500",size:20})}},Hee=({doc:t})=>{const[e,n]=D.useState(!1);return o.jsxs("div",{className:pe("group border-b last:border-0 hover:bg-slate-50/50 dark:hover:bg-slate-800/30 transition-colors",e&&"bg-slate-50/80 dark:bg-slate-800/50"),children:[o.jsxs("div",{className:"grid grid-cols-12 gap-4 p-4 items-center cursor-pointer",onClick:()=>n(!e),children:[o.jsxs("div",{className:"col-span-6 md:col-span-5 flex items-center gap-3 overflow-hidden",children:[o.jsx("div",{className:"p-2 bg-slate-100 dark:bg-slate-800 rounded-lg shrink-0",children:o.jsx(Vee,{type:t.type})}),o.jsxs("div",{className:"truncate",children:[o.jsx("div",{className:"font-medium text-sm text-foreground truncate",title:t.name,children:t.name}),o.jsx("div",{className:"text-xs text-muted-foreground truncate",children:t.relatedEntityName})]})]}),o.jsx("div",{className:"hidden md:flex col-span-2 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:t.type}),o.jsx("div",{className:"col-span-3 md:col-span-2",children:o.jsx(Bee,{status:t.status})}),o.jsx("div",{className:"hidden md:flex col-span-2 text-sm text-muted-foreground",children:t.uploadedAt}),o.jsxs("div",{className:"col-span-3 md:col-span-1 flex justify-end items-center gap-2",children:[o.jsx("button",{className:"p-1.5 hover:bg-slate-200 dark:hover:bg-slate-700 rounded-md transition-colors text-muted-foreground hidden group-hover:block",title:"Download",children:o.jsx(Yr,{size:16})}),o.jsx(da,{size:16,className:pe("text-muted-foreground transition-transform duration-200",e&&"rotate-90")})]})]}),o.jsx(cn,{children:e&&o.jsx(Et.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"overflow-hidden bg-slate-50 dark:bg-slate-900/40 border-t border-border/50",children:o.jsxs("div",{className:"p-4 pl-[4.5rem] grid grid-cols-1 md:grid-cols-2 gap-8 text-sm",children:[o.jsx("div",{className:"space-y-4",children:o.jsxs("div",{className:"grid grid-cols-3 gap-y-2",children:[o.jsx("div",{className:"col-span-3 font-semibold text-xs uppercase tracking-wider text-muted-foreground mb-1",children:"Details"}),o.jsx("span",{className:"text-muted-foreground",children:"Size"}),o.jsx("div",{className:"col-span-2 font-medium",children:t.size}),o.jsx("span",{className:"text-muted-foreground",children:"Uploaded By"}),o.jsx("div",{className:"col-span-2 font-medium",children:t.uploadedBy}),o.jsx("span",{className:"text-muted-foreground",children:"Upload Date"}),o.jsx("div",{className:"col-span-2 font-medium",children:t.uploadedAt}),t.signedAt&&o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"text-muted-foreground",children:"Signed Date"}),o.jsx("div",{className:"col-span-2 font-medium text-emerald-600 dark:text-emerald-500",children:t.signedAt})]})]})}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{className:"font-semibold text-xs uppercase tracking-wider text-muted-foreground mb-1",children:"Actions"}),o.jsxs("div",{className:"flex flex-wrap gap-2",children:[o.jsxs("button",{className:"flex items-center gap-2 px-3 py-2 text-sm font-medium border rounded-md hover:bg-white dark:hover:bg-slate-800 transition-colors bg-card shadow-sm",children:[o.jsx(vL,{size:14})," View"]}),o.jsxs("button",{className:"flex items-center gap-2 px-3 py-2 text-sm font-medium border rounded-md hover:bg-white dark:hover:bg-slate-800 transition-colors bg-card shadow-sm",children:[o.jsx(Yr,{size:14})," Download"]}),o.jsxs("button",{className:"flex items-center gap-2 px-3 py-2 text-sm font-medium border border-rose-200 text-rose-600 rounded-md hover:bg-rose-50 dark:hover:bg-rose-900/20 transition-colors bg-card shadow-sm ml-auto",children:[o.jsx(hx,{size:14})," Archive"]})]})]})]})})})]})};function Gee(){return o.jsxs("div",{className:"max-w-5xl mx-auto space-y-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Documents"}),o.jsx("p",{className:"text-muted-foreground",children:"Leases, notices, and property files."})]}),o.jsx("div",{className:"flex items-center gap-2",children:o.jsxs("button",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-primary text-primary-foreground hover:bg-primary/90 transition-colors font-medium text-sm shadow-sm",children:[o.jsx(X2,{size:16}),"Upload Document"]})})]}),o.jsxs("div",{className:"flex items-center gap-2 bg-card p-2 rounded-lg border shadow-sm w-full",children:[o.jsx(di,{className:"text-muted-foreground ml-2",size:18}),o.jsx("input",{type:"text",placeholder:"Search by name, tenant, or property...",className:"flex-1 bg-transparent border-none focus:ring-0 text-sm placeholder:text-muted-foreground outline-none"}),o.jsx("div",{className:"w-px h-6 bg-border mx-2"}),o.jsxs("button",{className:"flex items-center gap-2 px-3 py-1.5 rounded-md hover:bg-slate-100 dark:hover:bg-slate-800 text-sm font-medium text-muted-foreground hover:text-foreground transition-colors",children:[o.jsx(po,{size:14}),"Filters"]})]}),o.jsxs("div",{className:"border rounded-xl bg-card shadow-sm overflow-hidden min-h-[400px]",children:[o.jsxs("div",{className:"grid grid-cols-12 gap-4 px-4 py-3 bg-slate-50/50 dark:bg-slate-800/50 border-b text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:[o.jsx("div",{className:"col-span-6 md:col-span-5",children:"Name"}),o.jsx("div",{className:"hidden md:block col-span-2",children:"Type"}),o.jsx("div",{className:"col-span-3 md:col-span-2",children:"Status"}),o.jsx("div",{className:"hidden md:block col-span-2",children:"Uploaded"}),o.jsx("div",{className:"col-span-3 md:col-span-1"})]}),o.jsx("div",{className:"divide-y divide-border/50",children:zee.map(t=>o.jsx(Hee,{doc:t},t.id))})]})]})}const wb=[{id:"t1",participants:["Jane Smith","Property Manager"],subject:"Leaking sink update",primaryEntityType:"maintenance",primaryEntityId:"m1",primaryEntityLabel:"Maintenance #M1",lastMessageAt:"2h ago",unreadCount:1,messages:[{id:"m1-1",senderType:"tenant",senderName:"Jane Smith",body:"Hi, just wanted to check when the plumber is coming? usage is getting tricky.",createdAt:"Yesterday"},{id:"m1-2",senderType:"staff",senderName:"You",body:"Hi Jane, I have scheduled Rapid Plumbers for tomorrow between 10am-12pm. Does that work?",createdAt:"Yesterday"},{id:"m1-3",senderType:"tenant",senderName:"Jane Smith",body:"Yes that works perfectly, thank you!",createdAt:"2h ago"}]},{id:"t2",participants:["Rapid Plumbers Co.","Property Manager"],subject:"Invoice #4492 Question",primaryEntityType:"payment",primaryEntityId:"inv-4492",primaryEntityLabel:"Invoice #4492",lastMessageAt:"1d ago",unreadCount:0,messages:[{id:"m2-1",senderType:"vendor",senderName:"Rapid Plumbers Admin",body:"Hello, regarding the invoice sent last week, was the parts breakdown clear?",createdAt:"2d ago"},{id:"m2-2",senderType:"staff",senderName:"You",body:"Yes, looking at it now. Processing payment this afternoon.",createdAt:"1d ago"}]},{id:"t3",participants:["System","Property Manager"],subject:"Lease Renewal Alert: Unit 102",primaryEntityType:"lease",primaryEntityId:"l-102",primaryEntityLabel:"Lease #L-102",lastMessageAt:"3d ago",unreadCount:0,messages:[{id:"m3-1",senderType:"system",senderName:"System",body:"The lease for Unit 102 (Michael Chen) is expiring in 60 days. Auto-generated renewal offer has been drafted.",createdAt:"3d ago"}]}],kI=({type:t})=>{switch(t){case"maintenance":return o.jsx(Ft,{size:14,className:"text-amber-600"});case"lease":return o.jsx(rn,{size:14,className:"text-blue-600"});case"payment":return o.jsx(ki,{size:14,className:"text-emerald-600"});case"unit":return o.jsx(fo,{size:14,className:"text-slate-600"})}},Wee=({thread:t,active:e,onClick:n})=>o.jsxs("div",{onClick:n,className:pe("p-4 border-b cursor-pointer transition-colors hover:bg-slate-50 dark:hover:bg-slate-800/50",e?"bg-slate-100 dark:bg-slate-800 border-l-4 border-l-primary":"border-l-4 border-l-transparent",t.unreadCount>0?"bg-white dark:bg-card":"bg-slate-50/30 dark:bg-slate-900/10 text-muted-foreground"),children:[o.jsxs("div",{className:"flex justify-between items-start mb-1",children:[o.jsxs("div",{className:"font-semibold text-sm truncate pr-2 flex items-center gap-2",children:[t.unreadCount>0&&o.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-600 flex-shrink-0"}),t.participants[0]]}),o.jsx("div",{className:"text-xs text-muted-foreground whitespace-nowrap",children:t.lastMessageAt})]}),o.jsxs("div",{className:"flex items-center gap-1.5 mb-2",children:[o.jsxs("div",{className:"flex items-center gap-1 px-1.5 py-0.5 rounded bg-slate-200/50 dark:bg-slate-700/30 text-[10px] uppercase font-bold tracking-wide text-muted-foreground",children:[o.jsx(kI,{type:t.primaryEntityType}),o.jsx("span",{children:t.primaryEntityType})]}),o.jsx("div",{className:"text-xs font-medium truncate",children:t.subject})]}),o.jsx("div",{className:"text-xs text-muted-foreground line-clamp-2 leading-relaxed",children:t.messages[t.messages.length-1].body})]}),Xee=({message:t})=>{const e=t.senderType==="staff";return o.jsxs("div",{className:pe("flex flex-col gap-1 max-w-[85%]",e?"self-end items-end":"self-start items-start"),children:[o.jsxs("div",{className:"text-[10px] text-muted-foreground px-1",children:[e?"You":t.senderName,"  ",t.createdAt]}),o.jsx("div",{className:pe("px-4 py-2.5 rounded-2xl text-sm leading-relaxed",e?"bg-primary text-primary-foreground rounded-br-none":"bg-slate-100 dark:bg-slate-800 text-foreground rounded-bl-none border border-border/50"),children:t.body})]})};function Yee(){const[t,e]=D.useState(wb[0].id),n=wb.find(r=>r.id===t);return o.jsxs("div",{className:"h-[calc(100vh-6rem)] flex flex-col md:flex-row gap-0 md:gap-6 max-w-6xl mx-auto overflow-hidden",children:[o.jsxs("div",{className:"w-full md:w-1/3 flex flex-col bg-card border rounded-xl overflow-hidden shadow-sm h-full",children:[o.jsxs("div",{className:"p-4 border-b flex flex-col gap-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h2",{className:"font-semibold text-lg",children:"Inbox"}),o.jsx("button",{className:"p-1.5 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-md transition-colors",children:o.jsx(Ws,{size:20,className:"text-primary"})})]}),o.jsxs("div",{className:"relative",children:[o.jsx(di,{className:"absolute left-2.5 top-2.5 text-muted-foreground",size:14}),o.jsx("input",{type:"text",placeholder:"Search messages...",className:"w-full pl-8 pr-4 py-2 bg-slate-50 dark:bg-slate-900 border rounded-lg text-sm focus:ring-1 focus:ring-primary outline-none"})]}),o.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-1 scrollbar-hide",children:[o.jsx("button",{className:"px-3 py-1 bg-slate-900 text-white text-xs rounded-full font-medium whitespace-nowrap",children:"Unread (1)"}),o.jsx("button",{className:"px-3 py-1 bg-slate-100 dark:bg-slate-800 text-muted-foreground text-xs rounded-full font-medium whitespace-nowrap hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors",children:"Maintenance"}),o.jsx("button",{className:"px-3 py-1 bg-slate-100 dark:bg-slate-800 text-muted-foreground text-xs rounded-full font-medium whitespace-nowrap hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors",children:"Leases"})]})]}),o.jsx("div",{className:"flex-1 overflow-y-auto",children:wb.map(r=>o.jsx(Wee,{thread:r,active:t===r.id,onClick:()=>e(r.id)},r.id))})]}),o.jsx("div",{className:"hidden md:flex flex-1 flex-col bg-card border rounded-xl overflow-hidden shadow-sm h-full",children:n?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"p-4 border-b flex items-center justify-between bg-white dark:bg-card z-10",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[o.jsx("h3",{className:"font-semibold text-foreground",children:n.participants.filter(r=>r!=="You"&&r!=="Property Manager").join(", ")}),n.primaryEntityType==="maintenance"&&o.jsx("span",{className:"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-500 text-[10px] px-1.5 py-0.5 rounded font-bold uppercase tracking-wide",children:"High Priority"})]}),o.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[o.jsx("span",{children:n.subject}),o.jsx("span",{className:"w-1 h-1 rounded-full bg-border"}),o.jsxs("span",{className:"flex items-center gap-1 hover:text-primary cursor-pointer transition-colors",children:[o.jsx(kI,{type:n.primaryEntityType}),n.primaryEntityLabel]})]})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("button",{className:"p-2 text-muted-foreground hover:bg-slate-100 dark:hover:bg-slate-800 rounded-md transition-colors",children:o.jsx(WV,{size:18})}),o.jsx("button",{className:"p-2 text-muted-foreground hover:bg-slate-100 dark:hover:bg-slate-800 rounded-md transition-colors",children:o.jsx(Oc,{size:18})})]})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6 bg-slate-50/50 dark:bg-slate-900/10",children:[o.jsx("div",{className:"flex justify-center",children:o.jsxs("span",{className:"text-[10px] font-medium text-muted-foreground bg-slate-100 dark:bg-slate-800 px-2 py-1 rounded-full",children:["Thread Started ",n.messages[0].createdAt]})}),n.messages.map(r=>o.jsx(Xee,{message:r},r.id))]}),o.jsxs("div",{className:"p-4 border-t bg-white dark:bg-card",children:[o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{className:"p-2 text-muted-foreground hover:bg-slate-100 dark:hover:bg-slate-800 rounded-full transition-colors h-fit self-end",children:o.jsx(lH,{size:20})}),o.jsx("div",{className:"flex-1 bg-slate-50 dark:bg-slate-900 border rounded-2xl p-3 focus-within:ring-1 focus-within:ring-primary transition-all",children:o.jsx("textarea",{placeholder:"Type a message...",className:"w-full bg-transparent border-none focus:ring-0 text-sm resize-none outline-none max-h-32 min-h-[1.5rem]",rows:1})}),o.jsx("button",{className:"p-3 bg-primary text-primary-foreground rounded-full hover:bg-primary/90 transition-colors shadow-sm h-fit self-end",children:o.jsx(PS,{size:18})})]}),o.jsx("div",{className:"mt-2 text-[10px] text-muted-foreground flex justify-end gap-3 px-2",children:o.jsx("span",{children:"Press Enter to send"})})]})]}):o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-muted-foreground p-8 text-center",children:[o.jsx("div",{className:"w-16 h-16 bg-slate-100 dark:bg-slate-800 rounded-full flex items-center justify-center mb-4",children:o.jsx(Bs,{size:32,className:"opacity-50"})}),o.jsx("h3",{className:"font-medium text-foreground",children:"No Conversation Selected"}),o.jsx("p",{className:"text-sm mt-1 max-w-xs",children:"Select a conversation from the list to view details and reply."})]})})]})}const Qg=[{id:"r-income",name:"Income Statement",description:"Detailed breakdown of revenue and expenses over a specific period.",category:"financial",lastGenerated:"Today"},{id:"r-expenses",name:"Expense Summary",description:"Categorized view of all operating expenses and capital expenditures.",category:"financial"},{id:"r-noi",name:"Net Operating Income (NOI)",description:"Analysis of profitability excluding financing and tax costs.",category:"financial"},{id:"r-rentroll",name:"Rent Roll",description:"Current status of all units, tenants, lease terms, and rental rates.",category:"tenancy",lastGenerated:"Yesterday"},{id:"r-delinquency",name:"Delinquency Report",description:"List of tenants with outstanding balances aged by 30/60/90 days.",category:"tenancy"},{id:"r-maint-cost",name:"Maintenance Costs",description:"Repair and maintenance expenses grouped by property and category.",category:"maintenance"}],qee=({category:t})=>{const e={financial:"bg-emerald-100 text-emerald-700 dark:bg-emerald-500/10 dark:text-emerald-400",tenancy:"bg-blue-100 text-blue-700 dark:bg-blue-500/10 dark:text-blue-400",maintenance:"bg-amber-100 text-amber-700 dark:bg-amber-500/10 dark:text-amber-400",portfolio:"bg-slate-100 text-slate-700 dark:bg-slate-800 dark:text-slate-400"};return o.jsx("span",{className:pe("text-[10px] uppercase font-bold px-2 py-0.5 rounded-full tracking-wide",e[t]),children:t})},Sb=({report:t,onClick:e})=>o.jsxs("div",{onClick:e,className:"group border rounded-xl bg-card p-5 hover:border-primary/50 hover:shadow-md transition-all cursor-pointer flex flex-col h-full",children:[o.jsxs("div",{className:"flex justify-between items-start mb-3",children:[o.jsx("div",{className:`p-2 rounded-lg ${t.category==="financial"?"bg-emerald-50 text-emerald-600":t.category==="tenancy"?"bg-blue-50 text-blue-600":"bg-amber-50 text-amber-600"}`,children:t.category==="financial"?o.jsx(TS,{size:20}):t.category==="tenancy"?o.jsx(cH,{size:20}):o.jsx(mL,{size:20})}),o.jsx(qee,{category:t.category})]}),o.jsx("h3",{className:"font-semibold text-foreground mb-1 group-hover:text-primary transition-colors",children:t.name}),o.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed flex-1 mb-4",children:t.description}),o.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-border/50 mt-auto",children:[o.jsx("span",{className:"text-xs text-muted-foreground font-medium",children:t.lastGenerated?`Last run: ${t.lastGenerated}`:"Never generated"}),o.jsxs("div",{className:"flex items-center gap-1 text-xs font-semibold text-primary opacity-0 group-hover:opacity-100 transition-opacity transform translate-x-[-5px] group-hover:translate-x-0",children:["Run Report ",o.jsx(so,{size:14})]})]})]}),$ee=({report:t,onBack:e})=>o.jsxs("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-300 space-y-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 bg-card p-4 rounded-xl border shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("button",{onClick:e,className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg transition-colors text-muted-foreground hover:text-foreground",children:o.jsx(XV,{size:20})}),o.jsxs("div",{children:[o.jsx("h2",{className:"font-bold text-lg leading-tight",children:t.name}),o.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground mt-0.5",children:[o.jsx(Bd,{size:12}),o.jsx("span",{children:"Jan 1, 2024 - Jan 31, 2024"}),o.jsx("span",{className:"w-1 h-1 rounded-full bg-border"}),o.jsx(fo,{size:12}),o.jsx("span",{children:"All Properties"})]})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("button",{className:"flex items-center gap-2 px-3 py-2 bg-slate-900 text-white dark:bg-slate-50 dark:text-slate-900 rounded-lg text-sm font-medium hover:opacity-90 transition-opacity",children:[o.jsx(Yr,{size:16})," Export CSV"]}),o.jsx("button",{className:"flex items-center gap-2 px-3 py-2 border bg-white dark:bg-black rounded-lg text-sm font-medium hover:bg-slate-50 dark:hover:bg-slate-900 transition-colors",children:"PDF"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{className:"p-4 bg-card border rounded-xl space-y-1",children:[o.jsx("div",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Total Revenue"}),o.jsx("div",{className:"text-2xl font-bold",children:"$124,500.00"})]}),o.jsxs("div",{className:"p-4 bg-card border rounded-xl space-y-1",children:[o.jsx("div",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Total Expenses"}),o.jsx("div",{className:"text-2xl font-bold",children:"$42,350.00"})]}),o.jsxs("div",{className:"p-4 bg-card border rounded-xl space-y-1",children:[o.jsx("div",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Net Operating Income"}),o.jsx("div",{className:"text-2xl font-bold text-emerald-600",children:"$82,150.00"})]})]}),o.jsxs("div",{className:"border rounded-xl bg-card overflow-hidden",children:[o.jsx("div",{className:"px-6 py-4 border-b flex justify-between items-center bg-slate-50/50 dark:bg-slate-900/50",children:o.jsx("h3",{className:"font-semibold text-sm",children:"Detailed Breakdown"})}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full text-sm text-left",children:[o.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900/50 border-b text-xs uppercase text-muted-foreground font-semibold",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3",children:"Date"}),o.jsx("th",{className:"px-6 py-3",children:"Description"}),o.jsx("th",{className:"px-6 py-3",children:"Category"}),o.jsx("th",{className:"px-6 py-3 text-right",children:"Amount"})]})}),o.jsx("tbody",{className:"divide-y",children:[1,2,3,4,5].map(n=>o.jsxs("tr",{className:"hover:bg-slate-50/50 dark:hover:bg-slate-800/30",children:[o.jsxs("td",{className:"px-6 py-3 tabular-nums",children:["Jan ",n+2,", 2024"]}),o.jsxs("td",{className:"px-6 py-3 font-medium",children:["Rent Payment - Unit ",300+n]}),o.jsx("td",{className:"px-6 py-3 text-muted-foreground",children:"Rental Income"}),o.jsx("td",{className:"px-6 py-3 text-right tabular-nums text-emerald-600",children:"$2,450.00"})]},n))})]})})]})]});function Zee(){const[t,e]=D.useState(null),n=Qg.find(r=>r.id===t);return o.jsxs("div",{className:"max-w-6xl mx-auto space-y-8",children:[!n&&o.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Reports"}),o.jsx("p",{className:"text-muted-foreground",children:"Financial and operational summaries."})]})}),o.jsx(cn,{mode:"wait",children:n?o.jsx(Et.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:o.jsx($ee,{report:n,onBack:()=>e(null)})},"viewer"):o.jsxs(Et.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center gap-2 bg-card p-2 rounded-lg border shadow-sm max-w-2xl",children:[o.jsx(di,{className:"text-muted-foreground ml-2",size:18}),o.jsx("input",{type:"text",placeholder:"Search reports...",className:"flex-1 bg-transparent border-none focus:ring-0 text-sm placeholder:text-muted-foreground outline-none"})]}),o.jsxs("div",{className:"space-y-8",children:[o.jsxs("section",{children:[o.jsx("h2",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wider mb-4 border-b pb-2",children:"Financial Reports"}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Qg.filter(r=>r.category==="financial").map(r=>o.jsx(Sb,{report:r,onClick:()=>e(r.id)},r.id))})]}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wider mb-4 border-b pb-2",children:"Tenancy & Leasing"}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Qg.filter(r=>r.category==="tenancy").map(r=>o.jsx(Sb,{report:r,onClick:()=>e(r.id)},r.id))})]}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wider mb-4 border-b pb-2",children:"Maintenance & Operations"}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Qg.filter(r=>r.category==="maintenance").map(r=>o.jsx(Sb,{report:r,onClick:()=>e(r.id)},r.id))})]})]})]},"catalog")})]})}const Kee=[{id:"pay_1",date:"2024-01-05",tenantName:"Jane Smith",propertyName:"Oak Street Apartments",unitNumber:"3B",type:"rent",amount:1450,method:"ach",last4:"4492",status:"paid",processorRef:"ch_1Ok..."},{id:"pay_2",date:"2024-01-04",tenantName:"David Wilson",propertyName:"Sunset Duplex",unitNumber:"A",type:"rent",amount:1950,method:"card",last4:"1092",status:"failed",processorRef:"ch_1Oj...",failureReason:"Insufficient funds",nextRetryDate:"2024-01-06"},{id:"pay_3",date:"2024-01-01",tenantName:"Michael Chen",propertyName:"Highland Lofts",unitNumber:"102",type:"rent",amount:2300,method:"ach",last4:"8821",status:"pending",processorRef:"py_1Oh..."},{id:"pay_4",date:"2023-12-28",tenantName:"Sarah Jones",propertyName:"Downtown Lofts",unitNumber:"404",type:"fee",amount:50,method:"card",last4:"5543",status:"late",processorRef:"ch_1Og..."}],Jee=({status:t})=>{const e={paid:"bg-emerald-100 text-emerald-700 dark:bg-emerald-500/10 dark:text-emerald-400",pending:"bg-blue-100 text-blue-700 dark:bg-blue-500/10 dark:text-blue-400",failed:"bg-rose-100 text-rose-700 dark:bg-rose-500/10 dark:text-rose-400",late:"bg-amber-100 text-amber-700 dark:bg-amber-500/10 dark:text-amber-400"},n={paid:o.jsx($x,{size:12,className:"mr-1.5"}),pending:o.jsx(Pn,{size:12,className:"mr-1.5"}),failed:o.jsx(zs,{size:12,className:"mr-1.5"}),late:o.jsx(zs,{size:12,className:"mr-1.5"})};return o.jsxs("span",{className:pe("inline-flex items-center text-xs font-medium px-2.5 py-0.5 rounded-full border border-transparent uppercase tracking-wider",e[t]),children:[n[t]," ",t]})},Qee=({payment:t})=>{const[e,n]=D.useState(!1);return o.jsxs("div",{className:pe("group border-b last:border-0 hover:bg-slate-50/50 dark:hover:bg-slate-800/30 transition-colors",e&&"bg-slate-50/80 dark:bg-slate-800/50"),children:[o.jsxs("div",{className:"flex items-center gap-6 p-4 cursor-pointer",onClick:()=>n(!e),children:[o.jsx("div",{className:"w-32 flex-shrink-0 text-sm text-muted-foreground tabular-nums",children:new Date(t.date).toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"font-medium text-sm text-foreground truncate",children:t.tenantName}),o.jsxs("div",{className:"text-xs text-muted-foreground truncate",children:[t.propertyName,"  ",t.unitNumber]})]}),o.jsxs("div",{className:"hidden lg:flex w-56 flex-shrink-0 items-center gap-3",children:[o.jsx("span",{className:"text-xs uppercase font-semibold text-muted-foreground",children:t.type}),o.jsx("div",{className:"w-px h-3 bg-border"}),o.jsxs("div",{className:"flex items-center text-xs text-muted-foreground",children:[t.method==="ach"?o.jsx(pL,{size:14,className:"mr-1"}):o.jsx(ki,{size:14,className:"mr-1"}),t.method.toUpperCase(),"  ",t.last4]})]}),o.jsx("div",{className:"w-32 flex-shrink-0",children:o.jsx(Jee,{status:t.status})}),o.jsxs("div",{className:"w-32 flex-shrink-0 text-right font-medium text-sm tabular-nums",children:["$",t.amount.toLocaleString(void 0,{minimumFractionDigits:2})]}),o.jsx("div",{className:"w-6 flex-shrink-0 flex justify-end",children:o.jsx(da,{size:16,className:pe("text-muted-foreground transition-transform duration-200",e&&"rotate-90")})})]}),o.jsx(cn,{children:e&&o.jsx(Et.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"overflow-hidden bg-slate-50 dark:bg-slate-900/40 border-t border-border/50",children:o.jsxs("div",{className:"p-4 pl-8 lg:pl-[4.5rem] grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 text-sm",children:[o.jsxs("div",{className:"space-y-3",children:[o.jsx("div",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider mb-2",children:"Transaction Info"}),o.jsxs("div",{className:"grid grid-cols-2 gap-y-1 gap-x-2",children:[o.jsx("span",{className:"text-muted-foreground",children:"ID"}),o.jsx("span",{className:"font-mono text-xs text-foreground",children:t.id}),o.jsx("span",{className:"text-muted-foreground",children:"Processor"}),o.jsx("span",{className:"font-mono text-xs text-foreground",children:t.processorRef}),o.jsx("span",{className:"text-muted-foreground",children:"Processed"}),o.jsx("span",{className:"text-foreground",children:t.date})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("div",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider mb-2",children:"Context"}),o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(ga,{size:14,className:"text-muted-foreground"}),o.jsxs("span",{children:[t.propertyName,", Unit ",t.unitNumber]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(yH,{size:14,className:"text-muted-foreground"}),o.jsxs("span",{children:["Sent via ",t.method.toUpperCase()," ending in ",t.last4]})]})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("div",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider mb-2",children:"Status Details"}),t.status==="failed"?o.jsxs("div",{className:"bg-rose-50 dark:bg-rose-900/10 border border-rose-100 dark:border-rose-900/20 rounded p-2 text-xs",children:[o.jsx("div",{className:"font-medium text-rose-700 dark:text-rose-400 mb-0.5",children:"Payment Failed"}),o.jsxs("div",{className:"text-rose-600 dark:text-rose-300",children:["Reason: ",t.failureReason]}),t.nextRetryDate&&o.jsxs("div",{className:"mt-1 text-rose-600 dark:text-rose-300 flex items-center gap-1",children:[o.jsx(RA,{size:10})," Auto-retry on ",t.nextRetryDate]})]}):o.jsx("div",{className:"text-muted-foreground text-xs italic",children:"No exceptions or warnings."})]}),o.jsxs("div",{className:"flex flex-col justify-end gap-2 border-l border-border/50 pl-6",children:[t.status==="failed"&&o.jsxs("button",{className:"flex items-center justify-center gap-2 px-3 py-2 text-sm font-medium bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors shadow-sm w-full",children:[o.jsx(RA,{size:14})," Retry Payment"]}),t.status==="late"&&o.jsxs("button",{className:"flex items-center justify-center gap-2 px-3 py-2 text-sm font-medium bg-white dark:bg-card border rounded-md hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors shadow-sm w-full",children:[o.jsx(Pn,{size:14})," Send Reminder"]}),o.jsxs("button",{className:"flex items-center justify-center gap-2 px-3 py-2 text-sm font-medium bg-white dark:bg-card border rounded-md hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors shadow-sm w-full text-muted-foreground hover:text-foreground",children:["View Tenant Profile ",o.jsx(so,{size:14})]})]})]})})})]})};function ete(){return o.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Payments"}),o.jsx("p",{className:"text-muted-foreground",children:"Rent and fee transactions."})]}),o.jsx("div",{className:"flex items-center gap-2",children:o.jsxs("button",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-primary text-primary-foreground hover:bg-primary/90 transition-colors font-medium text-sm shadow-sm",children:[o.jsx(Ws,{size:16}),"Record Payment"]})})]}),o.jsxs("div",{className:"flex items-center gap-2 bg-card p-2 rounded-lg border shadow-sm w-full",children:[o.jsx(di,{className:"text-muted-foreground ml-2",size:18}),o.jsx("input",{type:"text",placeholder:"Search by tenant, unit, or ref ID...",className:"flex-1 bg-transparent border-none focus:ring-0 text-sm placeholder:text-muted-foreground outline-none"}),o.jsx("div",{className:"w-px h-6 bg-border mx-2"}),o.jsxs("button",{className:"flex items-center gap-2 px-3 py-1.5 rounded-md hover:bg-slate-100 dark:hover:bg-slate-800 text-sm font-medium text-muted-foreground hover:text-foreground transition-colors",children:[o.jsx(po,{size:14}),"Filters"]}),o.jsxs("button",{className:"flex items-center gap-2 px-3 py-1.5 rounded-md hover:bg-slate-100 dark:hover:bg-slate-800 text-sm font-medium text-muted-foreground hover:text-foreground transition-colors",children:["This Month ",o.jsx(vs,{size:14})]})]}),o.jsxs("div",{className:"border rounded-xl bg-card shadow-sm overflow-hidden min-h-[400px]",children:[o.jsxs("div",{className:"flex items-center gap-6 px-4 py-3 bg-slate-50/50 dark:bg-slate-800/50 border-b text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:[o.jsx("div",{className:"w-32 flex-shrink-0",children:"Date"}),o.jsx("div",{className:"flex-1 min-w-0",children:"Tenant & Context"}),o.jsx("div",{className:"hidden lg:block w-56 flex-shrink-0",children:"Method"}),o.jsx("div",{className:"w-32 flex-shrink-0",children:"Status"}),o.jsx("div",{className:"w-32 flex-shrink-0 text-right",children:"Amount"}),o.jsx("div",{className:"w-6 flex-shrink-0"})]}),o.jsx("div",{className:"divide-y divide-border/50",children:Kee.map(t=>o.jsx(Qee,{payment:t},t.id))})]})]})}function tte(){const[t,e]=D.useState(!1),n=D.useRef(null),{toast:r}=Fc();D.useEffect(()=>{function s(a){n.current&&!n.current.contains(a.target)&&e(!1)}return document.addEventListener("mousedown",s),()=>document.removeEventListener("mousedown",s)},[]);const i=s=>{e(!1),r({type:"info",title:"Action Triggered",message:`Feature coming soon: ${s}`})};return o.jsxs("div",{className:"relative",ref:n,children:[o.jsx("button",{onClick:()=>e(!t),className:pe("p-2 bg-white dark:bg-card border rounded-lg transition-colors shadow-sm",t?"bg-slate-100 dark:bg-slate-800 text-foreground":"text-muted-foreground hover:bg-slate-50 dark:hover:bg-slate-800 hover:text-foreground"),children:o.jsx(Oc,{size:20})}),o.jsx(cn,{children:t&&o.jsx(Et.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{duration:.1},className:"absolute right-0 top-full mt-2 w-72 bg-white dark:bg-slate-900 border border-border rounded-xl shadow-xl z-50 overflow-hidden",children:o.jsxs("div",{className:"max-h-[80vh] overflow-y-auto py-2",children:[o.jsxs("div",{className:"px-3 py-2",children:[o.jsx("h3",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider mb-2 px-2",children:"Property Management"}),o.jsxs("div",{className:"space-y-1",children:[o.jsx(bi,{icon:NL,label:"Edit Details",onClick:()=>i("Edit Details")}),o.jsx(bi,{icon:Jx,label:"Property Settings",onClick:()=>i("Property Settings")}),o.jsx(bi,{icon:ev,label:"Manage Access / Roles",onClick:()=>i("Manage Access")}),o.jsx(bi,{icon:rn,label:"Property Documents",onClick:()=>i("Property Documents")})]})]}),o.jsx(e0,{}),o.jsxs("div",{className:"px-3 py-2",children:[o.jsx("h3",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider mb-2 px-2",children:"Operations"}),o.jsxs("div",{className:"space-y-1",children:[o.jsx(bi,{icon:wL,label:"Bulk Actions",onClick:()=>i("Bulk Actions")}),o.jsx(bi,{icon:Yr,label:"Export Property Data",onClick:()=>i("Export Data")}),o.jsx(bi,{icon:zV,label:"Generate Reports",onClick:()=>i("Generate Reports")})]})]}),o.jsx(e0,{}),o.jsxs("div",{className:"px-3 py-2",children:[o.jsx("h3",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider mb-2 px-2",children:"Financial"}),o.jsxs("div",{className:"space-y-1",children:[o.jsx(bi,{icon:ki,label:"Accounting Settings",onClick:()=>i("Accounting Settings")}),o.jsx(bi,{icon:ao,label:"Reconcile Transactions",onClick:()=>i("Reconcile")}),o.jsx(bi,{icon:TS,label:"View Ledger",onClick:()=>i("View Ledger")})]})]}),o.jsx(e0,{}),o.jsxs("div",{className:"px-3 py-2",children:[o.jsx("h3",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider mb-2 px-2",children:"Lifecycle"}),o.jsxs("div",{className:"space-y-1",children:[o.jsx(bi,{icon:qV,label:"Duplicate Property",onClick:()=>i("Duplicate Property")}),o.jsx(bi,{icon:OV,label:"Transfer Ownership",onClick:()=>i("Transfer Ownership")}),o.jsx(bi,{icon:LV,label:"Archive Property",onClick:()=>i("Archive Property")})]})]}),o.jsx(e0,{}),o.jsxs("div",{className:"px-3 py-2",children:[o.jsx("h3",{className:"text-xs font-semibold text-rose-500 uppercase tracking-wider mb-2 px-2",children:"Danger Zone"}),o.jsx("div",{className:"space-y-1",children:o.jsx(bi,{icon:hx,label:"Delete Property",variant:"danger",onClick:()=>i("Delete Property")})})]})]})})})]})}function bi({icon:t,label:e,onClick:n,variant:r="default"}){return o.jsxs("button",{onClick:n,className:pe("w-full flex items-center gap-2 px-2 py-2 text-sm rounded-lg transition-colors text-left",r==="danger"?"text-rose-600 hover:bg-rose-50 dark:hover:bg-rose-900/20":"text-foreground hover:bg-slate-50 dark:hover:bg-slate-800"),children:[o.jsx(t,{size:16,className:pe(r==="danger"?"text-rose-600":"text-muted-foreground")}),e]})}function e0(){return o.jsx("div",{className:"h-px bg-border mx-4 my-1"})}const Ru={occupancyRate:94,rentCollected:48200,rentExpected:51e3,overdueBalance:1850,openMaintenanceCount:3,leasesEndingSoon:2},nte=[{id:"u1",unitNumber:"101",status:"occupied",tenantName:"Jane Smith",rent:1450,leaseEndDate:"2024-06-30"},{id:"u2",unitNumber:"102",status:"vacant",rent:1600},{id:"u3",unitNumber:"103",status:"occupied",tenantName:"Michael Chen",rent:1500,leaseEndDate:"2024-02-15",flags:["lease_ending"]},{id:"u4",unitNumber:"201",status:"maintenance",flags:["repair_ongoing"]},{id:"u5",unitNumber:"202",status:"occupied",tenantName:"Sarah Jones",rent:1550,leaseEndDate:"2024-08-31",flags:["late_payment"]}],rte=[{id:"a1",type:"payment",title:"Rent received from Unit 101",timestamp:"2h ago"},{id:"a2",type:"maintenance",title:"New ticket: HVAC Issue (Unit 201)",timestamp:"5h ago"},{id:"a3",type:"message",title:"Message from Michael Chen",timestamp:"Yesterday"},{id:"a4",type:"lease",title:"Lease signed for Unit 302",timestamp:"2 days ago"}],qh=({label:t,value:e,subtext:n,alert:r})=>o.jsxs("div",{className:pe("p-4 bg-card border rounded-xl flex flex-col justify-between shadow-sm cursor-pointer hover:border-primary/50 transition-colors",r&&"border-amber-200 bg-amber-50/30 dark:border-amber-900/30 dark:bg-amber-900/10"),children:[o.jsx("span",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:t}),o.jsxs("div",{className:"mt-2",children:[o.jsx("div",{className:pe("text-2xl font-bold tracking-tight",r?"text-amber-700 dark:text-amber-500":"text-foreground"),children:e}),n&&o.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:n})]})]}),ite=({unit:t,onClick:e})=>{var n,r,i;return o.jsxs("div",{onClick:e,className:"grid grid-cols-12 gap-4 px-4 py-3 items-center border-b hover:bg-slate-50/50 dark:hover:bg-slate-800/30 transition-colors cursor-pointer group",children:[o.jsx("div",{className:"col-span-2 font-medium",children:t.unitNumber}),o.jsx("div",{className:"col-span-3",children:o.jsx("span",{className:pe("inline-flex items-center text-xs font-medium px-2 py-0.5 rounded-full border",t.status==="occupied"?"bg-emerald-50 text-emerald-700 border-emerald-100 dark:bg-emerald-900/10 dark:text-emerald-400 dark:border-emerald-900/20":t.status==="vacant"?"bg-slate-100 text-slate-700 border-slate-200 dark:bg-slate-800 dark:text-slate-400 dark:border-slate-700":"bg-amber-50 text-amber-700 border-amber-100 dark:bg-amber-900/10 dark:text-amber-400 dark:border-amber-900/20"),children:t.status.charAt(0).toUpperCase()+t.status.slice(1)})}),o.jsx("div",{className:"col-span-3 text-sm text-foreground",children:t.tenantName||""}),o.jsx("div",{className:"col-span-2 text-sm tabular-nums text-right",children:t.rent?`$${t.rent}`:""}),o.jsxs("div",{className:"col-span-2 flex justify-end gap-2 text-muted-foreground group-hover:text-foreground",children:[((n=t.flags)==null?void 0:n.includes("late_payment"))&&o.jsx(vr,{size:16,className:"text-rose-500"}),((r=t.flags)==null?void 0:r.includes("lease_ending"))&&o.jsx(Pn,{size:16,className:"text-amber-500"}),((i=t.flags)==null?void 0:i.includes("repair_ongoing"))&&o.jsx(Ft,{size:16,className:"text-amber-500"})]})]})},ste=({item:t})=>{const e={payment:o.jsx(vr,{size:14,className:"text-emerald-600"}),maintenance:o.jsx(Ft,{size:14,className:"text-amber-600"}),lease:o.jsx(rn,{size:14,className:"text-blue-600"}),message:o.jsx(ev,{size:14,className:"text-purple-600"})};return o.jsxs("div",{className:"flex gap-3 py-3 border-b last:border-0 items-start",children:[o.jsx("div",{className:"mt-0.5 p-1.5 rounded-full bg-slate-100 dark:bg-slate-800 shrink-0",children:e[t.type]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-foreground",children:t.title}),o.jsx("span",{className:"text-xs text-muted-foreground",children:t.timestamp})]})]})};function ate(){const{id:t}=Vx(),e=qr();return o.jsxs("div",{className:"max-w-6xl mx-auto space-y-8 animate-in fade-in duration-500",children:[o.jsxs("div",{className:"flex flex-col md:flex-row md:items-start justify-between gap-4",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsxs("button",{onClick:()=>e("/app/properties"),className:"flex items-center gap-1 text-sm text-muted-foreground hover:text-foreground transition-colors mb-2",children:[o.jsx(qx,{size:16})," Back to Properties"]}),o.jsx("h1",{className:"text-3xl font-bold tracking-tight text-foreground flex items-center gap-2",children:"Highland Lofts"}),o.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[o.jsx(Tp,{size:16}),o.jsx("span",{children:"123 Highland Ave, Seattle WA 98102"})]}),o.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[o.jsx(fo,{size:16}),o.jsx("span",{children:"Apartment Building"}),o.jsx("span",{className:"w-1 h-1 rounded-full bg-border"}),o.jsx("span",{children:"24 Units"})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("button",{className:"flex items-center gap-2 px-3 py-2 bg-white dark:bg-card border rounded-lg text-sm font-medium hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors shadow-sm",children:[o.jsx(rn,{size:16,className:"text-muted-foreground"})," Reports"]}),o.jsxs("button",{onClick:()=>e(`/app/properties/${t}/units/new`),className:"flex items-center gap-2 px-3 py-2 bg-primary text-primary-foreground rounded-lg text-sm font-medium hover:bg-primary/90 transition-colors shadow-sm",children:[o.jsx(Ws,{size:16})," Add Unit"]}),o.jsx(tte,{})]})]}),o.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-5 gap-4",children:[o.jsx(qh,{label:"Occupancy",value:`${Ru.occupancyRate}%`,subtext:"2 vacant units"}),o.jsx(qh,{label:"Rent (MTD)",value:`$${(Ru.rentCollected/1e3).toFixed(1)}k`,subtext:`of $${(Ru.rentExpected/1e3).toFixed(1)}k expected`}),o.jsx(qh,{label:"Overdue",value:`$${Ru.overdueBalance}`,alert:!0,subtext:"3 tenants late"}),o.jsx(qh,{label:"Maintenance",value:Ru.openMaintenanceCount.toString(),subtext:"1 urgent ticket"}),o.jsx(qh,{label:"Renewals",value:Ru.leasesEndingSoon.toString(),subtext:"Ending in 60 days"})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[o.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[o.jsxs("div",{className:"bg-card border rounded-xl overflow-hidden shadow-sm",children:[o.jsxs("div",{className:"px-6 py-4 border-b flex items-center justify-between",children:[o.jsx("h2",{className:"font-semibold",children:"Units"}),o.jsx("div",{className:"flex gap-2",children:o.jsx("button",{className:"text-xs font-medium px-2 py-1 bg-slate-100 dark:bg-slate-800 rounded text-muted-foreground hover:text-foreground",children:"Filter"})})]}),o.jsxs("div",{className:"bg-slate-50/50 dark:bg-slate-900/50 grid grid-cols-12 gap-4 px-4 py-2 text-xs font-semibold text-muted-foreground uppercase tracking-wider border-b",children:[o.jsx("div",{className:"col-span-2",children:"Unit"}),o.jsx("div",{className:"col-span-3",children:"Status"}),o.jsx("div",{className:"col-span-3",children:"Tenant"}),o.jsx("div",{className:"col-span-2 text-right",children:"Rent"}),o.jsx("div",{className:"col-span-2"})]}),o.jsxs("div",{children:[nte.map(n=>o.jsx(ite,{unit:n,onClick:()=>e(`/app/properties/${t}/units/${n.id}`)},n.id)),o.jsx("div",{className:"p-3 text-center border-t text-sm text-muted-foreground hover:text-primary cursor-pointer transition-colors",children:"View All 24 Units"})]})]}),o.jsxs("div",{className:"bg-card border rounded-xl overflow-hidden shadow-sm p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h2",{className:"font-semibold",children:"Financial Performance"}),o.jsx(UL,{})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-8 text-center mb-6",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Income"}),o.jsx("div",{className:"text-xl font-bold text-foreground",children:"$48,200"}),o.jsxs("div",{className:"text-xs text-emerald-600 mt-1 flex justify-center items-center gap-1",children:[o.jsx(hL,{size:12})," 4.2%"]})]}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-y-2 -left-4 w-px bg-border/50"}),o.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Expenses"}),o.jsx("div",{className:"text-xl font-bold text-foreground",children:"$12,450"}),o.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:"Normal range"}),o.jsx("div",{className:"absolute inset-y-2 -right-4 w-px bg-border/50"})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Net Cash Flow"}),o.jsx("div",{className:"text-xl font-bold text-emerald-600",children:"$35,750"}),o.jsx("div",{className:"text-xs text-emerald-600 mt-1 font-medium",children:"Healthy"})]})]}),o.jsx(EG,{height:"160px"})]})]}),o.jsxs("div",{className:"space-y-8",children:[o.jsxs("div",{className:"bg-card border rounded-xl overflow-hidden shadow-sm",children:[o.jsx("div",{className:"px-6 py-4 border-b",children:o.jsx("h2",{className:"font-semibold",children:"Recent Activity"})}),o.jsx("div",{className:"p-4",children:rte.map(n=>o.jsx(ste,{item:n},n.id))})]}),o.jsxs("div",{className:"bg-card border rounded-xl overflow-hidden shadow-sm p-6",children:[o.jsx("h2",{className:"font-semibold mb-4",children:"Maintenance"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between p-3 bg-rose-50 dark:bg-rose-900/10 border border-rose-100 dark:border-rose-900/20 rounded-lg",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(ui,{size:18,className:"text-rose-600"}),o.jsx("div",{className:"text-sm font-medium text-rose-900 dark:text-rose-300",children:"HVAC Failure"})]}),o.jsx("span",{className:"text-xs font-bold text-rose-700 bg-rose-200/50 px-2 py-0.5 rounded",children:"URGENT"})]}),o.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-800/50 border rounded-lg",children:[o.jsx("div",{className:"text-sm font-medium",children:"Leaking Faucet"}),o.jsx("span",{className:"text-xs text-muted-foreground",children:"Unit 104"})]}),o.jsx("button",{className:"w-full py-2 text-sm text-center text-primary font-medium hover:underline",children:"View All Tickets"})]})]}),o.jsxs("div",{className:"bg-card border rounded-xl overflow-hidden shadow-sm p-6",children:[o.jsx("h2",{className:"font-semibold mb-4",children:"Documents"}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center justify-between text-sm group cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-800 p-2 -mx-2 rounded-md transition-colors",children:[o.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground group-hover:text-foreground",children:[o.jsx(rn,{size:16})," Insurance Policy"]}),o.jsx(Yr,{size:14,className:"opacity-0 group-hover:opacity-100 transition-opacity text-muted-foreground"})]}),o.jsxs("div",{className:"flex items-center justify-between text-sm group cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-800 p-2 -mx-2 rounded-md transition-colors",children:[o.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground group-hover:text-foreground",children:[o.jsx(rn,{size:16})," Inspection Report (2023)"]}),o.jsx(Yr,{size:14,className:"opacity-0 group-hover:opacity-100 transition-opacity text-muted-foreground"})]})]})]})]})]})]})}const Dn={id:"u103",propertyId:"p1",propertyName:"Highland Lofts",unitNumber:"103",type:"1BR / 1BA",floor:1,building:"North Wing",sqft:750,beds:1,baths:1,parking:!0,storage:!1,furnished:!1,marketRent:1650,status:"occupied",metrics:{rent:1600,balance:0,leaseStatus:"active",maintenanceCount:0,urgentMaintenance:!1}},ju={id:"t1",name:"Michael Chen",email:"m.chen@example.com",phone:"(555) 123-4567",moveInDate:"2023-08-01",leaseEndDate:"2024-07-31",autopay:!0,paymentMethod:"Credit Card ending in 4242",emergencyContact:{name:"Sarah Chen",phone:"(555) 987-6543",relation:"Sister"}},t0={startDate:"2023-08-01",endDate:"2024-07-31",term:"12 months",rent:1600,deposit:1600,petDeposit:0,lateFee:"5% after 5 days",clauses:["No smoking","Pets allowed (under 20lbs)"],history:[{type:"renewal",date:"2023-08-01",note:"Renewed for 12 months at $1600"},{type:"signed",date:"2022-08-01",note:"Initial lease sign at $1550"}]},ote=[{id:"m1",title:"Leaking faucet",category:"Plumbing",priority:"medium",status:"closed",date:"2023-11-15"},{id:"m2",title:"HVAC Filter Replacement",category:"HVAC",priority:"low",status:"open",date:"2024-01-05"}],lte=[{id:"a1",type:"payment",title:"Rent Payment Received",date:"2024-01-01",amount:"$1600.00"},{id:"a2",type:"maintenance",title:"Ticket #m2 Created",date:"2024-01-05",user:"Michael Chen"},{id:"a3",type:"system",title:"Auto-pay Triggered",date:"2024-01-01",note:"Scheduled for 1st of month"}],cte=[{id:"d1",name:"Lease Agreement 2023-2024.pdf",type:"lease",date:"2023-07-15",size:"2.4 MB"},{id:"d2",name:"Move-in Inspection.pdf",type:"inspection",date:"2023-08-01",size:"4.1 MB"},{id:"d3",name:"Appliance Manuals.zip",type:"manuals",date:"2022-08-01",size:"12 MB"}],$h=({label:t,value:e,subtext:n,icon:r,alert:i})=>o.jsxs("div",{className:pe("p-4 bg-card border rounded-xl flex flex-col justify-between shadow-sm hover:border-primary/20 transition-all",i&&"border-amber-200 bg-amber-50/30 dark:border-amber-900/30 dark:bg-amber-900/10"),children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsx("span",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:t}),r&&o.jsx(r,{size:14,className:"text-muted-foreground"})]}),o.jsxs("div",{className:"mt-2",children:[o.jsx("div",{className:pe("text-2xl font-bold tracking-tight",i?"text-amber-700 dark:text-amber-500":"text-foreground"),children:e}),n&&o.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:n})]})]}),Lu=({active:t,label:e,onClick:n,icon:r})=>o.jsxs("button",{onClick:n,className:pe("flex items-center gap-2 px-4 py-2 text-sm font-medium border-b-2 transition-colors",t?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground hover:border-border"),children:[r&&o.jsx(r,{size:14}),e]}),rk=({navigate:t})=>o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 animate-in fade-in slide-in-from-bottom-2 duration-300",children:[o.jsxs("div",{className:"md:col-span-2 space-y-6",children:[o.jsxs("div",{className:"bg-card border rounded-xl overflow-hidden shadow-sm",children:[o.jsx("div",{className:"px-6 py-4 border-b",children:o.jsxs("h3",{className:"font-semibold text-lg flex items-center gap-2",children:[o.jsx(ys,{size:18,className:"text-muted-foreground"}),"Unit Specifications"]})}),o.jsxs("div",{className:"p-6 grid grid-cols-2 gap-y-6 gap-x-4",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("div",{className:"text-xs text-muted-foreground uppercase tracking-wider",children:"Type"}),o.jsx("div",{className:"font-medium",children:Dn.type})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("div",{className:"text-xs text-muted-foreground uppercase tracking-wider",children:"Size"}),o.jsxs("div",{className:"font-medium flex items-center gap-1",children:[o.jsx(sH,{size:14})," ",Dn.sqft," sqft"]})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("div",{className:"text-xs text-muted-foreground uppercase tracking-wider",children:"Layout"}),o.jsxs("div",{className:"font-medium flex items-center gap-3",children:[o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(gL,{size:14})," ",Dn.beds," Bed"]}),o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(BV,{size:14})," ",Dn.baths," Bath"]})]})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("div",{className:"text-xs text-muted-foreground uppercase tracking-wider",children:"Floor"}),o.jsx("div",{className:"font-medium",children:Dn.floor})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("div",{className:"text-xs text-muted-foreground uppercase tracking-wider",children:"Amenities"}),o.jsxs("div",{className:"flex flex-wrap gap-2",children:[o.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-slate-100 dark:bg-slate-800 rounded text-xs",children:[o.jsx(GV,{size:12})," Parking"]}),o.jsx("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-slate-100 dark:bg-slate-800 rounded text-xs text-muted-foreground",children:"Unfurnished"}),Dn.storage]})]})]})]}),o.jsxs("div",{className:"bg-card border rounded-xl overflow-hidden shadow-sm p-6",children:[o.jsx("h3",{className:"font-semibold text-lg mb-4",children:"Notes"}),o.jsx("textarea",{className:"w-full h-32 p-3 bg-slate-50 dark:bg-slate-900 border rounded-lg text-sm focus:ring-1 focus:ring-primary outline-none resize-none",placeholder:"Add internal notes about this unit...",defaultValue:"Corner unit, recently painted. North-facing view."}),o.jsx("div",{className:"flex justify-end mt-2",children:o.jsx("button",{className:"text-xs font-medium bg-primary text-primary-foreground px-3 py-1.5 rounded-md hover:bg-primary/90 transition-colors",children:"Save Note"})})]})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-card border rounded-xl overflow-hidden shadow-sm",children:[o.jsxs("div",{className:"px-6 py-4 border-b flex justify-between items-center bg-slate-50/50 dark:bg-slate-900/30",children:[o.jsx("h3",{className:"font-semibold",children:"Current Tenant"}),o.jsx("span",{className:"text-xs bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400 px-2 py-0.5 rounded-full font-medium",children:"Active"})]}),o.jsxs("div",{className:"p-6 space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center text-primary font-bold",children:ju.name.split(" ").map(e=>e[0]).join("")}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-foreground",children:ju.name}),o.jsx("div",{className:"text-xs text-muted-foreground",children:ju.email})]})]}),o.jsxs("div",{className:"pt-4 border-t space-y-2 text-sm",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-muted-foreground",children:"Move In"}),o.jsx("span",{children:ju.moveInDate})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-muted-foreground",children:"Lease End"}),o.jsx("span",{className:"text-amber-600 dark:text-amber-500 font-medium",children:ju.leaseEndDate})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 pt-2",children:[o.jsxs("button",{className:"flex items-center justify-center gap-2 py-2 px-3 bg-white dark:bg-card border rounded-md text-sm font-medium hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",children:[o.jsx(Bs,{size:14})," Message"]}),o.jsxs("button",{onClick:()=>t(`/app/tenants/${ju.id}`),className:"flex items-center justify-center gap-2 py-2 px-3 bg-white dark:bg-card border rounded-md text-sm font-medium hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",children:[o.jsx(TL,{size:14})," Profile"]})]})]})]}),o.jsxs("div",{className:"bg-card border rounded-xl overflow-hidden shadow-sm p-6",children:[o.jsx("h3",{className:"font-semibold mb-4",children:"Financial Snapshot"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between items-center text-sm",children:[o.jsx("span",{className:"text-muted-foreground",children:"Current Rent"}),o.jsxs("span",{className:"font-bold",children:["$",Dn.metrics.rent]})]}),o.jsxs("div",{className:"flex justify-between items-center text-sm",children:[o.jsx("span",{className:"text-muted-foreground",children:"Market Rent"}),o.jsxs("span",{className:"text-muted-foreground line-through decoration-slate-400/50",children:["$",Dn.marketRent]})]}),o.jsx("div",{className:"w-full h-px bg-border my-2"}),o.jsxs("div",{className:"flex justify-between items-center text-sm",children:[o.jsx("span",{className:"text-muted-foreground",children:"Current Balance"}),o.jsxs("span",{className:pe("font-bold","text-emerald-600"),children:["$",Dn.metrics.balance]})]})]})]})]})]}),ute=()=>o.jsxs("div",{className:"bg-card border rounded-xl overflow-hidden shadow-sm animate-in fade-in zoom-in-95 duration-200",children:[o.jsx("div",{className:"p-6 border-b",children:o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-lg",children:"Active Lease Agreement"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Aug 1, 2023  July 31, 2024"})]}),o.jsxs("button",{className:"text-primary text-sm font-medium hover:underline flex items-center gap-1",children:[o.jsx(Yr,{size:14})," Download PDF"]})]})}),o.jsxs("div",{className:"p-6 grid grid-cols-1 md:grid-cols-2 gap-8",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsx("h4",{className:"text-sm font-semibold uppercase tracking-wider text-muted-foreground",children:"Terms"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between py-2 border-b border-border/50",children:[o.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Monthly Rent"}),o.jsxs("span",{className:"font-medium",children:["$",t0.rent]})]}),o.jsxs("div",{className:"flex justify-between py-2 border-b border-border/50",children:[o.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Security Deposit"}),o.jsxs("span",{className:"font-medium",children:["$",t0.deposit]})]}),o.jsxs("div",{className:"flex justify-between py-2 border-b border-border/50",children:[o.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Late Fee Policy"}),o.jsx("span",{className:"font-medium text-sm",children:t0.lateFee})]})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h4",{className:"text-sm font-semibold uppercase tracking-wider text-muted-foreground",children:"Clauses & Addendums"}),o.jsx("ul",{className:"list-disc list-inside text-sm space-y-1 text-gray-700 dark:text-gray-300",children:t0.clauses.map((t,e)=>o.jsx("li",{children:t},e))})]})]})]}),dte=()=>o.jsxs("div",{className:"space-y-4 animate-in fade-in slide-in-from-bottom-2 duration-300",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("h3",{className:"font-semibold",children:"Work Orders"}),o.jsxs("button",{className:"bg-primary text-primary-foreground px-3 py-1.5 rounded-lg text-sm font-medium hover:bg-primary/90 flex items-center gap-2",children:[o.jsx(Ft,{size:16})," New Ticket"]})]}),o.jsx("div",{className:"bg-card border rounded-xl overflow-hidden shadow-sm",children:o.jsxs("table",{className:"w-full text-sm text-left",children:[o.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900 border-b text-muted-foreground font-medium",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-3",children:"ID"}),o.jsx("th",{className:"px-4 py-3",children:"Issue"}),o.jsx("th",{className:"px-4 py-3",children:"Category"}),o.jsx("th",{className:"px-4 py-3",children:"Status"}),o.jsx("th",{className:"px-4 py-3",children:"Date"}),o.jsx("th",{className:"px-4 py-3"})]})}),o.jsx("tbody",{children:ote.map(t=>o.jsxs("tr",{className:"border-b last:border-0 hover:bg-slate-50/50 dark:hover:bg-slate-800/50 transition-colors",children:[o.jsxs("td",{className:"px-4 py-3 font-medium",children:["#",t.id]}),o.jsx("td",{className:"px-4 py-3",children:t.title}),o.jsx("td",{className:"px-4 py-3",children:o.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300 border border-slate-200 dark:border-slate-700",children:t.category})}),o.jsx("td",{className:"px-4 py-3",children:o.jsx("span",{className:pe("inline-flex items-center px-2 py-0.5 rounded-full text-xs capitalize font-medium",t.status==="open"?"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400":"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400"),children:t.status})}),o.jsx("td",{className:"px-4 py-3 text-muted-foreground",children:t.date}),o.jsx("td",{className:"px-4 py-3 text-right",children:o.jsx("button",{className:"text-primary hover:underline text-xs",children:"View"})})]},t.id))})]})})]}),hte=()=>o.jsxs("div",{className:"bg-card border rounded-xl overflow-hidden shadow-sm animate-in fade-in slide-in-from-bottom-2 duration-300",children:[o.jsxs("div",{className:"px-6 py-4 border-b flex justify-between items-center",children:[o.jsx("h3",{className:"font-semibold",children:"Rent Ledger"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{className:"text-xs font-medium px-3 py-1.5 bg-slate-100 dark:bg-slate-800 rounded hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors",children:"Generate Statement"}),o.jsx("button",{className:"text-xs font-medium px-3 py-1.5 bg-primary/10 text-primary rounded hover:bg-primary/20 transition-colors",children:"Export CSV"})]})]}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full text-sm text-left",children:[o.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900 border-b text-muted-foreground font-medium",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3",children:"Date"}),o.jsx("th",{className:"px-6 py-3",children:"Description"}),o.jsx("th",{className:"px-6 py-3 text-right",children:"Charges"}),o.jsx("th",{className:"px-6 py-3 text-right",children:"Payments"}),o.jsx("th",{className:"px-6 py-3 text-right",children:"Balance"})]})}),o.jsxs("tbody",{children:[o.jsxs("tr",{className:"border-b hover:bg-slate-50/50 dark:hover:bg-slate-800/50 transition-colors",children:[o.jsx("td",{className:"px-6 py-3",children:"Jan 01, 2024"}),o.jsx("td",{className:"px-6 py-3",children:"Rent Charge - Jan 2024"}),o.jsx("td",{className:"px-6 py-3 text-right font-medium",children:"$1,600.00"}),o.jsx("td",{className:"px-6 py-3 text-right text-muted-foreground",children:""}),o.jsx("td",{className:"px-6 py-3 text-right",children:"$1,600.00"})]}),o.jsxs("tr",{className:"border-b hover:bg-slate-50/50 dark:hover:bg-slate-800/50 transition-colors",children:[o.jsx("td",{className:"px-6 py-3",children:"Jan 01, 2024"}),o.jsx("td",{className:"px-6 py-3 text-emerald-600",children:"Payment Received (CC ending 4242)"}),o.jsx("td",{className:"px-6 py-3 text-right text-muted-foreground",children:""}),o.jsx("td",{className:"px-6 py-3 text-right font-medium text-emerald-600",children:"($1,600.00)"}),o.jsx("td",{className:"px-6 py-3 text-right font-medium text-muted-foreground",children:"$0.00"})]}),o.jsxs("tr",{className:"border-b hover:bg-slate-50/50 dark:hover:bg-slate-800/50 transition-colors",children:[o.jsx("td",{className:"px-6 py-3",children:"Dec 01, 2023"}),o.jsx("td",{className:"px-6 py-3",children:"Rent Charge - Dec 2023"}),o.jsx("td",{className:"px-6 py-3 text-right font-medium",children:"$1,600.00"}),o.jsx("td",{className:"px-6 py-3 text-right text-muted-foreground",children:""}),o.jsx("td",{className:"px-6 py-3 text-right",children:"$1,600.00"})]}),o.jsxs("tr",{className:"border-b hover:bg-slate-50/50 dark:hover:bg-slate-800/50 transition-colors",children:[o.jsx("td",{className:"px-6 py-3",children:"Dec 02, 2023"}),o.jsx("td",{className:"px-6 py-3 text-emerald-600",children:"Payment Received (CC ending 4242)"}),o.jsx("td",{className:"px-6 py-3 text-right text-muted-foreground",children:""}),o.jsx("td",{className:"px-6 py-3 text-right font-medium text-emerald-600",children:"($1,600.00)"}),o.jsx("td",{className:"px-6 py-3 text-right font-medium text-muted-foreground",children:"$0.00"})]})]})]})})]}),fte=()=>o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 animate-in fade-in slide-in-from-bottom-2 duration-300",children:[o.jsx("div",{className:"col-span-full flex justify-end mb-2",children:o.jsxs("button",{className:"flex items-center gap-2 px-3 py-2 bg-white dark:bg-card border rounded-lg text-sm font-medium hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",children:[o.jsx(RS,{size:16})," Upload Document"]})}),cte.map(t=>o.jsxs("div",{className:"group p-4 bg-card border rounded-xl flex items-start gap-4 hover:border-primary/50 transition-colors cursor-pointer relative overflow-hidden",children:[o.jsx("div",{className:"p-3 bg-primary/10 rounded-lg text-primary shrink-0",children:o.jsx(rn,{size:20})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h4",{className:"font-medium text-sm truncate pr-4",children:t.name}),o.jsxs("p",{className:"text-xs text-muted-foreground mt-1 capitalize",children:[t.type,"  ",t.date]}),o.jsx("p",{className:"text-xs text-muted-foreground mt-0.5",children:t.size})]}),o.jsx("div",{className:"opacity-0 group-hover:opacity-100 absolute top-4 right-4 transition-opacity",children:o.jsx("button",{className:"p-1.5 hover:bg-slate-100 dark:hover:bg-slate-800 rounded text-muted-foreground hover:text-primary",children:o.jsx(Yr,{size:16})})})]},t.id))]}),pte=()=>o.jsx("div",{className:"max-w-2xl space-y-8 animate-in fade-in slide-in-from-bottom-2 duration-300",children:o.jsx("div",{className:"relative pl-6 border-l border-border space-y-8",children:lte.map((t,e)=>o.jsxs("div",{className:"relative",children:[o.jsx("span",{className:pe("absolute -left-[29px] top-1 w-3 h-3 rounded-full border-2 border-background",t.type==="payment"?"bg-emerald-500":t.type==="maintenance"?"bg-amber-500":"bg-blue-500")}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("span",{className:"text-xs text-muted-foreground font-medium uppercase tracking-wide",children:t.date}),o.jsx("h4",{className:"text-sm font-medium",children:t.title}),t.amount&&o.jsx("span",{className:"text-sm font-bold text-emerald-600",children:t.amount}),t.note&&o.jsx("p",{className:"text-sm text-muted-foreground",children:t.note}),t.user&&o.jsxs("p",{className:"text-xs text-muted-foreground",children:["by ",t.user]})]})]},t.id))})});function mte(){const{propertyId:t,unitId:e}=Vx(),n=qr(),[r,i]=D.useState("overview"),s=Dn.propertyName,a=()=>{switch(r){case"overview":return o.jsx(rk,{navigate:n});case"tenant":return o.jsx(rk,{navigate:n});case"lease":return o.jsx(ute,{});case"maintenance":return o.jsx(dte,{});case"financials":return o.jsx(hte,{});case"documents":return o.jsx(fte,{});case"activity":return o.jsx(pte,{});default:return o.jsx("div",{className:"p-8 text-center text-muted-foreground",children:"Content not found."})}};return o.jsxs("div",{className:"max-w-6xl mx-auto space-y-6 animate-in fade-in duration-500 pb-10",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[o.jsx("span",{className:"hover:text-foreground cursor-pointer",onClick:()=>n("/app/properties"),children:"Properties"}),o.jsx("span",{children:"/"}),o.jsx("span",{className:"hover:text-foreground cursor-pointer",onClick:()=>n(`/app/properties/${t}`),children:s}),o.jsx("span",{children:"/"}),o.jsxs("span",{className:"text-foreground font-medium",children:["Unit ",Dn.unitNumber]})]}),o.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[o.jsxs("div",{className:"flex items-start gap-4",children:[o.jsx("div",{className:"p-3 bg-primary/10 rounded-xl text-primary mt-1",children:o.jsx(ys,{size:24})}),o.jsxs("div",{children:[o.jsxs("h1",{className:"text-3xl font-bold tracking-tight text-foreground flex items-center gap-3",children:["Unit ",Dn.unitNumber,o.jsx("span",{className:pe("text-sm font-medium px-2.5 py-0.5 rounded-full border align-middle","bg-emerald-50 text-emerald-700 border-emerald-200 dark:bg-emerald-900/20 dark:text-emerald-400 dark:border-emerald-800"),children:Dn.status.charAt(0).toUpperCase()+Dn.status.slice(1)})]}),o.jsxs("div",{className:"flex items-center gap-3 text-muted-foreground mt-1",children:[o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(gL,{size:16})," ",Dn.type]}),o.jsx("span",{className:"w-1 h-1 rounded-full bg-border"}),o.jsxs("span",{children:[Dn.sqft," sqft"]}),o.jsx("span",{className:"w-1 h-1 rounded-full bg-border"}),o.jsxs("span",{children:["Floor ",Dn.floor]})]})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("button",{className:"flex items-center gap-2 px-3 py-2 bg-white dark:bg-card border rounded-lg text-sm font-medium hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors shadow-sm",children:[o.jsx(NL,{size:16,className:"text-muted-foreground"})," Edit Unit"]}),o.jsxs("button",{className:"flex items-center gap-2 px-3 py-2 bg-primary text-primary-foreground rounded-lg text-sm font-medium hover:bg-primary/90 transition-colors shadow-sm",children:[o.jsx(vr,{size:16})," Collect Rent"]}),o.jsx("button",{className:"p-2 text-muted-foreground hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg transition-colors",children:o.jsx(Oc,{size:20})})]})]})]}),o.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-5 gap-4",children:[o.jsx($h,{label:"Occupancy",value:"Occupied",subtext:"Since Aug 2023",icon:TL}),o.jsx($h,{label:"Monthly Rent",value:`$${Dn.metrics.rent}`,subtext:"Market: $1,650",icon:vr}),o.jsx($h,{label:"Balance",value:`$${Dn.metrics.balance}`,subtext:"Paid in full",icon:ki,alert:Dn.metrics.balance>0}),o.jsx($h,{label:"Lease",value:"Active",subtext:"Ends Jul 2024",icon:rn}),o.jsx($h,{label:"Maintenance",value:Dn.metrics.maintenanceCount,subtext:"Open Tickets",icon:Ft,alert:Dn.metrics.urgentMaintenance})]}),o.jsxs("div",{className:"border-b flex gap-2 overflow-x-auto",children:[o.jsx(Lu,{active:r==="overview",label:"Overview",onClick:()=>i("overview"),icon:ys}),o.jsx(Lu,{active:r==="lease",label:"Lease",onClick:()=>i("lease"),icon:rn}),o.jsx(Lu,{active:r==="financials",label:"Financials",onClick:()=>i("financials"),icon:vr}),o.jsx(Lu,{active:r==="maintenance",label:"Maintenance",onClick:()=>i("maintenance"),icon:Ft}),o.jsx(Lu,{active:r==="documents",label:"Documents",onClick:()=>i("documents"),icon:Yr}),o.jsx(Lu,{active:r==="activity",label:"Activity",onClick:()=>i("activity"),icon:pd})]}),o.jsx("div",{className:"min-h-[400px]",children:a()})]})}const n0=[{id:"role_admin",name:"Admin",description:"Full access to all organization resources.",permissions:["submit_ticket","view_ticket","update_ticket_status","assign_ticket","view_financials","manage_leases","manage_users","manage_properties","manage_settings"],isSystem:!0},{id:"role_owner",name:"Owner",description:"View access to financials and reports.",permissions:["view_financials","view_ticket"],isSystem:!0},{id:"role_maintenance",name:"Maintenance",description:"Manage assigned maintenance tickets.",permissions:["view_ticket","update_ticket_status"],isSystem:!0},{id:"role_property_manager",name:"Property Manager",description:"Manage tenants, leases, and maintenance for assigned properties.",permissions:["manage_tenants","manage_leases","view_financials","communicate_tenants","submit_ticket","view_ticket","update_ticket_status","assign_ticket","manage_documents"],isSystem:!0}],gte=[{id:"user_1",name:"Alice Admin",email:"alice@example.com",status:"active",lastActive:"2023-10-27T10:00:00Z",avatarUrl:"https://i.pravatar.cc/150?u=user_1"},{id:"user_2",name:"Bob Owner",email:"bob@example.com",status:"active",lastActive:"2023-10-26T14:30:00Z",avatarUrl:"https://i.pravatar.cc/150?u=user_2"},{id:"user_3",name:"Charlie Fixit",email:"charlie@example.com",status:"active",lastActive:"2023-10-27T08:15:00Z",avatarUrl:"https://i.pravatar.cc/150?u=user_3"},{id:"user_4",name:"David Manager",email:"david@example.com",status:"active",lastActive:"2023-10-27T11:00:00Z",avatarUrl:"https://i.pravatar.cc/150?u=user_4"},{id:"user_5",name:"Eve Invited",email:"eve@example.com",status:"invited",invitedAt:"2023-10-27T09:00:00Z"}],xte=[{userId:"user_1",organizationId:"org_1",roles:["role_admin"],propertyScope:"all",unitScope:[]},{userId:"user_2",organizationId:"org_1",roles:["role_owner"],propertyScope:"all",unitScope:[]},{userId:"user_3",organizationId:"org_1",roles:["role_maintenance"],propertyScope:["prop_1","prop_2"],unitScope:[]},{userId:"user_4",organizationId:"org_1",roles:["role_property_manager"],propertyScope:["p2"],unitScope:[]},{userId:"user_5",organizationId:"org_1",roles:["role_maintenance"],propertyScope:"all",unitScope:[]}],vte=()=>gte.map(t=>{const e=xte.find(n=>n.userId===t.id);if(!e)throw new Error(`Membership not found for user ${t.id}`);return{user:t,membership:e}});function yte({userWithRole:t,onUpdateUser:e}){const[n,r]=D.useState(!1),i=D.useRef(null),{toast:s}=Fc(),{user:a,membership:l}=t,[c,u]=D.useState(null),d=D.useRef(null);D.useEffect(()=>{function v(b){i.current&&!i.current.contains(b.target)&&d.current&&!d.current.contains(b.target)&&r(!1)}function _(){r(!1)}return n&&(document.addEventListener("mousedown",v),window.addEventListener("scroll",_,!0),window.addEventListener("resize",_)),()=>{document.removeEventListener("mousedown",v),window.removeEventListener("scroll",_,!0),window.removeEventListener("resize",_)}},[n,i,d]);const f=()=>{var v;if(n)r(!1);else{const _=(v=i.current)==null?void 0:v.getBoundingClientRect();_&&(u({top:_.bottom+4,right:window.innerWidth-_.right}),r(!0))}},m=v=>{switch(r(!1),v){case"suspend":e({...t,user:{...a,status:"suspended"}}),s({title:"User Suspended",message:`${a.name} has been suspended.`,type:"warning"}),console.log(`[AUDIT] user.suspended: Actor=current_user Target=${a.id}`);break;case"reactivate":e({...t,user:{...a,status:"active"}}),s({title:"User Reactivated",message:`${a.name} access restored.`,type:"success"}),console.log(`[AUDIT] user.reactivated: Actor=current_user Target=${a.id}`);break;case"resend_invite":s({title:"Invite Resent",message:`Invitation sent to ${a.email}`,type:"success"}),console.log(`[AUDIT] user.invite_resent: Actor=current_user Target=${a.id}`);break;case"cancel_invite":confirm("Are you sure you want to cancel this invite?")&&(e(null),s({title:"Invite Canceled",message:`Invitation for ${a.email} canceled.`,type:"info"}),console.log(`[AUDIT] user.invite_canceled: Actor=current_user Target=${a.id}`));break;case"remove_org":confirm(`Are you sure you want to remove ${a.name} from the organization? This action is logged.`)&&(e(null),s({title:"User Removed",message:`${a.name} removed from organization.`,type:"error"}),console.log(`[AUDIT] user.removed: Actor=current_user Target=${a.id}`));break;case"reset_password":s({title:"Password Reset",message:`Reset email sent to ${a.email}`,type:"info"}),console.log(`[AUDIT] user.password_reset_sent: Actor=current_user Target=${a.id}`);break;default:console.log(`Action ${v} clicked for ${a.id}`),s({title:"Action Triggered",message:`Triggered: ${v}`,type:"info"})}},g=()=>{const v=l.roles.includes("role_maintenance"),_=l.roles.includes("role_owner"),b=[];return a.status!=="invited"?(b.push(o.jsx(ls,{icon:Vs,label:"View Profile",onClick:()=>m("view_profile")},"profile"),o.jsx(ls,{icon:ao,label:"Edit Roles & Access",onClick:()=>m("edit_roles")},"roles")),a.status==="active"&&b.push(o.jsx(ls,{icon:pd,label:"View Activity",onClick:()=>m("view_activity")},"activity"))):b.push(o.jsx(ls,{icon:eH,label:"Edit Invite",onClick:()=>m("edit_invite")},"edit_invite"),o.jsx(ls,{icon:xa,label:"Resend Invite",onClick:()=>m("resend_invite")},"resend_invite")),a.status==="active"&&(v&&(b.push(o.jsx("div",{className:"h-px bg-border my-1"},"sep1")),b.push(o.jsx(ls,{icon:Ft,label:"View Assigned Tickets",onClick:()=>m("view_tickets")},"tickets"))),_&&(b.push(o.jsx("div",{className:"h-px bg-border my-1"},"sep1")),b.push(o.jsx(ls,{icon:ga,label:"View Portfolio Access",onClick:()=>m("view_portfolio")},"portfolio")))),a.status==="active"?(b.push(o.jsx("div",{className:"h-px bg-border my-1"},"sep2")),b.push(o.jsx(ls,{icon:Kx,label:"Reset Password",onClick:()=>m("reset_password")},"reset_pass")),b.push(o.jsx(ls,{icon:fL,label:"Suspend User",onClick:()=>m("suspend"),className:"text-amber-600 dark:text-amber-500 hover:text-amber-700 dark:hover:text-amber-400 hover:bg-amber-50 dark:hover:bg-amber-900/20"},"suspend"))):a.status==="suspended"&&(b.push(o.jsx("div",{className:"h-px bg-border my-1"},"sep2")),b.push(o.jsx(ls,{icon:ML,label:"Reactivate User",onClick:()=>m("reactivate"),className:"text-emerald-600 dark:text-emerald-500 hover:text-emerald-700 dark:hover:text-emerald-400 hover:bg-emerald-50 dark:hover:bg-emerald-900/20"},"reactivate"))),b.push(o.jsx("div",{className:"h-px bg-border my-1"},"sep_dest")),a.status==="invited"?b.push(o.jsx(ls,{icon:hx,label:"Cancel Invite",onClick:()=>m("cancel_invite"),className:"text-rose-600 dark:text-rose-500 hover:text-rose-700 dark:hover:text-rose-400 hover:bg-rose-50 dark:hover:bg-rose-900/20"},"cancel")):b.push(o.jsx(ls,{icon:hx,label:"Remove From Organization",onClick:()=>m("remove_org"),className:"text-rose-600 dark:text-rose-500 hover:text-rose-700 dark:hover:text-rose-400 hover:bg-rose-50 dark:hover:bg-rose-900/20"},"remove")),b};return o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"relative",ref:i,children:o.jsx("button",{onClick:f,className:"p-2 text-muted-foreground hover:text-foreground hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg transition-colors outline-none focus:ring-2 focus:ring-primary/20",children:o.jsx(Oc,{size:16})})}),n&&c&&wa.createPortal(o.jsx("div",{ref:d,style:{position:"fixed",top:c.top,right:c.right,zIndex:9999},className:"w-56 bg-popover rounded-xl border shadow-lg shadow-black/5 overflow-hidden animate-in fade-in zoom-in-95 duration-100 origin-top-right",children:o.jsx("div",{className:"p-1",children:g()})}),document.body)]})}function ls({icon:t,label:e,onClick:n,className:r}){return o.jsxs("button",{onClick:n,className:`w-full flex items-center gap-2 px-3 py-2 rounded-lg text-sm transition-colors text-left ${r||"text-foreground hover:bg-accent hover:text-accent-foreground"}`,children:[o.jsx(t,{size:14,className:"opacity-70"}),e]})}const bte=({status:t})=>{const e={active:"bg-emerald-100/50 text-emerald-700 dark:bg-emerald-500/10 dark:text-emerald-400 border-emerald-200/50 dark:border-emerald-500/20",invited:"bg-indigo-100/50 text-indigo-700 dark:bg-indigo-500/10 dark:text-indigo-400 border-indigo-200/50 dark:border-indigo-500/20",suspended:"bg-rose-100/50 text-rose-700 dark:bg-rose-500/10 dark:text-rose-400 border-rose-200/50 dark:border-rose-500/20"},r={active:ua,invited:Pn,suspended:fL}[t];return o.jsxs("span",{className:pe("inline-flex items-center gap-1.5 text-[10px] uppercase font-bold px-2 py-0.5 rounded-full border tracking-wide",e[t]),children:[o.jsx(r,{size:12}),t]})},_te=({roleName:t})=>{let e=ao;switch(t){case"Maintenance":e=Ft;break;case"Property Manager":e=NS;break;default:e=ao}return o.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-slate-100 text-slate-800 dark:bg-slate-800 dark:text-slate-300 border border-slate-200 dark:border-slate-700",children:[o.jsx(e,{size:10,className:"mr-1 opacity-70"}),t]})};function wte(){const[t,e]=D.useState(vte()),[n,r]=D.useState(""),[i,s]=D.useState(!1),[a,l]=D.useState(""),[c,u]=D.useState(n0[0].id),[d,f]=D.useState("all"),m=D.useMemo(()=>t.filter(_=>_.user.name.toLowerCase().includes(n.toLowerCase())||_.user.email.toLowerCase().includes(n.toLowerCase())),[t,n]),g=_=>{if(_.preventDefault(),!a)return;const b={user:{id:`user_${Date.now()}`,name:a.split("@")[0],email:a,status:"invited",invitedAt:new Date().toISOString()},membership:{userId:`user_${Date.now()}`,organizationId:"org_1",roles:[c],propertyScope:d==="all"?"all":[],unitScope:[]}};e([...t,b]),s(!1),l(""),u(n0[0].id)},v=_=>{var b;return((b=n0.find(x=>x.id===_))==null?void 0:b.name)||"Unknown"};return o.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Organization Users"}),o.jsx("p",{className:"text-muted-foreground",children:"Manage your team, assign roles, and control access permissions."})]}),o.jsxs("button",{onClick:()=>s(!0),className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-primary text-primary-foreground hover:bg-primary/90 transition-colors font-medium text-sm shadow-sm",children:[o.jsx(Ws,{size:16}),"Invite User"]})]}),o.jsxs("div",{className:"flex items-center gap-2 bg-card p-2 rounded-lg border shadow-sm max-w-2xl",children:[o.jsx(di,{className:"text-muted-foreground ml-2",size:18}),o.jsx("input",{type:"text",placeholder:"Search users by name or email...",value:n,onChange:_=>r(_.target.value),className:"flex-1 bg-transparent border-none focus:ring-0 text-sm placeholder:text-muted-foreground outline-none text-foreground"}),o.jsx("div",{className:"w-px h-6 bg-border mx-2"}),o.jsxs("button",{className:"flex items-center gap-2 px-3 py-1.5 rounded-md hover:bg-slate-100 dark:hover:bg-slate-800 text-sm font-medium text-muted-foreground hover:text-foreground transition-colors",children:[o.jsx(po,{size:14}),"Filters"]})]}),o.jsxs("div",{className:"border rounded-xl bg-card shadow-sm overflow-hidden",children:[o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full text-sm text-left",children:[o.jsx("thead",{className:"bg-slate-50/50 dark:bg-slate-900/50 border-b border-border text-muted-foreground font-medium text-xs uppercase tracking-wider",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-4",children:"User"}),o.jsx("th",{className:"px-6 py-4",children:"Status"}),o.jsx("th",{className:"px-6 py-4",children:"Role"}),o.jsx("th",{className:"px-6 py-4",children:"Access Scope"}),o.jsx("th",{className:"px-6 py-4",children:"Last Active"}),o.jsx("th",{className:"px-6 py-4 text-right",children:"Actions"})]})}),o.jsx("tbody",{className:"divide-y divide-border/50",children:m.map(_=>o.jsxs("tr",{className:"hover:bg-slate-50/50 dark:hover:bg-slate-800/20 transition-colors",children:[o.jsx("td",{className:"px-6 py-4",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-9 h-9 rounded-full bg-slate-200 dark:bg-slate-700 flex items-center justify-center overflow-hidden shrink-0 border border-border",children:_.user.avatarUrl?o.jsx("img",{src:_.user.avatarUrl,alt:_.user.name,className:"w-full h-full object-cover"}):o.jsx(Vs,{size:16,className:"text-slate-400"})}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{className:"font-semibold text-foreground",children:_.user.name}),o.jsx("span",{className:"text-xs text-muted-foreground",children:_.user.email})]})]})}),o.jsx("td",{className:"px-6 py-4",children:o.jsx(bte,{status:_.user.status})}),o.jsx("td",{className:"px-6 py-4",children:o.jsx("div",{className:"flex flex-wrap gap-1",children:_.membership.roles.map(b=>o.jsx(_te,{roleName:v(b)},b))})}),o.jsx("td",{className:"px-6 py-4 text-muted-foreground",children:_.membership.propertyScope==="all"?o.jsxs("span",{className:"inline-flex items-center gap-1.5",children:[o.jsx(ga,{size:14})," All Properties"]}):o.jsxs("span",{className:"inline-flex items-center gap-1.5 opacity-80",children:[o.jsx(ga,{size:14})," ",_.membership.propertyScope.length," Properties"]})}),o.jsx("td",{className:"px-6 py-4 text-muted-foreground",children:_.user.lastActive?new Date(_.user.lastActive).toLocaleDateString():""}),o.jsx("td",{className:"px-6 py-4 text-right",children:o.jsx(yte,{userWithRole:_,onUpdateUser:b=>{e(b?x=>x.map(y=>y.user.id===b.user.id?b:y):x=>x.filter(y=>y.user.id!==_.user.id))}})})]},_.user.id))})]})}),m.length===0&&o.jsx("div",{className:"p-12 text-center text-muted-foreground",children:"No users found matching your search."})]}),i&&wa.createPortal(o.jsx("div",{className:"fixed inset-0 bg-background/80 backdrop-blur-sm z-50 flex items-center justify-center p-4 min-h-screen",children:o.jsxs("div",{className:"bg-card w-full max-w-md rounded-xl border shadow-xl p-6 animate-in zoom-in-95 duration-200",children:[o.jsx("h2",{className:"text-lg font-bold mb-4",children:"Invite New User"}),o.jsxs("form",{onSubmit:g,className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium",children:"Email Address"}),o.jsxs("div",{className:"relative",children:[o.jsx(xa,{className:"absolute left-3 top-2.5 text-muted-foreground",size:16}),o.jsx("input",{type:"email",required:!0,placeholder:"colleague@example.com",className:"w-full pl-9 pr-3 py-2 rounded-lg border bg-slate-50 dark:bg-slate-900 focus:ring-2 focus:ring-primary/20 outline-none transition-all",value:a,onChange:_=>l(_.target.value)})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium",children:"Assign Role"}),o.jsx("div",{className:"grid gap-2",children:n0.filter(_=>_.id!=="role_tenant").map(_=>o.jsxs("label",{className:pe("flex items-start gap-3 p-3 rounded-lg border cursor-pointer transition-all hover:bg-slate-50 dark:hover:bg-slate-900",c===_.id?"border-primary ring-1 ring-primary/20 bg-primary/5 dark:bg-primary/5":"border-border"),children:[o.jsx("input",{type:"radio",name:"role",value:_.id,checked:c===_.id,onChange:()=>u(_.id),className:"mt-1"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-sm text-foreground",children:_.name}),o.jsx("div",{className:"text-xs text-muted-foreground mt-0.5",children:_.description})]})]},_.id))})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium",children:"Access Scope"}),o.jsxs("select",{className:"w-full px-3 py-2 rounded-lg border bg-slate-50 dark:bg-slate-900 focus:ring-2 focus:ring-primary/20 outline-none transition-all text-sm",value:d,onChange:_=>f(_.target.value),children:[o.jsx("option",{value:"all",children:"All Properties"}),o.jsx("option",{value:"limited",disabled:!0,children:"Selected Properties (Coming Soon)"})]}),o.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Admin roles typically require 'All Properties' access."})]}),o.jsxs("div",{className:"flex justify-end gap-3 mt-6 pt-2",children:[o.jsx("button",{type:"button",onClick:()=>s(!1),className:"px-4 py-2 text-sm font-medium text-muted-foreground hover:text-foreground hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg transition-colors",children:"Cancel"}),o.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium bg-primary text-primary-foreground hover:bg-primary/90 rounded-lg transition-colors shadow-sm",children:"Send Invitation"})]})]})]})}),document.body)]})}const Ste=[{category:"Personal",items:[{path:"account",label:"My Account",icon:Vs},{path:"security",label:"Security",icon:ao},{path:"notifications",label:"Notifications",icon:dl}]},{category:"Organization",items:[{path:"organization",label:"Organization Profile",icon:ga},{path:"billing",label:"Billing & Plan",icon:ki},{path:"appearance",label:"Appearance",icon:oH}]}];function Mte(){return o.jsxs("div",{className:"flex flex-col md:flex-row gap-8 min-h-[600px] h-full",children:[o.jsxs("aside",{className:"w-full md:w-64 shrink-0 space-y-8",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold tracking-tight mb-2",children:"Settings"}),o.jsx("p",{className:"text-muted-foreground text-sm",children:"Manage your personal and organization preferences."})]}),o.jsx("nav",{className:"space-y-6",children:Ste.map(t=>o.jsxs("div",{children:[o.jsx("h3",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider mb-2 px-3",children:t.category}),o.jsx("div",{className:"space-y-1",children:t.items.map(e=>o.jsx(Ete,{to:e.path,icon:e.icon,children:e.label},e.path))})]},t.category))})]}),o.jsx("main",{className:"flex-1 bg-card border border-border rounded-xl shadow-sm p-6 overflow-hidden min-h-[500px]",children:o.jsx(DF,{})})]})}function Ete({to:t,children:e,icon:n}){return o.jsxs(hf,{to:t,className:({isActive:r})=>pe("flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200",r?"bg-primary/10 text-primary":"text-muted-foreground hover:bg-muted hover:text-foreground"),children:[o.jsx(n,{size:16}),e]})}function Nte(){const{toast:t}=Fc(),[e,n]=D.useState(!1),r=()=>{n(!0),setTimeout(()=>{n(!1),t({type:"success",title:"Changes Saved",message:"Your profile has been updated."})},1e3)};return o.jsxs("div",{className:"space-y-6 max-w-2xl",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-lg font-semibold",children:"My Account"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage your personal information and preferences."})]}),o.jsx("div",{className:"w-full h-px bg-border"}),o.jsxs("div",{className:"flex items-center gap-6",children:[o.jsxs("div",{className:"relative group cursor-pointer",children:[o.jsx("div",{className:"w-20 h-20 rounded-full bg-primary flex items-center justify-center text-primary-foreground text-2xl font-bold",children:"J"}),o.jsx("div",{className:"absolute inset-0 bg-black/40 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:o.jsx(HV,{className:"text-white w-6 h-6"})})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-medium",children:"Profile Photo"}),o.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"This will be displayed on your profile."}),o.jsx("button",{className:"text-sm text-primary font-medium hover:underline",children:"Change Photo"})]})]}),o.jsxs("div",{className:"grid gap-6",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{className:"space-y-1.5",children:[o.jsx("label",{className:"text-sm font-medium",children:"First Name"}),o.jsxs("div",{className:"relative",children:[o.jsx(Vs,{className:"absolute left-3 top-2.5 w-4 h-4 text-muted-foreground"}),o.jsx("input",{type:"text",defaultValue:"John",className:"w-full pl-9 bg-background border rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-primary/20 outline-none"})]})]}),o.jsxs("div",{className:"space-y-1.5",children:[o.jsx("label",{className:"text-sm font-medium",children:"Last Name"}),o.jsxs("div",{className:"relative",children:[o.jsx(Vs,{className:"absolute left-3 top-2.5 w-4 h-4 text-muted-foreground"}),o.jsx("input",{type:"text",defaultValue:"Doe",className:"w-full pl-9 bg-background border rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-primary/20 outline-none"})]})]})]}),o.jsxs("div",{className:"space-y-1.5",children:[o.jsx("label",{className:"text-sm font-medium",children:"Email Address"}),o.jsxs("div",{className:"relative",children:[o.jsx(xa,{className:"absolute left-3 top-2.5 w-4 h-4 text-muted-foreground"}),o.jsx("input",{type:"email",defaultValue:"john.doe@example.com",className:"w-full pl-9 bg-background border rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-primary/20 outline-none"})]})]}),o.jsxs("div",{className:"space-y-1.5",children:[o.jsx("label",{className:"text-sm font-medium",children:"Phone Number"}),o.jsxs("div",{className:"relative",children:[o.jsx(kS,{className:"absolute left-3 top-2.5 w-4 h-4 text-muted-foreground"}),o.jsx("input",{type:"tel",defaultValue:"+1 (555) 123-4567",className:"w-full pl-9 bg-background border rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-primary/20 outline-none"})]})]})]}),o.jsx("div",{className:"pt-4",children:o.jsx("button",{onClick:r,disabled:e,className:"bg-primary text-primary-foreground px-4 py-2 rounded-lg text-sm font-medium hover:bg-primary/90 transition-colors disabled:opacity-50",children:e?"Saving...":"Save Changes"})})]})}function Tte(){return o.jsxs("div",{className:"space-y-6 max-w-3xl",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-lg font-semibold",children:"Billing & Plan"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage your subscription and payment methods."})]}),o.jsx("div",{className:"w-full h-px bg-border"}),o.jsx("div",{className:"bg-primary/5 border border-primary/20 rounded-xl p-6",children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx("span",{className:"bg-primary text-primary-foreground text-xs font-bold px-2 py-1 rounded",children:"PRO"}),o.jsx("span",{className:"text-sm text-muted-foreground",children:"Monthly Plan"})]}),o.jsxs("h3",{className:"text-2xl font-bold",children:["$29",o.jsx("span",{className:"text-base font-normal text-muted-foreground",children:"/mo"})]}),o.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:["Next billing date: ",o.jsx("strong",{children:"Feb 1, 2026"})]})]}),o.jsx("button",{className:"text-sm font-medium text-primary hover:underline bg-background border border-primary/20 px-3 py-1.5 rounded-lg shadow-sm",children:"Manage Subscription"})]})}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"font-medium",children:"Payment History"}),o.jsx("button",{className:"text-sm text-primary hover:underline",children:"Download All"})]}),o.jsx("div",{className:"border border-border rounded-lg divide-y divide-border",children:[1,2,3].map(t=>o.jsxs("div",{className:"flex items-center justify-between p-4 hover:bg-muted/30 transition-colors",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-2 bg-muted rounded-full text-muted-foreground",children:o.jsx(ki,{size:16})}),o.jsxs("div",{children:[o.jsxs("p",{className:"text-sm font-medium",children:["Invoice #",2024e3+t," - Pro Plan"]}),o.jsxs("p",{className:"text-xs text-muted-foreground",children:["Jan ",15-t,", 2026"]})]})]}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("span",{className:"text-sm font-medium",children:"$29.00"}),o.jsxs("span",{className:"flex items-center gap-1 text-xs font-medium text-emerald-600 bg-emerald-50 px-2 py-0.5 rounded-full",children:[o.jsx(ai,{size:12})," Paid"]})]})]},t))})]})]})}function Ate(){return o.jsxs("div",{className:"space-y-6 max-w-2xl",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-lg font-semibold",children:"Security"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage your password and security preferences."})]}),o.jsx("div",{className:"w-full h-px bg-border"}),o.jsxs("div",{children:[o.jsxs("h3",{className:"font-medium mb-4 flex items-center gap-2",children:[o.jsx(Kx,{size:18,className:"text-muted-foreground"}),"Change Password"]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-1.5",children:[o.jsx("label",{className:"text-sm font-medium",children:"Current Password"}),o.jsx("input",{type:"password",className:"w-full bg-background border rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-primary/20 outline-none",placeholder:""})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{className:"space-y-1.5",children:[o.jsx("label",{className:"text-sm font-medium",children:"New Password"}),o.jsx("input",{type:"password",className:"w-full bg-background border rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-primary/20 outline-none"})]}),o.jsxs("div",{className:"space-y-1.5",children:[o.jsx("label",{className:"text-sm font-medium",children:"Confirm New Password"}),o.jsx("input",{type:"password",className:"w-full bg-background border rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-primary/20 outline-none"})]})]}),o.jsx("button",{className:"bg-white border rounded-lg px-4 py-2 text-sm font-medium hover:bg-slate-50 transition-colors",children:"Update Password"})]})]}),o.jsx("div",{className:"w-full h-px bg-border"}),o.jsxs("div",{children:[o.jsxs("h3",{className:"font-medium mb-4 flex items-center gap-2",children:[o.jsx(EL,{size:18,className:"text-muted-foreground"}),"Two-Factor Authentication"]}),o.jsx("div",{className:"space-y-3",children:o.jsxs("div",{className:"flex items-center justify-between p-4 border border-border rounded-lg bg-card hover:bg-muted/10 transition-colors",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("p",{className:"font-medium text-sm",children:"Authenticator App"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Use an app like Google Authenticator or Authy."})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"text-xs text-muted-foreground bg-muted px-2 py-1 rounded",children:"Not Configured"}),o.jsx("button",{className:"text-sm font-medium bg-primary text-primary-foreground hover:bg-primary/90 px-3 py-1.5 rounded-md shadow-sm transition-colors",children:"Setup"})]})]})})]}),o.jsx("div",{className:"w-full h-px bg-border"}),o.jsxs("div",{children:[o.jsxs("h3",{className:"font-medium mb-4 flex items-center gap-2",children:[o.jsx(yL,{size:18,className:"text-muted-foreground"}),"Passkeys"]}),o.jsxs("div",{className:"flex items-center justify-between p-4 border border-border rounded-lg bg-card hover:bg-muted/10 transition-colors",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("p",{className:"font-medium text-sm",children:"Passkeys"}),o.jsx("span",{className:"text-[10px] font-bold bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400 px-1.5 py-0.5 rounded",children:"NEW"})]}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Sign in securely with your face, fingerprint, or device."})]}),o.jsx("button",{className:"text-sm font-medium text-foreground border border-input bg-background hover:bg-muted px-3 py-1.5 rounded-md shadow-sm transition-colors",children:"Add Passkey"})]})]}),o.jsx("div",{className:"w-full h-px bg-border"}),o.jsxs("div",{children:[o.jsxs("h3",{className:"font-medium mb-4 flex items-center gap-2",children:[o.jsx(SL,{size:18,className:"text-muted-foreground"}),"Active Sessions"]}),o.jsx("div",{className:"space-y-3",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-2 bg-emerald-50 text-emerald-600 rounded-lg",children:o.jsx(ao,{size:16})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium",children:"Windows PC - Chrome"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Seattle, USA  Active now"})]})]}),o.jsx("span",{className:"text-xs font-medium text-emerald-600",children:"Current Session"})]})})]})]})}function ik({title:t}){return o.jsxs("div",{className:"flex flex-col items-center justify-center h-[400px] text-center space-y-4",children:[o.jsx("div",{className:"w-16 h-16 bg-muted rounded-full flex items-center justify-center text-muted-foreground",children:o.jsx("span",{className:"text-2xl font-bold",children:"?"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-lg font-semibold",children:t}),o.jsx("p",{className:"text-sm text-muted-foreground max-w-xs mx-auto",children:"This settings page is currently under development and will be available soon."})]})]})}function Cte(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t==null||t(i),n===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function sk(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function PI(...t){return e=>{let n=!1;const r=t.map(i=>{const s=sk(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():sk(t[i],null)}}}}function RI(...t){return D.useCallback(PI(...t),t)}function kte(t,e=[]){let n=[];function r(s,a){const l=D.createContext(a),c=n.length;n=[...n,a];const u=f=>{var x;const{scope:m,children:g,...v}=f,_=((x=m==null?void 0:m[t])==null?void 0:x[c])||l,b=D.useMemo(()=>v,Object.values(v));return o.jsx(_.Provider,{value:b,children:g})};u.displayName=s+"Provider";function d(f,m){var _;const g=((_=m==null?void 0:m[t])==null?void 0:_[c])||l,v=D.useContext(g);if(v)return v;if(a!==void 0)return a;throw new Error(`\`${f}\` must be used within \`${s}\``)}return[u,d]}const i=()=>{const s=n.map(a=>D.createContext(a));return function(l){const c=(l==null?void 0:l[t])||s;return D.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return i.scopeName=t,[r,Pte(i,...e)]}function Pte(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const a=r.reduce((l,{useScope:c,scopeName:u})=>{const f=c(s)[`__scope${u}`];return{...l,...f}},{});return D.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return n.scopeName=e.scopeName,n}var jI=globalThis!=null&&globalThis.document?D.useLayoutEffect:()=>{},Rte=bk[" useInsertionEffect ".trim().toString()]||jI;function jte({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[i,s,a]=Lte({defaultProp:e,onChange:n}),l=t!==void 0,c=l?t:i;{const d=D.useRef(t!==void 0);D.useEffect(()=>{const f=d.current;f!==l&&console.warn(`${r} is changing from ${f?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=l},[l,r])}const u=D.useCallback(d=>{var f;if(l){const m=Dte(d)?d(t):d;m!==t&&((f=a.current)==null||f.call(a,m))}else s(d)},[l,t,s,a]);return[c,u]}function Lte({defaultProp:t,onChange:e}){const[n,r]=D.useState(t),i=D.useRef(n),s=D.useRef(e);return Rte(()=>{s.current=e},[e]),D.useEffect(()=>{var a;i.current!==n&&((a=s.current)==null||a.call(s,n),i.current=n)},[n,i]),[n,r,s]}function Dte(t){return typeof t=="function"}function Ite(t){const e=D.useRef({value:t,previous:t});return D.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}function Ute(t){const[e,n]=D.useState(void 0);return jI(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let a,l;if("borderBoxSize"in s){const c=s.borderBoxSize,u=Array.isArray(c)?c[0]:c;a=u.inlineSize,l=u.blockSize}else a=t.offsetWidth,l=t.offsetHeight;n({width:a,height:l})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}function Ote(t){const e=Fte(t),n=D.forwardRef((r,i)=>{const{children:s,...a}=r,l=D.Children.toArray(s),c=l.find(Bte);if(c){const u=c.props.children,d=l.map(f=>f===c?D.Children.count(u)>1?D.Children.only(null):D.isValidElement(u)?u.props.children:null:f);return o.jsx(e,{...a,ref:i,children:D.isValidElement(u)?D.cloneElement(u,void 0,d):null})}return o.jsx(e,{...a,ref:i,children:s})});return n.displayName=`${t}.Slot`,n}function Fte(t){const e=D.forwardRef((n,r)=>{const{children:i,...s}=n;if(D.isValidElement(i)){const a=Hte(i),l=Vte(s,i.props);return i.type!==D.Fragment&&(l.ref=r?PI(r,a):a),D.cloneElement(i,l)}return D.Children.count(i)>1?D.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var zte=Symbol("radix.slottable");function Bte(t){return D.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===zte}function Vte(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...l)=>{const c=s(...l);return i(...l),c}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function Hte(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var Gte=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],LI=Gte.reduce((t,e)=>{const n=Ote(`Primitive.${e}`),r=D.forwardRef((i,s)=>{const{asChild:a,...l}=i,c=a?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(c,{...l,ref:s})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{}),Lv="Switch",[Wte,Tne]=kte(Lv),[Xte,Yte]=Wte(Lv),DI=D.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:i,defaultChecked:s,required:a,disabled:l,value:c="on",onCheckedChange:u,form:d,...f}=t,[m,g]=D.useState(null),v=RI(e,S=>g(S)),_=D.useRef(!1),b=m?d||!!m.closest("form"):!0,[x,y]=jte({prop:i,defaultProp:s??!1,onChange:u,caller:Lv});return o.jsxs(Xte,{scope:n,checked:x,disabled:l,children:[o.jsx(LI.button,{type:"button",role:"switch","aria-checked":x,"aria-required":a,"data-state":FI(x),"data-disabled":l?"":void 0,disabled:l,value:c,...f,ref:v,onClick:Cte(t.onClick,S=>{y(E=>!E),b&&(_.current=S.isPropagationStopped(),_.current||S.stopPropagation())})}),b&&o.jsx(OI,{control:m,bubbles:!_.current,name:r,value:c,checked:x,required:a,disabled:l,form:d,style:{transform:"translateX(-100%)"}})]})});DI.displayName=Lv;var II="SwitchThumb",UI=D.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,i=Yte(II,n);return o.jsx(LI.span,{"data-state":FI(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:e})});UI.displayName=II;var qte="SwitchBubbleInput",OI=D.forwardRef(({__scopeSwitch:t,control:e,checked:n,bubbles:r=!0,...i},s)=>{const a=D.useRef(null),l=RI(a,s),c=Ite(n),u=Ute(e);return D.useEffect(()=>{const d=a.current;if(!d)return;const f=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(f,"checked").set;if(c!==n&&g){const v=new Event("click",{bubbles:r});g.call(d,n),d.dispatchEvent(v)}},[c,n,r]),o.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...i,tabIndex:-1,ref:l,style:{...i.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});OI.displayName=qte;function FI(t){return t?"checked":"unchecked"}var zI=DI,$te=UI;const Y_=D.forwardRef(({className:t,...e},n)=>o.jsx(zI,{className:pe("peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...e,ref:n,children:o.jsx($te,{className:pe("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Y_.displayName=zI.displayName;const q_=[{id:"payment_received",label:"Rent Received",description:"When a tenant payment is confirmed",group:"payments"},{id:"payment_failed",label:"Payment Failed",description:"When a payment transaction fails",group:"payments"},{id:"late_fee",label:"Late Fee Applied",description:"System automatically applies a late fee",group:"payments"},{id:"maint_new",label:"New Request",description:"Tenant submits a new work order",group:"maintenance"},{id:"maint_update",label:"Status Update",description:"Vendor or staff updates a ticket",group:"maintenance"},{id:"maint_urgent",label:"Emergency Flag",description:"Request marked as urgent/emergency",group:"maintenance"},{id:"lease_expire",label:"Lease Expiring",description:"Lease ending within 30/60/90 days",group:"leases"},{id:"lease_signed",label:"Document Signed",description:"Tenant signs a lease or addendum",group:"leases"},{id:"tenant_app",label:"New Application",description:"Incoming rental application",group:"tenants"},{id:"tenant_msg",label:"Tenant Message",description:"Direct message from a tenant",group:"messages"},{id:"system_alert",label:"System Alert",description:"Platform updates or security alerts",group:"system"}],Zte=q_.map(t=>({categoryId:t.id,enabled:!0,channels:{app:!0,email:!0,sms:t.group==="maintenance"||t.group==="payments"?!1:void 0}}));function Kte(){const[t,e]=D.useState(Zte),[n,r]=D.useState("categories"),i=Array.from(new Set(q_.map(l=>l.group))),s=l=>{e(c=>c.map(u=>u.categoryId===l?{...u,enabled:!u.enabled}:u))},a=(l,c)=>{e(u=>u.map(d=>d.categoryId===l?{...d,channels:{...d.channels,[c]:!d.channels[c]}}:d))};return o.jsxs("div",{className:"max-w-4xl mx-auto",children:[o.jsxs("div",{className:"mb-6",children:[o.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Notification Preferences"}),o.jsx("p",{className:"text-muted-foreground text-sm",children:"Customize how and when you want to be notified."})]}),o.jsxs("div",{className:"bg-muted/30 p-4 rounded-lg border border-border mb-8 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-2 bg-background rounded-md border border-border",children:o.jsx(dl,{className:"w-5 h-5 text-primary"})}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-sm",children:"Pause All Notifications"}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Temporarily silence all non-urgent alerts"})]})]}),o.jsx(Y_,{checked:!1,onCheckedChange:()=>{}})]}),o.jsx("div",{className:"border-b border-border mb-6",children:o.jsxs("div",{className:"flex gap-6",children:[o.jsx("button",{onClick:()=>r("categories"),className:pe("pb-3 text-sm font-medium border-b-2 transition-colors",n==="categories"?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground"),children:"By Category"}),o.jsx("button",{onClick:()=>r("channels"),className:pe("pb-3 text-sm font-medium border-b-2 transition-colors",n==="channels"?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground"),children:"Channel Settings"})]})}),n==="categories"&&o.jsx("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-2 duration-300",children:i.map(l=>{const c=q_.filter(u=>u.group===l);return o.jsxs("div",{className:"space-y-3",children:[o.jsxs("h3",{className:"text-sm font-semibold capitalize text-muted-foreground tracking-wider mb-3 flex items-center gap-2",children:[l==="maintenance"&&o.jsx(ui,{className:"w-3.5 h-3.5"}),l," Alerts"]}),o.jsx("div",{className:"grid gap-3",children:c.map(u=>{const d=t.find(f=>f.categoryId===u.id);return d?o.jsxs("div",{className:"flex items-start justify-between p-4 bg-card border border-border rounded-lg hover:border-border/80 transition-colors",children:[o.jsxs("div",{className:"flex-1 mr-4",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx("span",{className:"font-medium text-sm",children:u.label}),!d.enabled&&o.jsx("span",{className:"text-[10px] bg-muted text-muted-foreground px-1.5 rounded",children:"OFF"})]}),o.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:u.description}),d.enabled&&o.jsxs("div",{className:"flex items-center gap-3 mt-3",children:[o.jsx(Mb,{active:!!d.channels.app,onClick:()=>a(u.id,"app"),icon:dl,label:"In-App"}),o.jsx(Mb,{active:!!d.channels.email,onClick:()=>a(u.id,"email"),icon:xa,label:"Email"}),d.channels.sms!==void 0&&o.jsx(Mb,{active:!!d.channels.sms,onClick:()=>a(u.id,"sms"),icon:EL,label:"SMS"})]})]}),o.jsx(Y_,{checked:d.enabled,onCheckedChange:()=>s(u.id)})]},u.id):null})})]},l)})}),n==="channels"&&o.jsxs("div",{className:"text-center py-12 text-muted-foreground animate-in fade-in zoom-in-95",children:[o.jsx("div",{className:"bg-muted/20 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(AS,{className:"w-8 h-8 opacity-50"})}),o.jsx("h3",{className:"text-lg font-medium mb-2",children:"Global Channel Rules"}),o.jsxs("p",{className:"max-w-md mx-auto text-sm",children:["Configure default behaviors, quiet hours, and delivery digests for each channel (Email, SMS, Push).",o.jsx("br",{}),o.jsx("span",{className:"text-xs mt-2 block opacity-70",children:"(Coming in Phase 2)"})]})]})]})}function Mb({active:t,onClick:e,icon:n,label:r}){return o.jsxs("button",{onClick:e,className:pe("flex items-center gap-1.5 px-2 py-1 rounded text-[10px] font-medium border transition-all",t?"bg-primary/5 border-primary/20 text-primary":"bg-muted/30 border-transparent text-muted-foreground hover:bg-muted/50"),title:`Toggle ${r}`,children:[o.jsx(n,{className:"w-3 h-3"}),r]})}const wr=({children:t})=>o.jsx(Et.div,{initial:{opacity:0,filter:"blur(1px)",scale:.99},animate:{opacity:1,filter:"blur(0px)",scale:1},exit:{opacity:0,filter:"blur(1px)",scale:.99},transition:{duration:.25,ease:"easeOut"},className:"h-full",children:t}),Jte=o.jsxs(o.Fragment,{children:[o.jsx(Ot,{index:!0,element:o.jsx(ix,{to:"dashboard",replace:!0})}),o.jsx(Ot,{path:"dashboard",element:o.jsx(wr,{children:o.jsx(VJ,{})})}),o.jsx(Ot,{path:"properties",element:o.jsx(wr,{children:o.jsx(YJ,{})})}),o.jsx(Ot,{path:"properties/new",element:o.jsx(wr,{children:o.jsx(qJ,{})})}),o.jsx(Ot,{path:"properties/:id",element:o.jsx(wr,{children:o.jsx(ate,{})})}),o.jsx(Ot,{path:"properties/:propertyId/units/new",element:o.jsx(wr,{children:o.jsx($J,{})})}),o.jsx(Ot,{path:"properties/:propertyId/units/:unitId",element:o.jsx(wr,{children:o.jsx(mte,{})})}),o.jsx(Ot,{path:"tenants",element:o.jsx(wr,{children:o.jsx(QJ,{})})}),o.jsx(Ot,{path:"tenants/:id",element:o.jsx(wr,{children:o.jsx(bee,{})})}),o.jsx(Ot,{path:"leases",element:o.jsx(wr,{children:o.jsx(kee,{})})}),o.jsx(Ot,{path:"maintenance",element:o.jsx(wr,{children:o.jsx(Iee,{})})}),o.jsx(Ot,{path:"accounting",element:o.jsx(wr,{children:o.jsx(Fee,{})})}),o.jsx(Ot,{path:"documents",element:o.jsx(wr,{children:o.jsx(Gee,{})})}),o.jsx(Ot,{path:"messages",element:o.jsx(wr,{children:o.jsx(Yee,{})})}),o.jsx(Ot,{path:"reports",element:o.jsx(wr,{children:o.jsx(Zee,{})})}),o.jsx(Ot,{path:"payments",element:o.jsx(wr,{children:o.jsx(ete,{})})}),o.jsx(Ot,{path:"users",element:o.jsx(wr,{children:o.jsx(wte,{})})}),o.jsxs(Ot,{path:"settings",element:o.jsx(wr,{children:o.jsx(Mte,{})}),children:[o.jsx(Ot,{index:!0,element:o.jsx(ix,{to:"account",replace:!0})}),o.jsx(Ot,{path:"account",element:o.jsx(Nte,{})}),o.jsx(Ot,{path:"billing",element:o.jsx(Tte,{})}),o.jsx(Ot,{path:"security",element:o.jsx(Ate,{})}),o.jsx(Ot,{path:"notifications",element:o.jsx(Kte,{})}),o.jsx(Ot,{path:"organization",element:o.jsx(ik,{title:"Organization Profile"})}),o.jsx(Ot,{path:"appearance",element:o.jsx(ik,{title:"Appearance"})})]})]}),Fr={firstName:"John",rentAmount:1450,rentStatus:"overdue",dueDate:"Jan 1, 2024",balance:1450,lastPayment:{date:"Dec 1, 2023",amount:1450,method:"Auto-Pay (Visa ...4242)"},unit:{name:"Sunset Apartments",number:"Unit 3B",address:"123 Sunset Blvd, Los Angeles, CA 90026"},upcoming:[{label:"Lease Renewal Offer",date:"Expires Feb 15",icon:rn,urgency:"high"},{label:"HVAC Inspection",date:"Jan 20, 2024",icon:Ft,urgency:"medium"}],maintenance:[{id:"m1",title:"Water leak under sink",status:"in_progress",date:"2 hrs ago",urgency:"high"}],messages:[{id:"msg1",sender:"Property Manager",subject:"Parking Structure Cleaning",preview:"Please remove your vehicle by...",date:"Yesterday",isUnread:!0},{id:"msg2",sender:"System",subject:"Rent Receipt - December",preview:"We received your payment of...",date:"Dec 1",isUnread:!1}],recentPayments:[{id:"p1",date:"Dec 1, 2023",amount:1450,label:"Rent Payment",status:"paid"},{id:"p2",date:"Nov 1, 2023",amount:1450,label:"Rent Payment",status:"paid"},{id:"p3",date:"Oct 1, 2023",amount:1450,label:"Rent Payment",status:"paid"}]},Qte=({status:t})=>{const e={paid:"bg-emerald-500/10 text-emerald-600 border-emerald-500/20",in_progress:"bg-blue-500/10 text-blue-600 border-blue-500/20",waiting:"bg-amber-500/10 text-amber-600 border-amber-500/20",high:"bg-rose-500/10 text-rose-600 border-rose-500/20",default:"bg-slate-100 text-slate-600 border-slate-200"},n=r=>r==="paid"?e.paid:r==="in_progress"?e.in_progress:r==="high"||r==="overdue"?e.high:e.default;return o.jsx("span",{className:pe("px-2 py-0.5 rounded-full text-[10px] font-bold uppercase tracking-wide border",n(t)),children:t.replace("_"," ")})};function ene(){const t=qr(),[e,n]=D.useState("maintenance"),r={paid:{color:"bg-emerald-500",lightColor:"bg-emerald-500/10",textColor:"text-emerald-700 dark:text-emerald-400",icon:ua,title:"Rent is Paid",subtitle:"You are all set for this month!"},due_soon:{color:"bg-amber-500",lightColor:"bg-amber-500/10",textColor:"text-amber-700 dark:text-amber-400",icon:Pn,title:"Rent Due Soon",subtitle:`Due on ${Fr.dueDate}`},overdue:{color:"bg-rose-500",lightColor:"bg-rose-500/10",textColor:"text-rose-700 dark:text-rose-400",icon:zs,title:"Rent Overdue",subtitle:`Was due on ${Fr.dueDate}. Late fees may apply.`}}[Fr.rentStatus],i=[{id:"maintenance",label:"Maintenance",icon:Ft,count:Fr.maintenance.length},{id:"payments",label:"Payments",icon:ki,count:0},{id:"messages",label:"Messages",icon:Bs,count:Fr.messages.filter(s=>s.isUnread).length},{id:"upcoming",label:"Upcoming",icon:Bd,count:Fr.upcoming.length}];return o.jsxs("div",{className:"space-y-8 pb-12",children:[o.jsxs("div",{children:[o.jsxs("h1",{className:"text-3xl font-bold tracking-tight",children:["Hi, ",Fr.firstName]}),o.jsx("p",{className:"text-muted-foreground mt-1",children:"Welcome back to your home dashboard."})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[o.jsxs(Et.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"lg:col-span-7 bg-card rounded-2xl border shadow-sm p-8 relative overflow-hidden group flex flex-col justify-between",children:[o.jsx("div",{className:pe("absolute top-0 left-0 w-2 h-full",r.color)}),o.jsxs("div",{className:"flex items-start justify-between relative z-10",children:[o.jsxs("div",{children:[o.jsxs("div",{className:pe("inline-flex items-center gap-2 px-3 py-1 rounded-full text-sm font-medium mb-4",r.lightColor,r.textColor),children:[o.jsx(r.icon,{size:16}),r.title]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("p",{className:"text-sm text-muted-foreground font-medium uppercase tracking-wider",children:"Total Balance"}),o.jsxs("div",{className:"text-4xl font-bold tracking-tight flex items-baseline gap-1",children:["$",Fr.balance.toLocaleString(),o.jsx("span",{className:"text-sm font-normal text-muted-foreground",children:"USD"})]}),o.jsx("p",{className:pe("text-sm font-medium pt-1",r.textColor),children:r.subtitle})]})]}),o.jsx(vr,{className:"absolute right-[-20px] top-[-20px] w-48 h-48 text-muted/10 rotate-[-15deg] pointer-events-none"})]}),o.jsxs("div",{className:"mt-8 flex gap-3 relative z-10",children:[o.jsx("button",{onClick:()=>t("/tenant/payments"),className:"flex-1 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 rounded-lg font-medium transition-colors shadow-lg shadow-primary/20",children:"Pay Now"}),o.jsx("button",{className:"px-4 h-10 border rounded-lg hover:bg-muted font-medium transition-colors",children:"Manage Auto-Pay"})]})]}),o.jsxs(Et.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"lg:col-span-5 bg-gradient-to-br from-slate-900 to-slate-800 text-white rounded-2xl p-8 relative overflow-hidden flex flex-col justify-between",children:[o.jsxs("div",{className:"relative z-10 space-y-6",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:"My Unit"}),o.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-300 text-[10px] font-bold uppercase border border-emerald-500/30",children:[o.jsx(Qx,{size:12})," Lease Active"]})]}),o.jsx("h2",{className:"text-2xl font-bold",children:Fr.unit.number}),o.jsx("p",{className:"text-slate-300 text-sm",children:Fr.unit.name})]}),o.jsx("div",{className:"pt-6 border-t border-white/10",children:o.jsxs("div",{className:"flex justify-between items-end",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-slate-400 mb-1",children:"Current Lease Ends"}),o.jsx("p",{className:"text-lg font-semibold",children:"Feb 28, 2024"})]}),o.jsxs("button",{onClick:()=>t("/tenant/documents/lease"),className:"px-3 py-1.5 bg-white/10 hover:bg-white/20 rounded-lg text-xs font-medium transition-colors flex items-center gap-1",children:["Details ",o.jsx(so,{size:12})]})]})})]}),o.jsx(ys,{className:"absolute -bottom-8 -right-8 w-48 h-48 text-white/5 rotate-0 pointer-events-none"})]})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"flex items-center gap-2 border-b overflow-x-auto pb-1px hide-scrollbar",children:i.map(s=>o.jsxs("button",{onClick:()=>n(s.id),className:pe("flex items-center gap-2 px-4 py-3 text-sm font-medium border-b-2 transition-colors whitespace-nowrap",e===s.id?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground hover:border-muted-foreground/30"),children:[o.jsx(s.icon,{size:16}),s.label,s.count>0&&o.jsx("span",{className:pe("px-1.5 py-0.5 rounded-full text-[10px] bg-muted text-muted-foreground",e===s.id&&"bg-primary/10 text-primary"),children:s.count})]},s.id))}),o.jsx("div",{className:"min-h-[300px]",children:o.jsx(cn,{mode:"wait",children:o.jsxs(Et.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.15},children:[e==="maintenance"&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex justify-between items-center pb-2",children:[o.jsx("h3",{className:"text-lg font-semibold",children:"Active Requests"}),o.jsx("button",{onClick:()=>t("/tenant/maintenance/new"),className:"text-sm font-medium text-primary hover:underline flex items-center gap-1",children:"+ New Request"})]}),Fr.maintenance.length>0?o.jsx("div",{className:"grid gap-3",children:Fr.maintenance.map(s=>o.jsxs("div",{className:"bg-card border rounded-xl p-4 flex items-center justify-between hover:border-primary/50 transition-colors cursor-pointer group",onClick:()=>t(`/tenant/maintenance/${s.id}`),children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-500/10 text-blue-600 flex items-center justify-center",children:o.jsx(Ft,{size:20})}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-sm group-hover:text-primary transition-colors",children:s.title}),o.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[o.jsx("p",{className:"text-xs text-muted-foreground",children:s.date}),o.jsx("span",{className:"text-[10px] text-muted-foreground",children:""}),o.jsxs("p",{className:"text-xs text-muted-foreground capitalize",children:["Urgency: ",s.urgency]})]})]})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Qte,{status:s.status}),o.jsx(da,{size:16,className:"text-muted-foreground group-hover:text-foreground"})]})]},s.id))}):o.jsxs("div",{className:"p-12 border-2 border-dashed rounded-xl flex flex-col items-center justify-center text-center text-muted-foreground",children:[o.jsx(ua,{size:32,className:"mb-2 opacity-20"}),o.jsx("p",{className:"text-sm",children:"No active maintenance requests."})]})]}),e==="payments"&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex justify-between items-center pb-2",children:[o.jsx("h3",{className:"text-lg font-semibold",children:"Recent History"}),o.jsx("button",{onClick:()=>t("/tenant/payments"),className:"text-sm font-medium text-primary hover:underline",children:"View All"})]}),o.jsx("div",{className:"bg-card border rounded-xl overflow-hidden",children:Fr.recentPayments.map((s,a)=>o.jsxs("div",{className:pe("p-4 flex items-center justify-between hover:bg-muted/30 transition-colors group",a!==Fr.recentPayments.length-1&&"border-b"),children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-emerald-500/10 text-emerald-600 flex items-center justify-center",children:o.jsx(vr,{size:20})}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-sm text-foreground",children:s.label}),o.jsx("p",{className:"text-xs text-muted-foreground",children:s.date})]})]}),o.jsxs("div",{className:"text-right",children:[o.jsxs("p",{className:"font-bold text-sm",children:["-$",s.amount.toLocaleString()]}),o.jsxs("p",{className:"text-xs text-emerald-600 font-medium capitalize flex items-center justify-end gap-1",children:[o.jsx(ua,{size:10})," ",s.status]})]})]},s.id))})]}),e==="messages"&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex justify-between items-center pb-2",children:[o.jsx("h3",{className:"text-lg font-semibold",children:"Inbox"}),o.jsx("button",{onClick:()=>t("/tenant/messages"),className:"text-sm font-medium text-primary hover:underline",children:"Go to Messages"})]}),o.jsx("div",{className:"bg-card border rounded-xl overflow-hidden divide-y",children:Fr.messages.map(s=>o.jsxs("div",{className:"p-4 hover:bg-muted/30 transition-colors cursor-pointer group flex gap-4 items-start",onClick:()=>t(`/tenant/messages/${s.id}`),children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-indigo-500/10 text-indigo-600 flex items-center justify-center shrink-0",children:o.jsx(Bs,{size:20})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex justify-between items-start mb-0.5",children:[o.jsx("p",{className:pe("text-sm font-medium",s.isUnread?"text-primary":"text-foreground"),children:s.sender}),o.jsx("span",{className:"text-xs text-muted-foreground",children:s.date})]}),o.jsx("p",{className:pe("text-sm mb-1",s.isUnread?"font-semibold text-foreground":"text-foreground/80"),children:s.subject}),o.jsx("p",{className:"text-xs text-muted-foreground truncate",children:s.preview})]}),s.isUnread&&o.jsx("div",{className:"w-2 h-2 rounded-full bg-primary mt-2 shrink-0"})]},s.id))})]}),e==="upcoming"&&o.jsxs("div",{className:"space-y-4",children:[o.jsx("h3",{className:"text-lg font-semibold pb-2",children:"Upcoming Events"}),o.jsx("div",{className:"grid gap-3",children:Fr.upcoming.map((s,a)=>o.jsxs("div",{className:"bg-card border rounded-xl p-4 flex items-center gap-4",children:[o.jsx("div",{className:"w-10 h-10 rounded-lg bg-orange-500/10 text-orange-600 flex items-center justify-center shrink-0",children:o.jsx(s.icon,{size:20})}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-sm",children:s.label}),o.jsx("p",{className:"text-xs text-muted-foreground",children:s.date})]}),s.urgency==="high"&&o.jsx("span",{className:"ml-auto px-2 py-0.5 bg-rose-500/10 text-rose-600 text-[10px] font-bold uppercase rounded-full border border-rose-500/20",children:"Action Required"})]},a))})]})]},e)})})]})]})}const na={balance:1450,dueDate:"Jan 1, 2024",status:"overdue",breakdown:[{label:"Base Rent (Unit 3B)",amount:1350,type:"rent"},{label:"Parking Space #42",amount:50,type:"fee"},{label:"Water / Sewer",amount:35,type:"utility"},{label:"Trash",amount:15,type:"utility"}],methods:[{id:"pm1",type:"ach",name:"Chase Checking ...4242",fee:0,isDefault:!0},{id:"pm2",type:"card",name:"Visa ...8899",fee:.029,isDefault:!1}],history:[{id:"h1",date:"Dec 1, 2023",description:"Rent Payment",amount:1450,status:"success",method:"Chase Checking ...4242"},{id:"h2",date:"Nov 1, 2023",description:"Rent Payment",amount:1450,status:"success",method:"Chase Checking ...4242"},{id:"h3",date:"Oct 1, 2023",description:"Rent Payment",amount:1450,status:"success",method:"Chase Checking ...4242"},{id:"h4",date:"Oct 5, 2023",description:"Late Fee Payment",amount:75,status:"success",method:"Visa ...8899"}],autopay:{enabled:!0,methodId:"pm1",day:1}},tne=({method:t,isSelected:e,onClick:n})=>o.jsxs("div",{onClick:n,className:pe("p-3 rounded-xl border-2 cursor-pointer transition-all flex items-center justify-between",e?"border-primary bg-primary/10 shadow-sm":"border-white/10 bg-transparent hover:bg-white/5 hover:border-white/30"),children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:pe("p-2 rounded-lg",e?"bg-primary/20 text-primary":"bg-white/5 text-slate-400"),children:o.jsx(ki,{size:20})}),o.jsxs("div",{children:[o.jsx("p",{className:pe("font-medium text-sm",e?"text-white":"text-slate-300"),children:t.name}),o.jsx("p",{className:"text-xs text-slate-500",children:t.fee>0?`${(t.fee*100).toFixed(1)}% Fee`:"No Fee"})]})]}),e&&o.jsx("div",{className:"w-5 h-5 rounded-full bg-primary flex items-center justify-center",children:o.jsx(ua,{size:12,className:"text-white"})})]}),nne=({item:t})=>o.jsxs("div",{className:"flex items-center justify-between p-4 bg-card border rounded-xl hover:border-primary/30 transition-colors group",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:pe("w-10 h-10 rounded-full flex items-center justify-center",t.status==="success"?"bg-emerald-500/10 text-emerald-600":"bg-red-500/10 text-red-600"),children:t.status==="success"?o.jsx(ua,{size:18}):o.jsx(zs,{size:18})}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-sm",children:t.description}),o.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[o.jsx("span",{children:t.date}),o.jsx("span",{children:""}),o.jsx("span",{children:t.method})]})]})]}),o.jsxs("div",{className:"text-right",children:[o.jsxs("p",{className:"font-bold text-sm",children:["-$",t.amount.toLocaleString()]}),o.jsxs("button",{className:"text-xs font-medium text-primary opacity-0 group-hover:opacity-100 transition-opacity hover:underline flex items-center gap-1 justify-end mt-1",children:["Receipt ",o.jsx(Yr,{size:10})]})]})]});function rne(){const[t,e]=D.useState(!1),[n,r]=D.useState(na.methods[0].id),[i,s]=D.useState(na.balance),a=na.methods.find(d=>d.id===n),l=a?a.fee*i:0,c=i+l,u={paid:{color:"bg-emerald-500",icon:ua,text:"Paid in Full"},due_soon:{color:"bg-amber-500",icon:Pn,text:"Due Soon"},overdue:{color:"bg-rose-500",icon:zs,text:"Payment Overdue"}}[na.status];return o.jsxs("div",{className:"max-w-4xl mx-auto space-y-8 pb-24",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Payments"}),o.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage payments, view history, and set up autopay."})]}),o.jsxs("div",{className:"bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 text-white rounded-2xl shadow-xl overflow-hidden relative",children:[o.jsx("div",{className:pe("absolute top-0 left-0 w-full h-1.5 z-20",u.color)}),o.jsxs("div",{className:"grid md:grid-cols-2",children:[o.jsxs("div",{className:"p-8 pb-0 md:pb-8 flex flex-col justify-between relative z-10",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white/10 text-white/90 text-sm font-medium mb-6",children:[o.jsx(u.icon,{size:16,className:pe("text-rose-400")}),u.text]}),o.jsx("p",{className:"text-slate-400 text-sm font-medium uppercase tracking-wider mb-2",children:"Total Balance Due"}),o.jsxs("div",{className:"text-5xl font-bold tracking-tight flex items-baseline gap-2 mb-2",children:["$",na.balance.toLocaleString(),o.jsx("span",{className:"text-lg font-normal text-slate-400",children:"USD"})]}),o.jsxs("p",{className:"text-slate-300 text-sm",children:["Due Date: ",o.jsx("span",{className:"font-medium text-white",children:na.dueDate})]})]}),o.jsxs("button",{onClick:()=>e(!t),className:"mt-8 flex items-center gap-2 text-sm text-slate-400 hover:text-white transition-colors",children:[o.jsx(vs,{className:pe("transition-transform",t&&"rotate-180"),size:16}),t?"Hide Breakdown":"View Breakdown"]})]}),o.jsxs("div",{className:"p-8 bg-black/20 backdrop-blur-sm border-l border-white/5 flex flex-col justify-between",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsx("p",{className:"text-sm font-medium text-slate-300",children:"Select Method"}),o.jsxs("div",{className:"space-y-2",children:[na.methods.map(d=>o.jsx(tne,{method:d,isSelected:n===d.id,onClick:()=>r(d.id)},d.id)),o.jsxs("button",{className:"w-full py-2 border-2 border-dashed border-white/10 rounded-xl text-xs font-medium text-slate-400 hover:text-white hover:border-white/30 transition-all flex items-center justify-center gap-2",children:[o.jsx(Ws,{size:14})," Add Payment Method"]})]})]}),o.jsxs("div",{className:"mt-8",children:[o.jsxs("div",{className:"flex justify-between items-center text-sm mb-4 text-slate-400",children:[o.jsx("span",{children:"Subtotal"}),o.jsxs("span",{children:["$",i.toLocaleString()]})]}),l>0&&o.jsxs("div",{className:"flex justify-between items-center text-sm mb-4 text-slate-400",children:[o.jsx("span",{children:"Processing Fee"}),o.jsxs("span",{children:["$",l.toFixed(2)]})]}),o.jsxs("button",{className:"w-full h-12 bg-primary text-primary-foreground hover:bg-primary/90 rounded-xl font-bold text-lg shadow-lg shadow-primary/20 transition-all flex items-center justify-center gap-2",children:["Pay $",c.toLocaleString()]})]})]})]}),o.jsx(vr,{className:"absolute left-[-20px] bottom-[-20px] w-64 h-64 text-white/5 rotate-[15deg] pointer-events-none"}),o.jsx(cn,{children:t&&o.jsx(Et.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"bg-white/5 border-t border-white/10",children:o.jsxs("div",{className:"p-8 grid md:grid-cols-2 gap-8",children:[o.jsxs("div",{className:"space-y-3",children:[na.breakdown.map((d,f)=>o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"text-slate-300",children:d.label}),o.jsxs("span",{className:"font-medium font-mono",children:["$",d.amount]})]},f)),o.jsxs("div",{className:"border-t border-white/10 pt-3 mt-3 flex justify-between text-base font-bold",children:[o.jsx("span",{children:"Total"}),o.jsxs("span",{children:["$",na.balance]})]})]}),o.jsxs("div",{className:"bg-rose-500/10 border border-rose-500/20 rounded-xl p-4 text-sm text-rose-200",children:[o.jsxs("div",{className:"flex items-center gap-2 font-bold mb-1",children:[o.jsx(zs,{size:16})," Late Fee Warning"]}),o.jsx("p",{className:"opacity-80 leading-relaxed",children:"Your payment is overdue. A late fee of $75 will be applied if not paid by tomorrow, Jan 12."})]})]})})})]}),o.jsxs("div",{className:"flex items-center justify-between p-6 bg-card border rounded-2xl shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-12 h-12 rounded-full bg-indigo-500/10 text-indigo-600 flex items-center justify-center",children:o.jsx(Bd,{size:24})}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-base",children:"Autopay is Enabled"}),o.jsxs("p",{className:"text-sm text-muted-foreground",children:["Scheduled for the ",o.jsx("span",{className:"font-medium text-foreground",children:"1st of every month"})," using ",o.jsx("span",{className:"font-medium text-foreground",children:"Chase Checking"}),"."]})]})]}),o.jsx("button",{className:"px-4 py-2 border rounded-lg text-sm font-medium hover:bg-muted transition-colors",children:"Manage Autopay"})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2",children:[o.jsx(bL,{size:20,className:"text-muted-foreground"}),"Payment History"]}),o.jsxs("button",{className:"text-sm font-medium text-primary hover:underline flex items-center gap-1",children:["Download All ",o.jsx(Yr,{size:12})]})]}),o.jsx("div",{className:"space-y-3",children:na.history.map(d=>o.jsx(nne,{item:d},d.id))}),o.jsx("button",{className:"w-full py-3 border border-dashed rounded-xl text-sm font-medium text-muted-foreground hover:bg-muted/50 transition-colors",children:"Load More Transactions"})]}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"p-6 bg-card border rounded-xl hover:border-primary/50 transition-colors cursor-pointer group",children:[o.jsx(rn,{className:"w-8 h-8 text-muted-foreground mb-4 group-hover:text-primary transition-colors"}),o.jsx("h3",{className:"font-bold",children:"2023 Tax Documents"}),o.jsx("p",{className:"text-sm text-muted-foreground mt-1 mb-4",children:"Download your annual rent verification form."}),o.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-primary",children:["Download PDF ",o.jsx(so,{size:14,className:"group-hover:translate-x-1 transition-transform"})]})]}),o.jsxs("div",{className:"p-6 bg-card border rounded-xl hover:border-primary/50 transition-colors cursor-pointer group",children:[o.jsx(rn,{className:"w-8 h-8 text-muted-foreground mb-4 group-hover:text-primary transition-colors"}),o.jsx("h3",{className:"font-bold",children:"Lease Agreement"}),o.jsx("p",{className:"text-sm text-muted-foreground mt-1 mb-4",children:"View your current signed lease terms."}),o.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-primary",children:["View Document ",o.jsx(so,{size:14,className:"group-hover:translate-x-1 transition-transform"})]})]})]})]})}const Oo={currentLease:{id:"l1",title:"Lease Agreement - 2023-2024",status:"active",startDate:"Mar 1, 2023",endDate:"Feb 28, 2024",monthlyRent:1450,securityDeposit:1450,unit:"Unit 3B",property:"Sunset Apartments",pdfUrl:"#"},archivedLeases:[{id:"l0",title:"Lease Agreement - 2022-2023",startDate:"Mar 1, 2022",endDate:"Feb 28, 2023",status:"expired"}],documents:[{id:"d1",title:"Move-in Checklist",category:"Property",date:"Mar 1, 2023",status:"signed",type:"pdf"},{id:"d2",title:"Pet Addendum",category:"Legal",date:"Mar 1, 2023",status:"signed",type:"pdf"},{id:"d3",title:"Generic House Rules",category:"Property",date:"Mar 1, 2023",status:"informational",type:"pdf"},{id:"d4",title:"Renters Insurance Policy",category:"Financial",date:"Mar 5, 2023",status:"informational",type:"pdf"},{id:"d5",title:"Notice of Entry - HVAC",category:"Notice",date:"Jan 15, 2024",status:"informational",type:"pdf"}]},ak=({status:t})=>{const e={signed:"bg-emerald-500/10 text-emerald-600 border-emerald-500/20",active:"bg-emerald-500/10 text-emerald-600 border-emerald-500/20",pending:"bg-amber-500/10 text-amber-600 border-amber-500/20",expired:"bg-slate-100 text-slate-500 border-slate-200",informational:"bg-blue-500/10 text-blue-600 border-blue-500/20"},n=s=>s==="signed"||s==="active"?e.active:s==="pending_signature"?e.pending:s==="expired"?e.expired:e.informational,i=(s=>s==="signed"||s==="active"?ua:s==="pending_signature"?zs:s==="expired"?Pn:rn)(t);return o.jsxs("span",{className:pe("px-2 py-0.5 rounded-full text-[10px] font-bold uppercase tracking-wide border flex items-center gap-1 w-fit",n(t)),children:[o.jsx(i,{size:12}),t.replace("_"," ")]})};function ine(){const[t,e]=D.useState(""),[n,r]=D.useState(!1),[i,s]=D.useState("all"),a=Oo.documents.filter(l=>{const c=l.title.toLowerCase().includes(t.toLowerCase()),u=i==="all"||l.category.toLowerCase()===i;return c&&u});return o.jsxs("div",{className:"max-w-5xl mx-auto space-y-8 pb-24",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Lease & Documents"}),o.jsx("p",{className:"text-muted-foreground mt-1",children:"View and download your lease agreement and other important files."})]}),o.jsxs("div",{className:"bg-amber-500/10 border border-amber-500/20 p-4 rounded-xl flex items-start gap-3",children:[o.jsx(Pn,{className:"text-amber-600 shrink-0 mt-0.5",size:20}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-sm font-bold text-amber-700 dark:text-amber-500",children:"Lease Expiring Soon"}),o.jsxs("p",{className:"text-sm text-amber-600/90 dark:text-amber-400 mt-1",children:["Your current lease ends in ",o.jsx("span",{className:"font-bold",children:"45 days"})," (Feb 28, 2024). A renewal offer is available."]})]}),o.jsx("button",{className:"px-3 py-1.5 bg-amber-500 text-white rounded-lg text-xs font-bold shadow-sm hover:bg-amber-600 transition-colors",children:"View Offer"})]}),o.jsxs("div",{className:"bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 text-white rounded-2xl shadow-xl overflow-hidden relative",children:[o.jsxs("div",{className:"p-8 relative z-10",children:[o.jsxs("div",{className:"flex justify-between items-start mb-6",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-2 bg-emerald-500/20 rounded-lg text-emerald-400 border border-emerald-500/20",children:o.jsx(Qx,{size:24})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-bold",children:"Current Lease Agreement"}),o.jsxs("p",{className:"text-sm text-slate-400",children:["Valid through ",Oo.currentLease.endDate]})]})]}),o.jsx("div",{className:"hidden sm:block",children:o.jsx(ak,{status:Oo.currentLease.status})})]}),o.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-6 py-6 border-t border-white/10 border-b mb-6",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-slate-400 font-medium uppercase tracking-wider mb-1",children:"Monthly Rent"}),o.jsxs("p",{className:"text-lg font-bold",children:["$",Oo.currentLease.monthlyRent.toLocaleString()]})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-slate-400 font-medium uppercase tracking-wider mb-1",children:"Term Start"}),o.jsx("p",{className:"text-lg font-bold text-slate-200",children:Oo.currentLease.startDate})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-slate-400 font-medium uppercase tracking-wider mb-1",children:"Term End"}),o.jsx("p",{className:"text-lg font-bold text-slate-200",children:Oo.currentLease.endDate})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-slate-400 font-medium uppercase tracking-wider mb-1",children:"Deposit"}),o.jsxs("p",{className:"text-lg font-bold text-slate-200",children:["$",Oo.currentLease.securityDeposit.toLocaleString()]})]})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("button",{className:"flex-1 sm:flex-none h-10 px-6 bg-white text-slate-900 hover:bg-slate-200 rounded-lg font-bold text-sm transition-colors flex items-center justify-center gap-2",children:[o.jsx(rn,{size:16})," View Lease"]}),o.jsx("button",{className:"h-10 px-4 border border-white/20 hover:bg-white/10 rounded-lg text-white transition-colors flex items-center justify-center",title:"Download PDF",children:o.jsx(Yr,{size:18})}),o.jsx("button",{className:"h-10 px-4 border border-white/20 hover:bg-white/10 rounded-lg text-white transition-colors flex items-center justify-center",title:"Print",children:o.jsx(uH,{size:18})})]})]}),o.jsx(rn,{className:"absolute right-[-20px] top-[-20px] w-64 h-64 text-white/5 rotate-[-12deg] pointer-events-none"})]}),o.jsxs("div",{className:"border rounded-xl bg-card overflow-hidden",children:[o.jsxs("button",{onClick:()=>r(!n),className:"w-full flex items-center justify-between p-4 hover:bg-muted/50 transition-colors",children:[o.jsxs("span",{className:"font-medium text-sm flex items-center gap-2",children:[o.jsx(sne,{isActive:n})," Previous Leases"]}),o.jsx(vs,{size:16,className:pe("text-muted-foreground transition-transform",n&&"rotate-180")})]}),o.jsx(cn,{children:n&&o.jsx(Et.div,{initial:{height:0},animate:{height:"auto"},exit:{height:0},className:"overflow-hidden",children:o.jsx("div",{className:"border-t",children:Oo.archivedLeases.map(l=>o.jsxs("div",{className:"p-4 flex items-center justify-between hover:bg-muted/30 transition-colors border-b last:border-0",children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-sm",children:l.title}),o.jsxs("p",{className:"text-xs text-muted-foreground",children:[l.startDate," - ",l.endDate]})]}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("span",{className:"px-2 py-0.5 bg-slate-100 text-slate-500 rounded text-[10px] font-bold uppercase border",children:"Expired"}),o.jsx("button",{className:"text-sm font-medium text-primary hover:underline",children:"Download"})]})]},l.id))})})})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[o.jsx("h2",{className:"text-xl font-bold",children:"Document Library"}),o.jsx("div",{className:"flex items-center gap-2",children:o.jsxs("div",{className:"relative",children:[o.jsx(di,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground",size:14}),o.jsx("input",{type:"text",placeholder:"Search documents...",value:t,onChange:l=>e(l.target.value),className:"h-9 pl-9 pr-4 rounded-lg border bg-background text-sm w-full sm:w-64 focus:outline-none focus:ring-2 focus:ring-primary/20"})]})})]}),o.jsx("div",{className:"flex items-center gap-2 overflow-x-auto pb-1px hide-scrollbar border-b",children:["all","legal","financial","property","notice"].map(l=>o.jsx("button",{onClick:()=>s(l),className:pe("px-4 py-2 text-sm font-medium border-b-2 transition-colors whitespace-nowrap capitalize",i===l?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground hover:border-muted-foreground/30"),children:l},l))}),o.jsx("div",{className:"bg-card border rounded-xl overflow-hidden divide-y",children:a.length>0?a.map(l=>o.jsxs("div",{className:"p-4 flex items-center justify-between hover:bg-muted/30 transition-colors group cursor-pointer",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-10 h-10 rounded-lg bg-slate-100 dark:bg-slate-800 flex items-center justify-center text-slate-500",children:o.jsx(W2,{size:20})}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-sm group-hover:text-primary transition-colors",children:l.title}),o.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[o.jsx("span",{className:"capitalize",children:l.category}),o.jsx("span",{children:""}),o.jsx("span",{children:l.date})]})]})]}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx(ak,{status:l.status}),o.jsx("div",{className:"flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:o.jsx("button",{className:"p-2 hover:bg-muted rounded-full transition-colors",title:"Download",children:o.jsx(Yr,{size:16,className:"text-muted-foreground hover:text-foreground"})})})]})]},l.id)):o.jsxs("div",{className:"p-12 flex flex-col items-center justify-center text-center text-muted-foreground",children:[o.jsx(W2,{size:48,className:"mb-4 opacity-20"}),o.jsx("p",{className:"font-medium",children:"No documents found"}),o.jsx("p",{className:"text-sm",children:"Try adjusting your search or filters."})]})})]})]})}const sne=({isActive:t})=>o.jsx("div",{className:pe("w-5 h-5 rounded-full border flex items-center justify-center transition-colors",t?"bg-primary border-primary text-primary-foreground":"bg-muted border-muted-foreground/30 text-muted-foreground"),children:o.jsx(Pn,{size:10})}),ane=[{id:"req_1",unitId:"unit_3b",tenantId:"tenant_1",propertyId:"prop_sunset",title:"Water leaking from ceiling",description:"There is a steady drip coming from the master bathroom ceiling fan vent. I have placed a bucket underneath.",category:"plumbing",priority:"emergency",status:"in_progress",allowEntryWithoutTenant:!0,preferredAccessTimes:"Anytime",petsPresent:!1,attachments:[{id:"media_1",type:"image",url:"https://placehold.co/600x400/png?text=Leaking+Ceiling",uploadedBy:"tenant",uploadedAt:Yh(new Date,4).toISOString()}],messages:[{id:"msg_1",requestId:"req_1",senderType:"tenant",message:"It seems to be getting worse with the rain.",createdAt:Yh(new Date,3).toISOString()},{id:"msg_2",requestId:"req_1",senderType:"manager",message:"We have dispatched a plumber (Mario Bros Plumbing). They should arrive within 2 hours.",createdAt:Yh(new Date,1).toISOString()}],createdAt:Yh(new Date,5).toISOString(),updatedAt:Yh(new Date,1).toISOString()},{id:"req_2",unitId:"unit_3b",tenantId:"tenant_1",propertyId:"prop_sunset",title:"Dishwasher not draining",description:"The dishwasher leaves water at the bottom after the cycle finishes.",category:"appliance",priority:"normal",status:"submitted",allowEntryWithoutTenant:!1,preferredAccessTimes:"Weekdays after 5pm/Weekends",petsPresent:!0,attachments:[],messages:[],createdAt:os(new Date,2).toISOString(),updatedAt:os(new Date,2).toISOString()},{id:"req_3",unitId:"unit_3b",tenantId:"tenant_1",propertyId:"prop_sunset",title:"Loose railing on balcony",description:"The handrail feels a bit wobbly on the left side.",category:"structural",priority:"high",status:"scheduled",allowEntryWithoutTenant:!0,preferredAccessTimes:"Anytime",petsPresent:!1,attachments:[],messages:[{id:"msg_3",requestId:"req_3",senderType:"system",message:"Maintenance scheduled for Jan 24, 2026 at 10:00 AM.",createdAt:os(new Date,1).toISOString()}],createdAt:os(new Date,5).toISOString(),updatedAt:os(new Date,1).toISOString()},{id:"req_4",unitId:"unit_3b",tenantId:"tenant_1",propertyId:"prop_sunset",title:"Replace HVAC filter",description:"Regular maintenance request.",category:"hvac",priority:"normal",status:"completed",allowEntryWithoutTenant:!0,preferredAccessTimes:"Anytime",petsPresent:!1,attachments:[],messages:[],createdAt:os(new Date,30).toISOString(),updatedAt:os(new Date,28).toISOString(),completedAt:os(new Date,28).toISOString()},{id:"req_5",unitId:"unit_3b",tenantId:"tenant_1",propertyId:"prop_sunset",title:"Fixed Front Door Lock",description:"The lock was sticking, vendor lubricated and adjusted strike plate.",category:"safety",priority:"high",status:"completed",allowEntryWithoutTenant:!1,preferredAccessTimes:"Weekends",petsPresent:!1,attachments:[],messages:[{id:"msg_99",requestId:"req_5",senderType:"manager",message:"This has been resolved. Let us know if it sticks again.",createdAt:os(new Date,10).toISOString()}],createdAt:os(new Date,12).toISOString(),updatedAt:os(new Date,10).toISOString(),completedAt:os(new Date,10).toISOString()}],Eb={plumbing:{label:"Plumbing",locations:["Bathroom","Kitchen","Laundry Room","Utility / Basement","Exterior","Other"],issues:["Leaking pipe","Clogged drain","Running toilet","No hot water","Low water pressure","Water backing up","Broken fixture","Other"]},electrical:{label:"Electrical",locations:["Living Area","Bedroom","Kitchen","Bathroom","Garage","Exterior","Other"],issues:["Power outage","Flickering lights","Outlet not working","Circuit breaker tripping","Exposed wiring","Appliance causing power issue","Other"]},hvac:{label:"HVAC",locations:["Entire Unit","Living Area","Bedroom","Utility / Closet","Other"],issues:["No heat","No air conditioning","Weak airflow","Strange noises","Thermostat issue","Unit not turning on","Other"]},appliance:{label:"Appliance",locations:["Kitchen","Laundry","Utility / Storage","Other"],issues:["Refrigerator","Stove / Oven","Dishwasher","Microwave","Washer","Dryer","Garbage disposal","Other"]},structural:{label:"Structural",locations:["Ceiling","Wall","Floor","Door / Window","Balcony / Patio","Exterior","Other"],issues:["Water damage","Cracks","Door wont close","Window leak","Ceiling damage","Flooring damage","Other"]},pest:{label:"Pest Control",locations:["Kitchen","Bathroom","Living Area","Bedroom","Entire Unit","Other"],issues:["Rodents","Ants","Roaches","Bed bugs","Wasps / Bees","Other insects","Other"]},safety:{label:"Safety",locations:["Smoke Detector","Carbon Monoxide Detector","Door / Lock","Window","Lighting","Other"],issues:["Alarm not working","Alarm chirping","Door lock failure","Broken window","Exposed hazard","Other"]},other:{label:"Other",locations:["Entire Unit","Specific Room","Exterior","Other"],issues:["General concern","Noise issue","Odor issue","Unknown issue","Other"]}},ok={category:null,locationContext:"",issueType:"",subIssueDetail:"",applianceProvidedByProperty:void 0,title:"",description:"",priority:"normal",attachments:[],allowEntryWithoutTenant:!1,preferredAccessTimes:"",petsPresent:!1},one=[{id:"plumbing",label:"Plumbing",icon:Ft},{id:"electrical",label:"Electrical",icon:bH},{id:"hvac",label:"HVAC",icon:mH},{id:"appliance",label:"Appliance",icon:Ft},{id:"structural",label:"Structural",icon:ys},{id:"pest",label:"Pest Control",icon:VV},{id:"safety",label:"Safety",icon:fH},{id:"other",label:"Other",icon:Zx}];function lne({isOpen:t,onClose:e,onSubmit:n}){const[r,i]=D.useState(1),[s,a]=D.useState(ok),l=7,c=v=>{a(_=>({..._,...v}))},u=()=>{r===1&&!s.category||r===2&&!s.locationContext||r===3&&!s.issueType||r===4&&(!s.description||s.description.length<5)||r<l&&i(v=>v+1)},d=()=>{r>1&&i(v=>v-1)},f=()=>{const v={...s};v.title||(v.title=`${Eb[s.category].label} - ${s.issueType}`),n(v),e(),setTimeout(()=>{i(1),a(ok)},300)},m=()=>r===1?!!s.category:r===2?!!s.locationContext&&(s.locationContext!=="Other"||s.subIssueDetail.length>0):r===3?!!s.issueType&&(s.issueType!=="Other"||s.subIssueDetail.length>0):r===4?s.description.length>5:!0,g=s.category?Eb[s.category]:null;return t?wa.createPortal(o.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:o.jsxs("div",{className:"bg-background w-full max-w-2xl rounded-2xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh] h-[800px]",children:[o.jsxs("div",{className:"px-6 py-4 border-b flex justify-between items-center bg-muted/30 flex-shrink-0",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"font-semibold text-lg",children:"New Maintenance Request"}),o.jsxs("div",{className:"flex flex-col gap-1 mt-1",children:[o.jsx("div",{className:"flex items-center gap-1.5",children:Array.from({length:l}).map((v,_)=>o.jsx("div",{className:pe("h-2 rounded-full transition-all duration-300",r===_+1?"w-8 bg-primary":"w-6",_+1<r?"bg-primary":"",_+1>r?"bg-muted-foreground/20":"")},_))}),o.jsxs("span",{className:"text-xs text-muted-foreground ml-0.5",children:["Step ",r," of ",l]})]})]}),o.jsx("button",{onClick:e,className:"p-2 hover:bg-muted rounded-full transition-colors",children:o.jsx(va,{size:20,className:"text-muted-foreground"})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto p-6 md:p-8",children:o.jsxs(cn,{mode:"wait",children:[r===1&&o.jsxs(Et.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("h3",{className:"text-xl font-semibold mb-2",children:"What's the issue?"}),o.jsx("p",{className:"text-muted-foreground",children:"Select the category that best describes the problem."})]}),o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:one.map(v=>{const _=v.icon,b=s.category===v.id;return o.jsxs("button",{onClick:()=>{c({category:v.id,locationContext:"",issueType:""})},className:pe("flex flex-col items-center justify-center gap-3 p-6 rounded-xl border-2 transition-all hover:border-primary/50 hover:bg-muted/50",b?"border-primary bg-primary/5 text-primary":"border-transparent bg-muted/30"),children:[o.jsx(_,{size:32,className:pe(b?"text-primary":"text-muted-foreground")}),o.jsx("span",{className:"font-medium text-center",children:v.label})]},v.id)})})]},"step1"),r===2&&g&&o.jsxs(Et.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Where is the problem?"}),o.jsxs("p",{className:"text-muted-foreground",children:["Select the location of the ",g.label.toLowerCase()," issue."]})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:g.locations.map(v=>o.jsxs("button",{onClick:()=>c({locationContext:v}),className:pe("flex items-center justify-between p-4 rounded-xl border transition-all text-left",s.locationContext===v?"border-primary bg-primary/5 text-primary ring-1 ring-primary":"hover:border-primary/50 hover:bg-muted/30"),children:[o.jsx("span",{className:"font-medium",children:v}),s.locationContext===v&&o.jsx(ai,{size:18})]},v))}),s.locationContext==="Other"&&o.jsxs("div",{className:"mt-4 animate-in fade-in slide-in-from-top-2",children:[o.jsx("label",{className:"text-sm font-medium mb-1.5 block",children:"Please specify location"}),o.jsx("input",{type:"text",autoFocus:!0,placeholder:"e.g. Guest Bedroom Closet",className:"w-full p-3 rounded-lg border bg-background focus:ring-2 focus:ring-primary focus:outline-none",value:s.subIssueDetail,onChange:v=>{}}),o.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"You can describe exact location in the details step."})]})]},"step2"),r===3&&g&&o.jsxs(Et.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsx("h3",{className:"text-xl font-semibold mb-2",children:"What specifically is wrong?"}),o.jsx("p",{className:"text-muted-foreground",children:"Narrowing this down helps us dispatch the right pro."})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:g.issues.map(v=>o.jsxs("button",{onClick:()=>c({issueType:v}),className:pe("flex items-center justify-between p-4 rounded-xl border transition-all text-left",s.issueType===v?"border-primary bg-primary/5 text-primary ring-1 ring-primary":"hover:border-primary/50 hover:bg-muted/30"),children:[o.jsx("span",{className:"font-medium",children:v}),s.issueType===v&&o.jsx(ai,{size:18})]},v))}),s.category==="appliance"&&o.jsxs("div",{className:"mt-6 p-4 bg-muted/30 rounded-xl border",children:[o.jsx("label",{className:"text-sm font-medium mb-3 block",children:"Is this appliance provided by the property?"}),o.jsxs("div",{className:"flex gap-4",children:[o.jsx("button",{onClick:()=>c({applianceProvidedByProperty:!0}),className:pe("flex-1 py-2 px-4 rounded-lg border text-sm font-medium transition-all",s.applianceProvidedByProperty===!0?"bg-primary text-primary-foreground border-primary":"hover:bg-background"),children:"Yes, it's yours"}),o.jsx("button",{onClick:()=>c({applianceProvidedByProperty:!1}),className:pe("flex-1 py-2 px-4 rounded-lg border text-sm font-medium transition-all",s.applianceProvidedByProperty===!1?"bg-primary text-primary-foreground border-primary":"hover:bg-background"),children:"No, I bought it"})]})]})]},"step3"),r===4&&o.jsxs(Et.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Details & Urgency"}),o.jsx("p",{className:"text-muted-foreground",children:"Describe the issue and how urgent it is."})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium",children:"Title"}),o.jsx("input",{type:"text",value:s.title,onChange:v=>c({title:v.target.value}),className:"w-full p-3 rounded-lg border bg-background focus:ring-2 focus:ring-primary focus:outline-none",placeholder:`${s.issueType||"Issue"} in ${s.locationContext||"Unit"}`}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"We auto-filled this, but feel free to change it."})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium",children:"Description (Required)"}),o.jsx("textarea",{value:s.description,onChange:v=>c({description:v.target.value}),className:"w-full p-3 h-32 rounded-lg border bg-background focus:ring-2 focus:ring-primary focus:outline-none resize-none",placeholder:"Please describe the issue in detail. When did it start? Is it constant or intermittent?",autoFocus:!0})]}),o.jsxs("div",{className:"space-y-2 pt-2",children:[o.jsx("label",{className:"text-sm font-medium",children:"Urgency"}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsx("button",{onClick:()=>c({priority:"normal"}),className:pe("flex items-center justify-center gap-2 p-3 rounded-lg border transition-all",s.priority==="normal"?"ring-2 ring-primary border-transparent bg-primary/5":"hover:bg-muted/50"),children:"Normal"}),o.jsxs("button",{onClick:()=>c({priority:"emergency"}),className:pe("flex items-center justify-center gap-2 p-3 rounded-lg border transition-all",s.priority==="emergency"?"ring-2 ring-rose-500 border-transparent bg-rose-50 dark:bg-rose-900/20 text-rose-600":"hover:bg-muted/50"),children:[o.jsx(ui,{size:16}),"Emergency"]})]}),s.priority==="emergency"&&o.jsxs("div",{className:"bg-rose-50 dark:bg-rose-900/20 text-rose-700 dark:text-rose-300 p-4 rounded-lg text-sm flex gap-3 items-start mt-2",children:[o.jsx(ui,{size:18,className:"shrink-0 mt-0.5"}),o.jsxs("p",{children:[o.jsx("strong",{children:"Emergency Policy:"})," Only select this for issues threatening life, safety, or property (e.g. flooding, fire hazard, no heat in winter)."]})]})]})]})]},"step4"),r===5&&o.jsxs(Et.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Photos & Video (optional)"}),o.jsx("p",{className:"text-muted-foreground",children:"Visuals help resolution speed significantly."})]}),o.jsxs("div",{className:"border-2 border-dashed border-muted-foreground/25 rounded-xl p-10 text-center space-y-4 hover:bg-muted/30 transition-colors cursor-pointer",children:[o.jsx("div",{className:"w-16 h-16 bg-muted rounded-full flex items-center justify-center mx-auto text-muted-foreground",children:o.jsx(RS,{size:32})}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium",children:"Click to upload or drag and drop"}),o.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Images or short videos (max 5MB)"})]})]}),o.jsx("div",{className:"space-y-2",children:s.attachments.length>0?o.jsx("div",{className:"text-sm font-medium",children:"Attached (Mock)"}):o.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 text-sm",children:[o.jsx(_L,{size:16}),o.jsx("p",{children:"No media added? It's highly recommended to add at least one photo."})]})})]},"step5"),r===6&&o.jsxs(Et.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Access Preferences"}),o.jsx("p",{className:"text-muted-foreground",children:"Permission to enter helps us fix things faster."})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{onClick:()=>c({allowEntryWithoutTenant:!s.allowEntryWithoutTenant}),className:pe("flex items-center justify-between p-4 rounded-xl border cursor-pointer transition-all",s.allowEntryWithoutTenant?"border-primary bg-primary/5 ring-1 ring-primary":"hover:border-primary/50"),children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:pe("p-2 rounded-lg bg-muted",s.allowEntryWithoutTenant&&"bg-primary text-primary-foreground"),children:o.jsx(Kx,{size:24})}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium",children:"Allow Entry if I'm not home"}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Use spare key / code"})]})]}),s.allowEntryWithoutTenant?o.jsx(ai,{size:20,className:"text-primary"}):o.jsx("div",{className:"w-5 h-5 rounded-full border border-muted-foreground/30"})]}),o.jsxs("div",{onClick:()=>c({petsPresent:!s.petsPresent}),className:pe("flex items-center justify-between p-4 rounded-xl border cursor-pointer transition-all",s.petsPresent?"border-amber-500 bg-amber-50 dark:bg-amber-900/10 ring-1 ring-amber-500":"hover:border-amber-500/50"),children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:pe("p-2 rounded-lg bg-muted",s.petsPresent&&"bg-amber-500 text-white"),children:o.jsx(PA,{size:24})}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium",children:"Pets are present"}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Caution required"})]})]}),s.petsPresent?o.jsx(ai,{size:20,className:"text-amber-500"}):o.jsx("div",{className:"w-5 h-5 rounded-full border border-muted-foreground/30"})]}),o.jsxs("div",{className:"space-y-2 pt-2",children:[o.jsx("label",{className:"text-sm font-medium",children:"Preferred Times"}),o.jsxs("div",{className:"relative",children:[o.jsx(Pn,{size:16,className:"absolute left-3 top-3 text-muted-foreground"}),o.jsx("input",{type:"text",value:s.preferredAccessTimes,onChange:v=>c({preferredAccessTimes:v.target.value}),placeholder:"e.g. Weekdays after 5pm, Weekends anytime",className:"w-full pl-10 p-3 rounded-lg border bg-background focus:ring-2 focus:ring-primary focus:outline-none"})]})]})]})]},"step6"),r===7&&o.jsxs(Et.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Review & Submit"}),o.jsx("p",{className:"text-muted-foreground",children:"Double check the details before sending."})]}),o.jsx("div",{className:"space-y-6 bg-muted/30 p-6 rounded-xl border",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-start justify-between border-b pb-4",children:[o.jsxs("div",{children:[o.jsxs("h4",{className:"font-semibold",children:[s.category?Eb[s.category].label:"General"," Issue"]}),o.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mt-1",children:[o.jsx("span",{children:s.locationContext}),o.jsx(da,{size:14}),o.jsx("span",{children:s.issueType})]})]}),o.jsx("button",{onClick:()=>i(1),className:"text-xs text-primary font-medium hover:underline",children:"Edit"})]}),o.jsxs("div",{className:"flex items-start justify-between border-b pb-4",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-sm uppercase tracking-wider text-muted-foreground mb-1",children:"Details"}),o.jsx("p",{className:"font-medium",children:s.title||"(No Title)"}),o.jsx("p",{className:"text-sm text-muted-foreground mt-1 line-clamp-3",children:s.description}),o.jsx("div",{className:pe("inline-flex items-center gap-1 mt-2 text-xs font-bold px-2 py-0.5 rounded uppercase tracking-wide",s.priority==="emergency"?"bg-rose-100 text-rose-700":"bg-slate-200 text-slate-700"),children:s.priority})]}),o.jsx("button",{onClick:()=>i(4),className:"text-xs text-primary font-medium hover:underline",children:"Edit"})]}),o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-sm uppercase tracking-wider text-muted-foreground mb-1",children:"Access"}),o.jsxs("div",{className:"space-y-1 text-sm",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[s.allowEntryWithoutTenant?o.jsx(ai,{size:14,className:"text-emerald-500"}):o.jsx(va,{size:14,className:"text-slate-400"}),o.jsx("span",{children:"Entry w/o tenant"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[s.petsPresent?o.jsx(PA,{size:14,className:"text-amber-500"}):o.jsx("div",{className:"w-3.5"}),o.jsx("span",{children:s.petsPresent?"Pets Present":"No Pets"})]}),s.preferredAccessTimes&&o.jsxs("div",{className:"text-muted-foreground italic mt-1",children:['"',s.preferredAccessTimes,'"']})]})]}),o.jsx("button",{onClick:()=>i(6),className:"text-xs text-primary font-medium hover:underline",children:"Edit"})]})]})})]},"step7")]})}),o.jsxs("div",{className:"p-6 border-t bg-muted/30 flex justify-between items-center flex-shrink-0",children:[o.jsx("div",{className:"flex gap-2",children:r>1&&o.jsx("button",{onClick:d,className:"px-4 py-2 hover:bg-muted rounded-lg font-medium text-sm transition-colors text-muted-foreground hover:text-foreground",children:"Back"})}),o.jsx("button",{onClick:r===l?f:u,disabled:!m(),className:pe("flex items-center gap-2 px-6 py-2 rounded-lg font-medium text-white transition-all shadow-sm",m()?"bg-primary hover:bg-primary/90 hover:scale-[1.02] active:scale-[0.98]":"bg-muted-foreground/30 cursor-not-allowed",r===l&&m()&&"bg-emerald-600 hover:bg-emerald-700"),children:r===l?o.jsxs(o.Fragment,{children:["Submit Request ",o.jsx(ai,{size:18})]}):o.jsxs(o.Fragment,{children:["Next Step ",o.jsx(da,{size:18})]})})]})]})}),document.body):null}function cne({isOpen:t,onClose:e,src:n,alt:r}){return D.useEffect(()=>{const i=s=>{s.key==="Escape"&&e()};return t&&(window.addEventListener("keydown",i),document.body.style.overflow="hidden"),()=>{window.removeEventListener("keydown",i),document.body.style.overflow=""}},[t,e]),t?wa.createPortal(o.jsx(cn,{children:t&&o.jsxs(Et.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"fixed inset-0 z-[9999] flex items-center justify-center bg-black/90 backdrop-blur-sm",onClick:e,children:[o.jsx("button",{onClick:e,className:"absolute top-4 right-4 p-2 text-white/70 hover:text-white bg-black/50 hover:bg-white/20 rounded-full transition-colors z-[110]",children:o.jsx(va,{size:24})}),o.jsx(Et.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",damping:25,stiffness:300},className:"relative max-w-[90vw] max-h-[90vh] overflow-hidden rounded-lg shadow-2xl",onClick:i=>i.stopPropagation(),children:o.jsx("img",{src:n,alt:r||"Lightbox image",className:"max-w-full max-h-[90vh] object-contain select-none"})})]})}),document.body):null}const une={submitted:"bg-slate-100 text-slate-700 border-slate-200 dark:bg-slate-800 dark:text-slate-300 dark:border-slate-700",reviewing:"bg-blue-50 text-blue-700 border-blue-200 dark:bg-blue-900/20 dark:text-blue-400 dark:border-blue-800",scheduled:"bg-purple-50 text-purple-700 border-purple-200 dark:bg-purple-900/20 dark:text-purple-400 dark:border-purple-800",in_progress:"bg-amber-50 text-amber-700 border-amber-200 dark:bg-amber-900/20 dark:text-amber-400 dark:border-amber-800",completed:"bg-emerald-50 text-emerald-700 border-emerald-200 dark:bg-emerald-900/20 dark:text-emerald-400 dark:border-emerald-800",closed:"bg-gray-100 text-gray-500 border-gray-200 dark:bg-gray-800 dark:text-gray-400 dark:border-gray-700"},dne={emergency:"bg-rose-100 text-rose-700 border-rose-200 dark:bg-rose-900/20 dark:text-rose-400 dark:border-rose-800",high:"bg-orange-100 text-orange-700 border-orange-200 dark:bg-orange-900/20 dark:text-orange-400 dark:border-orange-800",normal:"bg-slate-100 text-slate-700 border-slate-200 dark:bg-slate-800 dark:text-slate-300 dark:border-slate-700"},hne={plumbing:Ft,electrical:Ft,hvac:Ft,appliance:Ft,structural:ys,pest:Ft,safety:ao,other:Ft},BI=({status:t})=>o.jsx("span",{className:pe("px-2.5 py-0.5 rounded-full text-xs font-medium border capitalize",une[t]),children:t.replace("_"," ")}),VI=({priority:t})=>o.jsxs("span",{className:pe("px-2.5 py-0.5 rounded-full text-xs font-medium border capitalize flex items-center gap-1",dne[t]),children:[t==="emergency"&&o.jsx(ui,{size:10}),t]}),fne=({request:t,onClick:e})=>{const n=hne[t.category]||Ft,r=t.priority==="emergency";return o.jsxs("div",{onClick:e,className:pe("group relative p-4 bg-card border rounded-xl hover:border-primary/50 hover:shadow-md transition-all cursor-pointer overflow-hidden",r&&"border-rose-200 bg-rose-50/10 dark:border-rose-900/30"),children:[r&&o.jsx("div",{className:"absolute top-0 left-0 w-1 h-full bg-rose-500"}),o.jsxs("div",{className:"flex justify-between items-start mb-3 pl-2",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:pe("p-2 rounded-lg bg-slate-100 dark:bg-slate-800",r&&"bg-rose-100 dark:bg-rose-900/20 text-rose-600"),children:o.jsx(n,{size:20,className:"text-muted-foreground"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-foreground group-hover:text-primary transition-colors",children:t.title}),o.jsx("span",{className:"text-xs text-muted-foreground capitalize",children:t.category})]})]}),o.jsx(BI,{status:t.status})]}),o.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 pl-2 mb-4",children:t.description}),o.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground pl-2 border-t pt-3",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[t.priority!=="normal"&&o.jsx(VI,{priority:t.priority}),o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(Pn,{size:12}),"Updated ",vee(new Date(t.updatedAt))," ago"]})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[t.messages.length>0&&o.jsxs("span",{className:"flex items-center gap-1 bg-slate-100 dark:bg-slate-800 px-2 py-1 rounded",children:[o.jsx(Bs,{size:12})," ",t.messages.length]}),o.jsx(da,{size:14,className:"opacity-0 group-hover:opacity-100 transition-opacity -mr-1"})]})]})]})},pne=({request:t,onClose:e})=>{const[n,r]=D.useState(null);return o.jsx(cn,{children:t&&o.jsxs(o.Fragment,{children:[o.jsx(Et.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"fixed inset-0 z-40 bg-black/25 backdrop-blur-[1px]"}),o.jsxs(Et.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",damping:25,stiffness:200},className:"fixed inset-y-0 right-0 z-50 w-full max-w-2xl bg-background border-l shadow-2xl flex flex-col",children:[o.jsxs("div",{className:"px-6 py-4 border-b flex justify-between items-center flex-shrink-0 bg-slate-50/50 dark:bg-slate-900/50",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("button",{onClick:e,className:"p-2 -ml-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-full transition-colors",children:o.jsx(qx,{size:20,className:"text-muted-foreground"})}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("span",{className:"text-xs text-muted-foreground font-mono",children:["#",t.id]}),o.jsx("span",{className:"text-xs text-muted-foreground",children:""}),o.jsx("span",{className:"text-xs text-muted-foreground",children:Os(new Date(t.createdAt),"MMM d, yyyy")})]}),o.jsx("h2",{className:"font-semibold text-lg line-clamp-1",children:t.title})]})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(VI,{priority:t.priority}),o.jsx(BI,{status:t.status})]})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-8",children:[o.jsxs("section",{className:"space-y-3",children:[o.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wider text-muted-foreground",children:"Issue Details"}),o.jsx("div",{className:"p-4 bg-slate-50 dark:bg-slate-900 rounded-xl border text-sm leading-relaxed",children:t.description})]}),o.jsxs("section",{className:"space-y-3",children:[o.jsxs("h3",{className:"text-sm font-semibold uppercase tracking-wider text-muted-foreground flex items-center justify-between",children:["Attachments",o.jsx("span",{className:"text-xs font-normal bg-slate-100 dark:bg-slate-800 px-2 py-0.5 rounded text-muted-foreground",children:t.attachments.length})]}),t.attachments.length>0?o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:t.attachments.map(i=>o.jsx("div",{onClick:()=>i.type==="image"&&r(i.url),className:"aspect-square bg-slate-100 dark:bg-slate-800 rounded-lg border overflow-hidden relative group cursor-pointer",children:i.type==="image"?o.jsx("img",{src:i.url,alt:"Attachment",className:"w-full h-full object-cover transition-transform group-hover:scale-105"}):o.jsx("div",{className:"w-full h-full flex items-center justify-center text-muted-foreground",children:"Video"})},i.id))}):o.jsxs("div",{className:"p-8 border-2 border-dashed rounded-xl flex flex-col items-center justify-center text-muted-foreground gap-2 bg-slate-50/50",children:[o.jsx(_L,{size:24,className:"opacity-50"}),o.jsx("span",{className:"text-sm",children:"No photos attached"})]})]}),o.jsxs("section",{className:"space-y-3",children:[o.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wider text-muted-foreground",children:"Access & Logistics"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"p-4 rounded-xl border flex items-center gap-3",children:[o.jsx("div",{className:pe("p-2 rounded-full",t.allowEntryWithoutTenant?"bg-emerald-100 text-emerald-600":"bg-slate-100 text-slate-500"),children:t.allowEntryWithoutTenant?o.jsx(ai,{size:16}):o.jsx(va,{size:16})}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-medium",children:"Entry Permission"}),o.jsx("div",{className:"text-xs text-muted-foreground",children:t.allowEntryWithoutTenant?"Granted (Key/Code)":"Tenant must be present"})]})]}),o.jsxs("div",{className:"p-4 rounded-xl border flex items-center gap-3",children:[o.jsx("div",{className:pe("p-2 rounded-full bg-slate-100 text-slate-500"),children:o.jsx(Pn,{size:16})}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-medium",children:"Timing"}),o.jsx("div",{className:"text-xs text-muted-foreground",children:t.preferredAccessTimes||"Anytime"})]})]})]})]}),o.jsxs("section",{className:"space-y-4 pt-4 border-t",children:[o.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wider text-muted-foreground",children:"Activity & Messages"}),o.jsx("div",{className:"space-y-6",children:t.messages.map(i=>o.jsxs("div",{className:pe("flex gap-3",i.senderType==="tenant"?"flex-row-reverse":"flex-row"),children:[o.jsx("div",{className:pe("w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold shrink-0",i.senderType==="tenant"?"bg-primary text-primary-foreground":i.senderType==="system"?"bg-slate-200 text-slate-600":"bg-amber-100 text-amber-700"),children:i.senderType==="tenant"?"ME":i.senderType==="system"?"SYS":"MGR"}),o.jsxs("div",{className:pe("max-w-[80%] rounded-2xl px-4 py-3 text-sm",i.senderType==="tenant"?"bg-primary text-primary-foreground rounded-tr-none":i.senderType==="system"?"bg-slate-100 text-slate-600 w-full text-center italic text-xs rounded-xl":"bg-white border rounded-tl-none shadow-sm"),children:[i.message,o.jsx("div",{className:pe("text-[10px] mt-1 opacity-70",i.senderType==="system"&&"justify-center flex"),children:Os(new Date(i.createdAt),"h:mm a")})]})]},i.id))})]})]}),o.jsx("div",{className:"p-4 border-t bg-slate-50 dark:bg-slate-900/50 flex-shrink-0",children:o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{className:"p-2.5 text-muted-foreground hover:bg-slate-200 dark:hover:bg-slate-800 rounded-lg transition-colors",children:o.jsx(RS,{size:20})}),o.jsx("input",{type:"text",placeholder:"Type a message...",className:"flex-1 bg-background border rounded-lg px-4 text-sm focus:outline-none focus:ring-2 focus:ring-primary"}),o.jsx("button",{className:"p-2.5 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors shadow-sm",children:o.jsx(PS,{size:18})})]})})]}),o.jsx(cne,{isOpen:!!n,onClose:()=>r(null),src:n||""})]})})};function mne(){const{toast:t}=Fc(),[e,n]=D.useState(ane),[r,i]=D.useState(null),[s,a]=D.useState(!1),[l,c]=D.useState("active"),[u,d]=D.useState(""),f=D.useMemo(()=>e.filter(v=>l==="active"?!["completed","closed"].includes(v.status):l==="closed"?["completed","closed"].includes(v.status):!0).filter(v=>v.title.toLowerCase().includes(u.toLowerCase())).sort((v,_)=>new Date(_.createdAt).getTime()-new Date(v.createdAt).getTime()),[e,l,u]),m=e.filter(v=>!["completed","closed"].includes(v.status)).length,g=v=>{if(!v.category)return;const _={id:`new_${Date.now()}`,unitId:"unit_3b",tenantId:"tenant_1",propertyId:"prop_sunset",title:v.title,description:v.description,category:v.category,priority:v.priority,status:"submitted",allowEntryWithoutTenant:v.allowEntryWithoutTenant,preferredAccessTimes:v.preferredAccessTimes,petsPresent:v.petsPresent,locationContext:v.locationContext,issueType:v.issueType,subIssueDetail:v.subIssueDetail,applianceProvidedByProperty:v.applianceProvidedByProperty,attachments:[],messages:[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};n(b=>[_,...b]),t({type:"success",title:"Request Submitted",message:"Your maintenance request has been submitted successfully."})};return o.jsxs("div",{className:"max-w-5xl mx-auto space-y-8 animate-in fade-in duration-500 pb-20",children:[o.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6 pt-4",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mb-1",children:[o.jsx(ys,{size:14}),o.jsx("span",{children:"Unit 3B  Sunset Apartments"})]}),o.jsx("h1",{className:"text-3xl font-bold tracking-tight text-foreground",children:"Maintenance"}),o.jsx("p",{className:"text-muted-foreground mt-1",children:"Submit requests, track status, and chat with management."})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("button",{className:"hidden md:flex items-center text-rose-600 bg-rose-50 hover:bg-rose-100 px-4 py-2 rounded-lg text-sm font-medium transition-colors",children:[o.jsx(ui,{size:16,className:"mr-2"})," Emergency Info"]}),o.jsxs("button",{onClick:()=>a(!0),className:"flex items-center gap-2 bg-primary text-primary-foreground px-5 py-2.5 rounded-xl font-medium shadow-sm hover:bg-primary/90 transition-all hover:scale-[1.02]",children:[o.jsx(Ws,{size:18,strokeWidth:2.5}),"Submit Request"]})]})]}),e.length===0?o.jsxs("div",{className:"py-20 text-center space-y-4 bg-slate-50 dark:bg-slate-900/50 rounded-2xl border-2 border-dashed",children:[o.jsx("div",{className:"w-16 h-16 bg-white dark:bg-slate-800 rounded-full flex items-center justify-center mx-auto shadow-sm",children:o.jsx(ua,{size:32,className:"text-emerald-500"})}),o.jsxs("div",{className:"max-w-sm mx-auto",children:[o.jsx("h3",{className:"text-lg font-semibold",children:"No issues currently"}),o.jsx("p",{className:"text-muted-foreground",children:"You don't have any active maintenance requests. Everything looks good!"})]}),o.jsx("button",{onClick:()=>a(!0),className:"text-primary font-medium hover:underline",children:"Submit a new request"})]}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-4",children:[o.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-800 p-1 rounded-lg self-start",children:[o.jsxs("button",{onClick:()=>c("active"),className:pe("px-4 py-1.5 rounded-md text-sm font-medium transition-all",l==="active"?"bg-white dark:bg-slate-700 shadow-sm text-foreground":"text-muted-foreground hover:text-foreground"),children:["Active (",m,")"]}),o.jsx("button",{onClick:()=>c("closed"),className:pe("px-4 py-1.5 rounded-md text-sm font-medium transition-all",l==="closed"?"bg-white dark:bg-slate-700 shadow-sm text-foreground":"text-muted-foreground hover:text-foreground"),children:"History"}),o.jsx("button",{onClick:()=>c("all"),className:pe("px-4 py-1.5 rounded-md text-sm font-medium transition-all",l==="all"?"bg-white dark:bg-slate-700 shadow-sm text-foreground":"text-muted-foreground hover:text-foreground"),children:"All"})]}),o.jsxs("div",{className:"relative",children:[o.jsx(di,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground"}),o.jsx("input",{type:"text",placeholder:"Search requests...",value:u,onChange:v=>d(v.target.value),className:"pl-9 pr-4 py-2 bg-card border rounded-lg text-sm w-full sm:w-64 focus:ring-2 focus:ring-primary focus:outline-none"})]})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-4",children:f.map(v=>o.jsx(fne,{request:v,onClick:()=>i(v)},v.id))}),f.length===0&&o.jsx("div",{className:"py-12 text-center text-muted-foreground bg-slate-50 dark:bg-slate-900/30 rounded-xl border-2 border-dashed",children:"No requests found matching your filters."})]}),o.jsx(pne,{request:r,onClose:()=>i(null)}),o.jsx(lne,{isOpen:s,onClose:()=>a(!1),onSubmit:g})]})}const gne=o.jsxs(o.Fragment,{children:[o.jsx(Ot,{index:!0,element:o.jsx(ix,{to:"home",replace:!0})}),o.jsx(Ot,{path:"home",element:o.jsx(ene,{})}),o.jsx(Ot,{path:"payments",element:o.jsx(rne,{})}),o.jsx(Ot,{path:"documents",element:o.jsx(ine,{})}),o.jsx(Ot,{path:"maintenance",element:o.jsx(mne,{})})]});function xne(){const t=qr(),[e]=KF(),n=e.get("invite"),[r,i]=D.useState(!1),[s,a]=D.useState(""),[l,c]=D.useState(""),[u,d]=D.useState(!1),f=m=>{m.preventDefault(),i(!0),setTimeout(()=>{i(!1),t("/")},1200)};return o.jsxs("div",{className:"min-h-screen w-full flex items-center justify-center bg-slate-50 dark:bg-slate-950 p-4 relative overflow-hidden font-sans",children:[o.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none",children:[o.jsx("div",{className:"absolute top-[-10%] right-[-5%] w-[500px] h-[500px] rounded-full bg-primary/5 blur-3xl opacity-50"}),o.jsx("div",{className:"absolute bottom-[-10%] left-[-10%] w-[600px] h-[600px] rounded-full bg-blue-500/5 blur-3xl opacity-50"})]}),o.jsxs(Et.div,{initial:{opacity:0,y:15},animate:{opacity:1,y:0},transition:{duration:.4,ease:"easeOut"},className:"w-full max-w-[420px] relative z-10 space-y-6",children:[o.jsxs("div",{className:"text-center space-y-3",children:[o.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-xl bg-primary shadow-lg shadow-primary/20 mb-2",children:o.jsx(fo,{className:"text-white",size:24})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold tracking-tight text-foreground",children:"Sign in to Rentaru"}),o.jsx("p",{className:"text-muted-foreground text-sm max-w-sm mx-auto mt-2",children:"Access your properties, payments, leases, and maintenance requests."})]})]}),o.jsxs("div",{className:"bg-card/80 border border-border/50 shadow-xl shadow-slate-200/50 dark:shadow-slate-900/50 rounded-2xl overflow-hidden backdrop-blur-sm",children:[n&&o.jsx("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 border-b border-indigo-100 dark:border-indigo-900/30 px-6 py-3 text-center",children:o.jsx("p",{className:"text-xs font-semibold text-indigo-700 dark:text-indigo-300",children:"Youve been invited to join Skyline Properties"})}),o.jsxs("div",{className:"p-6 md:p-8 space-y-6",children:[o.jsxs("div",{className:"space-y-3",children:[o.jsx("div",{className:"flex items-center justify-between gap-2 text-xs font-medium text-muted-foreground uppercase tracking-wider mb-2",children:"Fastest way to sign in"}),o.jsxs("button",{type:"button",className:"w-full flex items-center justify-center gap-3 p-2.5 rounded-lg bg-foreground text-background hover:opacity-90 transition-all font-medium border border-transparent shadow-sm",children:[o.jsx(yL,{size:18})," Continue with Passkey"]}),o.jsxs("button",{type:"button",className:"w-full flex items-center justify-center gap-3 p-2.5 rounded-lg border bg-background hover:bg-slate-50 dark:hover:bg-slate-900 transition-colors text-foreground/80 font-medium",children:[o.jsx(YV,{size:18})," Continue with Google"]})]}),o.jsxs("div",{className:"relative py-2",children:[o.jsx("div",{className:"absolute inset-0 flex items-center",children:o.jsx("span",{className:"w-full border-t border-border/60"})}),o.jsx("div",{className:"relative flex justify-center text-[10px] font-bold uppercase tracking-widest",children:o.jsx("span",{className:"bg-card px-3 text-muted-foreground/60",children:"Or continue with email"})})]}),o.jsxs("form",{onSubmit:f,className:"space-y-5",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-1.5",children:[o.jsx("label",{className:"text-xs font-semibold text-foreground/70 uppercase tracking-wider ml-0.5",children:"Email"}),o.jsxs("div",{className:"relative group",children:[o.jsx(xa,{className:"absolute left-3 top-2.5 text-muted-foreground/80 group-focus-within:text-primary transition-colors duration-200",size:18}),o.jsx("input",{type:"email",value:s,onChange:m=>a(m.target.value),placeholder:"email@company.com",autoFocus:!0,className:"w-full bg-background border border-input rounded-lg py-2 pl-10 pr-3 text-sm placeholder:text-muted-foreground/50 focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all shadow-sm",required:!0})]})]}),o.jsxs("div",{className:"space-y-1.5",children:[o.jsxs("div",{className:"flex items-center justify-between ml-0.5",children:[o.jsx("label",{className:"text-xs font-semibold text-foreground/70 uppercase tracking-wider",children:"Password"}),o.jsx("a",{href:"#",className:"text-xs text-primary hover:text-primary/80 transition-colors font-medium",children:"Forgot your password?"})]}),o.jsxs("div",{className:"relative group",children:[o.jsx(SL,{className:"absolute left-3 top-2.5 text-muted-foreground/80 group-focus-within:text-primary transition-colors duration-200",size:18}),o.jsx("input",{type:u?"text":"password",value:l,onChange:m=>c(m.target.value),className:"w-full bg-background border border-input rounded-lg py-2 pl-10 pr-10 text-sm placeholder:text-muted-foreground/50 focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all shadow-sm",required:!0}),o.jsx("button",{type:"button",onClick:()=>d(!u),className:"absolute right-3 top-2.5 text-muted-foreground hover:text-foreground transition-colors",children:u?o.jsx(ZV,{size:18}):o.jsx(vL,{size:18})})]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("button",{type:"submit",disabled:r,className:pe("w-full flex items-center justify-center gap-2 bg-primary text-primary-foreground font-semibold py-2.5 rounded-lg hover:bg-primary/90 transition-all shadow-md shadow-primary/20",r&&"opacity-80 cursor-wait"),children:r?o.jsx("span",{className:"flex items-center gap-2",children:"Signing you in..."}):o.jsxs(o.Fragment,{children:["Sign In ",o.jsx(so,{size:18})]})}),o.jsxs("div",{className:"flex items-center justify-center gap-1.5 text-[10px] text-muted-foreground opacity-80",children:[o.jsx(Qx,{size:12})," Secure sign-in"]})]})]})]})]}),o.jsx("div",{className:"text-center",children:n?o.jsxs("p",{className:"text-sm text-muted-foreground",children:["Have an invite? ",o.jsx("a",{href:"#",className:"font-medium text-primary hover:underline",children:"Get started"})]}):o.jsxs("p",{className:"text-sm text-muted-foreground",children:["New to Rentaru? ",o.jsx("a",{href:"#",className:"font-medium text-primary hover:underline",children:"Create an account"})]})})]})]})}function vne(){const t=qr(),n=ho().pathname.startsWith("/tenant"),r=()=>{t(n?"/app":"/tenant")};return o.jsx("div",{className:"fixed bottom-4 right-4 z-[9999]",children:o.jsxs("button",{onClick:r,className:"flex items-center gap-2 px-4 py-2 bg-slate-900 text-white rounded-full shadow-lg border border-slate-700 hover:bg-slate-800 transition-all font-mono text-xs font-bold uppercase tracking-wider opacity-50 hover:opacity-100",children:[o.jsx(dH,{size:14}),n?"Switch to App":"Switch to Tenant"]})})}function yne(){return o.jsx(wG,{children:o.jsx(Xw,{children:gne})})}function bne(){const t=ho(),e=n=>n.includes("/settings")?"settings":n;return o.jsx(xG,{children:o.jsx(cn,{mode:"wait",children:o.jsx(Xw,{location:t,children:Jte},e(t.pathname))})})}function _ne(){return o.jsx(WF,{basename:"/rentaru/",children:o.jsxs(eG,{children:[o.jsx(vne,{}),o.jsxs(Xw,{children:[o.jsx(Ot,{path:"/login",element:o.jsx(xne,{})}),o.jsx(Ot,{path:"/app/*",element:o.jsx(bne,{})}),o.jsx(Ot,{path:"/tenant/*",element:o.jsx(yne,{})}),o.jsx(Ot,{path:"/",element:o.jsx(ix,{to:"/app",replace:!0})})]})]})})}Nb.createRoot(document.getElementById("root")).render(o.jsx(yk.StrictMode,{children:o.jsx(_ne,{})}));
